{"version":3,"sources":["../src/index.ts","../src/lib/rootElement/scriptTagId.ts","../src/lib/rootElement/manualElement.ts","../src/lib/rootElement/index.ts"],"sourcesContent":["export { rootElement } from '@/lib/rootElement'\n","export const scriptTagId = ({\n  currentScript,\n}: {\n  currentScript: HTMLScriptElement\n}) => {\n  const url = new URL(currentScript.src)\n  const scriptTagIdMatch = url.pathname.match(/^\\/script-tags\\/(.+)$/)\n\n  if (!scriptTagIdMatch) {\n    return null\n  }\n\n  return scriptTagIdMatch[1] ?? null\n}\n","import { scriptTagId as getScriptTagId } from './scriptTagId'\n\nexport const manualElement = ({\n  currentScript,\n}: {\n  currentScript: HTMLScriptElement\n}) => {\n  const scriptTagId = getScriptTagId({ currentScript })\n\n  if (!scriptTagId) {\n    return null\n  }\n\n  return document.querySelector(`.superinterface-root[data-script-tag-id=\"${scriptTagId}\"]`)\n}\n","import { manualElement as getManualElement } from './manualElement'\nimport { scriptTagId as getScriptTagId } from './scriptTagId'\n\nconst appendWithStyles = ({\n  appendElement,\n  currentScript,\n}: {\n  appendElement: ({ element }: { element: HTMLElement }) => void\n  currentScript: HTMLScriptElement | null\n}) => {\n  const style = document.createElement('style')\n\n  style.innerHTML = `.superinterface-root .radix-themes {\n   display: flex;\n   flex-grow: 1;\n   min-height: inherit;\n   z-index: auto;\n }\n\n .superinterface-root {\n   display: flex;\n   flex-grow: 1;\n   max-height: 100dvh;\n }`\n\n  document.head.appendChild(style)\n\n  const element = document.createElement('div')\n  element.classList.add('superinterface-root')\n\n  if (currentScript) {\n    const scriptTagId = getScriptTagId({ currentScript })\n\n    if (scriptTagId) {\n      element.dataset.scriptTagId = scriptTagId\n    }\n  }\n\n  appendElement({ element })\n  return element\n}\n\nconst appendToBody = ({\n  currentScript,\n}: {\n  currentScript?: HTMLScriptElement | null\n} = {}) => (\n  appendWithStyles({\n    appendElement: ({ element }) => document.body.appendChild(element),\n    currentScript: currentScript ?? null,\n  })\n)\n\nexport const rootElement = ({\n  currentScript,\n}: {\n  currentScript: HTMLOrSVGScriptElement | null\n}) => {\n  if (currentScript instanceof HTMLScriptElement) {\n    const manualElement = getManualElement({ currentScript })\n\n    if (manualElement) {\n      return manualElement\n    }\n\n    const isInBody = document.body.contains(currentScript)\n\n    if (!isInBody) {\n      return appendToBody({ currentScript })\n    }\n\n    const parentNode = currentScript.parentNode\n\n    if (!parentNode) {\n      return appendToBody({ currentScript })\n    }\n\n    return appendWithStyles({\n      appendElement: ({ element }) => parentNode.insertBefore(element, currentScript.nextSibling),\n      currentScript,\n    })\n  }\n\n  return appendToBody()\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,IAAM,cAAc,CAAC;AAAA,EAC1B;AACF,MAEM;AACJ,QAAM,MAAM,IAAI,IAAI,cAAc,GAAG;AACrC,QAAM,mBAAmB,IAAI,SAAS,MAAM,uBAAuB;AAEnE,MAAI,CAAC,kBAAkB;AACrB,WAAO;AAAA,EACT;AAEA,SAAO,iBAAiB,CAAC,KAAK;AAChC;;;ACXO,IAAM,gBAAgB,CAAC;AAAA,EAC5B;AACF,MAEM;AACJ,QAAMA,eAAc,YAAe,EAAE,cAAc,CAAC;AAEpD,MAAI,CAACA,cAAa;AAChB,WAAO;AAAA,EACT;AAEA,SAAO,SAAS,cAAc,4CAA4CA,YAAW,IAAI;AAC3F;;;ACXA,IAAM,mBAAmB,CAAC;AAAA,EACxB;AAAA,EACA;AACF,MAGM;AACJ,QAAM,QAAQ,SAAS,cAAc,OAAO;AAE5C,QAAM,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAalB,WAAS,KAAK,YAAY,KAAK;AAE/B,QAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,UAAQ,UAAU,IAAI,qBAAqB;AAE3C,MAAI,eAAe;AACjB,UAAMC,eAAc,YAAe,EAAE,cAAc,CAAC;AAEpD,QAAIA,cAAa;AACf,cAAQ,QAAQ,cAAcA;AAAA,IAChC;AAAA,EACF;AAEA,gBAAc,EAAE,QAAQ,CAAC;AACzB,SAAO;AACT;AAEA,IAAM,eAAe,CAAC;AAAA,EACpB;AACF,IAEI,CAAC,MACH,iBAAiB;AAAA,EACf,eAAe,CAAC,EAAE,QAAQ,MAAM,SAAS,KAAK,YAAY,OAAO;AAAA,EACjE,eAAe,iBAAiB;AAClC,CAAC;AAGI,IAAM,cAAc,CAAC;AAAA,EAC1B;AACF,MAEM;AACJ,MAAI,yBAAyB,mBAAmB;AAC9C,UAAMC,iBAAgB,cAAiB,EAAE,cAAc,CAAC;AAExD,QAAIA,gBAAe;AACjB,aAAOA;AAAA,IACT;AAEA,UAAM,WAAW,SAAS,KAAK,SAAS,aAAa;AAErD,QAAI,CAAC,UAAU;AACb,aAAO,aAAa,EAAE,cAAc,CAAC;AAAA,IACvC;AAEA,UAAM,aAAa,cAAc;AAEjC,QAAI,CAAC,YAAY;AACf,aAAO,aAAa,EAAE,cAAc,CAAC;AAAA,IACvC;AAEA,WAAO,iBAAiB;AAAA,MACtB,eAAe,CAAC,EAAE,QAAQ,MAAM,WAAW,aAAa,SAAS,cAAc,WAAW;AAAA,MAC1F;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO,aAAa;AACtB;","names":["scriptTagId","scriptTagId","manualElement"]}