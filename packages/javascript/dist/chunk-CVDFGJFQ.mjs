import{B as mi,C as F,D,E as gi,F as de,G as wn,H as yi,I as vn,J as bi,K as Tn,L as T,M as ht,O as Pt,P as ct,Q as U,R as Mt,S as lt,T as S,U as L,V as G,W as Et,X as ee,Y as wi,Z as xn,_ as $n,a as Ma,b as g,ba as kn,c as le,ca as vi,d as bt,da as Ti,e as ui,ea as ue,f as Ut,g as E,h as pi,ha as Pe,i as k,ia as Sn,j as Gt,ja as Wt,k as gn,ka as Pn,l as fi,m as wt,n as nt,na as Vt,o as yn,oa as It,p as bn,pa as Ee,q as J,qa as En,r as v,t as St,u as z,v as u,w as R}from"./chunk-VZ4W2FJS.mjs";import{c as La}from"./chunk-VAX7AB37.mjs";var An=["top","right","bottom","left"];var vt=Math.min,Y=Math.max,fe=Math.round,me=Math.floor,ft=s=>({x:s,y:s}),Va={left:"right",right:"left",bottom:"top",top:"bottom"},Ia={start:"end",end:"start"};function Ce(s,t,e){return Y(s,vt(t,e))}function Tt(s,t){return typeof s=="function"?s(t):s}function xt(s){return s.split("-")[0]}function Bt(s){return s.split("-")[1]}function Re(s){return s==="x"?"y":"x"}function qe(s){return s==="y"?"height":"width"}function At(s){return["top","bottom"].includes(xt(s))?"y":"x"}function Oe(s){return Re(At(s))}function Cn(s,t,e){e===void 0&&(e=!1);let i=Bt(s),n=Oe(s),r=qe(n),a=n==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(a=pe(a)),[a,pe(a)]}function Rn(s){let t=pe(s);return[Ae(s),t,Ae(t)]}function Ae(s){return s.replace(/start|end/g,t=>Ia[t])}function Na(s,t,e){let i=["left","right"],n=["right","left"],r=["top","bottom"],a=["bottom","top"];switch(s){case"top":case"bottom":return e?t?n:i:t?i:n;case"left":case"right":return t?r:a;default:return[]}}function qn(s,t,e,i){let n=Bt(s),r=Na(xt(s),e==="start",i);return n&&(r=r.map(a=>a+"-"+n),t&&(r=r.concat(r.map(Ae)))),r}function pe(s){return s.replace(/left|right|bottom|top/g,t=>Va[t])}function Fa(s){return{top:0,right:0,bottom:0,left:0,...s}}function xi(s){return typeof s!="number"?Fa(s):{top:s,right:s,bottom:s,left:s}}function Kt(s){let{x:t,y:e,width:i,height:n}=s;return{width:i,height:n,top:e,left:t,right:t+i,bottom:e+n,x:t,y:e}}function On(s,t,e){let{reference:i,floating:n}=s,r=At(t),a=Oe(t),o=qe(a),h=xt(t),c=r==="y",d=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2,f=i[o]/2-n[o]/2,p;switch(h){case"top":p={x:d,y:i.y-n.height};break;case"bottom":p={x:d,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:l};break;case"left":p={x:i.x-n.width,y:l};break;default:p={x:i.x,y:i.y}}switch(Bt(t)){case"start":p[a]-=f*(e&&c?-1:1);break;case"end":p[a]+=f*(e&&c?-1:1);break}return p}var Mn=async(s,t,e)=>{let{placement:i="bottom",strategy:n="absolute",middleware:r=[],platform:a}=e,o=r.filter(Boolean),h=await(a.isRTL==null?void 0:a.isRTL(t)),c=await a.getElementRects({reference:s,floating:t,strategy:n}),{x:d,y:l}=On(c,i,h),f=i,p={},m=0;for(let b=0;b<o.length;b++){let{name:w,fn:$}=o[b],{x:C,y:A,data:M,reset:O}=await $({x:d,y:l,initialPlacement:i,placement:f,strategy:n,middlewareData:p,rects:c,platform:a,elements:{reference:s,floating:t}});d=C??d,l=A??l,p={...p,[w]:{...p[w],...M}},O&&m<=50&&(m++,typeof O=="object"&&(O.placement&&(f=O.placement),O.rects&&(c=O.rects===!0?await a.getElementRects({reference:s,floating:t,strategy:n}):O.rects),{x:d,y:l}=On(c,f,h)),b=-1)}return{x:d,y:l,placement:f,strategy:n,middlewareData:p}};async function ie(s,t){var e;t===void 0&&(t={});let{x:i,y:n,platform:r,rects:a,elements:o,strategy:h}=s,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:l="floating",altBoundary:f=!1,padding:p=0}=Tt(t,s),m=xi(p),w=o[f?l==="floating"?"reference":"floating":l],$=Kt(await r.getClippingRect({element:(e=await(r.isElement==null?void 0:r.isElement(w)))==null||e?w:w.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:h})),C=l==="floating"?{x:i,y:n,width:a.floating.width,height:a.floating.height}:a.reference,A=await(r.getOffsetParent==null?void 0:r.getOffsetParent(o.floating)),M=await(r.isElement==null?void 0:r.isElement(A))?await(r.getScale==null?void 0:r.getScale(A))||{x:1,y:1}:{x:1,y:1},O=Kt(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:C,offsetParent:A,strategy:h}):C);return{top:($.top-O.top+m.top)/M.y,bottom:(O.bottom-$.bottom+m.bottom)/M.y,left:($.left-O.left+m.left)/M.x,right:(O.right-$.right+m.right)/M.x}}var Vn=s=>({name:"arrow",options:s,async fn(t){let{x:e,y:i,placement:n,rects:r,platform:a,elements:o,middlewareData:h}=t,{element:c,padding:d=0}=Tt(s,t)||{};if(c==null)return{};let l=xi(d),f={x:e,y:i},p=Oe(n),m=qe(p),b=await a.getDimensions(c),w=p==="y",$=w?"top":"left",C=w?"bottom":"right",A=w?"clientHeight":"clientWidth",M=r.reference[m]+r.reference[p]-f[p]-r.floating[m],O=f[p]-r.reference[p],Q=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c)),H=Q?Q[A]:0;(!H||!await(a.isElement==null?void 0:a.isElement(Q)))&&(H=o.floating[A]||r.floating[m]);let et=M/2-O/2,it=H/2-b[m]/2-1,st=vt(l[$],it),X=vt(l[C],it),W=st,pt=H-b[m]-X,_=H/2-b[m]/2+et,$t=Ce(W,_,pt),kt=!h.arrow&&Bt(n)!=null&&_!==$t&&r.reference[m]/2-(_<W?st:X)-b[m]/2<0,yt=kt?_<W?_-W:_-pt:0;return{[p]:f[p]+yt,data:{[p]:$t,centerOffset:_-$t-yt,...kt&&{alignmentOffset:yt}},reset:kt}}});var In=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var e,i;let{placement:n,middlewareData:r,rects:a,initialPlacement:o,platform:h,elements:c}=t,{mainAxis:d=!0,crossAxis:l=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:b=!0,...w}=Tt(s,t);if((e=r.arrow)!=null&&e.alignmentOffset)return{};let $=xt(n),C=At(o),A=xt(o)===o,M=await(h.isRTL==null?void 0:h.isRTL(c.floating)),O=f||(A||!b?[pe(o)]:Rn(o)),Q=m!=="none";!f&&Q&&O.push(...qn(o,b,m,M));let H=[o,...O],et=await ie(t,w),it=[],st=((i=r.flip)==null?void 0:i.overflows)||[];if(d&&it.push(et[$]),l){let _=Cn(n,a,M);it.push(et[_[0]],et[_[1]])}if(st=[...st,{placement:n,overflows:it}],!it.every(_=>_<=0)){var X,W;let _=(((X=r.flip)==null?void 0:X.index)||0)+1,$t=H[_];if($t)return{data:{index:_,overflows:st},reset:{placement:$t}};let kt=(W=st.filter(yt=>yt.overflows[0]<=0).sort((yt,Dt)=>yt.overflows[1]-Dt.overflows[1])[0])==null?void 0:W.placement;if(!kt)switch(p){case"bestFit":{var pt;let yt=(pt=st.filter(Dt=>{if(Q){let Lt=At(Dt.placement);return Lt===C||Lt==="y"}return!0}).map(Dt=>[Dt.placement,Dt.overflows.filter(Lt=>Lt>0).reduce((Lt,Da)=>Lt+Da,0)]).sort((Dt,Lt)=>Dt[1]-Lt[1])[0])==null?void 0:pt[0];yt&&(kt=yt);break}case"initialPlacement":kt=o;break}if(n!==kt)return{reset:{placement:kt}}}return{}}}};function Dn(s,t){return{top:s.top-t.height,right:s.right-t.width,bottom:s.bottom-t.height,left:s.left-t.width}}function Ln(s){return An.some(t=>s[t]>=0)}var Nn=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(t){let{rects:e}=t,{strategy:i="referenceHidden",...n}=Tt(s,t);switch(i){case"referenceHidden":{let r=await ie(t,{...n,elementContext:"reference"}),a=Dn(r,e.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Ln(a)}}}case"escaped":{let r=await ie(t,{...n,altBoundary:!0}),a=Dn(r,e.floating);return{data:{escapedOffsets:a,escaped:Ln(a)}}}default:return{}}}}};async function _a(s,t){let{placement:e,platform:i,elements:n}=s,r=await(i.isRTL==null?void 0:i.isRTL(n.floating)),a=xt(e),o=Bt(e),h=At(e)==="y",c=["left","top"].includes(a)?-1:1,d=r&&h?-1:1,l=Tt(t,s),{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof l=="number"?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:l.mainAxis||0,crossAxis:l.crossAxis||0,alignmentAxis:l.alignmentAxis};return o&&typeof m=="number"&&(p=o==="end"?m*-1:m),h?{x:p*d,y:f*c}:{x:f*c,y:p*d}}var Fn=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){var e,i;let{x:n,y:r,placement:a,middlewareData:o}=t,h=await _a(t,s);return a===((e=o.offset)==null?void 0:e.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:n+h.x,y:r+h.y,data:{...h,placement:a}}}}},_n=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){let{x:e,y:i,placement:n}=t,{mainAxis:r=!0,crossAxis:a=!1,limiter:o={fn:w=>{let{x:$,y:C}=w;return{x:$,y:C}}},...h}=Tt(s,t),c={x:e,y:i},d=await ie(t,h),l=At(xt(n)),f=Re(l),p=c[f],m=c[l];if(r){let w=f==="y"?"top":"left",$=f==="y"?"bottom":"right",C=p+d[w],A=p-d[$];p=Ce(C,p,A)}if(a){let w=l==="y"?"top":"left",$=l==="y"?"bottom":"right",C=m+d[w],A=m-d[$];m=Ce(C,m,A)}let b=o.fn({...t,[f]:p,[l]:m});return{...b,data:{x:b.x-e,y:b.y-i,enabled:{[f]:r,[l]:a}}}}}},Hn=function(s){return s===void 0&&(s={}),{options:s,fn(t){let{x:e,y:i,placement:n,rects:r,middlewareData:a}=t,{offset:o=0,mainAxis:h=!0,crossAxis:c=!0}=Tt(s,t),d={x:e,y:i},l=At(n),f=Re(l),p=d[f],m=d[l],b=Tt(o,t),w=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(h){let A=f==="y"?"height":"width",M=r.reference[f]-r.floating[A]+w.mainAxis,O=r.reference[f]+r.reference[A]-w.mainAxis;p<M?p=M:p>O&&(p=O)}if(c){var $,C;let A=f==="y"?"width":"height",M=["top","left"].includes(xt(n)),O=r.reference[l]-r.floating[A]+(M&&(($=a.offset)==null?void 0:$[l])||0)+(M?0:w.crossAxis),Q=r.reference[l]+r.reference[A]+(M?0:((C=a.offset)==null?void 0:C[l])||0)-(M?w.crossAxis:0);m<O?m=O:m>Q&&(m=Q)}return{[f]:p,[l]:m}}}},Un=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(t){var e,i;let{placement:n,rects:r,platform:a,elements:o}=t,{apply:h=()=>{},...c}=Tt(s,t),d=await ie(t,c),l=xt(n),f=Bt(n),p=At(n)==="y",{width:m,height:b}=r.floating,w,$;l==="top"||l==="bottom"?(w=l,$=f===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):($=l,w=f==="end"?"top":"bottom");let C=b-d.top-d.bottom,A=m-d.left-d.right,M=vt(b-d[w],C),O=vt(m-d[$],A),Q=!t.middlewareData.shift,H=M,et=O;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(et=A),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(H=C),Q&&!f){let st=Y(d.left,0),X=Y(d.right,0),W=Y(d.top,0),pt=Y(d.bottom,0);p?et=m-2*(st!==0||X!==0?st+X:Y(d.left,d.right)):H=b-2*(W!==0||pt!==0?W+pt:Y(d.top,d.bottom))}await h({...t,availableWidth:et,availableHeight:H});let it=await a.getDimensions(o.floating);return m!==it.width||b!==it.height?{reset:{rects:!0}}:{}}}};function De(){return typeof window<"u"}function jt(s){return Wn(s)?(s.nodeName||"").toLowerCase():"#document"}function Z(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function mt(s){var t;return(t=(Wn(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function Wn(s){return De()?s instanceof Node||s instanceof Z(s).Node:!1}function dt(s){return De()?s instanceof Element||s instanceof Z(s).Element:!1}function gt(s){return De()?s instanceof HTMLElement||s instanceof Z(s).HTMLElement:!1}function Gn(s){return!De()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Z(s).ShadowRoot}function ne(s){let{overflow:t,overflowX:e,overflowY:i,display:n}=ut(s);return/auto|scroll|overlay|hidden|clip/.test(t+i+e)&&!["inline","contents"].includes(n)}function Bn(s){return["table","td","th"].includes(jt(s))}function ge(s){return[":popover-open",":modal"].some(t=>{try{return s.matches(t)}catch{return!1}})}function Le(s){let t=Me(),e=dt(s)?ut(s):s;return["transform","translate","scale","rotate","perspective"].some(i=>e[i]?e[i]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(e.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(e.contain||"").includes(i))}function Kn(s){let t=Ct(s);for(;gt(t)&&!Qt(t);){if(Le(t))return t;if(ge(t))return null;t=Ct(t)}return null}function Me(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Qt(s){return["html","body","#document"].includes(jt(s))}function ut(s){return Z(s).getComputedStyle(s)}function ye(s){return dt(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Ct(s){if(jt(s)==="html")return s;let t=s.assignedSlot||s.parentNode||Gn(s)&&s.host||mt(s);return Gn(t)?t.host:t}function jn(s){let t=Ct(s);return Qt(t)?s.ownerDocument?s.ownerDocument.body:s.body:gt(t)&&ne(t)?t:jn(t)}function se(s,t,e){var i;t===void 0&&(t=[]),e===void 0&&(e=!0);let n=jn(s),r=n===((i=s.ownerDocument)==null?void 0:i.body),a=Z(n);if(r){let o=Ve(a);return t.concat(a,a.visualViewport||[],ne(n)?n:[],o&&e?se(o):[])}return t.concat(n,se(n,[],e))}function Ve(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function Yn(s){let t=ut(s),e=parseFloat(t.width)||0,i=parseFloat(t.height)||0,n=gt(s),r=n?s.offsetWidth:e,a=n?s.offsetHeight:i,o=fe(e)!==r||fe(i)!==a;return o&&(e=r,i=a),{width:e,height:i,$:o}}function ki(s){return dt(s)?s:s.contextElement}function re(s){let t=ki(s);if(!gt(t))return ft(1);let e=t.getBoundingClientRect(),{width:i,height:n,$:r}=Yn(t),a=(r?fe(e.width):e.width)/i,o=(r?fe(e.height):e.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}var Ha=ft(0);function Xn(s){let t=Z(s);return!Me()||!t.visualViewport?Ha:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ua(s,t,e){return t===void 0&&(t=!1),!e||t&&e!==Z(s)?!1:t}function zt(s,t,e,i){t===void 0&&(t=!1),e===void 0&&(e=!1);let n=s.getBoundingClientRect(),r=ki(s),a=ft(1);t&&(i?dt(i)&&(a=re(i)):a=re(s));let o=Ua(r,e,i)?Xn(r):ft(0),h=(n.left+o.x)/a.x,c=(n.top+o.y)/a.y,d=n.width/a.x,l=n.height/a.y;if(r){let f=Z(r),p=i&&dt(i)?Z(i):i,m=f,b=Ve(m);for(;b&&i&&p!==m;){let w=re(b),$=b.getBoundingClientRect(),C=ut(b),A=$.left+(b.clientLeft+parseFloat(C.paddingLeft))*w.x,M=$.top+(b.clientTop+parseFloat(C.paddingTop))*w.y;h*=w.x,c*=w.y,d*=w.x,l*=w.y,h+=A,c+=M,m=Z(b),b=Ve(m)}}return Kt({width:d,height:l,x:h,y:c})}function Si(s,t){let e=ye(s).scrollLeft;return t?t.left+e:zt(mt(s)).left+e}function Jn(s,t,e){e===void 0&&(e=!1);let i=s.getBoundingClientRect(),n=i.left+t.scrollLeft-(e?0:Si(s,i)),r=i.top+t.scrollTop;return{x:n,y:r}}function Ga(s){let{elements:t,rect:e,offsetParent:i,strategy:n}=s,r=n==="fixed",a=mt(i),o=t?ge(t.floating):!1;if(i===a||o&&r)return e;let h={scrollLeft:0,scrollTop:0},c=ft(1),d=ft(0),l=gt(i);if((l||!l&&!r)&&((jt(i)!=="body"||ne(a))&&(h=ye(i)),gt(i))){let p=zt(i);c=re(i),d.x=p.x+i.clientLeft,d.y=p.y+i.clientTop}let f=a&&!l&&!r?Jn(a,h,!0):ft(0);return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-h.scrollLeft*c.x+d.x+f.x,y:e.y*c.y-h.scrollTop*c.y+d.y+f.y}}function Wa(s){return Array.from(s.getClientRects())}function Ba(s){let t=mt(s),e=ye(s),i=s.ownerDocument.body,n=Y(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),r=Y(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight),a=-e.scrollLeft+Si(s),o=-e.scrollTop;return ut(i).direction==="rtl"&&(a+=Y(t.clientWidth,i.clientWidth)-n),{width:n,height:r,x:a,y:o}}function Ka(s,t){let e=Z(s),i=mt(s),n=e.visualViewport,r=i.clientWidth,a=i.clientHeight,o=0,h=0;if(n){r=n.width,a=n.height;let c=Me();(!c||c&&t==="fixed")&&(o=n.offsetLeft,h=n.offsetTop)}return{width:r,height:a,x:o,y:h}}function ja(s,t){let e=zt(s,!0,t==="fixed"),i=e.top+s.clientTop,n=e.left+s.clientLeft,r=gt(s)?re(s):ft(1),a=s.clientWidth*r.x,o=s.clientHeight*r.y,h=n*r.x,c=i*r.y;return{width:a,height:o,x:h,y:c}}function Qn(s,t,e){let i;if(t==="viewport")i=Ka(s,e);else if(t==="document")i=Ba(mt(s));else if(dt(t))i=ja(t,e);else{let n=Xn(s);i={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Kt(i)}function Zn(s,t){let e=Ct(s);return e===t||!dt(e)||Qt(e)?!1:ut(e).position==="fixed"||Zn(e,t)}function Qa(s,t){let e=t.get(s);if(e)return e;let i=se(s,[],!1).filter(o=>dt(o)&&jt(o)!=="body"),n=null,r=ut(s).position==="fixed",a=r?Ct(s):s;for(;dt(a)&&!Qt(a);){let o=ut(a),h=Le(a);!h&&o.position==="fixed"&&(n=null),(r?!h&&!n:!h&&o.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||ne(a)&&!h&&Zn(s,a))?i=i.filter(d=>d!==a):n=o,a=Ct(a)}return t.set(s,i),i}function za(s){let{element:t,boundary:e,rootBoundary:i,strategy:n}=s,a=[...e==="clippingAncestors"?ge(t)?[]:Qa(t,this._c):[].concat(e),i],o=a[0],h=a.reduce((c,d)=>{let l=Qn(t,d,n);return c.top=Y(l.top,c.top),c.right=vt(l.right,c.right),c.bottom=vt(l.bottom,c.bottom),c.left=Y(l.left,c.left),c},Qn(t,o,n));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function Ya(s){let{width:t,height:e}=Yn(s);return{width:t,height:e}}function Xa(s,t,e){let i=gt(t),n=mt(t),r=e==="fixed",a=zt(s,!0,r,t),o={scrollLeft:0,scrollTop:0},h=ft(0);if(i||!i&&!r)if((jt(t)!=="body"||ne(n))&&(o=ye(t)),i){let f=zt(t,!0,r,t);h.x=f.x+t.clientLeft,h.y=f.y+t.clientTop}else n&&(h.x=Si(n));let c=n&&!i&&!r?Jn(n,o):ft(0),d=a.left+o.scrollLeft-h.x-c.x,l=a.top+o.scrollTop-h.y-c.y;return{x:d,y:l,width:a.width,height:a.height}}function $i(s){return ut(s).position==="static"}function zn(s,t){if(!gt(s)||ut(s).position==="fixed")return null;if(t)return t(s);let e=s.offsetParent;return mt(s)===e&&(e=e.ownerDocument.body),e}function tr(s,t){let e=Z(s);if(ge(s))return e;if(!gt(s)){let n=Ct(s);for(;n&&!Qt(n);){if(dt(n)&&!$i(n))return n;n=Ct(n)}return e}let i=zn(s,t);for(;i&&Bn(i)&&$i(i);)i=zn(i,t);return i&&Qt(i)&&$i(i)&&!Le(i)?e:i||Kn(s)||e}var Ja=async function(s){let t=this.getOffsetParent||tr,e=this.getDimensions,i=await e(s.floating);return{reference:Xa(s.reference,await t(s.floating),s.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Za(s){return ut(s).direction==="rtl"}var to={convertOffsetParentRelativeRectToViewportRelativeRect:Ga,getDocumentElement:mt,getClippingRect:za,getOffsetParent:tr,getElementRects:Ja,getClientRects:Wa,getDimensions:Ya,getScale:re,isElement:dt,isRTL:Za};function er(s,t){return s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function eo(s,t){let e=null,i,n=mt(s);function r(){var o;clearTimeout(i),(o=e)==null||o.disconnect(),e=null}function a(o,h){o===void 0&&(o=!1),h===void 0&&(h=1),r();let c=s.getBoundingClientRect(),{left:d,top:l,width:f,height:p}=c;if(o||t(),!f||!p)return;let m=me(l),b=me(n.clientWidth-(d+f)),w=me(n.clientHeight-(l+p)),$=me(d),A={rootMargin:-m+"px "+-b+"px "+-w+"px "+-$+"px",threshold:Y(0,vt(1,h))||1},M=!0;function O(Q){let H=Q[0].intersectionRatio;if(H!==h){if(!M)return a();H?a(!1,H):i=setTimeout(()=>{a(!1,1e-7)},1e3)}H===1&&!er(c,s.getBoundingClientRect())&&a(),M=!1}try{e=new IntersectionObserver(O,{...A,root:n.ownerDocument})}catch{e=new IntersectionObserver(O,A)}e.observe(s)}return a(!0),r}function ir(s,t,e,i){i===void 0&&(i={});let{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:h=!1}=i,c=ki(s),d=n||r?[...c?se(c):[],...se(t)]:[];d.forEach($=>{n&&$.addEventListener("scroll",e,{passive:!0}),r&&$.addEventListener("resize",e)});let l=c&&o?eo(c,e):null,f=-1,p=null;a&&(p=new ResizeObserver($=>{let[C]=$;C&&C.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var A;(A=p)==null||A.observe(t)})),e()}),c&&!h&&p.observe(c),p.observe(t));let m,b=h?zt(s):null;h&&w();function w(){let $=zt(s);b&&!er(b,$)&&e(),b=$,m=requestAnimationFrame(w)}return e(),()=>{var $;d.forEach(C=>{n&&C.removeEventListener("scroll",e),r&&C.removeEventListener("resize",e)}),l?.(),($=p)==null||$.disconnect(),p=null,h&&cancelAnimationFrame(m)}}var nc=Fn;var sr=_n,nr=In,rc=Un,ac=Nn,oc=Vn;var hc=Hn,rr=(s,t,e)=>{let i=new Map,n={platform:to,...e},r={...n.platform,_c:i};return Mn(s,t,{...n,platform:r})};var N=La(Ma(),1);function Oi(s){return!v(s)&&"width"in s&&"height"in s&&J(s.width)&&J(s.height)}var y=typeof document>"u",io=y?"":navigator?.userAgent.toLowerCase()||"",on=!y&&/iphone|ipad|ipod|ios|crios|fxios/i.test(io),ha=!y&&/(iphone|ipod)/gi.test(navigator?.platform||""),ca=!y&&!!window.chrome,He=!y&&(!!window.safari||on);function la(){return so()&&St(screen.orientation.unlock)}function so(){return!y&&!nt(window.screen.orientation)&&!nt(window.screen.orientation.lock)}function da(s,t){return y?!1:(s||(s=document.createElement("audio")),s.canPlayType(t).length>0)}function ua(s,t){return y?!1:(s||(s=document.createElement("video")),s.canPlayType(t).length>0)}function pa(s){return y?!1:(s||(s=document.createElement("video")),s.canPlayType("application/vnd.apple.mpegurl").length>0)}function fa(s){return y?!1:!!document.pictureInPictureEnabled&&!s?.disablePictureInPicture}function ma(s){return y?!1:St(s?.webkitSupportsPresentationMode)&&St(s?.webkitSetPresentationMode)}async function no(){let s=document.createElement("video");return s.volume=.5,await Sn(0),s.volume===.5}function ro(){return y?void 0:window?.ManagedMediaSource??window?.MediaSource??window?.WebKitMediaSource}function ao(){return y?void 0:window?.SourceBuffer??window?.WebKitSourceBuffer}function hn(){if(y)return!1;let s=ro();if(nt(s))return!1;let t=s&&St(s.isTypeSupported)&&s.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=ao(),i=nt(e)||!nt(e.prototype)&&St(e.prototype.appendBuffer)&&St(e.prototype.remove);return!!t&&!!i}function ga(){return hn()}var ae=class{#t;get length(){return this.#t.length}constructor(t,e){z(t)?this.#t=t:!nt(t)&&!nt(e)?this.#t=[[t,e]]:this.#t=[]}start(t){return this.#t[t][0]??1/0}end(t){return this.#t[t][1]??1/0}};function ar(s){if(!s.length)return null;let t=s.start(0);for(let e=1;e<s.length;e++){let i=s.start(e);i<t&&(t=i)}return t}function Yt(s){if(!s.length)return null;let t=s.end(0);for(let e=1;e<s.length;e++){let i=s.end(e);i>t&&(t=i)}return t}function oo(s){if(s.length<=1)return s;s.sort((i,n)=>i[0]-n[0]);let t=[],e=s[0];for(let i=1;i<s.length;i++){let n=s[i];e[1]>=n[0]-1?e=[e[0],Math.max(e[1],n[1])]:(t.push(e),e=n)}return t.push(e),t}function ho(s,t,e){let i=t[0],n=t[1];return e<i?[e,-1]:e===i?t:i===-1?(t[0]=e,t):(e>i&&(t[1]=e,n===-1&&s.push(t)),oo(s),t)}var co=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx|flac)($|\?)/i,lo=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp3","audio/webm","audio/flac","audio/m4a","audio/m4b","audio/mp4a","audio/mp4"]),uo=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,po=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),fo=/\.(m3u8)($|\?)/i,mo=/\.(mpd)($|\?)/i,go=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]),yo=new Set(["application/dash+xml"]);function ya({src:s,type:t}){return v(s)?co.test(s)||lo.has(t)||s.startsWith("blob:")&&t==="audio/object":t==="audio/object"}function ba(s){return v(s.src)?uo.test(s.src)||po.has(s.type)||s.src.startsWith("blob:")&&s.type==="video/object"||he(s)&&(y||pa()):s.type==="video/object"}function he({src:s,type:t}){return v(s)&&fo.test(s)||go.has(t)}function cn({src:s,type:t}){return v(s)&&mo.test(s)||yo.has(t)}function bo(s){return v(s.src)&&(ya(s)||ba(s)||he(s))}function wo(s){return!y&&typeof window.MediaStream<"u"&&s instanceof window.MediaStream}function fc(s,t){let e=new URL(s);for(let i of Object.keys(t))e.searchParams.set(i,t[i]+"");return e.toString()}function ce(s,t="preconnect"){if(y)return!1;let e=document.querySelector(`link[href="${s}"]`);if(!wt(e))return!0;let i=document.createElement("link");return i.rel=t,i.href=s,i.crossOrigin="true",document.head.append(i),!0}var be={};function vo(s){if(be[s])return be[s].promise;let t=Pe(),e=document.querySelector(`script[src="${s}"]`);if(!wt(e))return t.resolve(),t.promise;be[s]=t;let i=document.createElement("script");return i.src=s,i.onload=()=>{t.resolve(),delete be[s]},i.onerror=()=>{t.reject(),delete be[s]},setTimeout(()=>document.head.append(i),0),t.promise}function Te(s){return s==="use-credentials"?"include":v(s)?"same-origin":void 0}var To=Symbol(0),xo=Symbol(0),$o=Symbol(0),ko=Symbol(0),So=Symbol(0),Po=Symbol(0),Eo=Symbol(0),x={crossOrigin:To,readyState:xo,updateActiveCues:$o,canLoad:ko,onModeChange:So,native:Po,nativeHLS:Eo};function or(s,t){return t>=s.startTime&&t<s.endTime}function wa(s,t,e){let i=null,n=ui();function r(){let a=v(t)?[t]:t,o=s.toArray().find(h=>a.includes(h.kind)&&h.mode==="showing");if(o!==i){if(!o){e(null),i=null;return}o.readyState==2?e(o):(e(null),Ut(()=>{let h=F(o,"load",()=>{e(o),h()},{once:!0})},n)),i=o}}return r(),F(s,"mode-change",r)}var Nt=class extends mi{static createId(t){return`vds-${t.type}-${t.kind}-${t.src??t.label??"?"}`}src;content;type;encoding;id="";label="";language="";kind;default=!1;#t=!1;#e=0;#i="disabled";#s={};#n=[];#r=[];#a=[];[x.readyState]=0;[x.crossOrigin];[x.onModeChange]=null;[x.native]=null;get metadata(){return this.#s}get regions(){return this.#n}get cues(){return this.#r}get activeCues(){return this.#a}get readyState(){return this[x.readyState]}get mode(){return this.#i}set mode(t){this.setMode(t)}constructor(t){super();for(let e of Object.keys(t))this[e]=t[e];this.type||(this.type="vtt"),!y&&t.content?this.#h(t):t.src||(this[x.readyState]=2)}addCue(t,e){let i=0,n=this.#r.length;for(i=0;i<n&&!(t.endTime<=this.#r[i].startTime);i++);i===n?this.#r.push(t):this.#r.splice(i,0,t),t instanceof TextTrackCue||this[x.native]?.track.addCue(t),this.dispatchEvent(new R("add-cue",{detail:t,trigger:e})),or(t,this.#e)&&this[x.updateActiveCues](this.#e,e)}removeCue(t,e){let i=this.#r.indexOf(t);if(i>=0){let n=this.#a.includes(t);this.#r.splice(i,1),this[x.native]?.track.removeCue(t),this.dispatchEvent(new R("remove-cue",{detail:t,trigger:e})),n&&this[x.updateActiveCues](this.#e,e)}}setMode(t,e){this.#i!==t&&(this.#i=t,t==="disabled"?(this.#a=[],this.#c()):this.readyState===2?this[x.updateActiveCues](this.#e,e):this.#o(),this.dispatchEvent(new R("mode-change",{detail:this,trigger:e})),this[x.onModeChange]?.())}[x.updateActiveCues](t,e){if(this.#e=t,this.mode==="disabled"||!this.#r.length)return;let i=[];for(let r=0,a=this.#r.length;r<a;r++){let o=this.#r[r];or(o,t)&&i.push(o)}let n=i.length!==this.#a.length;if(!n){for(let r=0;r<i.length;r++)if(!this.#a.includes(i[r])){n=!0;break}}this.#a=i,n&&this.#c(e)}[x.canLoad](){this.#t=!0,this.#i!=="disabled"&&this.#o()}#h(t){import("./prod-USPFQIFU.mjs").then(({parseText:e,VTTCue:i,VTTRegion:n})=>{!v(t.content)||t.type==="json"?(this.#u(t.content,i,n),this.readyState!==3&&this.#l()):e(t.content,{type:t.type}).then(({cues:r,regions:a})=>{this.#r=r,this.#n=a,this.#l()})})}async#o(){if(!(!this.#t||this[x.readyState]>0)){if(this[x.readyState]=1,this.dispatchEvent(new R("load-start")),!this.src){this.#l();return}try{let{parseResponse:t,VTTCue:e,VTTRegion:i}=await import("./prod-USPFQIFU.mjs"),n=this[x.crossOrigin]?.(),r=fetch(this.src,{headers:this.type==="json"?{"Content-Type":"application/json"}:void 0,credentials:Te(n)});if(this.type==="json")this.#u(await(await r).text(),e,i);else{let{errors:a,metadata:o,regions:h,cues:c}=await t(r,{type:this.type,encoding:this.encoding});if(a[0]?.code===0)throw a[0];this.#s=o,this.#n=h,this.#r=c}this.#l()}catch(t){this.#d(t)}}}#l(){if(this[x.readyState]=2,!this.src||this.type!=="vtt"){let e=this[x.native];if(e&&!e.managed)for(let i of this.#r)e.track.addCue(i)}let t=new R("load");this[x.updateActiveCues](this.#e,t),this.dispatchEvent(t)}#d(t){this[x.readyState]=3,this.dispatchEvent(new R("error",{detail:t}))}#u(t,e,i){try{let{regions:n,cues:r}=Co(t,e,i);this.#n=n,this.#r=r}catch(n){this.#d(n)}}#c(t){this.dispatchEvent(new R("cue-change",{trigger:t}))}},Ao=/captions|subtitles/;function at(s){return Ao.test(s.kind)}function Co(s,t,e){let i=v(s)?JSON.parse(s):s,n=[],r=[];return i.regions&&e&&(n=i.regions.map(a=>Object.assign(new e,a))),(i.cues||z(i))&&(r=(z(i)?i:i.cues).filter(a=>J(a.startTime)&&J(a.endTime)).map(a=>Object.assign(new t(0,0,""),a))),{regions:n,cues:r}}var ln=new Et({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new ae,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:la(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return ha&&this.mediaType==="video"&&(!this.playsInline||!Vt.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new ae,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new ae,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(at).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get duration(){return this.seekableWindow},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){let s=ar(this.buffered)??0;return Math.max(s,this.clipStartTime)},get bufferedEnd(){let s=Yt(this.buffered)??0;return Math.min(this.seekableEnd,Math.max(0,s-this.clipStartTime))},get bufferedWindow(){return Math.max(0,this.bufferedEnd-this.bufferedStart)},get seekableStart(){if(this.isLiveDVR&&this.liveDVRWindow>0)return Math.max(0,this.seekableEnd-this.liveDVRWindow);let s=ar(this.seekable)??0;return Math.max(s,this.clipStartTime)},get seekableEnd(){if(this.providedDuration>0)return this.providedDuration;let s=this.liveSyncPosition>0?this.liveSyncPosition:this.canPlay?Yt(this.seekable)??1/0:0;return this.clipEndTime>0?Math.min(this.clipEndTime,s):s},get seekableWindow(){let s=this.seekableEnd-this.seekableStart;return isNaN(s)?1/0:Math.max(0,s)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.duration)&&(!this.isLiveDVR||this.duration>=this.liveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,this.seekableEnd-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},get isLiveDVR(){return/:dvr/.test(this.streamType)},get liveDVRWindow(){return Math.max(this.inferredLiveDVRWindow,this.minLiveDVRWindow)},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,inferredLiveDVRWindow:0,savedState:null}),va=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),Ro=new Set([...va,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","inferredLiveDVRWindow","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function hr(s,t=!1){let e=t?va:Ro;ln.reset(s,i=>e.has(i)),bt()}function Ta(s,t){let e=s+t.clipStartTime(),i=Math.floor(s)===Math.floor(t.seekableStart()),n=Math.floor(e)===Math.floor(t.seekableEnd());return i?t.seekableStart():n?t.seekableEnd():t.isLiveDVR()&&t.liveDVRWindow()>0&&e<t.seekableEnd()-t.liveDVRWindow()?t.bufferedStart():Math.min(Math.max(t.seekableStart()+.1,e),t.seekableEnd()-.1)}var xa=Pt();function V(){return U(xa)}var Di=class{#t=null;#e=null;#i=-1;#s;constructor(t=void 0){this.#s=t}setTarget(t){this.#t=t}getPlayer(t){return this.#e?this.#e:((t??this.#t)?.dispatchEvent(new R("find-media-player",{detail:e=>void(this.#e=e),bubbles:!0,composed:!0})),this.#e)}setPlayer(t){this.#e=t}startLoading(t){this.#n("media-start-loading",t)}startLoadingPoster(t){this.#n("media-poster-start-loading",t)}requestAirPlay(t){this.#n("media-airplay-request",t)}requestGoogleCast(t){this.#n("media-google-cast-request",t)}play(t){this.#n("media-play-request",t)}pause(t){this.#n("media-pause-request",t)}mute(t){this.#n("media-mute-request",t)}unmute(t){this.#n("media-unmute-request",t)}enterFullscreen(t,e){this.#n("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.#n("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.#n("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.#n("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.#n("media-enter-pip-request",t)}exitPictureInPicture(t){this.#n("media-exit-pip-request",t)}seeking(t,e){this.#n("media-seeking-request",e,t)}seek(t,e){this.#n("media-seek-request",e,t)}seekToLiveEdge(t){this.#n("media-live-edge-request",t)}changeDuration(t,e){this.#n("media-duration-change-request",e,t)}changeClipStart(t,e){this.#n("media-clip-start-change-request",e,t)}changeClipEnd(t,e){this.#n("media-clip-end-change-request",e,t)}changeVolume(t,e){this.#n("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.#n("media-audio-track-change-request",e,t)}changeQuality(t,e){this.#n("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,i){this.#n("media-text-track-change-request",i,{index:t,mode:e})}changePlaybackRate(t,e){this.#n("media-rate-change-request",e,t)}changeAudioGain(t,e){this.#n("media-audio-gain-change-request",e,t)}resumeControls(t){this.#n("media-resume-controls-request",t)}pauseControls(t){this.#n("media-pause-controls-request",t)}togglePaused(t){let e=this.getPlayer(t?.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){let e=this.getPlayer(t?.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){let e=this.getPlayer(t?.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){let i=this.getPlayer(e?.target);i&&(i.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){let e=this.getPlayer(t?.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}showCaptions(t){let e=this.getPlayer(t?.target);if(!e)return;let i=e.state.textTracks,n=this.#i;(!i[n]||!at(i[n]))&&(n=-1),n===-1&&(n=i.findIndex(r=>at(r)&&r.default)),n===-1&&(n=i.findIndex(r=>at(r))),n>=0&&this.changeTextTrackMode(n,"showing",t),this.#i=-1}disableCaptions(t){let e=this.getPlayer(t?.target);if(!e)return;let i=e.state.textTracks,n=e.state.textTrack;if(n){let r=i.indexOf(n);this.changeTextTrackMode(r,"disabled",t),this.#i=r}}toggleCaptions(t){let e=this.getPlayer(t?.target);e&&(e.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(t,e){this.#n("media-user-loop-change-request",e,t)}#n(t,e,i){let n=new R(t,{bubbles:!0,composed:!0,cancelable:!0,detail:i,trigger:e}),r=e?.target||null;r&&r instanceof S&&(r=r.el),r=!r||r===document||r===window||r===document.body||this.#e?.el&&r instanceof Node&&!this.#e.el.contains(r)?this.#t??this.getPlayer()?.el:r??this.#t,this.#e?t==="media-play-request"&&!this.#e.state.canLoad?r?.dispatchEvent(n):this.#e.canPlayQueue.enqueue(t,()=>r?.dispatchEvent(n)):r?.dispatchEvent(n)}#r(t){}},Li=class{playerId="vds-player";mediaId=null;#t={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null};async getVolume(){return this.#t.volume}async setVolume(t){this.#t.volume=t,this.save()}async getMuted(){return this.#t.muted}async setMuted(t){this.#t.muted=t,this.save()}async getTime(){return this.#t.time}async setTime(t,e){let i=t<0;this.#t.time=i?null:t,i||e?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.#t.lang}async setLang(t){this.#t.lang=t,this.save()}async getCaptions(){return this.#t.captions}async setCaptions(t){this.#t.captions=t,this.save()}async getPlaybackRate(){return this.#t.rate}async setPlaybackRate(t){this.#t.rate=t,this.save()}async getAudioGain(){return this.#t.audioGain}async setAudioGain(t){this.#t.audioGain=t,this.save()}async getVideoQuality(){return this.#t.quality}async setVideoQuality(t){this.#t.quality=t,this.save()}onChange(t,e,i="vds-player"){let n=i?localStorage.getItem(i):null,r=e?localStorage.getItem(e):null;this.playerId=i,this.mediaId=e,this.#t={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...n?JSON.parse(n):{},time:r?+r:null}}save(){if(y||!this.playerId)return;let t=JSON.stringify({...this.#t,time:void 0});localStorage.setItem(this.playerId,t)}saveTimeThrottled=It(this.saveTime.bind(this),1e3);saveTime(){if(y||!this.mediaId)return;let t=(this.#t.time??0).toString();localStorage.setItem(this.mediaId,t)}},qo=Symbol(0),Oo=Symbol(0),Do=Symbol(0),Lo=Symbol(0),Mo=Symbol(0),Vo=Symbol(0),Io=Symbol(0),No=Symbol(0),Fo=Symbol(0),P={add:qo,remove:Oo,reset:Do,select:Lo,readonly:Mo,setReadonly:Vo,onReset:Io,onRemove:No,onUserSelect:Fo},Ue=class extends mi{items=[];[P.readonly]=!1;get length(){return this.items.length}get readonly(){return this[P.readonly]}indexOf(t){return this.items.indexOf(t)}getById(t){return t===""?null:this.items.find(e=>e.id===t)??null}toArray(){return[...this.items]}[Symbol.iterator](){return this.items.values()}[P.add](t,e){let i=this.items.length;""+i in this||Object.defineProperty(this,i,{get(){return this.items[i]}}),!this.items.includes(t)&&(this.items.push(t),this.dispatchEvent(new R("add",{detail:t,trigger:e})))}[P.remove](t,e){let i=this.items.indexOf(t);i>=0&&(this[P.onRemove]?.(t,e),this.items.splice(i,1),this.dispatchEvent(new R("remove",{detail:t,trigger:e})))}[P.reset](t){for(let e of[...this.items])this[P.remove](e,t);this.items=[],this[P.setReadonly](!1,t),this[P.onReset]?.()}[P.setReadonly](t,e){this[P.readonly]!==t&&(this[P.readonly]=t,this.dispatchEvent(new R("readonly-change",{detail:t,trigger:e})))}},we=Symbol(0),Ge=class extends Ue{get selected(){return this.items.find(t=>t.selected)??null}get selectedIndex(){return this.items.findIndex(t=>t.selected)}[P.onRemove](t,e){this[P.select](t,!1,e)}[P.add](t,e){t[we]=!1,Object.defineProperty(t,"selected",{get(){return this[we]},set:i=>{this.readonly||(this[P.onUserSelect]?.(),this[P.select](t,i))}}),super[P.add](t,e)}[P.select](t,e,i){if(e===t?.[we])return;let n=this.selected;t&&(t[we]=e),(e?n!==t:n===t)&&(n&&(n[we]=!1),this.dispatchEvent(new R("change",{detail:{prev:n,current:this.selected},trigger:i})))}},Mi=class extends Ge{};function B(s,t=2){return Number(s.toFixed(t))}function Vi(s){return String(s).split(".")[1]?.length??0}function dn(s,t,e){return Math.max(s,Math.min(e,t))}function cr(s,t){let e=t.composedPath()[0];return Tn(e)&&s.contains(e)}var Ii=new Set;if(!y){let s=function(){for(let t of Ii)try{t()}catch{}window.requestAnimationFrame(s)};s()}function _o(s){return Ii.add(s),()=>Ii.delete(s)}function q(s,t,e){s.hasAttribute(t)||s.setAttribute(t,e)}function Ht(s,t){if(s.hasAttribute("aria-label")||s.hasAttribute("data-no-label"))return;if(!St(t)){T(s,"aria-label",t);return}function e(){T(s,"aria-label",t())}y?e():u(e)}function $a(s){let t=getComputedStyle(s);return t.display!=="none"&&parseInt(t.opacity)>0}function Ho(s){return!!s&&("checkVisibility"in s?s.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}):$a(s))}function ka(s,t){return _o(()=>t(Ho(s)))}function Sa(s,t,e){for(;t;){if(t===s)return!0;if(e?.(t))break;t=t.parentElement}return!1}function Ft(s,t){return new D(s).add("pointerup",e=>{e.button===0&&!e.defaultPrevented&&t(e)}).add("keydown",e=>{bi(e)&&t(e)})}function un(s){return de(s)&&(s.touches.length>1||s.changedTouches.length>1)}function Pa(s){if(y)return s();let t=ui(),e=window.requestAnimationFrame(()=>{Ut(s,t),e=-1});return()=>void window.cancelAnimationFrame(e)}function Ea(s,t,e,{offsetVarName:i,xOffset:n,yOffset:r,...a}){if(!s)return;let o=e.replace(" ","-").replace("-center","");if(ht(s,"visibility",t?null:"hidden"),!t)return;let h=e.includes("top"),c=l=>e.includes("left")?`calc(-1 * ${l})`:l,d=l=>h?`calc(-1 * ${l})`:l;return ir(t,s,()=>{rr(t,s,{placement:o,middleware:[...a.middleware??[],nr({fallbackAxisSideDirection:"start",crossAxis:!1}),sr()],...a}).then(({x:l,y:f,middlewareData:p})=>{let m=!!p.flip?.index;h=e.includes(m?"bottom":"top"),s.setAttribute("data-placement",m?e.startsWith("top")?e.replace("top","bottom"):e.replace("bottom","top"):e),Object.assign(s.style,{top:`calc(${f+"px"} + ${d(r?r+"px":`var(--${i}-y-offset, 0px)`)})`,left:`calc(${l+"px"} + ${c(n?n+"px":`var(--${i}-x-offset, 0px)`)})`})})})}function Uo(s){return getComputedStyle(s).animationName!=="none"}function We(s){return s instanceof HTMLElement}var Ni=class{priority=0;#t=!0;#e=null;#i=null;#s=new Set;canRender(t,e){return!!e}attach(t){this.#e=t,t&&(t.textTracks.onchange=this.#h.bind(this))}addTrack(t){this.#s.add(t),this.#n(t)}removeTrack(t){t[x.native]?.remove?.(),t[x.native]=null,this.#s.delete(t)}changeTrack(t){let e=t?.[x.native];e&&e.track.mode!=="showing"&&(e.track.mode="showing"),this.#i=t}setDisplay(t){this.#t=t,this.#h()}detach(){this.#e&&(this.#e.textTracks.onchange=null);for(let t of this.#s)this.removeTrack(t);this.#s.clear(),this.#e=null,this.#i=null}#n(t){if(!this.#e)return;let e=t[x.native]??=this.#r(t);We(e)&&(this.#e.append(e),e.track.mode=e.default?"showing":"disabled")}#r(t){let e=document.createElement("track"),i=t.default||t.mode==="showing",n=t.src&&t.type==="vtt";return e.id=t.id,e.src=n?t.src:"",e.label=t.label,e.kind=t.kind,e.default=i,t.language&&(e.srclang=t.language),i&&!n&&this.#a(t,e.track),e}#a(t,e){if(!(t.src&&t.type==="vtt"||e.cues?.length))for(let i of t.cues)e.addCue(i)}#h(t){for(let e of this.#s){let i=e[x.native];if(!i)continue;if(!this.#t){i.track.mode=i.managed?"hidden":"disabled";continue}let n=i.track.mode==="showing";n&&this.#a(e,i.track),e.setMode(n?"showing":"disabled",t)}}},Fi=class{#t=null;#e;#i=[];#s;#n=!1;#r=null;#a=null;constructor(t){this.#s=t;let e=t.textTracks;this.#e=e,u(this.#h.bind(this)),E(this.#p.bind(this)),new D(e).add("add",this.#d.bind(this)).add("remove",this.#u.bind(this)).add("mode-change",this.#c.bind(this))}#h(){let{nativeControls:t}=this.#s.$state;this.#n=t(),this.#c()}add(t){this.#i.push(t),le(this.#c.bind(this))}remove(t){t.detach(),this.#i.splice(this.#i.indexOf(t),1),le(this.#c.bind(this))}attachVideo(t){requestAnimationFrame(()=>{if(this.#t=t,t){this.#r=new Ni,this.#r.attach(t);for(let e of this.#e)this.#o(e)}this.#c()})}#o(t){at(t)&&this.#r?.addTrack(t)}#l(t){at(t)&&this.#r?.removeTrack(t)}#d(t){this.#o(t.detail)}#u(t){this.#l(t.detail)}#c(){let t=this.#e.selected;if(this.#t&&(this.#n||t?.[x.nativeHLS])){this.#a?.changeTrack(null),this.#r?.setDisplay(!0),this.#r?.changeTrack(t);return}if(this.#r?.setDisplay(!1),this.#r?.changeTrack(null),!t){this.#a?.changeTrack(null);return}let e=this.#i.sort((i,n)=>i.priority-n.priority).find(i=>i.canRender(t,this.#t));this.#a!==e&&(this.#a?.detach(),e?.attach(this.#t),this.#a=e??null),e?.changeTrack(t)}#p(){this.#r?.detach(),this.#r=null,this.#a?.detach(),this.#a=null}},_i=class extends Ue{#t=!1;#e={};#i=null;#s=null;[x.crossOrigin];constructor(){super()}get selected(){return this.items.find(e=>e.mode==="showing"&&at(e))??null}get selectedIndex(){let t=this.selected;return t?this.indexOf(t):-1}get preferredLang(){return this.#s}set preferredLang(t){this.#s=t,this.#l(t)}add(t,e){let i=t instanceof Nt,n=i?t:new Nt(t),r=t.kind==="captions"||t.kind==="subtitles"?"captions":t.kind;return this.#e[r]&&t.default&&delete t.default,n.addEventListener("mode-change",this.#a),this[P.add](n,e),n[x.crossOrigin]=this[x.crossOrigin],this.#t&&n[x.canLoad](),t.default&&(this.#e[r]=n),this.#n(),this}remove(t,e){if(this.#r=t,!!this.items.includes(t))return t===this.#e[t.kind]&&delete this.#e[t.kind],t.mode="disabled",t[x.onModeChange]=null,t.removeEventListener("mode-change",this.#a),this[P.remove](t,e),this.#r=null,this}clear(t){for(let e of[...this.items])this.remove(e,t);return this}getByKind(t){let e=Array.isArray(t)?t:[t];return this.items.filter(i=>e.includes(i.kind))}[x.canLoad](){if(!this.#t){for(let t of this.items)t[x.canLoad]();this.#t=!0,this.#n()}}#n=Ee(async()=>{if(!this.#t)return;!this.#s&&this.#i&&(this.#s=await this.#i.getLang());let t=await this.#i?.getCaptions(),e=[["captions","subtitles"],"chapters","descriptions","metadata"];for(let i of e){let n=this.getByKind(i);if(n.find(c=>c.mode==="showing"))continue;let r=this.#s?n.find(c=>c.language===this.#s):null,a=z(i)?this.#e[i.find(c=>this.#e[c])||""]:this.#e[i],o=r??a,h=o&&at(o);o&&(!h||t!==!1)&&(o.mode="showing",h&&this.#o(o))}},300);#r=null;#a=this.#h.bind(this);#h(t){let e=t.detail;if(this.#i&&at(e)&&e!==this.#r&&this.#o(e),e.mode==="showing"){let i=at(e)?["captions","subtitles"]:[e.kind];for(let n of this.items)n.mode==="showing"&&n!=e&&i.includes(n.kind)&&(n.mode="disabled")}this.dispatchEvent(new R("mode-change",{detail:t.detail,trigger:t}))}#o(t){t.mode!=="disabled"&&this.#l(t.language),this.#i?.setCaptions?.(t.mode==="showing")}#l(t){this.#i?.setLang?.(this.#s=t)}setStorage(t){this.#i=t}},Go=Symbol(0),Wo=Symbol(0),rt={setAuto:Go,enableAuto:Wo},Hi=class extends Ge{#t=!1;switch="current";get auto(){return this.#t||this.readonly}[rt.enableAuto];[P.onUserSelect](){this[rt.setAuto](!1)}[P.onReset](t){this[rt.enableAuto]=void 0,this[rt.setAuto](!1,t)}autoSelect(t){this.readonly||this.#t||!this[rt.enableAuto]||(this[rt.enableAuto]?.(t),this[rt.setAuto](!0,t))}getBySrc(t){return this.items.find(e=>e.src===t)}[rt.setAuto](t,e){this.#t!==t&&(this.#t=t,this.dispatchEvent(new R("auto-change",{detail:t,trigger:e})))}};function Bo(s,t){return[...s].sort(t?jo:Ko)}function Ko(s,t){return s.height===t.height?(s.bitrate??0)-(t.bitrate??0):s.height-t.height}function jo(s,t){return t.height===s.height?(t.bitrate??0)-(s.bitrate??0):t.height-s.height}function Qo(s){return!y&&s instanceof HTMLAudioElement}function zo(s){return!y&&s instanceof HTMLVideoElement}function Yo(s){return Qo(s)||zo(s)}var Ot=class extends lt{},Xo={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},ve=new Set(["Shift","Alt","Meta","Ctrl"]),Jo='button, [role="button"]',lr='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]',Ui=class extends Ot{#t;constructor(t){super(),this.#t=t}onConnect(){u(this.#e.bind(this))}#e(){let{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;let i=e()==="player"?this.el:document,n=k(!1);i===this.el?new D(this.el).add("focusin",()=>n.set(!0)).add("focusout",r=>{this.el.contains(r.target)||n.set(!1)}):(g(n)||n.set(document.querySelector("[data-media-player]")===this.el),F(document,"focusin",r=>{let a=r.composedPath().find(o=>o instanceof Element&&o.localName==="media-player");a!==void 0&&n.set(this.el===a)})),u(()=>{n()&&new D(i).add("keyup",this.#i.bind(this)).add("keydown",this.#s.bind(this)).add("keydown",this.#n.bind(this),{capture:!0})})}#i(t){let e=document.activeElement;if(!t.key||!this.$state.canSeek()||e?.matches(lr))return;let{method:i,value:n}=this.#r(t);if(!v(n)&&!z(n)){n?.onKeyUp?.({event:t,player:this.#t.player,remote:this.#t.remote}),n?.callback?.(t,this.#t.remote);return}i?.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this.#o?(this.#l(t,i==="seekForward"),this.#o=null):(this.#t.remote.seek(this.#a,t),this.#a=void 0)),i?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:i==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}#s(t){if(!t.key||ve.has(t.key))return;let e=document.activeElement;if(e?.matches(lr)||bi(t)&&e?.matches(Jo))return;let{method:i,value:n}=this.#r(t),r=!t.metaKey&&/^[0-9]$/.test(t.key);if(!v(n)&&!z(n)&&!r){n?.onKeyDown?.({event:t,player:this.#t.player,remote:this.#t.remote}),n?.callback?.(t,this.#t.remote);return}if(!i&&r&&!eh(t)){t.preventDefault(),t.stopPropagation(),this.#t.remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(i){switch(t.preventDefault(),t.stopPropagation(),i){case"seekForward":case"seekBackward":this.#d(t,i,i==="seekForward");break;case"volumeUp":case"volumeDown":let a=this.el.querySelector("[data-media-volume-slider]");if(a)a.dispatchEvent(new KeyboardEvent("keydown",{key:i==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{let h=t.shiftKey?.1:.05;this.#t.remote.changeVolume(this.$state.volume()+(i==="volumeUp"?+h:-h),t)}break;case"toggleFullscreen":this.#t.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":let o=this.$state.playbackRate();this.#t.remote.changePlaybackRate(Math.max(.25,Math.min(2,o+(i==="speedUp"?.25:-.25))),t);break;default:this.#t.remote[i]?.(t)}this.$state.lastKeyboardAction.set({action:i,event:t})}}#n(t){Yo(t.target)&&this.#r(t).method&&t.preventDefault()}#r(t){let e={...this.$props.keyShortcuts(),...this.#t.ariaKeys},i=Object.keys(e).find(n=>{let r=e[n],a=z(r)?r.join(" "):v(r)?r:r?.keys;return(z(a)?a:a?.split(" "))?.map(h=>th(h).replace(/Control/g,"Ctrl").split("+"))?.some(h=>{let c=new Set(h.filter(d=>ve.has(d)));for(let d of ve){let l=d.toLowerCase()+"Key";if(!c.has(d)&&t[l])return!1}return h.every(d=>ve.has(d)?t[d.toLowerCase()+"Key"]:t.key===d.replace("Space"," "))})});return{method:i,value:i?e[i]:null}}#a;#h(t,e){let i=t.shiftKey?10:5;return this.#a=Math.max(0,Math.min((this.#a??this.$state.currentTime())+(e==="seekForward"?+i:-i),this.$state.duration()))}#o=null;#l(t,e){this.#o?.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}#d(t,e,i){this.$state.canSeek()&&(this.#o||(this.#o=this.el.querySelector("[data-media-time-slider]")),this.#o?this.#l(t,i):this.#t.remote.seeking(this.#h(t,e),t))}},Zo=["!","@","#","$","%","^","&","*","(",")"];function th(s){return s.replace(/Shift\+(\d)/g,(t,e)=>Zo[e-1])}function eh(s){for(let t of ve)if(s[t.toLowerCase()+"Key"])return!0;return!1}var Gi=class extends lt{#t;constructor(t){super(),this.#t=t}onAttach(t){let{$props:e,ariaKeys:i}=V(),n=t.getAttribute("aria-keyshortcuts");if(n){i[this.#t]=n,y||E(()=>{delete i[this.#t]});return}let r=e.keyShortcuts()[this.#t];if(r){let a=z(r)?r.join(" "):v(r)?r:r?.keys;t.setAttribute("aria-keyshortcuts",z(a)?a.join(" "):a)}}},Wi=class extends Ot{#t=-2;#e=!1;#i=k(!1);#s=k(!1);#n=null;#r=k(!0);defaultDelay=2e3;get canIdle(){return this.#r()}set canIdle(t){this.#r.set(t)}get hideOnMouseLeave(){let{hideControlsOnMouseLeave:t}=this.$props;return this.#i()||t()}set hideOnMouseLeave(t){this.#i.set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.#m(),this.#e||this.#y(!0,t,e)}hide(t=this.defaultDelay,e){this.#m(),this.#e||this.#y(!1,t,e)}pause(t){this.#e=!0,this.#m(),this.#y(!0,0,t)}resume(t){this.#e=!1,!this.$state.paused()&&this.#y(!1,this.defaultDelay,t)}onConnect(){u(this.#a.bind(this))}#a(){let{viewType:t}=this.$state;if(!this.el||!this.#r())return;if(t()==="audio"){this.show();return}u(this.#h.bind(this)),u(this.#o.bind(this));let e=this.#l.bind(this),i=this.#d.bind(this),n=this.#u.bind(this);new D(this.el).add("can-play",r=>this.show(0,r)).add("play",e).add("pause",i).add("end",n).add("auto-play-fail",i)}#h(){if(!this.el)return;let{started:t,pointer:e,paused:i}=this.$state;if(!t()||e()!=="fine")return;let n=new D(this.el),r=this.hideOnMouseLeave;(!r||!this.#s())&&u(()=>{i()||n.add("pointermove",this.#w.bind(this))}),r&&n.add("mouseenter",this.#c.bind(this)).add("mouseleave",this.#p.bind(this))}#o(){let{paused:t,started:e,autoPlayError:i}=this.$state;if(t()||i()&&!e())return;let n=this.#w.bind(this);u(()=>{if(!this.el)return;let r=this.$state.pointer(),a=r==="coarse",o=new D(this.el),h=[a?"touchend":"pointerup","keydown"];for(let c of h)o.add(c,n,{passive:!1})})}#l(t){t.triggers.hasType("ended")||(this.show(0,t),this.hide(void 0,t))}#d(t){this.show(0,t)}#u(t){let{loop:e}=this.$state;e()&&this.hide(0,t)}#c(t){this.#s.set(!1),this.show(0,t),this.hide(void 0,t)}#p(t){this.#s.set(!0),this.hide(0,t)}#m(){window.clearTimeout(this.#t),this.#t=-1}#w(t){t.MEDIA_GESTURE||this.#e||un(t)||(yi(t)&&(t.key==="Escape"?(this.el?.focus(),this.#n=null):this.#n&&(t.preventDefault(),requestAnimationFrame(()=>{this.#n?.focus(),this.#n=null}))),this.show(0,t),this.hide(this.defaultDelay,t))}#y(t,e,i){if(e===0){this.#v(t,i);return}this.#t=window.setTimeout(()=>{this.scope&&this.#v(t&&!this.#e,i)},e)}#v(t,e){this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.#n=document.activeElement,requestAnimationFrame(()=>{this.el?.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:t,trigger:e}))}},Bi=Vt.fullscreenEnabled,Ki=class extends lt{#t=!1;#e=!1;get active(){return this.#e}get supported(){return Bi}onConnect(){new D(Vt).add("fullscreenchange",this.#s.bind(this)).add("fullscreenerror",this.#n.bind(this)),E(this.#i.bind(this))}async#i(){Bi&&await this.exit()}#s(t){let e=Pi(this.el);e!==this.#e&&(e||(this.#t=!1),this.#e=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}#n(t){this.#t&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.#t=!1)}async enter(){try{return this.#t=!0,!this.el||Pi(this.el)?void 0:(dr(),Vt.requestFullscreen(this.el))}catch(t){throw this.#t=!1,t}}async exit(){if(!(!this.el||!Pi(this.el)))return dr(),Vt.exitFullscreen()}};function Pi(s){if(Vt.fullscreenElement===s)return!0;try{return s.matches(Vt.fullscreenPseudoClass)}catch{return!1}}function dr(){if(!Bi)throw Error("[vidstack] no fullscreen API")}var Be=class s extends lt{#t=k(this.#a());#e=k(!1);#i;get type(){return this.#t()}get locked(){return this.#e()}get portrait(){return this.#t().startsWith("portrait")}get landscape(){return this.#t().startsWith("landscape")}static supported=la();get supported(){return s.supported}onConnect(){if(this.supported)F(screen.orientation,"change",this.#n.bind(this));else{let t=window.matchMedia("(orientation: landscape)");t.onchange=this.#n.bind(this),E(()=>t.onchange=null)}E(this.#s.bind(this))}async#s(){this.supported&&this.#e()&&await this.unlock()}#n(t){this.#t.set(this.#a()),this.dispatch("orientation-change",{detail:{orientation:g(this.#t),lock:this.#i},trigger:t})}async lock(t){g(this.#e)||this.#i===t||(this.#r(),await screen.orientation.lock(t),this.#e.set(!0),this.#i=t)}async unlock(){g(this.#e)&&(this.#r(),this.#i=void 0,await screen.orientation.unlock(),this.#e.set(!1))}#r(){if(!this.supported)throw Error("[vidstack] no orientation API")}#a(){return y?"portrait-primary":this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}},ji=class{name="audio";target;canPlay(t){return ya(t)?y||!v(t.src)||t.type==="?"||da(this.target,t.type):!1}mediaType(){return"audio"}async load(t){if(y)throw Error("[vidstack] can not load audio provider server-side");return new(await import("./vidstack-R_ot4AhB-4CGDQPX7.mjs")).AudioProvider(this.target,t)}},$e=class{name="video";target;canPlay(t){return ba(t)?y||!v(t.src)||t.type==="?"||ua(this.target,t.type):!1}mediaType(){return"video"}async load(t){if(y)throw Error("[vidstack] can not load video provider server-side");return new(await Promise.resolve().then(function(){return hh})).VideoProvider(this.target,t)}},Qi=class s extends $e{static supported=hn();name="hls";canPlay(t){return s.supported&&he(t)}async load(t){if(y)throw Error("[vidstack] can not load hls provider server-side");return new(await import("./vidstack-BN7_0WI--M2S3JGGF.mjs")).HLSProvider(this.target,t)}},Fe=null,Ke=[],je=[];function pn(){return Fe??=new AudioContext}function ih(){let s=pn(),t=s.createGain();return t.connect(s.destination),Ke.push(t),t}function sh(s,t){let e=pn(),i=e.createMediaElementSource(s);return t&&i.connect(t),je.push(i),i}function nh(s){let t=Ke.indexOf(s);t!==-1&&(Ke.splice(t,1),s.disconnect(),Aa())}function rh(s){let t=je.indexOf(s);t!==-1&&(je.splice(t,1),s.disconnect(),Aa())}function Aa(){Fe&&Ke.length===0&&je.length===0&&Fe.close().then(()=>{Fe=null})}var zi=class{#t;#e;#i=null;#s=null;get currentGain(){return this.#i?.gain?.value??null}get supported(){return!0}constructor(t,e){this.#t=t,this.#e=e}setGain(t){let e=this.currentGain;if(t!==this.currentGain){if(t===1&&e!==1){this.removeGain();return}this.#i||(this.#i=ih(),this.#s&&this.#s.connect(this.#i)),this.#s||(this.#s=sh(this.#t,this.#i)),this.#i.gain.value=t,this.#e(t)}}removeGain(){this.#i&&(this.#s&&this.#s.connect(pn().destination),this.#r(),this.#e(null))}destroy(){this.#n(),this.#r()}#n(){if(this.#s)try{rh(this.#s)}catch{}finally{this.#s=null}}#r(){if(this.#i)try{nh(this.#i)}catch{}finally{this.#i=null}}},ah=["focus","blur","visibilitychange","pageshow","pagehide"],Yi=class{#t=k(ur());#e=k(y?"visible":document.visibilityState);#i;connect(){let t=new D(window),e=this.#s.bind(this);for(let i of ah)t.add(i,e);He&&t.add("beforeunload",i=>{this.#i=setTimeout(()=>{i.defaultPrevented||i.returnValue.length>0||(this.#t.set("hidden"),this.#e.set("hidden"))},0)})}get pageState(){return this.#t()}get visibility(){return this.#e()}#s(t){He&&window.clearTimeout(this.#i),(t.type!=="blur"||this.#t()==="active")&&(this.#t.set(ur(t)),this.#e.set(document.visibilityState=="hidden"?"hidden":"visible"))}};function ur(s){return y||s?.type==="blur"||document.visibilityState==="hidden"?"hidden":document.hasFocus()?"active":"passive"}var Qe=class{#t;#e;constructor(t){this.#e=t}start(){nt(this.#t)&&this.#i()}stop(){J(this.#t)&&window.cancelAnimationFrame(this.#t),this.#t=void 0}#i(){this.#t=window.requestAnimationFrame(()=>{nt(this.#t)||(this.#e(),this.#i())})}},Xi=class{#t;#e;#i=!1;#s=!1;#n=!1;#r=new Qe(this.#c.bind(this));#a=new Yi;#h;get#o(){return this.#t.media}constructor(t,e){this.#t=t,this.#e=e,this.#h=new D(t.media),this.#p(),this.#a.connect(),u(this.#q.bind(this)),E(this.#l.bind(this))}#l(){this.#s=!1,this.#n=!1,this.#r.stop(),this.#h.abort(),this.#y?.clear()}#d=0;#u=-1;#c(){let t=this.#o.currentTime;!(He&&t-this.#u<.35)&&this.#d!==t&&(this.#b(t),this.#d=t)}#p(){this.#f("loadstart",this.#x),this.#f("abort",this.#g),this.#f("emptied",this.#k),this.#f("error",this.#W),this.#f("volumechange",this.#_)}#m(){this.#s||(this.#f("loadeddata",this.#$),this.#f("loadedmetadata",this.#S),this.#f("canplay",this.#A),this.#f("canplaythrough",this.#R),this.#f("durationchange",this.#M),this.#f("play",this.#E),this.#f("progress",this.#F),this.#f("stalled",this.#L),this.#f("suspend",this.#U),this.#f("ratechange",this.#G),this.#s=!0)}#w(){this.#n||(this.#f("pause",this.#C),this.#f("playing",this.#O),this.#f("seeked",this.#H),this.#f("seeking",this.#N),this.#f("ended",this.#V),this.#f("waiting",this.#D),this.#n=!0)}#y=void 0;#v=void 0;#f(t,e){this.#h.add(t,e.bind(this))}#T(t){}#b(t,e){let i=Math.min(t,this.#e.$state.seekableEnd());this.#e.notify("time-change",i,e)}#x(t){if(this.#o.networkState===3){this.#g(t);return}this.#m(),this.#e.notify("load-start",void 0,t)}#g(t){this.#e.notify("abort",void 0,t)}#k(){this.#e.notify("emptied",void 0,event)}#$(t){this.#e.notify("loaded-data",void 0,t)}#S(t){this.#d=0,this.#u=-1,this.#w(),this.#e.notify("loaded-metadata",void 0,t),(on||He&&he(this.#e.$state.source()))&&this.#e.delegate.ready(this.#P(),t)}#P(){return{provider:g(this.#e.$provider),duration:this.#o.duration,buffered:this.#o.buffered,seekable:this.#o.seekable}}#E(t){this.#e.$state.canPlay&&this.#e.notify("play",void 0,t)}#C(t){this.#o.readyState===1&&!this.#i||(this.#i=!1,this.#r.stop(),this.#e.notify("pause",void 0,t))}#A(t){this.#e.delegate.ready(this.#P(),t)}#R(t){this.#e.$state.started()||this.#e.notify("can-play-through",this.#P(),t)}#O(t){this.#o.paused||(this.#i=!1,this.#e.notify("playing",void 0,t),this.#r.start())}#L(t){this.#e.notify("stalled",void 0,t),this.#o.readyState<3&&(this.#i=!0,this.#e.notify("waiting",void 0,t))}#D(t){this.#o.readyState<3&&(this.#i=!0,this.#e.notify("waiting",void 0,t))}#V(t){this.#r.stop(),this.#b(this.#o.duration,t),this.#e.notify("end",void 0,t),this.#e.$state.loop()&&yn(this.#o.controls)&&(this.#o.controls=!1)}#q(){let t=this.#e.$state.paused(),e=this.#a.visibility==="hidden";(t||e)&&F(this.#o,"timeupdate",this.#I.bind(this))}#I(t){this.#b(this.#o.currentTime,t)}#M(t){this.#e.$state.ended()&&this.#b(this.#o.duration,t),this.#e.notify("duration-change",this.#o.duration,t)}#_(t){let e={volume:this.#o.volume,muted:this.#o.muted};this.#e.notify("volume-change",e,t)}#H(t){this.#u=this.#o.currentTime,this.#b(this.#o.currentTime,t),this.#e.notify("seeked",this.#o.currentTime,t),Math.trunc(this.#o.currentTime)===Math.trunc(this.#o.duration)&&Vi(this.#o.duration)>Vi(this.#o.currentTime)&&(this.#b(this.#o.duration,t),this.#o.ended||this.#e.player.dispatch(new R("media-play-request",{trigger:t})))}#N(t){this.#e.notify("seeking",this.#o.currentTime,t)}#F(t){let e={buffered:this.#o.buffered,seekable:this.#o.seekable};this.#e.notify("progress",e,t)}#U(t){this.#e.notify("suspend",void 0,t)}#G(t){this.#e.notify("rate-change",this.#o.playbackRate,t)}#W(t){let e=this.#o.error;if(!e)return;let i={message:e.message,code:e.code,mediaError:e};this.#e.notify("error",i,t)}},Ji=class{#t;#e;get#i(){return this.#t.media.audioTracks}constructor(t,e){this.#t=t,this.#e=e,this.#i.onaddtrack=this.#s.bind(this),this.#i.onremovetrack=this.#n.bind(this),this.#i.onchange=this.#r.bind(this),F(this.#e.audioTracks,"change",this.#h.bind(this))}#s(t){let e=t.track;if(e.label==="")return;let i=e.id.toString()||`native-audio-${this.#e.audioTracks.length}`,n={id:i,label:e.label,language:e.language,kind:e.kind,selected:!1};this.#e.audioTracks[P.add](n,t),e.enabled&&(n.selected=!0)}#n(t){let e=this.#e.audioTracks.getById(t.track.id);e&&this.#e.audioTracks[P.remove](e,t)}#r(t){let e=this.#a();if(!e)return;let i=this.#e.audioTracks.getById(e.id);i&&this.#e.audioTracks[P.select](i,!0,t)}#a(){return Array.from(this.#i).find(t=>t.enabled)}#h(t){let{current:e}=t.detail;if(!e)return;let i=this.#i.getTrackById(e.id);if(i){let n=this.#a();n&&(n.enabled=!1),i.enabled=!0}}},Zi=class{constructor(t,e){this.media=t,this.ctx=e,this.audioGain=new zi(t,i=>{this.ctx.notify("audio-gain-change",i)})}scope=pi();currentSrc=null;audioGain;setup(){new Xi(this,this.ctx),"audioTracks"in this.media&&new Ji(this,this.ctx),E(()=>{this.audioGain.destroy(),this.media.srcObject=null,this.media.removeAttribute("src");for(let t of this.media.querySelectorAll("source"))t.remove();this.media.load()})}get type(){return""}setPlaybackRate(t){this.media.playbackRate=t}async play(){return this.media.play()}async pause(){return this.media.pause()}setMuted(t){this.media.muted=t}setVolume(t){this.media.volume=t}setCurrentTime(t){this.media.currentTime=t}setPlaysInline(t){T(this.media,"playsinline",t)}async loadSource({src:t,type:e},i){this.media.preload=i||"",wo(t)?(this.removeSource(),this.media.srcObject=t):(this.media.srcObject=null,v(t)?e!=="?"?this.appendSource({src:t,type:e}):(this.removeSource(),this.media.src=this.#t(t)):(this.removeSource(),this.media.src=window.URL.createObjectURL(t))),this.media.load(),this.currentSrc={src:t,type:e}}appendSource(t,e){let i=this.media.querySelector("source[data-vds]"),n=i??document.createElement("source");T(n,"src",this.#t(t.src)),T(n,"type",t.type!=="?"?t.type:e),T(n,"data-vds",""),i||this.media.append(n)}removeSource(){this.media.querySelector("source[data-vds]")?.remove()}#t(t){let{clipStartTime:e,clipEndTime:i}=this.ctx.$state,n=e(),r=i();return n>0&&r>0?`${t}#t=${n},${r}`:n>0?`${t}#t=${n}`:r>0?`${t}#t=0,${r}`:t}},ts=class{#t;#e;#i;#s=k(!1);get supported(){return this.#s()}constructor(t,e){this.#t=t,this.#e=e,this.#n()}#n(){y||!this.#t?.remote||!this.canPrompt||(this.#t.remote.watchAvailability(t=>{this.#s.set(t)}).catch(()=>{this.#s.set(!1)}),u(this.#r.bind(this)))}#r(){if(!this.#s())return;let t=["connecting","connect","disconnect"],e=this.#a.bind(this);e(),F(this.#t,"playing",e);let i=new D(this.#t.remote);for(let n of t)i.add(n,e)}async prompt(){if(!this.supported)throw Error("Not supported on this platform.");return this.type==="airplay"&&this.#t.webkitShowPlaybackTargetPicker?this.#t.webkitShowPlaybackTargetPicker():this.#t.remote.prompt()}#a(t){let e=this.#t.remote.state;if(e===this.#i)return;let i={type:this.type,state:e};this.#e.notify("remote-playback-change",i,t),this.#i=e}},es=class extends ts{type="airplay";get canPrompt(){return"WebKitPlaybackTargetAvailabilityEvent"in window}},is=class{#t;#e;constructor(t,e){this.#t=t,this.#e=e,t.textTracks.onaddtrack=this.#i.bind(this),E(this.#s.bind(this))}#i(t){let e=t.track;if(!e||oh(this.#t,e))return;let i=new Nt({id:e.id,kind:e.kind,label:e.label??"",language:e.language,type:"vtt"});i[x.native]={track:e},i[x.readyState]=2,i[x.nativeHLS]=!0;let n=0,r=a=>{if(e.cues)for(let o=n;o<e.cues.length;o++)i.addCue(e.cues[o],a),n++};r(t),e.oncuechange=r,this.#e.textTracks.add(i,t),i.setMode(e.mode,t)}#s(){this.#t.textTracks.onaddtrack=null;for(let t of this.#e.textTracks){let e=t[x.native]?.track;e?.oncuechange&&(e.oncuechange=null)}}};function oh(s,t){return Array.from(s.children).find(e=>e.track===t)}var ss=class{#t;#e;constructor(t,e){this.#t=t,this.#e=e,new D(t).add("enterpictureinpicture",this.#i.bind(this)).add("leavepictureinpicture",this.#s.bind(this))}get active(){return document.pictureInPictureElement===this.#t}get supported(){return fa(this.#t)}async enter(){return this.#t.requestPictureInPicture()}exit(){return document.exitPictureInPicture()}#i(t){this.#n(!0,t)}#s(t){this.#n(!1,t)}#n=(t,e)=>{this.#e.notify("picture-in-picture-change",t,e)}},ns=class{#t;#e;#i="inline";get mode(){return this.#i}constructor(t,e){this.#t=t,this.#e=e,F(t,"webkitpresentationmodechanged",this.#s.bind(this))}get supported(){return ma(this.#t)}async setPresentationMode(t){this.#i!==t&&this.#t.webkitSetPresentationMode(t)}#s(t){let e=this.#i;this.#i=this.#t.webkitPresentationMode,this.#e.player?.dispatch(new R("video-presentation-change",{detail:this.#i,trigger:t})),["fullscreen","picture-in-picture"].forEach(i=>{(this.#i===i||e===i)&&this.#e.notify(`${i}-change`,this.#i===i,t)})}},rs=class{#t;get active(){return this.#t.mode==="fullscreen"}get supported(){return this.#t.supported}constructor(t){this.#t=t}async enter(){this.#t.setPresentationMode("fullscreen")}async exit(){this.#t.setPresentationMode("inline")}},as=class{#t;get active(){return this.#t.mode==="picture-in-picture"}get supported(){return this.#t.supported}constructor(t){this.#t=t}async enter(){this.#t.setPresentationMode("picture-in-picture")}async exit(){this.#t.setPresentationMode("inline")}},ze=class extends Zi{$$PROVIDER_TYPE="VIDEO";get type(){return"video"}airPlay;fullscreen;pictureInPicture;constructor(t,e){super(t,e),Ut(()=>{if(this.airPlay=new es(t,e),ma(t)){let i=new ns(t,e);this.fullscreen=new rs(i),this.pictureInPicture=new as(i)}else fa(t)&&(this.pictureInPicture=new ss(t,e))},this.scope)}setup(){super.setup(),pa(this.video)&&new is(this.video,this.ctx),this.ctx.textRenderers.attachVideo(this.video),E(()=>{this.ctx.textRenderers.attachVideo(null)}),this.type==="video"&&this.ctx.notify("provider-setup",this)}get video(){return this.media}},hh=Object.freeze({__proto__:null,VideoProvider:ze});function pr(s){try{return new Intl.DisplayNames(navigator.languages,{type:"language"}).of(s)??null}catch{return null}}var ch=s=>`dash-${wi(s)}`,os=class{#t;#e;#i=null;#s=new Set;#n=null;config={};get instance(){return this.#i}constructor(t,e){this.#t=t,this.#e=e}setup(t){this.#i=t().create();let e=this.#o.bind(this);for(let i of Object.values(t.events))this.#i.on(i,e);this.#i.on(t.events.ERROR,this.#y.bind(this));for(let i of this.#s)i(this.#i);this.#e.player.dispatch("dash-instance",{detail:this.#i}),this.#i.initialize(this.#t,void 0,!1),this.#i.updateSettings({streaming:{text:{defaultEnabled:!1,dispatchForManualRendering:!0},buffer:{fastSwitchEnabled:!0}},...this.config}),this.#i.on(t.events.FRAGMENT_LOADING_STARTED,this.#v.bind(this)),this.#i.on(t.events.FRAGMENT_LOADING_COMPLETED,this.#f.bind(this)),this.#i.on(t.events.MANIFEST_LOADED,this.#w.bind(this)),this.#i.on(t.events.QUALITY_CHANGE_RENDERED,this.#m.bind(this)),this.#i.on(t.events.TEXT_TRACKS_ADDED,this.#c.bind(this)),this.#i.on(t.events.TRACK_CHANGE_RENDERED,this.#p.bind(this)),this.#e.qualities[rt.enableAuto]=this.#k.bind(this),F(this.#e.qualities,"change",this.#S.bind(this)),F(this.#e.audioTracks,"change",this.#P.bind(this)),this.#n=u(this.#a.bind(this))}#r(t){return new R(ch(t.type),{detail:t})}#a(){if(!this.#e.$state.live())return;let t=new Qe(this.#h.bind(this));return t.start(),t.stop.bind(t)}#h(){if(!this.#i)return;let t=this.#i.duration()-this.#i.time();this.#e.$state.liveSyncPosition.set(isNaN(t)?1/0:t)}#o(t){this.#e.player?.dispatch(this.#r(t))}#l=null;#d={};#u(t){let e=this.#l?.[x.native],i=(e?.track).cues;if(!e||!i)return;let n=this.#l.id,r=this.#d[n]??0,a=this.#r(t);for(let o=r;o<i.length;o++){let h=i[o];h.positionAlign||(h.positionAlign="auto"),this.#l.addCue(h,a)}this.#d[n]=i.length}#c(t){if(!this.#i)return;let e=t.tracks,i=[...this.#t.textTracks].filter(r=>"manualMode"in r),n=this.#r(t);for(let r=0;r<i.length;r++){let a=e[r],o=i[r],h=`dash-${a.kind}-${r}`,c=new Nt({id:h,label:a?.label??a.labels.find(d=>d.text)?.text??(a?.lang&&pr(a.lang))??a?.lang??void 0,language:a.lang??void 0,kind:a.kind,default:a.defaultTrack});c[x.native]={managed:!0,track:o},c[x.readyState]=2,c[x.onModeChange]=()=>{this.#i&&(c.mode==="showing"?(this.#i.setTextTrack(r),this.#l=c):(this.#i.setTextTrack(-1),this.#l=null))},this.#e.textTracks.add(c,n)}}#p(t){let{mediaType:e,newMediaInfo:i}=t;if(e==="audio"){let n=this.#e.audioTracks.getById(`dash-audio-${i.index}`);if(n){let r=this.#r(t);this.#e.audioTracks[P.select](n,!0,r)}}}#m(t){if(t.mediaType!=="video")return;let e=this.#e.qualities[t.newQuality];if(e){let i=this.#r(t);this.#e.qualities[P.select](e,!0,i)}}#w(t){if(this.#e.$state.canPlay()||!this.#i)return;let{type:e,mediaPresentationDuration:i}=t.data,n=this.#r(t);this.#e.notify("stream-type-change",e!=="static"?"live":"on-demand",n),this.#e.notify("duration-change",i,n),this.#e.qualities[rt.setAuto](!0,n);let r=this.#i.getVideoElement(),a=this.#i.getTracksForTypeFromManifest("video",t.data),o=[...new Set(a.map(l=>l.mimeType))].find(l=>l&&ua(r,l)),h=a.filter(l=>o===l.mimeType)[0],c=this.#i.getTracksForTypeFromManifest("audio",t.data),d=[...new Set(c.map(l=>l.mimeType))].find(l=>l&&da(r,l));if(c=c.filter(l=>d===l.mimeType),h.bitrateList.forEach((l,f)=>{let p={id:l.id?.toString()??`dash-bitrate-${f}`,width:l.width??0,height:l.height??0,bitrate:l.bandwidth??0,codec:h.codec,index:f};this.#e.qualities[P.add](p,n)}),J(h.index)){let l=this.#e.qualities[h.index];l&&this.#e.qualities[P.select](l,!0,n)}c.forEach((l,f)=>{let m=l.labels.find(w=>navigator.languages.some($=>w.lang&&$.toLowerCase().startsWith(w.lang.toLowerCase())))||l.labels[0],b={id:`dash-audio-${l?.index}`,label:m?.text??(l.lang&&pr(l.lang))??l.lang??"",language:l.lang??"",kind:"main",mimeType:l.mimeType,codec:l.codec,index:f};this.#e.audioTracks[P.add](b,n)}),r.dispatchEvent(new R("canplay",{trigger:n}))}#y(t){let{type:e,error:i}=t;switch(i.code){case 27:this.#b(i);break;default:this.#g(i);break}}#v(){this.#T>=0&&this.#x()}#f(t){t.mediaType==="text"&&requestAnimationFrame(this.#u.bind(this,t))}#T=-1;#b(t){this.#x(),this.#i?.play(),this.#T=window.setTimeout(()=>{this.#T=-1,this.#g(t)},5e3)}#x(){clearTimeout(this.#T),this.#T=-1}#g(t){this.#e.notify("error",{message:t.message??"",code:1,error:t})}#k(){this.#$("video",!0);let{qualities:t}=this.#e;this.#i?.setQualityFor("video",t.selectedIndex,!0)}#$(t,e){this.#i?.updateSettings({streaming:{abr:{autoSwitchBitrate:{[t]:e}}}})}#S(){let{qualities:t}=this.#e;!this.#i||t.auto||!t.selected||(this.#$("video",!1),this.#i.setQualityFor("video",t.selectedIndex,t.switch==="current"),ca&&(this.#t.currentTime=this.#t.currentTime))}#P(){if(!this.#i)return;let{audioTracks:t}=this.#e,e=this.#i.getTracksFor("audio").find(i=>t.selected&&t.selected.id===`dash-audio-${i.index}`);e&&this.#i.setCurrentTrack(e)}#E(){this.#x(),this.#l=null,this.#d={}}onInstance(t){return this.#s.add(t),()=>this.#s.delete(t)}loadSource(t){this.#E(),v(t.src)&&this.#i?.attachSource(t.src)}destroy(){this.#E(),this.#i?.destroy(),this.#i=null,this.#n?.(),this.#n=null}};function _e(s){return s instanceof Error?s:Error(typeof s=="string"?s:JSON.stringify(s))}function Rt(s,t){if(!s)throw Error("Assertion failed.")}var hs=class{#t;#e;#i;constructor(t,e,i){this.#t=t,this.#e=e,this.#i=i,this.#s()}async#s(){let t={onLoadStart:this.#n.bind(this),onLoaded:this.#r.bind(this),onLoadError:this.#a.bind(this)},e=await dh(this.#t,t);if(nt(e)&&!v(this.#t)&&(e=await lh(this.#t,t)),!e)return null;if(!window.dashjs.supportsMediaSource()){let i="[vidstack] `dash.js` is not supported in this environment";return this.#e.player.dispatch(new R("dash-unsupported")),this.#e.notify("error",{message:i,code:4}),null}return e}#n(){this.#e.player.dispatch(new R("dash-lib-load-start"))}#r(t){this.#e.player.dispatch(new R("dash-lib-loaded",{detail:t})),this.#i(t)}#a(t){let e=_e(t);this.#e.player.dispatch(new R("dash-lib-load-error",{detail:e})),this.#e.notify("error",{message:e.message,code:4,error:e})}};async function lh(s,t={}){if(!nt(s)){if(t.onLoadStart?.(),uh(s))return t.onLoaded?.(s),s;if(fr(s)){let e=s.MediaPlayer;return t.onLoaded?.(e),e}try{let e=(await s())?.default;if(fr(e))return t.onLoaded?.(e.MediaPlayer),e.MediaPlayer;if(e)t.onLoaded?.(e);else throw Error("");return e}catch(e){t.onLoadError?.(e)}}}async function dh(s,t={}){if(v(s)){t.onLoadStart?.();try{if(await vo(s),!St(window.dashjs.MediaPlayer))throw Error("");let e=window.dashjs.MediaPlayer;return t.onLoaded?.(e),e}catch(e){t.onLoadError?.(e)}}}function uh(s){return s&&s.prototype&&s.prototype!==Function}function fr(s){return s&&"MediaPlayer"in s}var ph="https://cdn.jsdelivr.net",cs=class extends ze{$$PROVIDER_TYPE="DASH";#t=null;#e=new os(this.video,this.ctx);get ctor(){return this.#t}get instance(){return this.#e.instance}static supported=ga();get type(){return"dash"}get canLiveSync(){return!0}#i=`${ph}/npm/dashjs@4.7.4/dist/dash.all.min.js`;get config(){return this.#e.config}set config(t){this.#e.config=t}get library(){return this.#i}set library(t){this.#i=t}preconnect(){v(this.#i)&&ce(this.#i)}setup(){super.setup(),new hs(this.#i,this.ctx,t=>{this.#t=t,this.#e.setup(t),this.ctx.notify("provider-setup",this);let e=g(this.ctx.$state.source);e&&this.loadSource(e)})}async loadSource(t,e){if(!v(t.src)){this.removeSource();return}this.media.preload=e||"",this.appendSource(t,"application/x-mpegurl"),this.#e.loadSource(t),this.currentSrc=t}onInstance(t){let e=this.#e.instance;return e&&t(e),this.#e.onInstance(t)}destroy(){this.#e.destroy()}},fh=Object.freeze({__proto__:null,DASHProvider:cs}),ls=class s extends $e{static supported=ga();name="dash";canPlay(t){return s.supported&&cn(t)}async load(t){if(y)throw Error("[vidstack] can not load dash provider server-side");return new(await Promise.resolve().then(function(){return fh})).DASHProvider(this.target,t)}},ds=class{name="vimeo";target;preconnect(){let t=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(let e of t)ce(e)}canPlay(t){return v(t.src)&&t.type==="video/vimeo"}mediaType(){return"video"}async load(t){if(y)throw Error("[vidstack] can not load vimeo provider server-side");return new(await import("./vidstack-BqgQkvb4-BANHC4DC.mjs")).VimeoProvider(this.target,t)}async loadPoster(t,e,i){let{resolveVimeoVideoId:n,getVimeoVideoInfo:r}=await import("./vidstack-krOAtKMi-OD4BE3CU.mjs");if(!v(t.src))return null;let{videoId:a,hash:o}=n(t.src);return a?r(a,i,o).then(h=>h?h.poster:null):null}},us=class{name="youtube";target;preconnect(){let t=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(let e of t)ce(e)}canPlay(t){return v(t.src)&&t.type==="video/youtube"}mediaType(){return"video"}async load(t){if(y)throw Error("[vidstack] can not load youtube provider server-side");return new(await import("./vidstack-DHmfHold-YUZOX6KC.mjs")).YouTubeProvider(this.target,t)}async loadPoster(t,e,i){let{findYouTubePoster:n,resolveYouTubeVideoId:r}=await import("./vidstack-Dm1xEU9Q-VO25WAHH.mjs"),a=v(t.src)&&r(t.src);return a?n(a,i):null}};function Ei(s,t){let e=String(s),i=e.length;if(i<t){let r=t-i;return`${"0".repeat(r)}${s}`}return e}function Ca(s){let t=Math.trunc(s/3600),e=Math.trunc(s%3600/60),i=Math.trunc(s%60),n=Number((s-Math.trunc(s)).toPrecision(3));return{hours:t,minutes:e,seconds:i,fraction:n}}function fn(s,{padHrs:t=null,padMins:e=null,showHrs:i=!1,showMs:n=!1}={}){let{hours:r,minutes:a,seconds:o,fraction:h}=Ca(s),c=t?Ei(r,2):r,d=e||wt(e)&&s>=3600?Ei(a,2):a,l=Ei(o,2),f=n&&h>0?`.${String(h).replace(/^0?\./,"")}`:"",p=`${d}:${l}${f}`;return r>0||i?`${c}:${p}`:p}function ps(s){let t=[],{hours:e,minutes:i,seconds:n}=Ca(s);return e>0&&t.push(`${e} hour`),i>0&&t.push(`${i} min`),(n>0||t.length===0)&&t.push(`${n} sec`),t.join(" ")}var Ai=Symbol(0),mh=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],gh={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:Xo,storage:null},Ye=class extends Ot{#t;#e;constructor(t,e){super(),this.#t=t,this.#e=e}async onAttach(t){if(y)return;let e=this.$props[this.#t]();if(e==="eager")requestAnimationFrame(this.#e);else if(e==="idle")Pn(this.#e);else if(e==="visible"){let i,n=new IntersectionObserver(r=>{this.scope&&r[0].isIntersecting&&(i?.(),i=void 0,this.#e())});n.observe(t),i=E(()=>n.disconnect())}}},fs=class{#t;#e;constructor(t,e){this.#t=t,this.#e=e}notify(t,...e){y||this.#t(new R(t,{detail:e?.[0],trigger:e?.[1]}))}async ready(t,e){if(!y)return le(async()=>{let{logger:i}=this.#e,{autoPlay:n,canPlay:r,started:a,duration:o,seekable:h,buffered:c,remotePlaybackInfo:d,playsInline:l,savedState:f,source:p}=this.#e.$state;if(r())return;let m={duration:t?.duration??o(),seekable:t?.seekable??h(),buffered:t?.buffered??c(),provider:this.#e.$provider()};this.notify("can-play",m,e),bt();let b=this.#e.$provider(),{storage:w,qualities:$}=this.#e,{muted:C,volume:A,clipStartTime:M,playbackRate:O}=this.#e.$props;await w?.onLoad?.(p());let Q=f()?.currentTime,H=f()?.paused,et=await w?.getTime(),it=Q??et??M(),st=H===!1||H!==!0&&!a()&&n();if(b){b.setVolume(await w?.getVolume()??A()),b.setMuted(C()||!!await w?.getMuted());let W=await w?.getAudioGain()??1;W>1&&b.audioGain?.setGain?.(W),b.setPlaybackRate?.(await w?.getPlaybackRate()??O()),b.setPlaysInline?.(l()),it>0&&b.setCurrentTime(it)}let X=await w?.getVideoQuality();if(X&&$.length){let W=null,pt=1/0;for(let _ of $){let $t=Math.abs(X.width-_.width)+Math.abs(X.height-_.height)+(X.bitrate?Math.abs(X.bitrate-(_.bitrate??0)):0);$t<pt&&(W=_,pt=$t)}W&&(W.selected=!0)}r()&&st?await this.#i(e):et&&et>0&&this.notify("started",void 0,e),d.set(null)})}async#i(t){let{player:e,$state:{autoPlaying:i,muted:n}}=this.#e;i.set(!0);let r=new R("auto-play-attempt",{trigger:t});try{await e.play(r)}catch{}}},ms=class{#t=new Map;enqueue(t,e){this.#t.set(t,e)}serve(t){let e=this.peek(t);return this.#t.delete(t),e}peek(t){return this.#t.get(t)}delete(t){this.#t.delete(t)}clear(){this.#t.clear()}},Xe=class{#t=!1;#e=Pe();#i=new Map;get size(){return this.#i.size}get isServing(){return this.#t}async waitForFlush(){this.#t||await this.#e.promise}enqueue(t,e){if(this.#t){e();return}this.#i.delete(t),this.#i.set(t,e)}serve(t){this.#i.get(t)?.(),this.#i.delete(t)}start(){this.#s(),this.#t=!0,this.#i.size>0&&this.#s()}stop(){this.#t=!1}reset(){this.stop(),this.#i.clear(),this.#n()}#s(){for(let t of this.#i.keys())this.serve(t);this.#n()}#n(){this.#e.resolve(),this.#e=Pe()}};function yh(s){return s?"true":"false"}function K(s){return()=>yh(s())}function bh(){return typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches}var gs=class extends Ot{#t;#e;#i;controls;#s;#n;#r;#a=new Xe;constructor(t,e,i){super(),this.#t=t,this.#e=e,this.#i=i,this.#r=i.$provider,this.controls=new Wi,this.#s=new Ki,this.#n=new Be}onAttach(){this.listen("fullscreen-change",this.#x.bind(this))}onConnect(t){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),i=new D(t),n=this.#l.bind(this);for(let r of e)r.startsWith("media-")&&i.add(r,n);this.#h(),u(this.#o.bind(this)),u(this.#m.bind(this)),u(this.#w.bind(this)),u(this.#y.bind(this)),u(this.#v.bind(this)),u(this.#f.bind(this)),u(this.#T.bind(this))}onDestroy(){try{let t=this.createEvent("destroy"),{pictureInPicture:e,fullscreen:i}=this.$state;i()&&this.exitFullscreen("prefer-media",t),e()&&this.exitPictureInPicture(t)}catch{}this.#a.reset()}#h(){let{load:t}=this.$props,{canLoad:e}=this.$state;if(t()!=="play"||e())return;let i=this.listen("media-play-request",n=>{this.#d(n),i()})}#o(){let t=this.#r(),e=this.$state.canPlay();return t&&e&&this.#a.start(),()=>{this.#a.stop()}}#l(t){t.stopPropagation(),!t.defaultPrevented&&this[t.type]&&(g(this.#r)?this[t.type](t):this.#a.enqueue(t.type,()=>{g(this.#r)&&this[t.type](t)}))}async play(t){if(y)return;let{canPlay:e,paused:i,autoPlaying:n}=this.$state;if(this.#d(t)||!g(i))return;t&&this.#e.queue.enqueue("media-play-request",t);let r=g(n);try{let a=g(this.#r);return Ci(a,g(e)),wh(r),await a.play()}catch(a){let o=this.createEvent("play-fail",{detail:_e(a),trigger:t});throw o.autoPlay=r,this.#t.handle(o),a}}#d(t){let{load:e}=this.$props,{canLoad:i}=this.$state;if(e()==="play"&&!i()){let n=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(n),this.#a.enqueue("media-play-request",async()=>{try{await this.play(n)}catch{}}),!0}return!1}async pause(t){if(y)return;let{canPlay:e,paused:i}=this.$state;if(!g(i)){t&&this.#e.queue.enqueue("media-pause-request",t);try{let n=g(this.#r);return Ci(n,g(e)),await n.pause()}catch(n){throw this.#e.queue.delete("media-pause-request"),n}}}setAudioGain(t,e){let{audioGain:i,canSetAudioGain:n}=this.$state;if(i()===t)return;let r=this.#r();if(!r?.audioGain||!n())throw Error("[vidstack] audio gain api not available");e&&this.#e.queue.enqueue("media-audio-gain-change-request",e),r.audioGain.setGain(t)}seekToLiveEdge(t){if(y)return;let{canPlay:e,live:i,liveEdge:n,canSeek:r,liveSyncPosition:a,seekableEnd:o,userBehindLiveEdge:h}=this.$state;if(h.set(!1),g(()=>!i()||n()||!r()))return;let c=g(this.#r);Ci(c,g(e)),t&&this.#e.queue.enqueue("media-seek-request",t);let d=o()-2;c.setCurrentTime(Math.min(d,a()??d))}#u=!1;async enterFullscreen(t="prefer-media",e){if(y)return;let i=this.#c(t);if(mr(t,i),!i.active)return g(this.$state.pictureInPicture)&&(this.#u=!0,await this.exitPictureInPicture(e)),e&&this.#e.queue.enqueue("media-enter-fullscreen-request",e),i.enter()}async exitFullscreen(t="prefer-media",e){if(y)return;let i=this.#c(t);if(mr(t,i),!!i.active){e&&this.#e.queue.enqueue("media-exit-fullscreen-request",e);try{let n=await i.exit();return this.#u&&g(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),n}finally{this.#u=!1}}}#c(t){let e=g(this.#r);return t==="prefer-media"&&this.#s.supported||t==="media"?this.#s:e?.fullscreen}async enterPictureInPicture(t){if(!y&&(this.#p(),!this.$state.pictureInPicture()))return t&&this.#e.queue.enqueue("media-enter-pip-request",t),await this.#r().pictureInPicture.enter()}async exitPictureInPicture(t){if(!y&&(this.#p(),!!this.$state.pictureInPicture()))return t&&this.#e.queue.enqueue("media-exit-pip-request",t),await this.#r().pictureInPicture.exit()}#p(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}#m(){this.controls.defaultDelay=this.$props.controlsDelay()}#w(){let{canSetAudioGain:t}=this.$state,e=!!this.#r()?.audioGain?.supported;t.set(e)}#y(){let{canAirPlay:t}=this.$state,e=!!this.#r()?.airPlay?.supported;t.set(e)}#v(){let{canGoogleCast:t,source:e}=this.$state,i=ca&&!on&&bo(e());t.set(i)}#f(){let{canFullscreen:t}=this.$state,e=this.#s.supported||!!this.#r()?.fullscreen?.supported;t.set(e)}#T(){let{canPictureInPicture:t}=this.$state,e=!!this.#r()?.pictureInPicture?.supported;t.set(e)}async"media-airplay-request"(t){try{await this.requestAirPlay(t)}catch{}}async requestAirPlay(t){try{let e=this.#r()?.airPlay;if(!e?.supported)throw Error("No AirPlay adapter.");return t&&this.#e.queue.enqueue("media-airplay-request",t),await e.prompt()}catch(e){throw this.#e.queue.delete("media-airplay-request"),e}}async"media-google-cast-request"(t){try{await this.requestGoogleCast(t)}catch{}}#b;async requestGoogleCast(t){try{let{canGoogleCast:e}=this.$state;if(!g(e)){let n=Error("Cast not available.");throw n.code="CAST_NOT_AVAILABLE",n}if(ce("https://www.gstatic.com"),!this.#b){let n=await import("./vidstack-CQQ1xKSy-JCF6WM5M.mjs").then(function(r){return r.loader});this.#b=new n.GoogleCastLoader}await this.#b.prompt(this.#i),t&&this.#e.queue.enqueue("media-google-cast-request",t);let i=g(this.$state.remotePlaybackState)!=="disconnected";i&&this.$state.savedState.set({paused:g(this.$state.paused),currentTime:g(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(i?this.#b:null)}catch(e){throw this.#e.queue.delete("media-google-cast-request"),e}}"media-clip-start-change-request"(t){let{clipStartTime:e}=this.$state;e.set(t.detail)}"media-clip-end-change-request"(t){let{clipEndTime:e}=this.$state;e.set(t.detail),this.dispatch("duration-change",{detail:t.detail,trigger:t})}"media-duration-change-request"(t){let{providedDuration:e,clipEndTime:i}=this.$state;e.set(t.detail),i()<=0&&this.dispatch("duration-change",{detail:t.detail,trigger:t})}"media-audio-track-change-request"(t){let{logger:e,audioTracks:i}=this.#i;if(i.readonly)return;let n=t.detail,r=i[n];if(r){let a=t.type;this.#e.queue.enqueue(a,t),r.selected=!0}}async"media-enter-fullscreen-request"(t){try{await this.enterFullscreen(t.detail,t)}catch(e){this.#g(e,t)}}async"media-exit-fullscreen-request"(t){try{await this.exitFullscreen(t.detail,t)}catch(e){this.#g(e,t)}}async#x(t){let e=g(this.$props.fullscreenOrientation),i=t.detail;if(!(nt(e)||e==="none"||!this.#n.supported))if(i){if(this.#n.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.#n.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}#g(t,e){this.#t.handle(this.createEvent("fullscreen-error",{detail:_e(t)}))}async"media-orientation-lock-request"(t){let e=t.type;try{this.#e.queue.enqueue(e,t),await this.#n.lock(t.detail)}catch{this.#e.queue.delete(e)}}async"media-orientation-unlock-request"(t){let e=t.type;try{this.#e.queue.enqueue(e,t),await this.#n.unlock()}catch{this.#e.queue.delete(e)}}async"media-enter-pip-request"(t){try{await this.enterPictureInPicture(t)}catch(e){this.#k(e,t)}}async"media-exit-pip-request"(t){try{await this.exitPictureInPicture(t)}catch(e){this.#k(e,t)}}#k(t,e){this.#t.handle(this.createEvent("picture-in-picture-error",{detail:_e(t)}))}"media-live-edge-request"(t){let{live:e,liveEdge:i,canSeek:n}=this.$state;if(!(!e()||i()||!n())){this.#e.queue.enqueue("media-seek-request",t);try{this.seekToLiveEdge()}catch{this.#e.queue.delete("media-seek-request")}}}async"media-loop-request"(t){try{this.#e.looping=!0,this.#e.replaying=!0,await this.play(t)}catch{this.#e.looping=!1}}"media-user-loop-change-request"(t){this.$state.userPrefersLoop.set(t.detail)}async"media-pause-request"(t){if(!this.$state.paused())try{await this.pause(t)}catch{}}async"media-play-request"(t){if(this.$state.paused())try{await this.play(t)}catch{}}"media-rate-change-request"(t){let{playbackRate:e,canSetPlaybackRate:i}=this.$state;if(e()===t.detail||!i())return;let n=this.#r();n?.setPlaybackRate&&(this.#e.queue.enqueue("media-rate-change-request",t),n.setPlaybackRate(t.detail))}"media-audio-gain-change-request"(t){try{this.setAudioGain(t.detail,t)}catch{}}"media-quality-change-request"(t){let{qualities:e,storage:i,logger:n}=this.#i;if(e.readonly)return;this.#e.queue.enqueue("media-quality-change-request",t);let r=t.detail;if(r<0)e.autoSelect(t),t.isOriginTrusted&&i?.setVideoQuality?.(null);else{let a=e[r];a&&(a.selected=!0,t.isOriginTrusted&&i?.setVideoQuality?.({id:a.id,width:a.width,height:a.height,bitrate:a.bitrate}))}}"media-pause-controls-request"(t){let e=t.type;this.#e.queue.enqueue(e,t),this.controls.pause(t)}"media-resume-controls-request"(t){let e=t.type;this.#e.queue.enqueue(e,t),this.controls.resume(t)}"media-seek-request"(t){let{canSeek:e,ended:i,live:n,seekableEnd:r,userBehindLiveEdge:a}=this.$state,o=t.detail;i()&&(this.#e.replaying=!0);let h=t.type;this.#e.seeking=!1,this.#e.queue.delete(h);let c=Ta(o,this.$state);!Number.isFinite(c)||!e()||(this.#e.queue.enqueue(h,t),this.#r().setCurrentTime(c),n()&&t.isOriginTrusted&&Math.abs(r()-c)>=2&&a.set(!0))}"media-seeking-request"(t){let e=t.type;this.#e.queue.enqueue(e,t),this.$state.seeking.set(!0),this.#e.seeking=!0}"media-start-loading"(t){if(this.$state.canLoad())return;let e=t.type;this.#e.queue.enqueue(e,t),this.#t.handle(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;let e=t.type;this.#e.queue.enqueue(e,t),this.#t.handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){let{index:e,mode:i}=t.detail,n=this.#i.textTracks[e];if(n){let r=t.type;this.#e.queue.enqueue(r,t),n.setMode(i,t)}}"media-mute-request"(t){if(this.$state.muted())return;let e=t.type;this.#e.queue.enqueue(e,t),this.#r().setMuted(!0)}"media-unmute-request"(t){let{muted:e,volume:i}=this.$state;if(!e())return;let n=t.type;this.#e.queue.enqueue(n,t),this.#i.$provider().setMuted(!1),i()===0&&(this.#e.queue.enqueue(n,t),this.#r().setVolume(.25))}"media-volume-change-request"(t){let{muted:e,volume:i}=this.$state,n=t.detail;if(i()===n)return;let r=t.type;this.#e.queue.enqueue(r,t),this.#r().setVolume(n),n>0&&e()&&(this.#e.queue.enqueue(r,t),this.#r().setMuted(!1))}#$(t,e,i){}};function Ci(s,t){if(!(s&&t))throw Error("[vidstack] media not ready")}function mr(s,t){if(!t?.supported)throw Error("[vidstack] no fullscreen support")}function wh(s){if(!(!bh()||!s))throw Error("[vidstack] autoplay blocked")}var ys=class{seeking=!1;looping=!1;replaying=!1;queue=new ms},vh=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]),bs=class extends Ot{#t;#e;#i=new Map;#s=!1;#n=[];#r=[-1,-1];#a=!1;#h;constructor(t,e){super(),this.#t=t,this.#e=e}onAttach(t){t.setAttribute("aria-busy","true"),new D(this).add("fullscreen-change",this["fullscreen-change"].bind(this)).add("fullscreen-error",this["fullscreen-error"].bind(this)).add("orientation-change",this["orientation-change"].bind(this))}onConnect(t){u(this.#E.bind(this)),this.#p(),this.#m(),this.#w(),this.#l(),E(this.#d.bind(this))}onDestroy(){let{audioTracks:t,qualities:e,textTracks:i}=this.#e;t[P.reset](),e[P.reset](),i[P.reset](),this.#S()}handle(t){if(!this.scope)return;let e=t.type;le(()=>this[t.type]?.(t)),y||(vh.has(e)&&this.#i.set(e,t),this.dispatch(t))}#o=!1;#l(){this.#o&&(requestAnimationFrame(()=>{this.scope&&this.#e.remote.play(new R("dom-connect"))}),this.#o=!1)}#d(){this.#o||(this.#o=!this.$state.paused(),this.#e.$provider()?.pause())}#u(){this.#M(),this.#s=!1,this.#t.replaying=!1,this.#t.looping=!1,this.#a=!1,this.#h=void 0,this.#i.clear()}#c(t,e){let i=this.#t.queue.serve(t);i&&(e.request=i,e.triggers.add(i))}#p(){this.#y(),this.#v();let t=this.#e.textTracks;new D(t).add("add",this.#y.bind(this)).add("remove",this.#y.bind(this)).add("mode-change",this.#v.bind(this))}#m(){let t=this.#e.qualities;new D(t).add("add",this.#b.bind(this)).add("remove",this.#b.bind(this)).add("change",this.#x.bind(this)).add("auto-change",this.#g.bind(this)).add("readonly-change",this.#P.bind(this))}#w(){let t=this.#e.audioTracks;new D(t).add("add",this.#f.bind(this)).add("remove",this.#f.bind(this)).add("change",this.#T.bind(this))}#y(t){let{textTracks:e}=this.$state;e.set(this.#e.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}#v(t){t&&this.#c("media-text-track-change-request",t);let e=this.#e.textTracks.selected,{textTrack:i}=this.$state;i()!==e&&(i.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}#f(t){let{audioTracks:e}=this.$state;e.set(this.#e.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}#T(t){let{audioTrack:e}=this.$state;e.set(this.#e.audioTracks.selected),t&&this.#c("media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}#b(t){let{qualities:e}=this.$state;e.set(this.#e.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}#x(t){let{quality:e}=this.$state;e.set(this.#e.qualities.selected),t&&this.#c("media-quality-change-request",t),this.dispatch("quality-change",{detail:e(),trigger:t})}#g(){let{qualities:t}=this.#e,e=t.auto;this.$state.autoQuality.set(e),e||this.#S()}#k=null;#$(){this.#S(),this.#k=u(()=>{let{qualities:t}=this.#e,{mediaWidth:e,mediaHeight:i}=this.$state,n=e(),r=i();if(n===0||r===0)return;let a=null,o=1/0;for(let h of t){let c=Math.abs(h.width-n)+Math.abs(h.height-r);c<o&&(o=c,a=h)}a&&t[P.select](a,!0,new R("resize",{detail:{width:n,height:r}}))})}#S(){this.#k?.(),this.#k=null}#P(){this.$state.canSetQuality.set(!this.#e.qualities.readonly)}#E(){let{canSetVolume:t,isGoogleCastConnected:e}=this.$state;if(e()){t.set(!1);return}no().then(t.set)}"provider-change"(t){let e=this.#e.$provider(),i=t.detail;e?.type!==i?.type&&(e?.destroy?.(),e?.scope?.dispose(),this.#e.$provider.set(t.detail),e&&t.detail===null&&this.#A(t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),this.#u()}"can-load"(t){this.$state.canLoad.set(!0),this.#i.set("can-load",t),this.#e.textTracks[x.canLoad](),this.#c("media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),this.#i.set("can-load-poster",t),this.#c("media-poster-start-loading",t)}"media-type-change"(t){let e=this.#i.get("source-change");e&&t.triggers.add(e);let i=this.$state.viewType();this.$state.mediaType.set(t.detail);let n=this.$state.providedViewType(),r=n==="unknown"?t.detail:n;i!==r&&(y?this.$state.inferredViewType.set(r):setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:r,trigger:t}))})},0))}"stream-type-change"(t){let e=this.#i.get("source-change");e&&t.triggers.add(e);let{streamType:i,inferredStreamType:n}=this.$state;n.set(t.detail),t.detail=i()}"rate-change"(t){let{storage:e}=this.#e,{canPlay:i}=this.$state;this.$state.playbackRate.set(t.detail),this.#c("media-rate-change-request",t),i()&&e?.setPlaybackRate?.(t.detail)}"remote-playback-change"(t){let{remotePlaybackState:e,remotePlaybackType:i}=this.$state,{type:n,state:r}=t.detail,a=r==="connected";i.set(n),e.set(r);let o=n==="airplay"?"media-airplay-request":"media-google-cast-request";if(a)this.#c(o,t);else{let h=this.#t.queue.peek(o);h&&(t.request=h,t.triggers.add(h))}}"sources-change"(t){let e=this.$state.sources(),i=t.detail;this.$state.sources.set(i),this.#C(e,i,t)}#C(t,e,i){let{qualities:n}=this.#e,r=!1,a=!1;for(let o of t){if(!Oi(o))continue;if(!e.some(c=>c.src===o.src)){let c=n.getBySrc(o.src);c&&(n[P.remove](c,i),a=!0)}}a&&!n.length&&(this.$state.savedState.set(null),n[P.reset](i));for(let o of e){if(!Oi(o)||n.getBySrc(o.src))continue;let h={id:o.id??o.height+"p",bitrate:null,codec:null,...o,selected:!1};n[P.add](h,i),r=!0}r&&!n[rt.enableAuto]&&(this.#$(),n[rt.enableAuto]=this.#$.bind(this),n[rt.setAuto](!0,i))}"source-change"(t){t.isQualityChange=t.originEvent?.type==="quality-change";let e=t.detail;this.#A(t,t.isQualityChange),this.#i.set(t.type,t),this.$state.source.set(e),this.el?.setAttribute("aria-busy","true")}#A(t,e=!1){let{audioTracks:i,qualities:n}=this.#e;if(!e){this.#n=[],this.#r=[-1,-1],i[P.reset](t),n[P.reset](t),hr(this.$state,e),this.#u();return}hr(this.$state,e),this.#u()}abort(t){let e=this.#i.get("source-change");e&&t.triggers.add(e);let i=this.#i.get("can-load");i&&!t.triggers.hasType("can-load")&&t.triggers.add(i)}"load-start"(t){let e=this.#i.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);let e=this.#i.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){let e=this.#i.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){let e=this.#i.get("load-start");e&&t.triggers.add(e)}"can-play"(t){let e=this.#i.get("loaded-metadata");e&&t.triggers.add(e),this.#R(t.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(t){this.#R(t.detail);let e=this.#i.get("can-play");e&&t.triggers.add(e)}#R(t){let{seekable:e,buffered:i,intrinsicDuration:n,canPlay:r}=this.$state;r.set(!0),i.set(t.buffered),e.set(t.seekable);let a=Yt(t.seekable)??1/0;n.set(a)}"duration-change"(t){let{live:e,intrinsicDuration:i,providedDuration:n,clipEndTime:r,ended:a}=this.$state,o=t.detail;if(!e()){let h=Number.isNaN(o)?0:o;i.set(h),a()&&this.#D(t)}(n()>0||r()>0)&&t.stopImmediatePropagation()}progress(t){let{buffered:e,seekable:i}=this.$state,{buffered:n,seekable:r}=t.detail,a=Yt(n),o=n.length!==e().length,h=a!==Yt(e()),c=Yt(r),d=r.length!==i().length,l=c!==Yt(i());(o||h)&&e.set(n),(d||l)&&i.set(r)}play(t){let{paused:e,autoPlayError:i,ended:n,autoPlaying:r,playsInline:a,pointer:o,muted:h,viewType:c,live:d,userBehindLiveEdge:l}=this.$state;if(this.#O(),!e()){t.stopImmediatePropagation();return}t.autoPlay=r();let f=this.#i.get("waiting");f&&t.triggers.add(f),this.#c("media-play-request",t),this.#i.set("play",t),e.set(!1),i.set(null),t.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:h()},trigger:t})),r.set(!1)),(n()||this.#t.replaying)&&(this.#t.replaying=!1,n.set(!1),this.handle(this.createEvent("replay",{trigger:t}))),!a()&&c()==="video"&&o()==="coarse"&&this.#e.remote.enterFullscreen("prefer-media",t),d()&&!l()&&this.#e.remote.seekToLiveEdge(t)}#O(t){if(!g(this.#e.$provider))return;let{ended:i,seekableStart:n,clipEndTime:r,currentTime:a,realCurrentTime:o,duration:h}=this.$state,c=i()||o()<n()||r()>0&&o()>=r()||Math.abs(a()-h())<.1;return c&&this.dispatch("media-seek-request",{detail:n(),trigger:t}),c}"play-fail"(t){let{muted:e,autoPlaying:i}=this.$state,n=this.#i.get("play");n&&t.triggers.add(n),this.#c("media-play-request",t);let{paused:r,playing:a}=this.$state;r.set(!0),a.set(!1),this.#u(),this.#i.set("play-fail",t),t.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:e(),error:t.detail},trigger:t})),i.set(!1))}playing(t){let e=this.#i.get("play"),i=this.#i.get("seeked");e?t.triggers.add(e):i&&t.triggers.add(i),setTimeout(()=>this.#u(),0);let{paused:n,playing:r,live:a,liveSyncPosition:o,seekableEnd:h,started:c,currentTime:d,seeking:l,ended:f}=this.$state;if(n.set(!1),r.set(!0),l.set(!1),f.set(!1),this.#t.looping){this.#t.looping=!1;return}if(a()&&!c()&&d()===0){let p=o()??h()-2;Number.isFinite(p)&&this.#e.$provider().setCurrentTime(p)}this.started(t)}started(t){let{started:e}=this.$state;e()||(e.set(!0),this.handle(this.createEvent("started",{trigger:t})))}pause(t){this.el?.isConnected||(this.#o=!0),this.#c("media-pause-request",t);let e=this.#i.get("seeked");e&&t.triggers.add(e);let{paused:i,playing:n}=this.$state;i.set(!0),n.set(!1),this.#s&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:t})),this.#s=!1},0),this.#u()}"time-change"(t){if(this.#t.looping){t.stopImmediatePropagation();return}let{waiting:e,played:i,clipEndTime:n,realCurrentTime:r,currentTime:a}=this.$state,o=t.detail,h=n();r.set(o),this.#L(),e.set(!1);for(let c of this.#e.textTracks)c[x.updateActiveCues](o,t);h>0&&o>=h&&(this.#s=!0,this.dispatch("media-pause-request",{trigger:t})),this.#V(),this.dispatch("time-update",{detail:{currentTime:a(),played:i()},trigger:t})}#L(){let{currentTime:t,played:e,paused:i}=this.$state;i()||(this.#r=ho(this.#n,this.#r,t()),e.set(new ae(this.#n)))}#D(t){let{clipStartTime:e,clipEndTime:i,duration:n}=this.$state;e()>0||i()>0||this.handle(this.createEvent("time-change",{detail:n(),trigger:t}))}#V(){let{storage:t}=this.#e,{canPlay:e,realCurrentTime:i}=this.$state;e()&&t?.setTime?.(i())}"audio-gain-change"(t){let{storage:e}=this.#e,{canPlay:i,audioGain:n}=this.$state;n.set(t.detail),this.#c("media-audio-gain-change-request",t),i()&&e?.setAudioGain?.(n())}"volume-change"(t){let{storage:e}=this.#e,{volume:i,muted:n,canPlay:r}=this.$state,a=t.detail;i.set(a.volume),n.set(a.muted||a.volume===0),this.#c("media-volume-change-request",t),this.#c(a.muted?"media-mute-request":"media-unmute-request",t),r()&&(e?.setVolume?.(i()),e?.setMuted?.(n()))}seeking=It(t=>{let{seeking:e,realCurrentTime:i,paused:n}=this.$state;e.set(!0),i.set(t.detail),this.#c("media-seeking-request",t),n()&&(this.#h=t,this.#q()),this.#r=[-1,-1]},150,{leading:!0});seeked(t){let{seeking:e,currentTime:i,realCurrentTime:n,paused:r,seekableEnd:a,ended:o,live:h}=this.$state;if(this.#t.seeking)e.set(!0),t.stopImmediatePropagation();else if(e()){let c=this.#i.get("waiting");c&&t.triggers.add(c);let d=this.#i.get("seeking");d&&!t.triggers.has(d)&&t.triggers.add(d),r()&&this.#M(),e.set(!1),n.set(t.detail),this.#c("media-seek-request",t);let l=t?.originEvent;l?.isTrusted&&!(l instanceof MessageEvent)&&!/seek/.test(l.type)&&this.started(t)}h()||(Math.floor(i())!==Math.floor(a())?o.set(!1):this.end(t))}waiting(t){this.#a||this.#t.seeking||(t.stopImmediatePropagation(),this.#h=t,this.#q())}#q=Ee(()=>{if(!this.#h)return;this.#a=!0;let{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);let i=this.createEvent("waiting",{trigger:this.#h});this.#i.set("waiting",i),this.dispatch(i),this.#h=void 0,this.#a=!1},300);end(t){let{loop:e,ended:i}=this.$state;if(!(!e()&&i())){if(e()){setTimeout(()=>{requestAnimationFrame(()=>{this.#O(t),this.dispatch("media-loop-request",{trigger:t})})},10);return}setTimeout(()=>this.#I(t),0)}}#I(t){let{storage:e}=this.#e,{paused:i,seeking:n,ended:r,duration:a}=this.$state;this.#D(t),i()||this.dispatch("pause",{trigger:t}),n()&&this.dispatch("seeked",{detail:a(),trigger:t}),r.set(!0),this.#u(),e?.setTime?.(a(),!0),this.dispatch("ended",{trigger:t})}#M(){this.#q.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){let e=t.detail;this.$state.fullscreen.set(e),this.#c(e?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){this.#c("media-enter-fullscreen-request",t),this.#c("media-exit-fullscreen-request",t)}"orientation-change"(t){let e=t.detail.lock;this.#c(e?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){let e=t.detail;this.$state.pictureInPicture.set(e),this.#c(e?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){this.#c("media-enter-pip-request",t),this.#c("media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}},ws=class extends Ot{onSetup(){if(this.#t(),y)return;let t=[this.#s,this.#r,this.#c,this.#p,this.#h,this.#l,this.#d,this.#m,this.#y,this.#w,this.#a,this.#u,this.#o,this.#e,this.#n];for(let e of t)u(e.bind(this))}#t(){let t={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},e=new Set(["currentTime","paused","playbackRate","volume"]);for(let i of Object.keys(this.$props))e.has(i)||this.$state[t[i]??i]?.set(this.$props[i]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}#e(){let{viewType:t,streamType:e,title:i,poster:n,loop:r}=this.$props,a=this.$state;a.providedPoster.set(n()),a.providedStreamType.set(e()),a.providedViewType.set(t()),a.providedTitle.set(i()),a.providedLoop.set(r())}#i(){}#s(){let{artist:t,artwork:e}=this.$props;this.$state.artist.set(t()),this.$state.artwork.set(e())}#n(){let{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}#r(){let t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})}#a(){let t=this.$state.loop();this.dispatch("loop-change",{detail:t})}#h(){let t=this.$props.controls();this.$state.controls.set(t)}#o(){let{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}#l(){let t=this.$props.crossOrigin()??this.$props.crossorigin(),e=t===!0?"":t;this.$state.crossOrigin.set(e)}#d(){let{duration:t}=this.$props;this.dispatch("media-duration-change-request",{detail:t()})}#u(){let t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})}#c(){let{clipStartTime:t}=this.$props;this.dispatch("media-clip-start-change-request",{detail:t()})}#p(){let{clipEndTime:t}=this.$props;this.dispatch("media-clip-end-change-request",{detail:t()})}#m(){this.dispatch("live-change",{detail:this.$state.live()})}#w(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}#y(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}},gr=["play","pause","seekforward","seekbackward","seekto"],vs=class extends Ot{onConnect(){u(this.#e.bind(this)),u(this.#i.bind(this));let t=this.#s.bind(this);for(let e of gr)navigator.mediaSession.setActionHandler(e,t);E(this.#t.bind(this))}#t(){for(let t of gr)navigator.mediaSession.setActionHandler(t,null)}#e(){let{title:t,artist:e,artwork:i,poster:n}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:t(),artist:e(),artwork:i()??[{src:n()}]})}#i(){let{canPlay:t,paused:e}=this.$state;navigator.mediaSession.playbackState=t()?e()?"paused":"playing":"none"}#s(t){let e=new R("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:e});break;case"pause":this.dispatch("media-pause-request",{trigger:e});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:J(t.seekTime)?t.seekTime:this.$state.currentTime()+(t.seekOffset??(t.action==="seekforward"?10:-10)),trigger:e});break}}},Je=k(!1);y||(F(document,"pointerdown",()=>{Je.set(!1)}),F(document,"keydown",s=>{s.metaKey||s.altKey||s.ctrlKey||Je.set(!0)}));var ot=class extends lt{#t=k(!1);onConnect(t){u(()=>{let e=new D(t);if(!Je()){this.#t.set(!1),Ie(t,!1),e.add("pointerenter",this.#s.bind(this)).add("pointerleave",this.#n.bind(this));return}let i=document.activeElement===t;this.#t.set(i),Ie(t,i),e.add("focus",this.#e.bind(this)).add("blur",this.#i.bind(this))})}focused(){return this.#t()}#e(){this.#t.set(!0),Ie(this.el,!0)}#i(){this.#t.set(!1),Ie(this.el,!1)}#s(){yr(this.el,!0)}#n(){yr(this.el,!1)}};function Ie(s,t){T(s,"data-focus",t),T(s,"data-hocus",t)}function yr(s,t){T(s,"data-hocus",t),T(s,"data-hover",t)}var Ze=class s extends S{static props=gh;static state=ln;#t;#e;#i;canPlayQueue=new Xe;remoteControl;get#s(){return this.#t.$provider()}get#n(){return this.$props}constructor(){super(),new ws;let t={player:this,qualities:new Hi,audioTracks:new Mi,storage:null,$provider:k(null),$providerSetup:k(!1),$props:this.$props,$state:this.$state};t.remote=this.remoteControl=new Di(void 0),t.remote.setPlayer(this),t.textTracks=new _i,t.textTracks[x.crossOrigin]=this.$state.crossOrigin,t.textRenderers=new Fi(t),t.ariaKeys={},this.#t=t,ct(xa,t),this.orientation=new Be,new ot,new Ui(t);let e=new ys;this.#e=new bs(e,t),this.#i=new gs(this.#e,e,t),t.delegate=new fs(this.#e.handle.bind(this.#e),t),t.notify=t.delegate.notify.bind(t.delegate),typeof navigator<"u"&&"mediaSession"in navigator&&new vs,new Ye("load",this.startLoading.bind(this)),new Ye("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){this.#l(),u(this.#o.bind(this)),u(this.#w.bind(this)),u(this.#p.bind(this)),u(this.#T.bind(this)),u(this.#v.bind(this)),u(this.#k.bind(this)),u(this.#x.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),q(t,"tabindex","0"),q(t,"role","region"),u(this.#S.bind(this)),y?this.#a():u(this.#a.bind(this)),y?this.#h():u(this.#h.bind(this)),F(t,"find-media-player",this.#d.bind(this))}onConnect(t){ha&&T(t,"data-iphone","");let e=window.matchMedia("(pointer: coarse)");this.#c(e),e.onchange=this.#c.bind(this);let i=new ResizeObserver(Wt(this.#u.bind(this)));i.observe(t),u(this.#u.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),E(()=>{i.disconnect(),e.onchange=null})}onDestroy(){this.#t.player=null,this.canPlayQueue.reset()}#r=!1;#a(){let t=this.$el,{title:e,live:i,viewType:n,providedTitle:r}=this.$state,a=i(),o=$n(n()),h=o!=="Unknown"?`${a?"Live ":""}${o}`:a?"Live":"Media",c=e();T(this.el,"aria-label",`${h} Player`+(c?` - ${c}`:"")),!y&&t?.hasAttribute("title")&&(this.#r=!0,t?.removeAttribute("title"))}#h(){let t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),T(this.el,"data-orientation",t),this.#u()}#o(){this.$state.canPlay()&&this.#s?this.canPlayQueue.start():this.canPlayQueue.stop()}#l(){if(s[Ai]){this.setAttributes(s[Ai]);return}let t={"data-load":function(){return this.$props.load()},"data-captions":function(){let i=this.$state.textTrack();return!!i&&at(i)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canLoad:i,canPlay:n,waiting:r}=this.$state;return i()&&(!n()||r())},"data-error":function(){let{error:i}=this.$state;return!!i()},"data-autoplay-error":function(){let{autoPlayError:i}=this.$state;return!!i()}},e={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(let i of mh){let n="data-"+(e[i]??wi(i));t[n]=function(){return this.$state[i]()}}delete t.title,s[Ai]=t,this.setAttributes(t)}#d(t){t.detail(this)}#u(){if(y||!this.el)return;let t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),ht(this.el,"--player-width",t+"px"),ht(this.el,"--player-height",e+"px")}#c(t){if(y)return;let e=t.matches?"coarse":"fine";T(this.el,"data-pointer",e),this.$state.pointer.set(e),this.#u()}get provider(){return this.#s}get controls(){return this.#i.controls}set controls(t){this.#n.controls.set(t)}orientation;get title(){return g(this.$state.title)}set title(t){if(this.#r){this.#r=!1;return}this.#n.title.set(t)}get qualities(){return this.#t.qualities}get audioTracks(){return this.#t.audioTracks}get textTracks(){return this.#t.textTracks}get textRenderers(){return this.#t.textRenderers}get duration(){return this.$state.duration()}set duration(t){this.#n.duration.set(t)}get paused(){return g(this.$state.paused)}set paused(t){this.#m(t)}#p(){this.#m(this.$props.paused())}#m(t){t?this.canPlayQueue.enqueue("paused",()=>this.#i.pause()):this.canPlayQueue.enqueue("paused",()=>this.#i.play())}get muted(){return g(this.$state.muted)}set muted(t){this.#y(t)}#w(){this.#y(this.$props.muted())}#y(t){this.canPlayQueue.enqueue("muted",()=>{this.#s&&this.#s.setMuted(t)})}get currentTime(){return g(this.$state.currentTime)}set currentTime(t){this.#f(t)}#v(){this.#f(this.$props.currentTime())}#f(t){this.canPlayQueue.enqueue("currentTime",()=>{let{currentTime:e}=this.$state;t!==g(e)&&g(()=>{if(!this.#s)return;let i=Ta(t,this.$state);Number.isFinite(i)&&this.#s.setCurrentTime(i)})})}get volume(){return g(this.$state.volume)}set volume(t){this.#b(t)}#T(){this.#b(this.$props.volume())}#b(t){let e=dn(0,t,1);this.canPlayQueue.enqueue("volume",()=>{this.#s&&this.#s.setVolume(e)})}get playbackRate(){return g(this.$state.playbackRate)}set playbackRate(t){this.#g(t)}#x(){this.#g(this.$props.playbackRate())}#g(t){this.canPlayQueue.enqueue("rate",()=>{this.#s&&this.#s.setPlaybackRate?.(t)})}#k(){this.#$(this.$props.playsInline())}#$(t){this.canPlayQueue.enqueue("playsinline",()=>{this.#s&&this.#s.setPlaysInline?.(t)})}#S(){let t=this.$props.storage(),e=v(t)?new Li:t;if(e?.onChange){let{source:i}=this.$state,n=v(t)?t:this.el?.id,r=Gt(this.#P.bind(this));u(()=>e.onChange(i(),r(),n||void 0))}this.#t.storage=e,this.#t.textTracks.setStorage(e),E(()=>{e?.onDestroy?.(),this.#t.storage=null,this.#t.textTracks.setStorage(null)})}#P(){let{clipStartTime:t,clipEndTime:e}=this.$props,{source:i}=this.$state,n=i();return n.src?`${n.src}:${t()}:${e()}`:null}async play(t){return this.#i.play(t)}async pause(t){return this.#i.pause(t)}async enterFullscreen(t,e){return this.#i.enterFullscreen(t,e)}async exitFullscreen(t,e){return this.#i.exitFullscreen(t,e)}enterPictureInPicture(t){return this.#i.enterPictureInPicture(t)}exitPictureInPicture(t){return this.#i.exitPictureInPicture(t)}seekToLiveEdge(t){this.#i.seekToLiveEdge(t)}startLoading(t){this.#t.notify("can-load",void 0,t)}startLoadingPoster(t){this.#t.notify("can-load-poster",void 0,t)}requestAirPlay(t){return this.#i.requestAirPlay(t)}requestGoogleCast(t){return this.#i.requestGoogleCast(t)}setAudioGain(t,e){return this.#i.setAudioGain(t,e)}destroy(){super.destroy(),this.#t.remote.setPlayer(null),this.dispatch("destroy")}},I=Ze.prototype;L(I,"canPlayQueue");L(I,"remoteControl");L(I,"provider");L(I,"controls");L(I,"orientation");L(I,"title");L(I,"qualities");L(I,"audioTracks");L(I,"textTracks");L(I,"textRenderers");L(I,"duration");L(I,"paused");L(I,"muted");L(I,"currentTime");L(I,"volume");L(I,"playbackRate");G(I,"play");G(I,"pause");G(I,"enterFullscreen");G(I,"exitFullscreen");G(I,"enterPictureInPicture");G(I,"exitPictureInPicture");G(I,"seekToLiveEdge");G(I,"startLoading");G(I,"startLoadingPoster");G(I,"requestAirPlay");G(I,"requestGoogleCast");G(I,"setAudioGain");function Th(s,t){return fetch(s,t).then(e=>e.text()).then(e=>/type="static"/.test(e)?"on-demand":"live")}function Ra(s,t){return fetch(s,t).then(e=>e.text()).then(e=>{let i=xh(e);if(i)return Ra(/^https?:/.test(i)?i:new URL(i,s).href,t);let n=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(e)?"on-demand":"live";return n==="live"&&$h(e)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(e)||e.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":n})}function xh(s){let t=s.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return t?t[0].split(`
`)[1].trim():null}function $h(s){let t=s.split(`
`);for(let e of t)if(e.startsWith("#EXT-X-TARGETDURATION")){let i=parseFloat(e.split(":")[1]);if(!isNaN(i))return i}return-1}var Ts=new Map,xs=class{#t=!1;#e;#i;#s;#n;constructor(t,e,i,n=[]){this.#i=t,this.#s=e,this.#n=i;let r=new ls,a=new Qi,o=new $e,h=new ji,c=new us,d=new ds,l=[c,d];this.#e=Gt(()=>{let p=e.$state.remotePlaybackLoader(),m=e.$props.preferNativeHLS()?[o,h,r,a,...l,...n]:[a,o,h,r,...l,...n];return p?[p,...m]:m});let{$state:f}=e;f.sources.set(br(e.$props.src()));for(let p of f.sources()){let m=this.#e().find(w=>w.canPlay(p));if(!m)continue;let b=m.mediaType(p);e.$state.source.set(p),e.$state.mediaType.set(b),e.$state.inferredViewType.set(b),this.#n.set(m),this.#t=!0;break}}connect(){let t=this.#n();this.#t&&(this.#o(this.#s.$state.source(),t),this.#l(t),this.#t=!1),u(this.#r.bind(this)),u(this.#a.bind(this)),u(this.#d.bind(this)),u(this.#u.bind(this)),u(this.#c.bind(this))}#r(){this.#s.notify("sources-change",[...br(this.#s.$props.src()),...this.#i()])}#a(){let{$state:t}=this.#s,e=t.sources(),i=g(t.source),n=this.#h(i,e);if(e[0]?.src&&!n.src&&!n.type){let{crossOrigin:a}=t,o=Te(a()),h=new AbortController;return Promise.all(e.map(c=>v(c.src)&&c.type==="?"?fetch(c.src,{method:"HEAD",credentials:o,signal:h.signal}).then(d=>(c.type=d.headers.get("content-type")||"??",Ts.set(c.src,c.type),c)).catch(()=>c):c)).then(c=>{if(h.signal.aborted)return;let d=this.#h(g(t.source),c);bt(),d.src||this.#s.notify("error",{message:"Failed to load resource.",code:4})}),()=>h.abort()}bt()}#h(t,e){let i={src:"",type:""},n=null,r=new R("sources-change",{detail:{sources:e}}),a=this.#e(),{started:o,paused:h,currentTime:c,quality:d,savedState:l}=this.#s.$state;for(let f of e){let p=a.find(m=>m.canPlay(f));if(p){i=f,n=p;break}}if(Oi(i)){let f=d(),p=e.find(m=>m.src===f?.src);g(o)?l.set({paused:g(h),currentTime:g(c)}):l.set(null),p&&(i=p,r=new R("quality-change",{detail:{quality:f}}))}return vr(t,i)||this.#o(i,n,r),n!==g(this.#n)&&this.#l(n,r),i}#o(t,e,i){this.#s.notify("source-change",t,i),this.#s.notify("media-type-change",e?.mediaType(t)||"unknown",i)}#l(t,e){this.#s.$providerSetup.set(!1),this.#s.notify("provider-change",null,e),t&&g(()=>t.preconnect?.(this.#s)),this.#n.set(t),this.#s.notify("provider-loader-change",t,e)}#d(){let t=this.#s.$provider();if(!(!t||g(this.#s.$providerSetup))){if(this.#s.$state.canLoad()){Ut(()=>t.setup(),t.scope),this.#s.$providerSetup.set(!0);return}g(()=>t.preconnect?.())}}#u(){if(!this.#s.$providerSetup())return;let t=this.#s.$provider(),e=this.#s.$state.source(),i=g(this.#s.$state.crossOrigin),n=g(this.#s.$props.preferNativeHLS);if(!vr(t?.currentSrc,e)){if(this.#s.$state.canLoad()){let r=new AbortController;return he(e)?(n||!hn())&&Ra(e.src,{credentials:Te(i),signal:r.signal}).then(a=>{this.#s.notify("stream-type-change",a)}).catch(fi):cn(e)?Th(e.src,{credentials:Te(i),signal:r.signal}).then(a=>{this.#s.notify("stream-type-change",a)}).catch(fi):this.#s.notify("stream-type-change","on-demand"),g(()=>{let a=g(this.#s.$state.preload);return t?.loadSource(e,a).catch(o=>{})}),()=>r.abort()}try{v(e.src)&&ce(new URL(e.src).origin)}catch{}}}#c(){let t=this.#n(),{providedPoster:e,source:i,canLoadPoster:n}=this.#s.$state;if(!t||!t.loadPoster||!i()||!n()||e())return;let r=new AbortController,a=new R("source-change",{detail:i});return t.loadPoster(i(),this.#s,r).then(o=>{this.#s.notify("poster-change",o||"",a)}).catch(()=>{this.#s.notify("poster-change","",a)}),()=>{r.abort()}}};function br(s){return(z(s)?s:[s]).map(t=>v(t)?{src:t,type:wr(t)}:{...t,type:wr(t.src,t.type)})}function wr(s,t){return v(t)&&t.length?t:v(s)&&Ts.has(s)?Ts.get(s):!t&&he({src:s,type:""})?"application/x-mpegurl":!t&&cn({src:s,type:""})?"application/dash+xml":!v(s)||s.startsWith("blob:")?"video/object":s.includes("youtube")||s.includes("youtu.be")?"video/youtube":s.includes("vimeo")&&!s.includes("progressive_redirect")&&!s.includes(".m3u8")?"video/vimeo":"?"}function vr(s,t){return s?.src===t?.src&&s?.type===t?.type}var $s=class{#t;#e;#i=[];constructor(t,e){this.#t=t,this.#e=e,u(this.#s.bind(this))}#s(){let t=this.#t();for(let e of this.#i)if(!t.some(i=>i.id===e.id)){let i=e.id&&this.#e.textTracks.getById(e.id);i&&this.#e.textTracks.remove(i)}for(let e of t){let i=e.id||Nt.createId(e);this.#e.textTracks.getById(i)||(e.id=i,this.#e.textTracks.add(e))}this.#i=t}},ti=class extends S{static props={loaders:[]};static state=new Et({loader:null});#t;#e;#i=k([]);#s=k([]);#n=null;onSetup(){this.#t=V(),this.#e=new xs(this.#i,this.#t,this.$state.loader,this.$props.loaders())}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.#e.connect(),new $s(this.#s,this.#t);let e=new ResizeObserver(Wt(this.#o.bind(this)));e.observe(t);let i=new MutationObserver(this.#l.bind(this));i.observe(t,{attributes:!0,childList:!0}),this.#o(),this.#l(),E(()=>{e.disconnect(),i.disconnect()})}#r=-1;load(t){t?.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(this.#r),this.#r=requestAnimationFrame(()=>this.#a(t)),E(()=>{window.cancelAnimationFrame(this.#r)})}#a(t){if(!this.scope)return;let e=this.$state.loader(),{$provider:i}=this.#t;this.#n===e&&e?.target===t&&g(i)||(this.#h(),this.#n=e,e&&(e.target=t||null),!(!e||!t)&&e.load(this.#t).then(n=>{this.scope&&g(this.$state.loader)===e&&this.#t.notify("provider-change",n)}))}onDestroy(){this.#n=null,this.#h()}#h(){this.#t?.notify("provider-change",null)}#o(){if(!this.el)return;let{player:t,$state:e}=this.#t,i=this.el.offsetWidth,n=this.el.offsetHeight;t&&(e.mediaWidth.set(i),e.mediaHeight.set(n),t.el&&(ht(t.el,"--media-width",i+"px"),ht(t.el,"--media-height",n+"px")))}#l(){let t=[],e=[],i=this.el.children;for(let n of i)if(!n.hasAttribute("data-vds")){if(n instanceof HTMLSourceElement){let r={id:n.id,src:n.src,type:n.type};for(let a of["id","src","width","height","bitrate","codec"]){let o=n.getAttribute(`data-${a}`);v(o)&&(r[a]=/id|src|codec/.test(a)?o:Number(o))}t.push(r)}else if(n instanceof HTMLTrackElement){let r={src:n.src,kind:n.track.kind,language:n.srclang,label:n.label,default:n.default,type:n.getAttribute("data-type")};e.push({id:n.id||Nt.createId(r),...r})}}this.#i.set(t),this.#s.set(e),bt()}},kh=ti.prototype;G(kh,"load");var ks=class extends S{static props={translations:null};static state=new Et({label:null,busy:!1});#t;#e=!1;onSetup(){this.#t=V()}onAttach(t){t.style.display="contents"}onConnect(t){t.setAttribute("data-media-announcer",""),q(t,"role","status"),q(t,"aria-live","polite");let{busy:e}=this.$state;this.setAttributes({"aria-busy":()=>e()?"true":null}),this.#e=!0,u(this.#i.bind(this)),u(this.#a.bind(this)),u(this.#r.bind(this)),u(this.#s.bind(this)),u(this.#n.bind(this)),u(this.#l.bind(this)),u(this.#u.bind(this)),bt(),this.#e=!1}#i(){let{paused:t}=this.#t.$state;this.#c(t()?"Pause":"Play")}#s(){let{fullscreen:t}=this.#t.$state;this.#c(t()?"Enter Fullscreen":"Exit Fullscreen")}#n(){let{pictureInPicture:t}=this.#t.$state;this.#c(t()?"Enter PiP":"Exit PiP")}#r(){let{textTrack:t}=this.#t.$state;this.#c(t()?"Closed-Captions On":"Closed-Captions Off")}#a(){let{muted:t,volume:e,audioGain:i}=this.#t.$state;this.#c(t()||e()===0?"Mute":`${Math.round(e()*(i()??1)*100)}% ${this.#d("Volume")}`)}#h=-1;#o=-1;#l(){let{seeking:t,currentTime:e}=this.#t.$state,i=t();this.#h>0?(window.clearTimeout(this.#o),this.#o=window.setTimeout(()=>{if(!this.scope)return;let n=g(e),r=Math.abs(n-this.#h);if(r>=1){let a=n>=this.#h,o=ps(r);this.#c(`${this.#d(a?"Seek Forward":"Seek Backward")} ${o}`)}this.#h=-1,this.#o=-1},300)):i&&(this.#h=g(e))}#d(t){let{translations:e}=this.$props;return e?.()?.[t||""]??t}#u(){let{label:t,busy:e}=this.$state,i=this.#d(t());if(this.#e)return;e.set(!0);let n=window.setTimeout(()=>void e.set(!1),150);return this.el&&T(this.el,"aria-label",i),v(i)&&this.dispatch("change",{detail:i}),()=>window.clearTimeout(n)}#c(t){let{label:e}=this.$state;e.set(t)}},Ss=class extends S{static props={hideDelay:2e3,hideOnMouseLeave:!1};#t;onSetup(){this.#t=V(),u(this.#i.bind(this))}onAttach(t){let{pictureInPicture:e,fullscreen:i}=this.#t.$state;ht(t,"pointer-events","none"),q(t,"role","group"),this.setAttributes({"data-visible":this.#s.bind(this),"data-fullscreen":i,"data-pip":e}),u(()=>{this.dispatch("change",{detail:this.#s()})}),u(this.#e.bind(this)),u(()=>{let n=i();for(let r of["top","right","bottom","left"])ht(t,`padding-${r}`,n&&`env(safe-area-inset-${r})`)})}#e(){if(!this.el)return;let{nativeControls:t}=this.#t.$state,e=t();T(this.el,"aria-hidden",e?"true":null),ht(this.el,"display",e?"none":null)}#i(){let{controls:t}=this.#t.player,{hideDelay:e,hideOnMouseLeave:i}=this.$props;t.defaultDelay=e()===2e3?this.#t.$props.controlsDelay():e(),t.hideOnMouseLeave=i()}#s(){let{controlsVisible:t}=this.#t.$state;return t()}},Ps=class extends S{onAttach(t){t.style.pointerEvents||ht(t,"pointer-events","auto")}},ei=class extends lt{#t;constructor(t){super(),this.#t=t,u(this.#e.bind(this))}onDestroy(){this.#n?.(),this.#n=null}#e(){let t=this.#t.trigger();if(!t){this.hide();return}let e=this.show.bind(this),i=this.hide.bind(this);this.#t.listen(t,e,i)}#i=-1;#s=-1;#n=null;show(t){this.#r(),window.cancelAnimationFrame(this.#s),this.#s=-1,this.#n?.(),this.#n=null,this.#i=window.setTimeout(()=>{this.#i=-1;let e=this.#t.content();e&&e.style.removeProperty("display"),g(()=>this.#t.onChange(!0,t))},this.#t.showDelay?.()??0)}hide(t){this.#r(),g(()=>this.#t.onChange(!1,t)),this.#s=requestAnimationFrame(()=>{this.#r(),this.#s=-1;let e=this.#t.content();if(e){let i=()=>{e.style.display="none",this.#n=null};if(Uo(e)){this.#n?.();let r=F(e,"animationend",i,{once:!0});this.#n=r}else i()}})}#r(){window.clearTimeout(this.#i),this.#i=-1}},Xt=Pt(),Sh=0,Es=class extends S{static props={showDelay:700};#t=`media-tooltip-${++Sh}`;#e=k(null);#i=k(null);#s=k(!1);constructor(){super(),new ot;let{showDelay:t}=this.$props;new ei({trigger:this.#e,content:this.#i,showDelay:t,listen(e,i,n){u(()=>{Je()&&F(e,"focus",i),F(e,"blur",n)}),new D(e).add("touchstart",r=>r.preventDefault(),{passive:!1}).add("mouseenter",i).add("mouseleave",n)},onChange:this.#o.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onSetup(){ct(Xt,{trigger:this.#e,content:this.#i,showing:this.#s,attachTrigger:this.#n.bind(this),detachTrigger:this.#r.bind(this),attachContent:this.#a.bind(this),detachContent:this.#h.bind(this)})}#n(t){this.#e.set(t);let e=t.getAttribute("data-media-tooltip");e&&this.el?.setAttribute(`data-media-${e}-tooltip`,""),T(t,"data-describedby",this.#t)}#r(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.#e.set(null)}#a(t){t.setAttribute("id",this.#t),t.style.display="none",q(t,"role","tooltip"),this.#i.set(t)}#h(t){t.removeAttribute("id"),t.removeAttribute("role"),this.#i.set(null)}#o(t){let e=this.#e(),i=this.#i();e&&T(e,"aria-describedby",t?this.#t:null);for(let n of[this.el,e,i])n&&T(n,"data-visible",t);this.#s.set(t)}},As=class extends S{constructor(){super(),new ot}onConnect(t){E(Pa(()=>{if(!this.connectScope)return;this.#t();let e=U(Xt);E(()=>{let i=this.#e();i&&e.detachTrigger(i)})}))}#t(){let t=this.#e(),e=U(Xt);t&&e.attachTrigger(t)}#e(){let t=this.el.firstElementChild;return t?.localName==="button"||t?.getAttribute("role")==="button"?t:this.el}},Cs=class extends S{static props={placement:"top center",offset:0,alignOffset:0};constructor(){super(),new ot;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.#t(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.#t(t);let e=U(Xt);E(()=>e.detachContent(t)),E(Pa(()=>{this.connectScope&&u(this.#e.bind(this))}))}#t(t){U(Xt).attachContent(t)}#e(){let{showing:t}=U(Xt);if(!t())return;let{placement:e,offset:i,alignOffset:n}=this.$props;return Ea(this.el,this.#i(),e(),{offsetVarName:"media-tooltip",xOffset:n(),yOffset:i()})}#i(){return U(Xt).trigger()}},j=class extends lt{static props={disabled:!1};#t;constructor(t){super(),this.#t=t,new ot,t.keyShortcut&&new Gi(t.keyShortcut)}onSetup(){let{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.#t.isPresssed,"aria-pressed":this.#e.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){q(t,"tabindex","0"),q(t,"role","button"),q(t,"type","button")}onConnect(t){let e=Ft(t,this.#s.bind(this));for(let i of["click","touchstart"])e.add(i,this.#n.bind(this),{passive:!0})}#e(){return ue(this.#t.isPresssed())}#i(t){gn(this.#t.isPresssed)&&this.#t.isPresssed.set(e=>!e)}#s(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(this.#t.onPress??this.#i).call(this,t)}#n(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}},ii=class extends S{static props={disabled:!1,defaultPressed:!1};#t=k(!1);get pressed(){return this.#t()}constructor(){super(),new j({isPresssed:this.#t})}},Ph=ii.prototype;L(Ph,"pressed");var Rs=class extends S{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#i.bind(this),onPress:this.#e.bind(this)})}onSetup(){this.#t=V();let{canAirPlay:t,isAirPlayConnected:e}=this.#t.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.#s.bind(this),"aria-hidden":K(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),Ht(t,this.#n.bind(this))}#e(t){this.#t.remote.requestAirPlay(t)}#i(){let{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="airplay"&&e()!=="disconnected"}#s(){let{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="airplay"&&e()}#n(){let{remotePlaybackState:t}=this.#t.$state;return`AirPlay ${t()}`}},qs=class extends S{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#i.bind(this),onPress:this.#e.bind(this)})}onSetup(){this.#t=V();let{canGoogleCast:t,isGoogleCastConnected:e}=this.#t.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.#s.bind(this),"aria-hidden":K(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","google-cast"),Ht(t,this.#n.bind(this))}#e(t){this.#t.remote.requestGoogleCast(t)}#i(){let{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="google-cast"&&e()!=="disconnected"}#s(){let{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="google-cast"&&e()}#n(){let{remotePlaybackState:t}=this.#t.$state;return`Google Cast ${t()}`}},Os=class extends S{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#i.bind(this),keyShortcut:"togglePaused",onPress:this.#e.bind(this)})}onSetup(){this.#t=V();let{paused:t,ended:e}=this.#t.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),Ht(t,"Play")}#e(t){let e=this.#t.remote;this.#i()?e.pause(t):e.play(t)}#i(){let{paused:t}=this.#t.$state;return!t()}},Ds=class extends S{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#i.bind(this),keyShortcut:"toggleCaptions",onPress:this.#e.bind(this)})}onSetup(){this.#t=V(),this.setAttributes({"data-active":this.#i.bind(this),"data-supported":()=>!this.#s(),"aria-hidden":K(this.#s.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),Ht(t,"Captions")}#e(t){this.#t.remote.toggleCaptions(t)}#i(){let{textTrack:t}=this.#t.$state,e=t();return!!e&&at(e)}#s(){let{hasCaptions:t}=this.#t.$state;return!t()}},Ls=class extends S{static props={...j.props,target:"prefer-media"};#t;constructor(){super(),new j({isPresssed:this.#i.bind(this),keyShortcut:"toggleFullscreen",onPress:this.#e.bind(this)})}onSetup(){this.#t=V();let{fullscreen:t}=this.#t.$state,e=this.#s.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":K(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),Ht(t,"Fullscreen")}#e(t){let e=this.#t.remote,i=this.$props.target();this.#i()?e.exitFullscreen(i,t):e.enterFullscreen(i,t)}#i(){let{fullscreen:t}=this.#t.$state;return t()}#s(){let{canFullscreen:t}=this.#t.$state;return t()}},Ms=class extends S{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#i.bind(this),keyShortcut:"toggleMuted",onPress:this.#e.bind(this)})}onSetup(){this.#t=V(),this.setAttributes({"data-muted":this.#i.bind(this),"data-state":this.#s.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),Ht(t,"Mute")}#e(t){let e=this.#t.remote;this.#i()?e.unmute(t):e.mute(t)}#i(){let{muted:t,volume:e}=this.#t.$state;return t()||e()===0}#s(){let{muted:t,volume:e}=this.#t.$state,i=e();if(t()||i===0)return"muted";if(i>=.5)return"high";if(i<.5)return"low"}},Vs=class extends S{static props=j.props;#t;constructor(){super(),new j({isPresssed:this.#i.bind(this),keyShortcut:"togglePictureInPicture",onPress:this.#e.bind(this)})}onSetup(){this.#t=V();let{pictureInPicture:t}=this.#t.$state,e=this.#s.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":K(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),Ht(t,"PiP")}#e(t){let e=this.#t.remote;this.#i()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}#i(){let{pictureInPicture:t}=this.#t.$state;return t()}#s(){let{canPictureInPicture:t}=this.#t.$state;return t()}},Is=class extends S{static props={disabled:!1,seconds:30};#t;constructor(){super(),new ot}onSetup(){this.#t=V();let{seeking:t}=this.#t.$state,{seconds:e}=this.$props,i=this.#e.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":i,"aria-hidden":K(()=>!i())})}onAttach(t){q(t,"tabindex","0"),q(t,"role","button"),q(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),Ht(t,this.#i.bind(this))}onConnect(t){Ft(t,this.#s.bind(this))}#e(){let{canSeek:t}=this.#t.$state;return t()}#i(){let{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}#s(t){let{seconds:e,disabled:i}=this.$props;if(i())return;let{currentTime:n}=this.#t.$state,r=n()+e();this.#t.remote.seek(r,t)}},Ns=class extends S{static props={disabled:!1};#t;constructor(){super(),new ot}onSetup(){this.#t=V();let{disabled:t}=this.$props,{live:e,liveEdge:i}=this.#t.$state,n=()=>!e();this.setAttributes({"data-edge":i,"data-hidden":n,"aria-disabled":K(()=>t()||i()),"aria-hidden":K(n)})}onAttach(t){q(t,"tabindex","0"),q(t,"role","button"),q(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){Ft(t,this.#e.bind(this))}#e(t){let{disabled:e}=this.$props,{liveEdge:i}=this.#t.$state;e()||i()||this.#t.remote.seekToLiveEdge(t)}},te=new Et({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Tr(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Tr(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Tr(s,t,e){let i=t-s,n=e-s;return i>0?n/i:0}var si=class extends lt{#t;#e;constructor(t){super(),this.#t=t}onConnect(t){this.#e=new IntersectionObserver(e=>{this.#t.callback?.(e,this.#e)},this.#t),this.#e.observe(t),E(this.#i.bind(this))}#i(){this.#e?.disconnect(),this.#e=void 0}},mn=Pt(),xe=Pt();function Eh(s,t,e,i){return dn(s,B(e,Vi(i)),t)}function Ah(s,t,e,i){let n=dn(0,e,1),r=t-s,a=r*n,o=a/i,h=i*Math.round(o);return s+h}var Ri={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1},Fs=class extends lt{#t;#e;#i;constructor(t,e){super(),this.#t=t,this.#e=e}onSetup(){Mt(xe)&&(this.#i=U(xe))}onConnect(t){u(this.#l.bind(this,t)),u(this.#d.bind(this,t)),this.#t.swipeGesture&&u(this.#s.bind(this))}#s(){let{pointer:t}=this.#e.$state;if(t()!=="coarse"||!this.#t.swipeGesture()){this.#n=null;return}this.#n=this.#e.player.el?.querySelector("media-provider,[data-media-provider]"),this.#n&&new D(this.#n).add("touchstart",this.#h.bind(this),{passive:!0}).add("touchmove",this.#o.bind(this),{passive:!1})}#n=null;#r=null;#a=null;#h(t){this.#r=t.touches[0]}#o(t){if(wt(this.#r)||un(t))return;let e=t.touches[0],i=e.clientX-this.#r.clientX,n=e.clientY-this.#r.clientY,r=this.$state.dragging();!r&&Math.abs(n)>5||r||(t.preventDefault(),Math.abs(i)>20&&(this.#r=e,this.#a=this.$state.value(),this.#T(this.#a,t)))}#l(t){let{hidden:e}=this.$props;F(t,"focus",this.#u.bind(this)),!(e()||this.#t.isDisabled())&&new D(t).add("keyup",this.#$.bind(this)).add("keydown",this.#k.bind(this)).add("pointerenter",this.#w.bind(this)).add("pointermove",this.#y.bind(this)).add("pointerleave",this.#v.bind(this)).add("pointerdown",this.#f.bind(this))}#d(t){this.#t.isDisabled()||!this.$state.dragging()||new D(document).add("pointerup",this.#E.bind(this),{capture:!0}).add("pointermove",this.#A.bind(this)).add("touchmove",this.#C.bind(this),{passive:!1})}#u(){this.#p(this.$state.value())}#c(t,e){let{value:i,min:n,max:r,dragging:a}=this.$state,o=Math.max(n(),Math.min(t,r()));i.set(o);let h=this.createEvent("value-change",{detail:o,trigger:e});if(this.dispatch(h),this.#t.onValueChange?.(h),a()){let c=this.createEvent("drag-value-change",{detail:o,trigger:e});this.dispatch(c),this.#t.onDragValueChange?.(c)}}#p(t,e){let{pointerValue:i,dragging:n}=this.$state;i.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),n()&&this.#c(t,e)}#m(t){let e,i=this.el.getBoundingClientRect(),{min:n,max:r}=this.$state;if(this.$props.orientation()==="vertical"){let{bottom:a,height:o}=i;e=(a-t.clientY)/o}else if(this.#r&&J(this.#a)){let{width:a}=this.#n.getBoundingClientRect(),o=(t.clientX-this.#r.clientX)/a,h=r()-n(),c=h*Math.abs(o);e=(o<0?this.#a-c:this.#a+c)/h}else{let{left:a,width:o}=i;e=(t.clientX-a)/o}return Math.max(n(),Math.min(r(),this.#t.roundValue(Ah(n(),r(),e,this.#t.getStep()))))}#w(t){this.$state.pointing.set(!0)}#y(t){let{dragging:e}=this.$state;e()||this.#p(this.#m(t),t)}#v(t){this.$state.pointing.set(!1)}#f(t){if(t.button!==0)return;let e=this.#m(t);this.#T(e,t),this.#p(e,t)}#T(t,e){let{dragging:i}=this.$state;if(i())return;i.set(!0),this.#e.remote.pauseControls(e);let n=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(n),this.#t.onDragStart?.(n),this.#i?.onDragStart?.()}#b(t,e){let{dragging:i}=this.$state;if(!i())return;i.set(!1),this.#e.remote.resumeControls(e);let n=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(n),this.#t.onDragEnd?.(n),this.#r=null,this.#a=null,this.#i?.onDragEnd?.()}#x;#g=!1;#k(t){if(!Object.keys(Ri).includes(t.key))return;let{key:i}=t,n=this.#S(t);if(!wt(n)){this.#p(n,t),this.#c(n,t);return}let r=this.#P(t);this.#g||(this.#g=i===this.#x,!this.$state.dragging()&&this.#g&&this.#T(r,t)),this.#p(r,t),this.#x=i}#$(t){if(!Object.keys(Ri).includes(t.key)||!wt(this.#S(t)))return;let i=this.#g?this.$state.pointerValue():this.#P(t);this.#c(i,t),this.#b(i,t),this.#x="",this.#g=!1}#S(t){let e=t.key,{min:i,max:n}=this.$state;return e==="Home"||e==="PageUp"?i():e==="End"||e==="PageDown"?n():!t.metaKey&&/^[0-9]$/.test(e)?(n()-i())/10*Number(e):null}#P(t){let{key:e,shiftKey:i}=t;t.preventDefault(),t.stopPropagation();let{shiftKeyMultiplier:n}=this.$props,{min:r,max:a,value:o,pointerValue:h}=this.$state,c=this.#t.getStep(),d=this.#t.getKeyStep(),l=i?d*n():d,f=Number(Ri[e]),p=l*f,m=this.#g?h():this.#t.getValue?.()??o(),b=(m+p)/c;return Math.max(r(),Math.min(a(),Number((c*b).toFixed(3))))}#E(t){if(t.button!==0)return;t.preventDefault(),t.stopImmediatePropagation();let e=this.#m(t);this.#p(e,t),this.#b(e,t)}#C(t){t.preventDefault()}#A=It(t=>{this.#p(this.#m(t),t)},20,{leading:!0})},oe=Pt(()=>({})),tt=class extends lt{static props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};#t;#e;#i=k(!0);#s=k(!0);constructor(t){super(),this.#e=t}onSetup(){this.#t=V();let t=new ot;t.attach(this),this.$state.focused=t.focused.bind(t),Mt(oe)||ct(oe,{default:"value"}),ct(mn,{orientation:this.$props.orientation,disabled:this.#e.isDisabled,preview:k(null)}),u(this.#a.bind(this)),u(this.#h.bind(this)),u(this.#o.bind(this)),this.#d(),new Fs(this.#e,this.#t).attach(this),new si({callback:this.#n.bind(this)}).attach(this)}onAttach(t){q(t,"role","slider"),q(t,"tabindex","0"),q(t,"autocomplete","off"),y?this.#u():u(this.#u.bind(this))}onConnect(t){E(ka(t,this.#i.set)),u(this.#r.bind(this))}#n(t){this.#s.set(t[0].isIntersecting)}#r(){let{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.#i()||!this.#s.bind(this))}#a(){let{dragging:t,value:e,min:i,max:n}=this.$state;g(t)||e.set(Eh(i(),n(),e(),this.#e.getStep()))}#h(){this.$state.step.set(this.#e.getStep())}#o(){if(!this.#e.isDisabled())return;let{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}#l(){return ue(this.#e.isDisabled())}#d(){let{orientation:t}=this.$props,{dragging:e,active:i,pointing:n}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":n,"data-active":i,"aria-disabled":this.#l.bind(this),"aria-valuemin":this.#e.aria.valueMin??this.$state.min,"aria-valuemax":this.#e.aria.valueMax??this.$state.max,"aria-valuenow":this.#e.aria.valueNow,"aria-valuetext":this.#e.aria.valueText,"aria-orientation":t})}#u(){let{fillPercent:t,pointerPercent:e}=this.$state;this.#c(B(t(),3),B(e(),3))}#c=Wt((t,e)=>{this.el?.style.setProperty("--slider-fill",t+"%"),this.el?.style.setProperty("--slider-pointer",e+"%")})},Zt=class extends S{static props={...tt.props,min:0,max:100,value:0};static state=te;constructor(){super(),new tt({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:this.#t.bind(this),valueText:this.#e.bind(this)}})}onSetup(){u(this.#i.bind(this)),u(this.#s.bind(this))}#t(){let{value:t}=this.$state;return Math.round(t())}#e(){let{value:t,max:e}=this.$state;return B(t()/e()*100,2)+"%"}#i(){let{value:t}=this.$props;this.$state.value.set(t())}#s(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}},qt=new Map,Ne=new Map,_s=class s{#t;#e;#i;$images=k([]);static create(t,e){let i=V();return new s(t,e,i)}constructor(t,e,i){this.#e=t,this.#i=e,this.#t=i,u(this.#s.bind(this))}#s(){let{canLoad:t}=this.#t.$state;if(!t())return;let e=this.#e();if(e){if(v(e)&&qt.has(e)){let i=qt.get(e);if(qt.delete(e),qt.set(e,i),qt.size>99){let n=qt.keys().next().value;qt.delete(n)}this.$images.set(qt.get(e))}else if(v(e)){let i=this.#i(),n=e+"::"+i;if(!Ne.has(n)){let r=new Promise(async(a,o)=>{try{let h=await fetch(e,{credentials:Te(i)});if(h.headers.get("content-type")==="application/json"){let d=await h.json();if(z(d))if(d[0]&&"text"in d[0])a(this.#a(d));else{for(let l=0;l<d.length;l++){let f=d[l];Rt(bn(f),!1),Rt("url"in f&&v(f.url),!1),Rt("startTime"in f&&J(f.startTime),!1)}a(d)}else a(this.#r(d));return}import("./prod-USPFQIFU.mjs").then(async({parseResponse:d})=>{try{let{cues:l}=await d(h);a(this.#a(l))}catch(l){o(l)}})}catch(h){o(h)}}).then(a=>(qt.set(n,a),a)).catch(a=>{this.#d(e,a)}).finally(()=>{v(n)&&Ne.delete(n)});Ne.set(n,r)}Ne.get(n)?.then(r=>{this.$images.set(r||[])})}else if(z(e))try{this.$images.set(this.#n(e))}catch(i){this.#d(e,i)}else try{this.$images.set(this.#r(e))}catch(i){this.#d(e,i)}return()=>{this.$images.set([])}}}#n(t){let e=this.#h();return t.map((i,n)=>(Rt(i.url&&v(i.url)),Rt("startTime"in i&&J(i.startTime)),{...i,url:v(i.url)?this.#o(i.url,e):i.url}))}#r(t){Rt(v(t.url)),Rt(z(t.tiles)&&t.tiles?.length);let e=new URL(t.url),i=[],n="tile_width"in t?t.tile_width:t.tileWidth,r="tile_height"in t?t.tile_height:t.tileHeight;for(let a of t.tiles)i.push({url:e,startTime:"start"in a?a.start:a.startTime,width:n,height:r,coords:{x:a.x,y:a.y}});return i}#a(t){for(let n=0;n<t.length;n++){let r=t[n];Rt("startTime"in r&&J(r.startTime)),Rt("text"in r&&v(r.text))}let e=[],i=this.#h();for(let n of t){let[r,a]=n.text.split("#"),o=this.#l(a);e.push({url:this.#o(r,i),startTime:n.startTime,endTime:n.endTime,width:o?.w,height:o?.h,coords:o&&J(o.x)&&J(o.y)?{x:o.x,y:o.y}:void 0})}return e}#h(){let t=g(this.#e);return!v(t)||!/^https?:/.test(t)?location.href:t}#o(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}#l(t){if(!t)return{};let[e,i]=t.split("="),n=i?.split(","),r={};if(!e||!n)return null;for(let a=0;a<e.length;a++){let o=+n[a];isNaN(o)||(r[e[a]]=o)}return r}#d(t,e){}},ni=class extends S{static props={src:null,time:0,crossOrigin:null};static state=new Et({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});media;#t;#e=[];onSetup(){this.media=V(),this.#t=_s.create(this.$props.src,this.$state.crossOrigin),this.#s(),this.setAttributes({"data-loading":this.#h.bind(this),"data-error":this.#o.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":K(this.$state.hidden)})}onConnect(t){u(this.#i.bind(this)),u(this.#l.bind(this)),u(this.#s.bind(this)),u(this.#n.bind(this)),u(this.#d.bind(this)),u(this.#u.bind(this))}#i(){let t=this.$state.img();t&&new D(t).add("load",this.#r.bind(this)).add("error",this.#a.bind(this))}#s(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i}=this.media.$state,n=t()!==null?t():i();e.set(n===!0?"anonymous":n)}#n(){let{src:t,loading:e,error:i}=this.$state;return t()&&(e.set(!0),i.set(null)),()=>{this.#p(),e.set(!1),i.set(null)}}#r(){let{loading:t,error:e}=this.$state;this.#u(),t.set(!1),e.set(null)}#a(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}#h(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}#o(){let{error:t}=this.$state;return!wt(t())}#l(){let{hidden:t}=this.$state,{duration:e}=this.media.$state,i=this.#t.$images();t.set(this.#o()||!Number.isFinite(e())||i.length===0)}getTime(){return this.$props.time()}#d(){let t=this.#t.$images();if(!t.length)return;let e=this.getTime(),{src:i,activeThumbnail:n}=this.$state,r=-1,a=null;for(let o=t.length-1;o>=0;o--){let h=t[o];if(e>=h.startTime&&(!h.endTime||e<h.endTime)){r=o;break}}t[r]&&(a=t[r]),n.set(a),i.set(a?.url.href||"")}#u(){if(!this.scope||this.$state.hidden())return;let t=this.el,e=this.$state.img(),i=this.$state.activeThumbnail();if(!e||!i||!t)return;let n=i.width??e.naturalWidth,r=i?.height??e.naturalHeight,{maxWidth:a,maxHeight:o,minWidth:h,minHeight:c,width:d,height:l}=getComputedStyle(this.el);h==="100%"&&(h=parseFloat(d)+""),c==="100%"&&(c=parseFloat(l)+"");let f=Math.max(parseInt(h)/n,parseInt(c)/r),p=Math.min(Math.max(parseInt(h),parseInt(a))/n,Math.max(parseInt(c),parseInt(o))/r),m=!isNaN(p)&&p<1?p:f>1?f:1;this.#c(t,"--thumbnail-width",`${n*m}px`),this.#c(t,"--thumbnail-height",`${r*m}px`),this.#c(t,"--thumbnail-aspect-ratio",String(B(n/r,5))),this.#c(e,"width",`${e.naturalWidth*m}px`),this.#c(e,"height",`${e.naturalHeight*m}px`),this.#c(e,"transform",i.coords?`translate(-${i.coords.x*m}px, -${i.coords.y*m}px)`:""),this.#c(e,"max-width","none")}#c(t,e,i){t.style.setProperty(e,i),this.#e.push(()=>t.style.removeProperty(e))}#p(){for(let t of this.#e)t();this.#e=[]}},Hs=class extends ni{#t;onAttach(t){this.#t=ee(Zt.state)}getTime(){let{duration:t,clipStartTime:e}=this.media.$state;return e()+this.#t.pointerRate()*t()}},ri=class extends S{static props={src:null,crossOrigin:null};static state=new Et({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1});#t;#e;get video(){return this.$state.video()}onSetup(){this.#t=V(),this.#e=ee(Zt.state),this.#n(),this.setAttributes({"data-loading":this.#r.bind(this),"data-hidden":this.$state.hidden,"data-error":this.#a.bind(this),"aria-hidden":K(this.$state.hidden)})}onAttach(t){u(this.#i.bind(this)),u(this.#s.bind(this)),u(this.#n.bind(this)),u(this.#h.bind(this)),u(this.#o.bind(this)),u(this.#u.bind(this))}#i(){let t=this.$state.video();t&&(t.readyState>=2&&this.#l(),new D(t).add("canplay",this.#l.bind(this)).add("error",this.#d.bind(this)))}#s(){let{src:t}=this.$state,{canLoad:e}=this.#t.$state;t.set(e()?this.$props.src():null)}#n(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i}=this.#t.$state,n=t()!==null?t():i();e.set(n===!0?"anonymous":n)}#r(){let{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}#a(){let{error:t}=this.$state;return!wt(t)}#h(){let{src:t,hidden:e}=this.$state,{canLoad:i,duration:n}=this.#t.$state;e.set(i()&&(!t()||this.#a()||!Number.isFinite(n())))}#o(){let{src:t,canPlay:e,error:i}=this.$state;t(),e.set(!1),i.set(null)}#l(t){let{canPlay:e,error:i}=this.$state;e.set(!0),i.set(null),this.dispatch("can-play",{trigger:t})}#d(t){let{canPlay:e,error:i}=this.$state;e.set(!1),i.set(t),this.dispatch("error",{trigger:t})}#u(){let{video:t,canPlay:e}=this.$state,{duration:i}=this.#t.$state,{pointerRate:n}=this.#e,r=t();e()&&r&&Number.isFinite(i())&&Number.isFinite(n())&&(r.currentTime=n()*i())}},Ch=ri.prototype;L(Ch,"video");var ai=class extends S{static props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};#t;#e;#i;onSetup(){this.#i=ee(Zt.state),this.#t=U(oe),this.#e=Gt(this.getValueText.bind(this))}getValueText(){let{type:t,format:e,decimalPlaces:i,padHours:n,padMinutes:r,showHours:a,showMs:o}=this.$props,{value:h,pointerValue:c,min:d,max:l}=this.#i,f=e?.()??this.#t.default,p=t()==="current"?h():c();if(f==="percent"){let m=l()-d(),b=p/m*100;return(this.#t.percent??B)(b,i())+"%"}else return f==="time"?(this.#t.time??fn)(p,{padHrs:n(),padMins:r(),showHrs:a(),showMs:o()}):(this.#t.value?.(p)??p.toFixed(2))+""}},Rh=ai.prototype;G(Rh,"getValueText");var Us=class extends S{static props={offset:0,noClamp:!1};#t;onSetup(){this.#t=U(mn);let{active:t}=ee(Zt.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){let{preview:e}=this.#t;e.set(t),E(()=>e.set(null)),u(this.#e.bind(this));let i=new ResizeObserver(this.#e.bind(this));i.observe(t),E(()=>i.disconnect())}#e=Wt(()=>{let{disabled:t,orientation:e}=this.#t;if(t())return;let i=this.el,{offset:n,noClamp:r}=this.$props;i&&qh(i,{clamp:!r(),offset:n(),orientation:e()})})};function qh(s,{clamp:t,offset:e,orientation:i}){let n=getComputedStyle(s),r=parseFloat(n.width),a=parseFloat(n.height),o={top:null,right:null,bottom:null,left:null};if(o[i==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${e}px))`,i==="horizontal"){let h=r/2;if(!t)o.left=`calc(var(--slider-pointer) - ${h}px)`;else{let c=`max(0px, calc(var(--slider-pointer) - ${h}px))`,d=`calc(100% - ${r}px)`;o.left=`min(${c}, ${d})`}}else{let h=a/2;if(!t)o.bottom=`calc(var(--slider-pointer) - ${h}px)`;else{let c=`max(${h}px, calc(var(--slider-pointer) - ${h}px))`,d=`calc(100% - ${a}px)`;o.bottom=`min(${c}, ${d})`}}Object.assign(s.style,o)}var Gs=class extends S{static props={...tt.props,keyStep:5,shiftKeyMultiplier:2};static state=te;#t;onSetup(){this.#t=V();let{audioGain:t}=this.#t.$state;ct(oe,{default:"percent",value(e){return(e*(t()??1)).toFixed(2)},percent(e){return Math.round(e*(t()??1))}}),new tt({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#n.bind(this),aria:{valueMax:this.#s.bind(this),valueNow:this.#e.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#l.bind(this),onValueChange:this.#o.bind(this)}).attach(this),u(this.#r.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),q(t,"aria-label","Volume");let{canSetVolume:e}=this.#t.$state;this.setAttributes({"data-supported":e,"aria-hidden":K(()=>!e())})}#e(){let{value:t}=this.$state,{audioGain:e}=this.#t.$state;return Math.round(t()*(e()??1))}#i(){let{value:t,max:e}=this.$state,{audioGain:i}=this.#t.$state;return B(t()/e()*(i()??1)*100,2)+"%"}#s(){let{audioGain:t}=this.#t.$state;return this.$state.max()*(t()??1)}#n(){let{disabled:t}=this.$props,{canSetVolume:e}=this.#t.$state;return t()||!e()}#r(){let{muted:t,volume:e}=this.#t.$state,i=t()?0:e()*100;this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#a=It(this.#h.bind(this),25);#h(t){if(!t.trigger)return;let e=B(t.detail/100,3);this.#t.remote.changeVolume(e,t)}#o(t){this.#a(t)}#l(t){this.#a(t)}},Ws=class extends S{static props={...tt.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300};static state=te;#t;onSetup(){this.#t=V(),ct(oe,{default:"percent",percent:(t,e)=>B(this.$state.value(),e)+"%"}),new tt({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#r.bind(this),aria:{valueNow:this.#e.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#o.bind(this),onValueChange:this.#h.bind(this)}).attach(this),u(this.#s.bind(this)),u(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-audio-gain-slider",""),q(t,"aria-label","Audio Boost");let{canSetAudioGain:e}=this.#t.$state;this.setAttributes({"data-supported":e,"aria-hidden":K(()=>!e())})}#e(){let{value:t}=this.$state;return Math.round(t())}#i(){let{value:t}=this.$state;return t()+"%"}#s(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}#n(){let{audioGain:t}=this.#t.$state,e=((t()??1)-1)*100;this.$state.value.set(e),this.dispatch("value-change",{detail:e})}#r(){let{disabled:t}=this.$props,{canSetAudioGain:e}=this.#t.$state;return t()||!e()}#a(t){if(!t.trigger)return;let e=B(1+t.detail/100,2);this.#t.remote.changeAudioGain(e,t)}#h(t){this.#a(t)}#o(t){this.#a(t)}},Bs=class extends S{static props={...tt.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2};static state=te;#t;onSetup(){this.#t=V(),new tt({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:this.#r,isDisabled:this.#a.bind(this),aria:{valueNow:this.#e.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#d.bind(this),onValueChange:this.#l.bind(this)}).attach(this),u(this.#s.bind(this)),u(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-speed-slider",""),q(t,"aria-label","Speed");let{canSetPlaybackRate:e}=this.#t.$state;this.setAttributes({"data-supported":e,"aria-hidden":K(()=>!e())})}#e(){let{value:t}=this.$state;return t()}#i(){let{value:t}=this.$state;return t()+"x"}#s(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}#n(){let{playbackRate:t}=this.#t.$state,e=t();this.$state.value.set(e),this.dispatch("value-change",{detail:e})}#r(t){return B(t,2)}#a(){let{disabled:t}=this.$props,{canSetPlaybackRate:e}=this.#t.$state;return t()||!e()}#h=It(this.#o.bind(this),25);#o(t){if(!t.trigger)return;let e=t.detail;this.#t.remote.changePlaybackRate(e,t)}#l(t){this.#h(t)}#d(t){this.#h(t)}},Ks=class extends S{static props={...tt.props,step:1,keyStep:1,shiftKeyMultiplier:1};static state=te;#t;#e=Gt(()=>{let{qualities:t}=this.#t.$state;return Bo(t())});onSetup(){this.#t=V(),new tt({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#a.bind(this),aria:{valueNow:this.#i.bind(this),valueText:this.#s.bind(this)},onDragValueChange:this.#d.bind(this),onValueChange:this.#l.bind(this)}).attach(this),u(this.#n.bind(this)),u(this.#r.bind(this))}onAttach(t){t.setAttribute("data-media-quality-slider",""),q(t,"aria-label","Video Quality");let{qualities:e,canSetQuality:i}=this.#t.$state,n=Gt(()=>i()&&e().length>0);this.setAttributes({"data-supported":n,"aria-hidden":K(()=>!n())})}#i(){let{value:t}=this.$state;return t()}#s(){let{quality:t}=this.#t.$state;if(!t())return"";let{height:e,bitrate:i}=t(),n=i&&i>0?`${(i/1e6).toFixed(2)} Mbps`:null;return e?`${e}p${n?` (${n})`:""}`:"Auto"}#n(){let t=this.#e();this.$state.max.set(Math.max(0,t.length-1))}#r(){let{quality:t}=this.#t.$state,e=this.#e(),i=Math.max(0,e.indexOf(t()));this.$state.value.set(i),this.dispatch("value-change",{detail:i})}#a(){let{disabled:t}=this.$props,{canSetQuality:e,qualities:i}=this.#t.$state;return t()||i().length<=1||!e()}#h=It(this.#o.bind(this),25);#o(t){if(!t.trigger)return;let{qualities:e}=this.#t,i=g(this.#e)[t.detail];this.#t.remote.changeQuality(e.indexOf(i),t)}#l(t){this.#h(t)}#d(t){this.#h(t)}},oi=class extends S{static props={...tt.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};static state=te;#t;#e;#i=k(null);constructor(){super();let{noSwipeGesture:t}=this.$props;new tt({swipeGesture:()=>!t(),getValue:this.#w.bind(this),getStep:this.#y.bind(this),getKeyStep:this.#v.bind(this),roundValue:this.#f,isDisabled:this.#T.bind(this),aria:{valueNow:this.#b.bind(this),valueText:this.#x.bind(this)},onDragStart:this.#u.bind(this),onDragValueChange:this.#c.bind(this),onDragEnd:this.#p.bind(this),onValueChange:this.#m.bind(this)})}onSetup(){this.#t=V(),ct(oe,{default:"time",value:this.#$.bind(this),time:this.#S.bind(this)}),this.setAttributes({"data-chapters":this.#n.bind(this)}),this.setStyles({"--slider-progress":this.#s.bind(this)}),u(this.#a.bind(this)),u(this.#r.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),q(t,"aria-label","Seek")}onConnect(t){u(this.#h.bind(this)),wa(this.#t.textTracks,"chapters",this.#i.set)}#s(){let{bufferedEnd:t,duration:e}=this.#t.$state;return B(Math.min(t()/Math.max(e(),1),1)*100,3)+"%"}#n(){let{duration:t}=this.#t.$state;return this.#i()?.cues.length&&Number.isFinite(t())&&t()>0}#r(){this.#e=It(this.#o.bind(this),this.$props.seekingRequestThrottle())}#a(){if(this.$state.hidden())return;let{value:t,dragging:e}=this.$state,i=this.#w();g(e)||(t.set(i),this.dispatch("value-change",{detail:i}))}#h(){let t=this.#t.player.el,{preview:e}=U(mn);t&&e()&&T(t,"data-preview",this.$state.active())}#o(t,e){this.#t.remote.seeking(t,e)}#l(t,e,i){this.#e.cancel();let{live:n}=this.#t.$state;if(n()&&e>=99){this.#t.remote.seekToLiveEdge(i);return}this.#t.remote.seek(t,i)}#d=!1;#u(t){let{pauseWhileDragging:e}=this.$props;if(e()){let{paused:i}=this.#t.$state;this.#d=!i(),this.#t.remote.pause(t)}}#c(t){this.#e(this.#g(t.detail),t)}#p(t){let{seeking:e}=this.#t.$state;g(e)||this.#o(this.#g(t.detail),t);let i=t.detail;this.#l(this.#g(i),i,t);let{pauseWhileDragging:n}=this.$props;n()&&this.#d&&(this.#t.remote.play(t),this.#d=!1)}#m(t){let{dragging:e}=this.$state;e()||!t.trigger||this.#p(t)}#w(){let{currentTime:t}=this.#t.$state;return this.#k(t())}#y(){let t=this.$props.step()/this.#t.$state.duration()*100;return Number.isFinite(t)?t:1}#v(){let t=this.$props.keyStep()/this.#t.$state.duration()*100;return Number.isFinite(t)?t:1}#f(t){return B(t,3)}#T(){let{disabled:t}=this.$props,{canSeek:e}=this.#t.$state;return t()||!e()}#b(){let{value:t}=this.$state;return Math.round(t())}#x(){let t=this.#g(this.$state.value()),{duration:e}=this.#t.$state;return Number.isFinite(t)?`${ps(t)} out of ${ps(e())}`:"live"}#g(t){let{duration:e}=this.#t.$state;return B(t/100*e(),5)}#k(t){let{liveEdge:e,duration:i}=this.#t.$state,n=Math.max(0,Math.min(1,e()?1:Math.min(t,i())/i()));return Number.isNaN(n)?0:Number.isFinite(n)?n*100:100}#$(t){let e=this.#g(t),{live:i,duration:n}=this.#t.$state;return Number.isFinite(e)?(i()?e-n():e).toFixed(0):"LIVE"}#S(t,e){let i=this.#g(t),{live:n,duration:r}=this.#t.$state,a=n()?i-r():i;return Number.isFinite(i)?`${a<0?"-":""}${fn(Math.abs(a),e)}`:"LIVE"}},hi=class extends S{static props={disabled:!1};#t;#e;#i;#s=null;#n=[];#r=k(null);#a=k([]);#h=k(-1);#o=k(-1);#l=0;get cues(){return this.#a()}get activeCue(){return this.#a()[this.#h()]||null}get activePointerCue(){return this.#a()[this.#o()]||null}onSetup(){this.#t=V(),this.#e=ee(oi.state)}onAttach(t){wa(this.#t.textTracks,"chapters",this.#d.bind(this)),u(this.#E.bind(this))}onConnect(){E(()=>this.#u.bind(this))}onDestroy(){this.#d(null)}setRefs(t){if(this.#n=t,this.#i?.dispose(),this.#n.length===1){let e=this.#n[0];e.style.width="100%",e.style.setProperty("--chapter-fill","var(--slider-fill)"),e.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.#n.length>0&&Ut(()=>this.#c(),this.#i=pi())}#d(t){g(this.#r)!==t&&(this.#u(),this.#r.set(t))}#u(){this.#n=[],this.#a.set([]),this.#h.set(-1),this.#o.set(-1),this.#l=0,this.#i?.dispose()}#c(){this.#n.length&&u(this.#p.bind(this))}#p(){let{hidden:t}=this.#e;t()||(u(this.#m.bind(this)),u(this.#w.bind(this)),u(this.#y.bind(this)),u(this.#b.bind(this)))}#m(){let t=this.#a();if(!t.length)return;let e,{seekableStart:i,seekableEnd:n}=this.#t.$state,r=i(),a=n()||t[t.length-1].endTime,o=a-r,h=100;for(let c=0;c<t.length;c++)if(e=t[c],this.#n[c]){let d=c===t.length-1?h:B((e.endTime-Math.max(r,e.startTime))/o*100,3);this.#n[c].style.width=d+"%",h-=d}}#w(){let{liveEdge:t,seekableStart:e,seekableEnd:i}=this.#t.$state,{fillPercent:n,value:r}=this.#e,a=this.#a(),o=t(),h=g(this.#h),c=a[h],d=o?this.#a.length-1:this.#T(c&&c.startTime/i()*100<=g(r)?h:0,n());o||!c?this.#v(0,a.length,100):d>h?this.#v(h,d,100):d<h&&this.#v(d+1,h+1,0);let l=o?100:this.#S(a[d],n(),e(),this.#$(a));this.#f(this.#n[d],l),this.#h.set(d)}#y(){let{hidden:t,pointerPercent:e}=this.#e;if(t()){this.#o.set(-1);return}let i=this.#T(0,e());this.#o.set(i)}#v(t,e,i){for(let n=t;n<e;n++)this.#f(this.#n[n],i)}#f(t,e){t&&(t.style.setProperty("--chapter-fill",e+"%"),T(t,"data-active",e>0&&e<100),T(t,"data-ended",e===100))}#T(t,e){let i=0,n=this.#a();if(e===0)return 0;if(e===100)return n.length-1;let{seekableStart:r}=this.#t.$state,a=r(),o=this.#$(n);for(let h=t;h<n.length;h++)if(i=this.#S(n[h],e,a,o),i>=0&&i<100)return h;return 0}#b(){this.#x(this.#g())}#x=Wt(t=>{let e,i=this.#a(),{seekableStart:n}=this.#t.$state,r=n(),a=this.#$(i);for(let o=this.#l;o<this.#n.length;o++)if(e=this.#S(i[o],t,r,a),this.#n[o]?.style.setProperty("--chapter-progress",e+"%"),e<100){this.#l=o;break}});#g=Gt(this.#k.bind(this));#k(){let{bufferedEnd:t,duration:e}=this.#t.$state;return B(Math.min(t()/Math.max(e(),1),1),3)*100}#$(t){let{seekableEnd:e}=this.#t.$state,i=e();return Number.isFinite(i)?i:t[t.length-1]?.endTime||0}#S(t,e,i,n){if(!t||this.#a().length===0)return 0;let a=n-i,o=Math.max(0,t.startTime-i),h=Math.min(n,t.endTime)-i,c=o/a,d=c*100,l=Math.min(1,c+(h-o)/a)*100;return Math.max(0,B(e>=l?100:(e-d)/(l-d)*100,3))}#P(t){let e=[],{seekableStart:i,seekableEnd:n,duration:r}=this.#t.$state,a=i(),o=n();t=t.filter(d=>d.startTime<=o&&d.endTime>=a);let h=t[0];h&&h.startTime>a&&e.push(new window.VTTCue(a,h.startTime,""));for(let d=0;d<t.length-1;d++){let l=t[d],f=t[d+1];if(e.push(l),f){let p=f.startTime-l.endTime;p>0&&e.push(new window.VTTCue(l.endTime,l.endTime+p,""))}}let c=t[t.length-1];if(c){e.push(c);let d=r();d>=0&&d-c.endTime>1&&e.push(new window.VTTCue(c.endTime,r(),""))}return e}#E(){let{source:t}=this.#t.$state;t(),this.#C()}#C(){if(!this.scope)return;let{disabled:t}=this.$props;if(t()){this.#a.set([]),this.#h.set(0),this.#l=0;return}let e=this.#r();if(e){let i=this.#R.bind(this);i(),new D(e).add("add-cue",i).add("remove-cue",i),u(this.#A.bind(this))}return this.#s=this.#D(),this.#s&&u(this.#O.bind(this)),()=>{this.#s&&(this.#s.textContent="",this.#s=null)}}#A(){this.#t.$state.duration(),this.#R()}#R=Ee(()=>{let t=g(this.#r);!this.scope||!t||!t.cues.length||(this.#a.set(this.#P(t.cues)),this.#h.set(0),this.#l=0)},150,!0);#O(){let t=this.activePointerCue||this.activeCue;this.#s&&(this.#s.textContent=t?.text||"")}#L(){let t=this.el;for(;t&&t.getAttribute("role")!=="slider";)t=t.parentElement;return t}#D(){let t=this.#L();return t?t.querySelector('[data-part="chapter-title"]'):null}},di=hi.prototype;L(di,"cues");L(di,"activeCue");L(di,"activePointerCue");G(di,"setRefs");var Jt=Pt();function Oh(s,t){let e=En(s,t);for(let{el:i,top:n,left:r}of e)i.scroll({top:n,left:r,behavior:t.behavior})}function Dh(s,t={}){Oh(s,{scrollMode:"if-needed",block:"center",inline:"center",...t})}var Lh=["a[href]","[tabindex]","input","select","button"].map(s=>`${s}:not([aria-hidden='true'])`).join(","),Mh=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]),js=class{#t=-1;#e=null;#i=[];#s;get items(){return this.#i}constructor(t){this.#s=t}attachMenu(t){F(t,"focus",this.#a.bind(this)),this.#e=t,E(()=>{this.#e=null})}listen(){this.#e&&(this.update(),new D(this.#e).add("keyup",this.#o.bind(this)).add("keydown",this.#l.bind(this)),E(()=>{this.#t=-1,this.#i=[]}))}update(){this.#t=0,this.#i=this.#u()}scroll(t=this.#r()){let e=this.#i[t];e&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{Dh(e,{behavior:"smooth",boundary:i=>!i.hasAttribute("data-root")})})})}focusActive(t=!0){let e=this.#r();this.#n(e>=0?e:0,t)}#n(t,e=!0){this.#t=t,this.#i[t]?(this.#i[t].focus({preventScroll:!0}),e&&this.scroll(t)):this.#e?.focus({preventScroll:!0})}#r(){return this.#i.findIndex(t=>document.activeElement===t||t.getAttribute("role")==="menuitemradio"&&t.getAttribute("aria-checked")==="true")}#a(){this.#t>=0||(this.update(),this.focusActive())}#h(t){let e=t.target;if(vn(t)&&e instanceof Element){let i=e.getAttribute("role");return!/a|input|select|button/.test(e.localName)&&!i}return Mh.has(t.key)}#o(t){this.#h(t)&&(t.stopPropagation(),t.preventDefault())}#l(t){if(this.#h(t))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.#s.closeMenu(t);break;case"Tab":this.#n(this.#d(t.shiftKey?-1:1));break;case"ArrowUp":this.#n(this.#d(-1));break;case"ArrowDown":this.#n(this.#d(1));break;case"Home":case"PageUp":this.#n(0);break;case"End":case"PageDown":this.#n(this.#i.length-1);break}}#d(t){let e=this.#t;do e=(e+t+this.#i.length)%this.#i.length;while(this.#i[e]?.offsetParent===null);return e}#u(){if(!this.#e)return[];let t=this.#e.querySelectorAll(Lh),e=[],i=n=>n.getAttribute("role")==="menu";for(let n of t)We(n)&&n.offsetParent!==null&&Sa(this.#e,n,i)&&e.push(n);return e}},Vh=Object.defineProperty,Ih=Object.getOwnPropertyDescriptor,Se=(s,t,e,i)=>{for(var n=Ih(t,e),r=s.length-1,a;r>=0;r--)(a=s[r])&&(n=a(t,e,n)||n);return n&&Vh(t,e,n),n},Nh=0,_t=class extends S{static props={showDelay:0};#t;#e;#i;#s=k(!1);#n=k(!1);#r=k(null);#a=k(null);#h;#o=new Set;#l=null;#d;#u;#c=!1;#p=k(!1);#m=new Set;get triggerElement(){return this.#r()}get contentElement(){return this.#a()}get isSubmenu(){return!!this.#h}constructor(){super();let{showDelay:t}=this.$props;this.#d=new ei({trigger:this.#r,content:this.#a,showDelay:t,listen:(e,i,n)=>{Ft(e,a=>{this.#s()?n(a):i(a)});let r=this.#R();r&&Ft(r,a=>{a.stopPropagation(),n(a)})},onChange:this.#k.bind(this)})}onSetup(){this.#t=V();let t=++Nh;this.#e=`media-menu-${t}`,this.#i=`media-menu-button-${t}`,this.#u=new js({closeMenu:this.close.bind(this)}),Mt(Jt)&&(this.#h=U(Jt)),this.#w(),this.setAttributes({"data-open":this.#s,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.#P.bind(this)}),ct(Jt,{button:this.#r,content:this.#a,expanded:this.#s,hint:k(""),submenu:!!this.#h,disable:this.#E.bind(this),attachMenuButton:this.#v.bind(this),attachMenuItems:this.#f.bind(this),attachObserver:this.#T.bind(this),disableMenuButton:this.#x.bind(this),addSubmenu:this.#L.bind(this),onTransitionEvent:e=>{this.#m.add(e),E(()=>{this.#m.delete(e)})}})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){u(this.#y.bind(this)),this.isSubmenu&&this.#h?.addSubmenu(this)}onDestroy(){this.#r.set(null),this.#a.set(null),this.#l=null,this.#m.clear()}#w(){let t=-1,e=Mt(xe)?U(xe):null;ct(xe,{onDragStart:()=>{e?.onDragStart?.(),window.clearTimeout(t),t=-1,this.#c=!0},onDragEnd:()=>{e?.onDragEnd?.(),t=window.setTimeout(()=>{this.#c=!1,t=-1},300)}})}#y(){let t=this.#S();this.isSubmenu||this.#N(),this.#b(t),t&&(u(()=>{let{height:e}=this.#t.$state,i=this.#a();i&&ht(i,"--player-height",e()+"px")}),this.#u.listen(),this.listen("pointerup",this.#C.bind(this)),F(window,"pointerup",this.#A.bind(this)))}#v(t){let e=t.el,i=this.isSubmenu,n=K(this.#P.bind(this));q(e,"tabindex",i?"-1":"0"),q(e,"role",i?"menuitem":"button"),T(e,"id",this.#i),T(e,"aria-haspopup","menu"),T(e,"aria-expanded","false"),T(e,"data-root",!this.isSubmenu),T(e,"data-submenu",this.isSubmenu);let r=()=>{T(e,"data-open",this.#s()),T(e,"aria-disabled",n())};y?r():u(r),this.#r.set(e),E(()=>{this.#r.set(null)})}#f(t){let e=t.el;e.style.setProperty("display","none"),T(e,"id",this.#e),q(e,"role","menu"),q(e,"tabindex","-1"),T(e,"data-root",!this.isSubmenu),T(e,"data-submenu",this.isSubmenu),this.#a.set(e),E(()=>this.#a.set(null));let i=()=>T(e,"data-open",this.#s());y?i():u(i),this.#u.attachMenu(e),this.#b(!1);let n=this.#U.bind(this);this.isSubmenu?this.#h?.onTransitionEvent(n):(t.listen("transitionstart",n),t.listen("transitionend",n),t.listen("animationend",this.#N),t.listen("vds-menu-resize",this.#N))}#T(t){this.#l=t}#b(t){let e=g(this.#a);e&&T(e,"aria-hidden",ue(!t))}#x(t){this.#p.set(t)}#g=!1;#k(t,e){if(this.#g=yi(e),e?.stopPropagation(),this.#s()===t)return;if(this.#P()){t&&this.#d.hide(e);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let i=this.#r(),n=this.#a();if(i&&(T(i,"aria-controls",t&&this.#e),T(i,"aria-expanded",ue(t))),n&&T(n,"aria-labelledby",t&&this.#i),this.#s.set(t),this.#O(e),bt(),this.#g){t?n?.focus():i?.focus();for(let r of[this.el,n])r&&r.setAttribute("data-keyboard","")}else for(let r of[this.el,n])r&&r.removeAttribute("data-keyboard");if(this.dispatch(t?"open":"close",{trigger:e}),t)!this.isSubmenu&&this.#t.activeMenu!==this&&(this.#t.activeMenu?.close(e),this.#t.activeMenu=this),this.#l?.onOpen?.(e);else{if(this.isSubmenu)for(let r of this.#o)r.close(e);else this.#t.activeMenu=null;this.#l?.onClose?.(e)}t&&requestAnimationFrame(this.#$.bind(this))}#$(){this.#F||this.#q||(this.#u.update(),requestAnimationFrame(()=>{this.#g?this.#u.focusActive():this.#u.scroll()}))}#S(){return!this.#P()&&this.#s()}#P(){return this.#n()||this.#p()}#E(t){this.#n.set(t)}#C(t){let e=this.#a();this.#c||e&&cr(e,t)||t.stopPropagation()}#A(t){let e=this.#a();this.#c||e&&cr(e,t)||this.close(t)}#R(){let t=this.el?.querySelector('[data-part="close-target"]');return this.el&&t&&Sa(this.el,t,e=>e.getAttribute("role")==="menu")?t:null}#O(t){this.isSubmenu||(this.#s()?this.#t.remote.pauseControls(t):this.#t.remote.resumeControls(t))}#L(t){this.#o.add(t),new D(t).add("open",this.#I).add("close",this.#_),E(this.#D)}#D=this.#V.bind(this);#V(t){this.#o.delete(t)}#q=!1;#I=this.#M.bind(this);#M(t){this.#q=!0;let e=this.#a();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(let i of this.#o)if(i!==t.target)for(let n of[i.el,i.triggerElement])n?.setAttribute("aria-hidden","true");if(e){let i=t.target.el;for(let n of e.children)n.contains(i)?n.setAttribute("data-open",""):n!==i&&n.setAttribute("data-hidden","")}}#_=this.#H.bind(this);#H(t){this.#q=!1;let e=this.#a();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(let i of this.#o)for(let n of[i.el,i.triggerElement])n?.setAttribute("aria-hidden","false");if(e)for(let i of e.children)i.removeAttribute("data-open"),i.removeAttribute("data-hidden")}#N=Wt(()=>{let t=g(this.#a);if(!t||y)return;let e=0,i=getComputedStyle(t),n=[...t.children];for(let r of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])e+=parseFloat(i[r])||0;for(let r of n)if(We(r)&&r.style.display==="contents")n.push(...r.children);else if(r.nodeType===3)e+=parseFloat(getComputedStyle(r).fontSize);else if(We(r)){if(!$a(r))continue;let a=getComputedStyle(r);e+=r.offsetHeight+(parseFloat(a.marginTop)||0)+(parseFloat(a.marginBottom)||0)}ht(t,"--menu-height",e+"px")});#F=!1;#U(t){let e=this.#a();e&&t.propertyName==="height"&&(this.#F=t.type==="transitionstart",T(e,"data-transition",this.#F?"height":null),this.#s()&&this.#$());for(let i of this.#m)i(t)}open(t){g(this.#s)||(this.#d.show(t),bt())}close(t){g(this.#s)&&(this.#d.hide(t),bt())}};Se([L],_t.prototype,"triggerElement");Se([L],_t.prototype,"contentElement");Se([L],_t.prototype,"isSubmenu");Se([G],_t.prototype,"open");Se([G],_t.prototype,"close");var ke=class extends S{static props={disabled:!1};#t;#e=k(null);get expanded(){return this.#t?.expanded()??!1}constructor(){super(),new ot}onSetup(){this.#t=U(Jt)}onAttach(t){this.#t.attachMenuButton(this),u(this.#i.bind(this)),q(t,"type","button")}onConnect(t){u(this.#s.bind(this)),this.#n();let e=new MutationObserver(this.#n.bind(this));e.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),E(()=>e.disconnect()),Ft(t,i=>{this.dispatch("select",{trigger:i})})}#i(){this.#t.disableMenuButton(this.$props.disabled())}#s(){let t=this.#e();t&&u(()=>{let e=this.#t.hint();e&&(t.textContent=e)})}#n(){let t=this.el?.querySelector('[data-part="hint"]');this.#e.set(t??null)}},Fh=ke.prototype;L(Fh,"expanded");var Qs=class extends ke{};var qi=Pt(),zs=class extends S{static props={placement:null,offset:0,alignOffset:0};#t;constructor(){super(),new ot;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.#t=U(Jt),this.#t.attachMenuItems(this),Mt(qi)){let e=U(qi);e&&(ct(qi,null),e.attach(t),E(()=>e.attach(null)))}}onConnect(t){u(this.#e.bind(this))}#e(){let{expanded:t}=this.#t;if(!this.el||!t())return;let e=this.$props.placement();if(!e)return;Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:i,alignOffset:n}=this.$props;E(Ea(this.el,this.#s(),e,{offsetVarName:"media-menu",xOffset:n(),yOffset:i()})),E(this.#i.bind(this))}#i(){this.el&&(this.el.removeAttribute("style"),this.el.style.display="none")}#s(){return this.#t.button()}},Ys=Pt(),Xs=class extends lt{#t=new Set;#e=k("");#i=null;onValueChange;get values(){return Array.from(this.#t).map(t=>t.value())}get value(){return this.#e()}set value(t){this.#a(t)}onSetup(){ct(Ys,{add:this.#s.bind(this),remove:this.#n.bind(this)})}onAttach(t){Mt(Jt)||q(t,"role","radiogroup"),this.setAttributes({value:this.#e})}onDestroy(){this.#t.clear()}#s(t){this.#t.has(t)||(this.#t.add(t),t.onCheck=this.#r,t.check(t.value()===this.#e()))}#n(t){t.onCheck=null,this.#t.delete(t)}#r=this.#a.bind(this);#a(t,e){let i=g(this.#e);if(!t||t===i)return;let n=this.#h(i),r=this.#h(t);n?.check(!1,e),r?.check(!0,e),this.#e.set(t),this.onValueChange?.(t,e)}#h(t){for(let e of this.#t)if(t===g(e.value))return e;return null}},ci=class extends S{static props={value:""};#t;get values(){return this.#t.values}get value(){return this.#t.value}set value(t){this.#t.value=t}constructor(){super(),this.#t=new Xs,this.#t.onValueChange=this.#i.bind(this)}onSetup(){y?this.#e():u(this.#e.bind(this))}#e(){this.#t.value=this.$props.value()}#i(t,e){let i=this.createEvent("change",{detail:t,trigger:e});this.dispatch(i)}},qa=ci.prototype;L(qa,"values");L(qa,"value");var li=class extends S{static props={value:""};#t=k(!1);#e={value:this.$props.value,check:this.#a.bind(this),onCheck:null};get checked(){return this.#t()}constructor(){super(),new ot}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.#t,"aria-checked":K(this.#t)})}onAttach(t){let e=Mt(Jt);q(t,"tabindex",e?"-1":"0"),q(t,"role",e?"menuitemradio":"radio"),u(this.#n.bind(this))}onConnect(t){this.#s(),Ft(t,this.#r.bind(this)),E(this.#i.bind(this))}#i(){Ut(()=>{U(Ys).remove(this.#e)},this.connectScope)}#s(){U(Ys).add(this.#e)}#n(){let{value:t}=this.$props,e=t();g(this.#t)&&this.#e.onCheck?.(e)}#r(t){g(this.#t)||(this.#h(!0,t),this.#o(t),this.#e.onCheck?.(g(this.$props.value),t))}#a(t,e){g(this.#t)!==t&&this.#h(t,e)}#h(t,e){this.#t.set(t),this.dispatch("change",{detail:t,trigger:e})}#o(t){this.dispatch("select",{trigger:t})}},_h=li.prototype;L(_h,"checked");var Js=class extends S{static props={disabled:!1,event:void 0,action:void 0};#t;#e=null;onSetup(){this.#t=V();let{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){this.#e=this.#t.player.el?.querySelector("[data-media-provider]"),u(this.#i.bind(this))}#i(){let t=this.$props.event(),e=this.$props.disabled();!this.#e||!t||e||(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),(t==="pointerup"||t==="pointerdown")&&this.#t.$state.pointer()==="coarse"&&(t=t==="pointerup"?"touchend":"touchstart"),F(this.#e,t,this.#r.bind(this),{passive:!1}))}#s=0;#n=-1;#r(t){if(this.$props.disabled()||gi(t)&&(t.button!==0||this.#t.activeMenu)||de(t)&&this.#t.activeMenu||un(t)||!this.#h(t))return;if(t.MEDIA_GESTURE=!0,t.preventDefault(),!g(this.$props.event)?.startsWith("dbl"))this.#s===0&&setTimeout(()=>{this.#s===1&&this.#a(t)},250);else if(this.#s===1){queueMicrotask(()=>this.#a(t)),clearTimeout(this.#n),this.#s=0;return}this.#s===0&&(this.#n=window.setTimeout(()=>{this.#s=0},275)),this.#s++}#a(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.#o()&&this.#l(g(this.$props.action),t),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}#h(t){if(!this.el)return!1;if(gi(t)||wn(t)||de(t)){let e=de(t)?t.changedTouches[0]??t.touches[0]:void 0,i=e?.clientX??t.clientX,n=e?.clientY??t.clientY,r=this.el.getBoundingClientRect(),a=n>=r.top&&n<=r.bottom&&i>=r.left&&i<=r.right;return t.type.includes("leave")?!a:a}return!0}#o(){let t=this.#t.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort((e,i)=>+getComputedStyle(i).zIndex-+getComputedStyle(e).zIndex)[0]===this.el}#l(t,e){if(!t)return;let i=new R("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(i),i.defaultPrevented)return;let[n,r]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.#t.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.#t.remote.seek(g(this.#t.$state.currentTime)+(+r||0),e):this.#t.remote[xn(n)](e),this.dispatch("trigger",{detail:t,trigger:e})}},Zs=class{priority=10;#t=null;#e;#i;constructor(t){this.#e=t}attach(){}canRender(){return!0}detach(){this.#i?.abort(),this.#i=void 0,this.#e.reset(),this.#t=null}changeTrack(t){!t||this.#t===t||(this.#i?.abort(),this.#i=new D(t),t.readyState<2?(this.#e.reset(),this.#i.add("load",()=>this.#s(t),{once:!0})):this.#s(t),this.#i.add("add-cue",e=>{this.#e.addCue(e.detail)}).add("remove-cue",e=>{this.#e.removeCue(e.detail)}),this.#t=t)}#s(t){this.#e.changeTrack({cues:[...t.cues],regions:[...t.regions]})}},tn=class s extends S{static props={textDir:"ltr",exampleText:"Captions look like this."};#t;static lib=k(null);onSetup(){this.#t=V(),this.setAttributes({"aria-hidden":K(this.#e.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){s.lib()||import("./prod-USPFQIFU.mjs").then(e=>s.lib.set(e)),u(this.#i.bind(this))}#e(){let{textTrack:t,remotePlaybackState:e,iOSControls:i}=this.#t.$state,n=t();return i()||e()==="connected"||!n||!at(n)}#i(){if(!s.lib())return;let{viewType:t}=this.#t.$state;return t()==="audio"?this.#s():this.#h()}#s(){return u(this.#n.bind(this)),this.#d(null),()=>{this.el.textContent=""}}#n(){if(this.#e())return;this.#r();let{textTrack:t}=this.#t.$state;F(t(),"cue-change",this.#r.bind(this)),u(this.#a.bind(this))}#r(){this.el.textContent="",this.#p>=0&&this.#w();let{realCurrentTime:t,textTrack:e}=this.#t.$state,{renderVTTCueString:i}=s.lib(),n=g(t),r=g(e).activeCues;for(let a of r){let o=this.#y(),h=this.#v();h.innerHTML=i(a,n),o.append(h),this.el.append(h)}}#a(){let{realCurrentTime:t}=this.#t.$state,{updateTimedVTTCueNodes:e}=s.lib();e(this.el,t())}#h(){let{CaptionsRenderer:t}=s.lib(),e=new t(this.el),i=new Zs(e);return this.#t.textRenderers.add(i),u(this.#o.bind(this,e)),u(this.#l.bind(this,e)),this.#d(e),()=>{this.el.textContent="",this.#t.textRenderers.remove(i),e.destroy()}}#o(t){t.dir=this.$props.textDir()}#l(t){if(this.#e())return;let{realCurrentTime:e,textTrack:i}=this.#t.$state;t.currentTime=e(),this.#p>=0&&i()?.activeCues[0]&&this.#w()}#d(t){let e=this.#t.player;if(!e)return;let i=this.#u.bind(this,t);F(e,"vds-font-change",i)}#u(t){if(this.#p>=0){this.#m();return}let{textTrack:e}=this.#t.$state;e()?.activeCues[0]?t?.update(!0):this.#c()}#c(){let t=this.#y();T(t,"data-example","");let e=this.#v();T(e,"data-example",""),e.textContent=this.$props.exampleText(),t?.append(e),this.el?.append(t),this.el?.setAttribute("data-example",""),this.#m()}#p=-1;#m(){window.clearTimeout(this.#p),this.#p=window.setTimeout(this.#w.bind(this),2500)}#w(){this.el?.removeAttribute("data-example"),this.el?.querySelector("[data-example]")&&(this.el.textContent=""),this.#p=-1}#y(){let t=document.createElement("div");return T(t,"data-part","cue-display"),t}#v(){let t=document.createElement("div");return T(t,"data-part","cue"),t}},en=class extends S{static props={src:null,alt:null,crossOrigin:null};static state=new Et({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});#t;onSetup(){this.#t=V(),this.#h(),this.#o(),this.#l(),this.#s()}onAttach(t){t.style.setProperty("pointer-events","none"),u(this.#r.bind(this)),u(this.#h.bind(this)),u(this.#o.bind(this)),u(this.#l.bind(this)),u(this.#s.bind(this));let{started:e}=this.#t.$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":this.#n.bind(this),"data-error":this.#e.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){u(this.#i.bind(this)),u(this.#d.bind(this))}#e(){let{error:t}=this.$state;return!wt(t())}#i(){let{canLoadPoster:t,poster:e}=this.#t.$state;!t()&&e()&&ce(e(),"preconnect")}#s(){let{src:t}=this.$props,{poster:e,nativeControls:i}=this.#t.$state;this.el&&T(this.el,"display",i()?"none":null),this.$state.hidden.set(this.#e()||!(t()||e())||i())}#n(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}#r(){let t=this.$state.img();t&&(new D(t).add("load",this.#u.bind(this)).add("error",this.#c.bind(this)),t.complete&&this.#u())}#a="";#h(){let{poster:t}=this.#t.$props,{canLoadPoster:e,providedPoster:i,inferredPoster:n}=this.#t.$state,r=this.$props.src()||"",a=r||t()||n();this.#a===i()&&i.set(r),this.$state.src.set(e()&&a.length?a:null),this.#a=r}#o(){let{src:t}=this.$props,{alt:e}=this.$state,{poster:i}=this.#t.$state;e.set(t()||i()?this.$props.alt():null)}#l(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i,poster:n}=this.#t.$state,r=t()!==null?t():i();e.set(/ytimg\.com|vimeo/.test(n()||"")?null:r===!0?"anonymous":r)}#d(){let{loading:t,error:e}=this.$state,{canLoadPoster:i,poster:n}=this.#t.$state;t.set(i()&&!!n()),e.set(null)}#u(){let{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}#c(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}},sn=class extends S{static props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1};static state=new Et({timeText:"",hidden:!1});#t;#e=k(null);#i=k(!0);#s=k(!0);onSetup(){this.#t=V(),this.#h();let{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.#d.bind(this)}),new si({callback:this.#n.bind(this)}).attach(this)}onAttach(t){t.hasAttribute("role")||u(this.#o.bind(this)),u(this.#h.bind(this))}onConnect(t){E(ka(t,this.#i.set)),u(this.#r.bind(this)),u(this.#a.bind(this))}#n(t){this.#s.set(t[0].isIntersecting)}#r(){let{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.#i()||!this.#s())}#a(){if(!this.$props.toggle()){this.#e.set(null);return}this.el&&Ft(this.el,this.#u.bind(this))}#h(){let{hidden:t,timeText:e}=this.$state,{duration:i}=this.#t.$state;if(t())return;let{type:n,padHours:r,padMinutes:a,showHours:o}=this.$props,h=this.#l(n()),c=i(),d=this.#d();if(!Number.isFinite(h+c)){e.set("LIVE");return}let l=d?Math.max(0,c-h):h,f=fn(l,{padHrs:r(),padMins:a(),showHrs:o()});e.set((d?"-":"")+f)}#o(){if(!this.el)return;let{toggle:t}=this.$props;T(this.el,"role",t()?"timer":null),T(this.el,"tabindex",t()?0:null)}#l(t){let{bufferedEnd:e,duration:i,currentTime:n}=this.#t.$state;switch(t){case"buffered":return e();case"duration":return i();default:return n()}}#d(){return this.$props.remainder()&&this.#e()!==!1}#u(t){if(t.preventDefault(),this.#e()===null){this.#e.set(!this.$props.remainder());return}this.#e.set(e=>!e)}},nn=class extends Ze{},xr=class extends ti{},$r=class extends ks{},kr=class extends Ss{},Sr=class extends Ps{},Pr=class extends ii{},Er=class extends Ds{},Ar=class extends Ls{},Cr=class extends Ns{},Rr=class extends Ms{},qr=class extends Vs{},Or=class extends Os{},Dr=class extends Rs{},Lr=class extends qs{},Mr=class extends Is{},Vr=class extends Es{},Ir=class extends As{},Nr=class extends Cs{},rn=class extends Zt{},Fr=class extends oi{},_r=class extends Gs{},Hr=class extends Ws{},Ur=class extends Bs{},Gr=class extends Ks{},Wr=class extends Hs{},Br=class extends ai{},Kr=class extends ri{},jr=class extends Us{},Qr=class extends hi{},zr=class extends _t{},Yr=class extends ke{},Xr=class extends zs{},Jr=class extends Qs{};var Zr=class extends ci{},ta=class extends li{},ea=class extends tn{},ia=class extends Js{},sa=class extends en{},na=class extends ni{},ra=class extends sn{},Oa=N.forwardRef((s,t)=>{let{children:e,...i}=s,n=N.Children.toArray(e),r=n.find(Uh);if(r){let a=r.props.children,o=n.map(h=>h===r?N.Children.count(a)>1?N.Children.only(null):N.isValidElement(a)?a.props.children:null:h);return N.createElement(an,{...i,ref:t},N.isValidElement(a)?N.cloneElement(a,void 0,o):null)}return N.createElement(an,{...i,ref:t},e)});Oa.displayName="Slot";var an=N.forwardRef((s,t)=>{let{children:e,...i}=s;return N.isValidElement(e)?N.cloneElement(e,{...Gh(i,e.props),ref:t?kn(t,e.ref):e.ref}):N.Children.count(e)>1?N.Children.only(null):null});an.displayName="SlotClone";var Hh=({children:s})=>N.createElement(N.Fragment,null,s);function Uh(s){return N.isValidElement(s)&&s.type===Hh}function Gh(s,t){let e={...t};for(let i in t){let n=s[i],r=t[i];/^on[A-Z]/.test(i)?n&&r?e[i]=(...o)=>{r(...o),n(...o)}:n&&(e[i]=n):i==="style"?e[i]={...n,...r}:i==="className"&&(e[i]=[n,r].filter(Boolean).join(" "))}return{...s,...e}}var Wh=["button","div","span","img","video","audio"],mc=Wh.reduce((s,t)=>{let e=N.forwardRef((i,n)=>{let{asChild:r,...a}=i;return N.createElement(r?Oa:t,{...a,ref:n})});return e.displayName=`Primitive.${t}`,{...s,[t]:e}},{});function gc(s){return s?.$$PROVIDER_TYPE==="REMOTION"}var aa=rn.state.record,Bh=Object.keys(aa).reduce((s,t)=>({...s,[t](){return aa[t]}}),{});function yc(s,t){let e=vi(te);return Ti((t?.current?.$state||e||Bh)[s])}var oa=nn.state.record,Kh=Object.keys(oa).reduce((s,t)=>({...s,[t](){return oa[t]}}),{});function bc(s,t){let e=vi(ln);return Ti((t?.current?.$state||e||Kh)[s])}export{ir as a,nc as b,sr as c,nr as d,rc as e,ac as f,oc as g,hc as h,rr as i,y as j,on as k,ca as l,hn as m,ae as n,bo as o,fc as p,ce as q,vo as r,x as s,wa as t,Nt as u,ln as v,xa as w,V as x,Di as y,P as z,rt as A,Qe as B,Zi as C,es as D,ze as E,_e as F,Jt as G,Xs as H,nn as I,xr as J,$r as K,kr as L,Sr as M,Pr as N,Er as O,Ar as P,Cr as Q,Rr as R,qr as S,Or as T,Dr as U,Lr as V,Mr as W,Vr as X,Ir as Y,Nr as Z,rn as _,Fr as $,_r as aa,Hr as ba,Ur as ca,Gr as da,Wr as ea,Br as fa,Kr as ga,jr as ha,Qr as ia,zr as ja,Yr as ka,Xr as la,Jr as ma,Zr as na,ta as oa,ea as pa,ia as qa,sa as ra,na as sa,ra as ta,mc as ua,gc as va,yc as wa,bc as xa};
//# sourceMappingURL=chunk-CVDFGJFQ.mjs.map