{"version":3,"sources":["../../../node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs","../../../node_modules/@floating-ui/core/dist/floating-ui.core.mjs","../../../node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs","../../../node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs","../../../node_modules/@vidstack/react/prod/chunks/vidstack-D5Pzx_k5.js"],"sourcesContent":["/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nfunction getSideAxis(placement) {\n  return ['top', 'bottom'].includes(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nfunction getSideList(side, isStart, rtl) {\n  const lr = ['left', 'right'];\n  const rl = ['right', 'left'];\n  const tb = ['top', 'bottom'];\n  const bt = ['bottom', 'top'];\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rl : lr;\n      return isStart ? lr : rl;\n    case 'left':\n    case 'right':\n      return isStart ? tb : bt;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n","import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    x,\n    y,\n    width: rects.floating.width,\n    height: rects.floating.height\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const initialSideAxis = getSideAxis(initialPlacement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const hasFallbackAxisSideDirection = fallbackAxisSideDirection !== 'none';\n      if (!specifiedFallbackPlacements && hasFallbackAxisSideDirection) {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          // Try next placement and re-run the lifecycle.\n          return {\n            data: {\n              index: nextIndex,\n              overflows: overflowsData\n            },\n            reset: {\n              placement: nextPlacement\n            }\n          };\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$filter2;\n                const placement = (_overflowsData$filter2 = overflowsData.filter(d => {\n                  if (hasFallbackAxisSideDirection) {\n                    const currentSideAxis = getSideAxis(d.placement);\n                    return currentSideAxis === initialSideAxis ||\n                    // Create a bias to the `y` side axis due to horizontal\n                    // reading directions favoring greater width.\n                    currentSideAxis === 'y';\n                  }\n                  return true;\n                }).map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$filter2[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\n\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = ['left', 'top'].includes(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n\n  // eslint-disable-next-line prefer-const\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: rawValue.mainAxis || 0,\n    crossAxis: rawValue.crossAxis || 0,\n    alignmentAxis: rawValue.alignmentAxis\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y,\n          enabled: {\n            [mainAxis]: checkMainAxis,\n            [crossAxis]: checkCrossAxis\n          }\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = ['top', 'left'].includes(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element â€”\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      var _state$middlewareData, _state$middlewareData2;\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const maximumClippingHeight = height - overflow.top - overflow.bottom;\n      const maximumClippingWidth = width - overflow.left - overflow.right;\n      const overflowAvailableHeight = min(height - overflow[heightSide], maximumClippingHeight);\n      const overflowAvailableWidth = min(width - overflow[widthSide], maximumClippingWidth);\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if ((_state$middlewareData = state.middlewareData.shift) != null && _state$middlewareData.enabled.x) {\n        availableWidth = maximumClippingWidth;\n      }\n      if ((_state$middlewareData2 = state.middlewareData.shift) != null && _state$middlewareData2.enabled.y) {\n        availableHeight = maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };\n","function hasWindow() {\n  return typeof window !== 'undefined';\n}\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  if (!hasWindow() || typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !['inline', 'contents'].includes(display);\n}\nfunction isTableElement(element) {\n  return ['table', 'td', 'th'].includes(getNodeName(element));\n}\nfunction isTopLayer(element) {\n  return [':popover-open', ':modal'].some(selector => {\n    try {\n      return element.matches(selector);\n    } catch (e) {\n      return false;\n    }\n  });\n}\nfunction isContainingBlock(elementOrCss) {\n  const webkit = isWebKit();\n  const css = isElement(elementOrCss) ? getComputedStyle(elementOrCss) : elementOrCss;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  // https://drafts.csswg.org/css-transforms-2/#individual-transforms\n  return ['transform', 'translate', 'scale', 'rotate', 'perspective'].some(value => css[value] ? css[value] !== 'none' : false) || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || ['transform', 'translate', 'scale', 'rotate', 'perspective', 'filter'].some(value => (css.willChange || '').includes(value)) || ['paint', 'layout', 'strict', 'content'].some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else if (isTopLayer(currentNode)) {\n      return null;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nfunction isLastTraversableNode(node) {\n  return ['html', 'body', '#document'].includes(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.scrollX,\n    scrollTop: element.scrollY\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    const frameElement = getFrameElement(win);\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], frameElement && traverseIframes ? getOverflowAncestors(frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getFrameElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isTopLayer, isWebKit };\n","import { rectToClientRect, detectOverflow as detectOverflow$1, offset as offset$1, autoPlacement as autoPlacement$1, shift as shift$1, flip as flip$1, size as size$1, hide as hide$1, arrow as arrow$1, inline as inline$1, limitShift as limitShift$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getNodeScroll, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\n\nfunction getHTMLOffset(documentElement, scroll, ignoreScrollbarX) {\n  if (ignoreScrollbarX === void 0) {\n    ignoreScrollbarX = false;\n  }\n  const htmlRect = documentElement.getBoundingClientRect();\n  const x = htmlRect.left + scroll.scrollLeft - (ignoreScrollbarX ? 0 :\n  // RTL <body> scrollbar.\n  getWindowScrollBarX(documentElement, htmlRect));\n  const y = htmlRect.top + scroll.scrollTop;\n  return {\n    x,\n    y\n  };\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll, true) : createCoords(0);\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x + htmlOffset.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y + htmlOffset.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y,\n      width: clippingAncestor.width,\n      height: clippingAncestor.height\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && ['absolute', 'fixed'].includes(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n      // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlOffset.x;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlOffset.y;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction isStaticPositioned(element) {\n  return getComputedStyle(element).position === 'static';\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\nfunction rectsAreEqual(a, b) {\n  return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const elementRectForRootMargin = element.getBoundingClientRect();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = elementRectForRootMargin;\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      if (ratio === 1 && !rectsAreEqual(elementRectForRootMargin, element.getBoundingClientRect())) {\n        // It's possible that even though the ratio is reported as 1, the\n        // element is not actually fully within the IntersectionObserver's root\n        // area anymore. This can happen under performance constraints. This may\n        // be a bug in the browser's IntersectionObserver implementation. To\n        // work around this, we compare the element's bounding rect now with\n        // what it was at the time we created the IntersectionObserver. If they\n        // are not equal then the element moved, so we refresh.\n        refresh();\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && !rectsAreEqual(prevRefRect, nextRefRect)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element â€”\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };\n","\"use client\"\n\nimport * as React from 'react';\nimport { isNumber, isString, isFunction, waitTimeout, isUndefined, isArray, isNull, deferredPromise, isBoolean, listenEvent, scoped, getScope, EventsTarget, DOMEvent, State, fscreen, tick, useContext, createContext, Component, functionThrottle, isTouchEvent, setStyle, EventsController, isKeyboardClick, setAttribute, effect, isDOMNode, onDispose, untrack, functionDebounce, ViewController, signal, peek, isKeyboardEvent, isNil, createScope, camelToKebabCase, waitIdlePeriod, provideContext, animationFrameThrottle, uppercaseFirstChar, computed, prop, method, noop, ariaBool as ariaBool$1, isWriteSignal, hasProvidedContext, isObject, useState, r, wasEnterKeyPressed, isPointerEvent, isMouseEvent, kebabToCamelCase, composeRefs, useStateContext, useSignal, useSignalRecord } from './vidstack-CZgUA94N.js';\nimport { autoUpdate, computePosition, flip, shift } from '@floating-ui/dom';\n\nfunction isVideoQualitySrc(src) {\n  return !isString(src) && \"width\" in src && \"height\" in src && isNumber(src.width) && isNumber(src.height);\n}\n\nconst IS_SERVER = typeof document === \"undefined\";\n\nconst UA = IS_SERVER ? \"\" : navigator?.userAgent.toLowerCase() || \"\";\nconst IS_IOS = !IS_SERVER && /iphone|ipad|ipod|ios|crios|fxios/i.test(UA);\nconst IS_IPHONE = !IS_SERVER && /(iphone|ipod)/gi.test(navigator?.platform || \"\");\nconst IS_CHROME = !IS_SERVER && !!window.chrome;\nconst IS_SAFARI = !IS_SERVER && (!!window.safari || IS_IOS);\nfunction canOrientScreen() {\n  return canRotateScreen() && isFunction(screen.orientation.unlock);\n}\nfunction canRotateScreen() {\n  return !IS_SERVER && !isUndefined(window.screen.orientation) && !isUndefined(window.screen.orientation.lock);\n}\nfunction canPlayAudioType(audio, type) {\n  if (IS_SERVER) return false;\n  if (!audio) audio = document.createElement(\"audio\");\n  return audio.canPlayType(type).length > 0;\n}\nfunction canPlayVideoType(video, type) {\n  if (IS_SERVER) return false;\n  if (!video) video = document.createElement(\"video\");\n  return video.canPlayType(type).length > 0;\n}\nfunction canPlayHLSNatively(video) {\n  if (IS_SERVER) return false;\n  if (!video) video = document.createElement(\"video\");\n  return video.canPlayType(\"application/vnd.apple.mpegurl\").length > 0;\n}\nfunction canUsePictureInPicture(video) {\n  if (IS_SERVER) return false;\n  return !!document.pictureInPictureEnabled && !video?.disablePictureInPicture;\n}\nfunction canUseVideoPresentation(video) {\n  if (IS_SERVER) return false;\n  return isFunction(video?.webkitSupportsPresentationMode) && isFunction(video?.webkitSetPresentationMode);\n}\nasync function canChangeVolume() {\n  const video = document.createElement(\"video\");\n  video.volume = 0.5;\n  await waitTimeout(0);\n  return video.volume === 0.5;\n}\nfunction getMediaSource() {\n  return IS_SERVER ? void 0 : window?.ManagedMediaSource ?? window?.MediaSource ?? window?.WebKitMediaSource;\n}\nfunction getSourceBuffer() {\n  return IS_SERVER ? void 0 : window?.SourceBuffer ?? window?.WebKitSourceBuffer;\n}\nfunction isHLSSupported() {\n  if (IS_SERVER) return false;\n  const MediaSource = getMediaSource();\n  if (isUndefined(MediaSource)) return false;\n  const isTypeSupported = MediaSource && isFunction(MediaSource.isTypeSupported) && MediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"');\n  const SourceBuffer = getSourceBuffer();\n  const isSourceBufferValid = isUndefined(SourceBuffer) || !isUndefined(SourceBuffer.prototype) && isFunction(SourceBuffer.prototype.appendBuffer) && isFunction(SourceBuffer.prototype.remove);\n  return !!isTypeSupported && !!isSourceBufferValid;\n}\nfunction isDASHSupported() {\n  return isHLSSupported();\n}\n\nclass TimeRange {\n  #ranges;\n  get length() {\n    return this.#ranges.length;\n  }\n  constructor(start, end) {\n    if (isArray(start)) {\n      this.#ranges = start;\n    } else if (!isUndefined(start) && !isUndefined(end)) {\n      this.#ranges = [[start, end]];\n    } else {\n      this.#ranges = [];\n    }\n  }\n  start(index) {\n    return this.#ranges[index][0] ?? Infinity;\n  }\n  end(index) {\n    return this.#ranges[index][1] ?? Infinity;\n  }\n}\nfunction getTimeRangesStart(range) {\n  if (!range.length) return null;\n  let min = range.start(0);\n  for (let i = 1; i < range.length; i++) {\n    const value = range.start(i);\n    if (value < min) min = value;\n  }\n  return min;\n}\nfunction getTimeRangesEnd(range) {\n  if (!range.length) return null;\n  let max = range.end(0);\n  for (let i = 1; i < range.length; i++) {\n    const value = range.end(i);\n    if (value > max) max = value;\n  }\n  return max;\n}\nfunction normalizeTimeIntervals(intervals) {\n  if (intervals.length <= 1) {\n    return intervals;\n  }\n  intervals.sort((a, b) => a[0] - b[0]);\n  let normalized = [], current = intervals[0];\n  for (let i = 1; i < intervals.length; i++) {\n    const next = intervals[i];\n    if (current[1] >= next[0] - 1) {\n      current = [current[0], Math.max(current[1], next[1])];\n    } else {\n      normalized.push(current);\n      current = next;\n    }\n  }\n  normalized.push(current);\n  return normalized;\n}\nfunction updateTimeIntervals(intervals, interval, value) {\n  let start = interval[0], end = interval[1];\n  if (value < start) {\n    return [value, -1];\n  } else if (value === start) {\n    return interval;\n  } else if (start === -1) {\n    interval[0] = value;\n    return interval;\n  } else if (value > start) {\n    interval[1] = value;\n    if (end === -1) intervals.push(interval);\n  }\n  normalizeTimeIntervals(intervals);\n  return interval;\n}\n\nconst AUDIO_EXTENSIONS = /\\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx|flac)($|\\?)/i;\nconst AUDIO_TYPES = /* @__PURE__ */ new Set([\n  \"audio/mpeg\",\n  \"audio/ogg\",\n  \"audio/3gp\",\n  \"audio/mp3\",\n  \"audio/webm\",\n  \"audio/flac\",\n  \"audio/m4a\",\n  \"audio/m4b\",\n  \"audio/mp4a\",\n  \"audio/mp4\"\n]);\nconst VIDEO_EXTENSIONS = /\\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\\d+]+)?($|\\?)/i;\nconst VIDEO_TYPES = /* @__PURE__ */ new Set([\n  \"video/mp4\",\n  \"video/webm\",\n  \"video/3gp\",\n  \"video/ogg\",\n  \"video/avi\",\n  \"video/mpeg\"\n]);\nconst HLS_VIDEO_EXTENSIONS = /\\.(m3u8)($|\\?)/i;\nconst DASH_VIDEO_EXTENSIONS = /\\.(mpd)($|\\?)/i;\nconst HLS_VIDEO_TYPES = /* @__PURE__ */ new Set([\n  // Apple sanctioned\n  \"application/vnd.apple.mpegurl\",\n  // Apple sanctioned for backwards compatibility\n  \"audio/mpegurl\",\n  // Very common\n  \"audio/x-mpegurl\",\n  // Very common\n  \"application/x-mpegurl\",\n  // Included for completeness\n  \"video/x-mpegurl\",\n  \"video/mpegurl\",\n  \"application/mpegurl\"\n]);\nconst DASH_VIDEO_TYPES = /* @__PURE__ */ new Set([\"application/dash+xml\"]);\nfunction isAudioSrc({ src, type }) {\n  return isString(src) ? AUDIO_EXTENSIONS.test(src) || AUDIO_TYPES.has(type) || src.startsWith(\"blob:\") && type === \"audio/object\" : type === \"audio/object\";\n}\nfunction isVideoSrc(src) {\n  return isString(src.src) ? VIDEO_EXTENSIONS.test(src.src) || VIDEO_TYPES.has(src.type) || src.src.startsWith(\"blob:\") && src.type === \"video/object\" || isHLSSrc(src) && (IS_SERVER || canPlayHLSNatively()) : src.type === \"video/object\";\n}\nfunction isHLSSrc({ src, type }) {\n  return isString(src) && HLS_VIDEO_EXTENSIONS.test(src) || HLS_VIDEO_TYPES.has(type);\n}\nfunction isDASHSrc({ src, type }) {\n  return isString(src) && DASH_VIDEO_EXTENSIONS.test(src) || DASH_VIDEO_TYPES.has(type);\n}\nfunction canGoogleCastSrc(src) {\n  return isString(src.src) && (isAudioSrc(src) || isVideoSrc(src) || isHLSSrc(src));\n}\nfunction isMediaStream(src) {\n  return !IS_SERVER && typeof window.MediaStream !== \"undefined\" && src instanceof window.MediaStream;\n}\n\nfunction appendParamsToURL(baseUrl, params) {\n  const url = new URL(baseUrl);\n  for (const key of Object.keys(params)) {\n    url.searchParams.set(key, params[key] + \"\");\n  }\n  return url.toString();\n}\nfunction preconnect(url, rel = \"preconnect\") {\n  if (IS_SERVER) return false;\n  const exists = document.querySelector(`link[href=\"${url}\"]`);\n  if (!isNull(exists)) return true;\n  const link = document.createElement(\"link\");\n  link.rel = rel;\n  link.href = url;\n  link.crossOrigin = \"true\";\n  document.head.append(link);\n  return true;\n}\nconst pendingRequests = {};\nfunction loadScript(src) {\n  if (pendingRequests[src]) return pendingRequests[src].promise;\n  const promise = deferredPromise(), exists = document.querySelector(`script[src=\"${src}\"]`);\n  if (!isNull(exists)) {\n    promise.resolve();\n    return promise.promise;\n  }\n  pendingRequests[src] = promise;\n  const script = document.createElement(\"script\");\n  script.src = src;\n  script.onload = () => {\n    promise.resolve();\n    delete pendingRequests[src];\n  };\n  script.onerror = () => {\n    promise.reject();\n    delete pendingRequests[src];\n  };\n  setTimeout(() => document.head.append(script), 0);\n  return promise.promise;\n}\nfunction getRequestCredentials(crossOrigin) {\n  return crossOrigin === \"use-credentials\" ? \"include\" : isString(crossOrigin) ? \"same-origin\" : void 0;\n}\nfunction getDownloadFile({\n  title,\n  src,\n  download\n}) {\n  const url = isBoolean(download) || download === \"\" ? src.src : isString(download) ? download : download?.url;\n  if (!isValidFileDownload({ url, src, download })) return null;\n  return {\n    url,\n    name: !isBoolean(download) && !isString(download) && download?.filename || title.toLowerCase() || \"media\"\n  };\n}\nfunction isValidFileDownload({\n  url,\n  src,\n  download\n}) {\n  return isString(url) && (download && download !== true || isAudioSrc(src) || isVideoSrc(src));\n}\n\nconst CROSS_ORIGIN = Symbol(0), READY_STATE = Symbol(0), UPDATE_ACTIVE_CUES = Symbol(0), CAN_LOAD = Symbol(0), ON_MODE_CHANGE = Symbol(0), NATIVE = Symbol(0), NATIVE_HLS = Symbol(0);\nconst TextTrackSymbol = {\n  crossOrigin: CROSS_ORIGIN,\n  readyState: READY_STATE,\n  updateActiveCues: UPDATE_ACTIVE_CUES,\n  canLoad: CAN_LOAD,\n  onModeChange: ON_MODE_CHANGE,\n  native: NATIVE,\n  nativeHLS: NATIVE_HLS\n};\n\nfunction findActiveCue(cues, time) {\n  for (let i = 0, len = cues.length; i < len; i++) {\n    if (isCueActive(cues[i], time)) return cues[i];\n  }\n  return null;\n}\nfunction isCueActive(cue, time) {\n  return time >= cue.startTime && time < cue.endTime;\n}\nfunction watchActiveTextTrack(tracks, kind, onChange) {\n  let currentTrack = null, scope = getScope();\n  function onModeChange() {\n    const kinds = isString(kind) ? [kind] : kind, track = tracks.toArray().find((track2) => kinds.includes(track2.kind) && track2.mode === \"showing\");\n    if (track === currentTrack) return;\n    if (!track) {\n      onChange(null);\n      currentTrack = null;\n      return;\n    }\n    if (track.readyState == 2) {\n      onChange(track);\n    } else {\n      onChange(null);\n      scoped(() => {\n        const off = listenEvent(\n          track,\n          \"load\",\n          () => {\n            onChange(track);\n            off();\n          },\n          { once: true }\n        );\n      }, scope);\n    }\n    currentTrack = track;\n  }\n  onModeChange();\n  return listenEvent(tracks, \"mode-change\", onModeChange);\n}\nfunction watchCueTextChange(tracks, kind, callback) {\n  watchActiveTextTrack(tracks, kind, (track) => {\n    if (!track) {\n      callback(\"\");\n      return;\n    }\n    const onCueChange = () => {\n      const activeCue = track?.activeCues[0];\n      callback(activeCue?.text || \"\");\n    };\n    onCueChange();\n    listenEvent(track, \"cue-change\", onCueChange);\n  });\n}\n\nclass TextTrack extends EventsTarget {\n  static createId(track) {\n    return `vds-${track.type}-${track.kind}-${track.src ?? track.label ?? \"?\"}`;\n  }\n  src;\n  content;\n  type;\n  encoding;\n  id = \"\";\n  label = \"\";\n  language = \"\";\n  kind;\n  default = false;\n  #canLoad = false;\n  #currentTime = 0;\n  #mode = \"disabled\";\n  #metadata = {};\n  #regions = [];\n  #cues = [];\n  #activeCues = [];\n  /** @internal */\n  [TextTrackSymbol.readyState] = 0;\n  /** @internal */\n  [TextTrackSymbol.crossOrigin];\n  /** @internal */\n  [TextTrackSymbol.onModeChange] = null;\n  /** @internal */\n  [TextTrackSymbol.native] = null;\n  get metadata() {\n    return this.#metadata;\n  }\n  get regions() {\n    return this.#regions;\n  }\n  get cues() {\n    return this.#cues;\n  }\n  get activeCues() {\n    return this.#activeCues;\n  }\n  /**\n   * - 0: Not Loading\n   * - 1: Loading\n   * - 2: Ready\n   * - 3: Error\n   */\n  get readyState() {\n    return this[TextTrackSymbol.readyState];\n  }\n  get mode() {\n    return this.#mode;\n  }\n  set mode(mode) {\n    this.setMode(mode);\n  }\n  constructor(init) {\n    super();\n    for (const prop of Object.keys(init)) this[prop] = init[prop];\n    if (!this.type) this.type = \"vtt\";\n    if (!IS_SERVER && init.content) {\n      this.#parseContent(init);\n    } else if (!init.src) {\n      this[TextTrackSymbol.readyState] = 2;\n    }\n  }\n  addCue(cue, trigger) {\n    let i = 0, length = this.#cues.length;\n    for (i = 0; i < length; i++) if (cue.endTime <= this.#cues[i].startTime) break;\n    if (i === length) this.#cues.push(cue);\n    else this.#cues.splice(i, 0, cue);\n    if (!(cue instanceof TextTrackCue)) {\n      this[TextTrackSymbol.native]?.track.addCue(cue);\n    }\n    this.dispatchEvent(new DOMEvent(\"add-cue\", { detail: cue, trigger }));\n    if (isCueActive(cue, this.#currentTime)) {\n      this[TextTrackSymbol.updateActiveCues](this.#currentTime, trigger);\n    }\n  }\n  removeCue(cue, trigger) {\n    const index = this.#cues.indexOf(cue);\n    if (index >= 0) {\n      const isActive = this.#activeCues.includes(cue);\n      this.#cues.splice(index, 1);\n      this[TextTrackSymbol.native]?.track.removeCue(cue);\n      this.dispatchEvent(new DOMEvent(\"remove-cue\", { detail: cue, trigger }));\n      if (isActive) {\n        this[TextTrackSymbol.updateActiveCues](this.#currentTime, trigger);\n      }\n    }\n  }\n  setMode(mode, trigger) {\n    if (this.#mode === mode) return;\n    this.#mode = mode;\n    if (mode === \"disabled\") {\n      this.#activeCues = [];\n      this.#activeCuesChanged();\n    } else if (this.readyState === 2) {\n      this[TextTrackSymbol.updateActiveCues](this.#currentTime, trigger);\n    } else {\n      this.#load();\n    }\n    this.dispatchEvent(new DOMEvent(\"mode-change\", { detail: this, trigger }));\n    this[TextTrackSymbol.onModeChange]?.();\n  }\n  /** @internal */\n  [TextTrackSymbol.updateActiveCues](currentTime, trigger) {\n    this.#currentTime = currentTime;\n    if (this.mode === \"disabled\" || !this.#cues.length) return;\n    const activeCues = [];\n    for (let i = 0, length = this.#cues.length; i < length; i++) {\n      const cue = this.#cues[i];\n      if (isCueActive(cue, currentTime)) activeCues.push(cue);\n    }\n    let changed = activeCues.length !== this.#activeCues.length;\n    if (!changed) {\n      for (let i = 0; i < activeCues.length; i++) {\n        if (!this.#activeCues.includes(activeCues[i])) {\n          changed = true;\n          break;\n        }\n      }\n    }\n    this.#activeCues = activeCues;\n    if (changed) this.#activeCuesChanged(trigger);\n  }\n  /** @internal */\n  [TextTrackSymbol.canLoad]() {\n    this.#canLoad = true;\n    if (this.#mode !== \"disabled\") this.#load();\n  }\n  #parseContent(init) {\n    import('media-captions').then(({ parseText, VTTCue, VTTRegion }) => {\n      if (!isString(init.content) || init.type === \"json\") {\n        this.#parseJSON(init.content, VTTCue, VTTRegion);\n        if (this.readyState !== 3) this.#ready();\n      } else {\n        parseText(init.content, { type: init.type }).then(({ cues, regions }) => {\n          this.#cues = cues;\n          this.#regions = regions;\n          this.#ready();\n        });\n      }\n    });\n  }\n  async #load() {\n    if (!this.#canLoad || this[TextTrackSymbol.readyState] > 0) return;\n    this[TextTrackSymbol.readyState] = 1;\n    this.dispatchEvent(new DOMEvent(\"load-start\"));\n    if (!this.src) {\n      this.#ready();\n      return;\n    }\n    try {\n      const { parseResponse, VTTCue, VTTRegion } = await import('media-captions'), crossOrigin = this[TextTrackSymbol.crossOrigin]?.();\n      const response = fetch(this.src, {\n        headers: this.type === \"json\" ? { \"Content-Type\": \"application/json\" } : void 0,\n        credentials: getRequestCredentials(crossOrigin)\n      });\n      if (this.type === \"json\") {\n        this.#parseJSON(await (await response).text(), VTTCue, VTTRegion);\n      } else {\n        const { errors, metadata, regions, cues } = await parseResponse(response, {\n          type: this.type,\n          encoding: this.encoding\n        });\n        if (errors[0]?.code === 0) {\n          throw errors[0];\n        } else {\n          this.#metadata = metadata;\n          this.#regions = regions;\n          this.#cues = cues;\n        }\n      }\n      this.#ready();\n    } catch (error) {\n      this.#error(error);\n    }\n  }\n  #ready() {\n    this[TextTrackSymbol.readyState] = 2;\n    if (!this.src || this.type !== \"vtt\") {\n      const native = this[TextTrackSymbol.native];\n      if (native && !native.managed) {\n        for (const cue of this.#cues) native.track.addCue(cue);\n      }\n    }\n    const loadEvent = new DOMEvent(\"load\");\n    this[TextTrackSymbol.updateActiveCues](this.#currentTime, loadEvent);\n    this.dispatchEvent(loadEvent);\n  }\n  #error(error) {\n    this[TextTrackSymbol.readyState] = 3;\n    this.dispatchEvent(new DOMEvent(\"error\", { detail: error }));\n  }\n  #parseJSON(json, VTTCue, VTTRegion) {\n    try {\n      const { regions, cues } = parseJSONCaptionsFile(json, VTTCue, VTTRegion);\n      this.#regions = regions;\n      this.#cues = cues;\n    } catch (error) {\n      this.#error(error);\n    }\n  }\n  #activeCuesChanged(trigger) {\n    this.dispatchEvent(new DOMEvent(\"cue-change\", { trigger }));\n  }\n}\nconst captionRE = /captions|subtitles/;\nfunction isTrackCaptionKind(track) {\n  return captionRE.test(track.kind);\n}\nfunction parseJSONCaptionsFile(json, Cue, Region) {\n  const content = isString(json) ? JSON.parse(json) : json;\n  let regions = [], cues = [];\n  if (content.regions && Region) {\n    regions = content.regions.map((region) => Object.assign(new Region(), region));\n  }\n  if (content.cues || isArray(content)) {\n    cues = (isArray(content) ? content : content.cues).filter((content2) => isNumber(content2.startTime) && isNumber(content2.endTime)).map((cue) => Object.assign(new Cue(0, 0, \"\"), cue));\n  }\n  return { regions, cues };\n}\n\nconst mediaState = new State({\n  artist: \"\",\n  artwork: null,\n  audioTrack: null,\n  audioTracks: [],\n  autoPlay: false,\n  autoPlayError: null,\n  audioGain: null,\n  buffered: new TimeRange(),\n  canLoad: false,\n  canLoadPoster: false,\n  canFullscreen: false,\n  canOrientScreen: canOrientScreen(),\n  canPictureInPicture: false,\n  canPlay: false,\n  clipStartTime: 0,\n  clipEndTime: 0,\n  controls: false,\n  get iOSControls() {\n    return IS_IPHONE && this.mediaType === \"video\" && (!this.playsInline || !fscreen.fullscreenEnabled && this.fullscreen);\n  },\n  get nativeControls() {\n    return this.controls || this.iOSControls;\n  },\n  controlsVisible: false,\n  get controlsHidden() {\n    return !this.controlsVisible;\n  },\n  crossOrigin: null,\n  ended: false,\n  error: null,\n  fullscreen: false,\n  get loop() {\n    return this.providedLoop || this.userPrefersLoop;\n  },\n  logLevel: \"silent\",\n  mediaType: \"unknown\",\n  muted: false,\n  paused: true,\n  played: new TimeRange(),\n  playing: false,\n  playsInline: false,\n  pictureInPicture: false,\n  preload: \"metadata\",\n  playbackRate: 1,\n  qualities: [],\n  quality: null,\n  autoQuality: false,\n  canSetQuality: true,\n  canSetPlaybackRate: true,\n  canSetVolume: false,\n  canSetAudioGain: false,\n  seekable: new TimeRange(),\n  seeking: false,\n  source: { src: \"\", type: \"\" },\n  sources: [],\n  started: false,\n  textTracks: [],\n  textTrack: null,\n  get hasCaptions() {\n    return this.textTracks.filter(isTrackCaptionKind).length > 0;\n  },\n  volume: 1,\n  waiting: false,\n  realCurrentTime: 0,\n  get currentTime() {\n    return this.ended ? this.duration : this.clipStartTime > 0 ? Math.max(0, Math.min(this.realCurrentTime - this.clipStartTime, this.duration)) : this.realCurrentTime;\n  },\n  providedDuration: -1,\n  intrinsicDuration: 0,\n  get duration() {\n    return this.seekableWindow;\n  },\n  get title() {\n    return this.providedTitle || this.inferredTitle;\n  },\n  get poster() {\n    return this.providedPoster || this.inferredPoster;\n  },\n  get viewType() {\n    return this.providedViewType !== \"unknown\" ? this.providedViewType : this.inferredViewType;\n  },\n  get streamType() {\n    return this.providedStreamType !== \"unknown\" ? this.providedStreamType : this.inferredStreamType;\n  },\n  get currentSrc() {\n    return this.source;\n  },\n  get bufferedStart() {\n    const start = getTimeRangesStart(this.buffered) ?? 0;\n    return Math.max(start, this.clipStartTime);\n  },\n  get bufferedEnd() {\n    const end = getTimeRangesEnd(this.buffered) ?? 0;\n    return Math.min(this.seekableEnd, Math.max(0, end - this.clipStartTime));\n  },\n  get bufferedWindow() {\n    return Math.max(0, this.bufferedEnd - this.bufferedStart);\n  },\n  get seekableStart() {\n    if (this.isLiveDVR && this.liveDVRWindow > 0) {\n      return Math.max(0, this.seekableEnd - this.liveDVRWindow);\n    }\n    const start = getTimeRangesStart(this.seekable) ?? 0;\n    return Math.max(start, this.clipStartTime);\n  },\n  get seekableEnd() {\n    if (this.providedDuration > 0) return this.providedDuration;\n    const end = this.liveSyncPosition > 0 ? this.liveSyncPosition : this.canPlay ? getTimeRangesEnd(this.seekable) ?? Infinity : 0;\n    return this.clipEndTime > 0 ? Math.min(this.clipEndTime, end) : end;\n  },\n  get seekableWindow() {\n    const window = this.seekableEnd - this.seekableStart;\n    return !isNaN(window) ? Math.max(0, window) : Infinity;\n  },\n  // ~~ remote playback ~~\n  canAirPlay: false,\n  canGoogleCast: false,\n  remotePlaybackState: \"disconnected\",\n  remotePlaybackType: \"none\",\n  remotePlaybackLoader: null,\n  remotePlaybackInfo: null,\n  get isAirPlayConnected() {\n    return this.remotePlaybackType === \"airplay\" && this.remotePlaybackState === \"connected\";\n  },\n  get isGoogleCastConnected() {\n    return this.remotePlaybackType === \"google-cast\" && this.remotePlaybackState === \"connected\";\n  },\n  // ~~ responsive design ~~\n  pointer: \"fine\",\n  orientation: \"landscape\",\n  width: 0,\n  height: 0,\n  mediaWidth: 0,\n  mediaHeight: 0,\n  lastKeyboardAction: null,\n  // ~~ user props ~~\n  userBehindLiveEdge: false,\n  // ~~ live props ~~\n  liveEdgeTolerance: 10,\n  minLiveDVRWindow: 60,\n  get canSeek() {\n    return /unknown|on-demand|:dvr/.test(this.streamType) && Number.isFinite(this.duration) && (!this.isLiveDVR || this.duration >= this.liveDVRWindow);\n  },\n  get live() {\n    return this.streamType.includes(\"live\") || !Number.isFinite(this.duration);\n  },\n  get liveEdgeStart() {\n    return this.live && Number.isFinite(this.seekableEnd) ? Math.max(0, this.seekableEnd - this.liveEdgeTolerance) : 0;\n  },\n  get liveEdge() {\n    return this.live && (!this.canSeek || !this.userBehindLiveEdge && this.currentTime >= this.liveEdgeStart);\n  },\n  get liveEdgeWindow() {\n    return this.live && Number.isFinite(this.seekableEnd) ? this.seekableEnd - this.liveEdgeStart : 0;\n  },\n  get isLiveDVR() {\n    return /:dvr/.test(this.streamType);\n  },\n  get liveDVRWindow() {\n    return Math.max(this.inferredLiveDVRWindow, this.minLiveDVRWindow);\n  },\n  // ~~ internal props ~~\n  autoPlaying: false,\n  providedTitle: \"\",\n  inferredTitle: \"\",\n  providedLoop: false,\n  userPrefersLoop: false,\n  providedPoster: \"\",\n  inferredPoster: \"\",\n  inferredViewType: \"unknown\",\n  providedViewType: \"unknown\",\n  providedStreamType: \"unknown\",\n  inferredStreamType: \"unknown\",\n  liveSyncPosition: null,\n  inferredLiveDVRWindow: 0,\n  savedState: null\n});\nconst RESET_ON_SRC_QUALITY_CHANGE = /* @__PURE__ */ new Set([\n  \"autoPlayError\",\n  \"autoPlaying\",\n  \"buffered\",\n  \"canPlay\",\n  \"error\",\n  \"paused\",\n  \"played\",\n  \"playing\",\n  \"seekable\",\n  \"seeking\",\n  \"waiting\"\n]);\nconst RESET_ON_SRC_CHANGE = /* @__PURE__ */ new Set([\n  ...RESET_ON_SRC_QUALITY_CHANGE,\n  \"ended\",\n  \"inferredPoster\",\n  \"inferredStreamType\",\n  \"inferredTitle\",\n  \"intrinsicDuration\",\n  \"inferredLiveDVRWindow\",\n  \"liveSyncPosition\",\n  \"realCurrentTime\",\n  \"savedState\",\n  \"started\",\n  \"userBehindLiveEdge\"\n]);\nfunction softResetMediaState($media, isSourceQualityChange = false) {\n  const filter = isSourceQualityChange ? RESET_ON_SRC_QUALITY_CHANGE : RESET_ON_SRC_CHANGE;\n  mediaState.reset($media, (prop) => filter.has(prop));\n  tick();\n}\nfunction boundTime(time, store) {\n  const clippedTime = time + store.clipStartTime(), isStart = Math.floor(time) === Math.floor(store.seekableStart()), isEnd = Math.floor(clippedTime) === Math.floor(store.seekableEnd());\n  if (isStart) {\n    return store.seekableStart();\n  }\n  if (isEnd) {\n    return store.seekableEnd();\n  }\n  if (store.isLiveDVR() && store.liveDVRWindow() > 0 && clippedTime < store.seekableEnd() - store.liveDVRWindow()) {\n    return store.bufferedStart();\n  }\n  return Math.min(Math.max(store.seekableStart() + 0.1, clippedTime), store.seekableEnd() - 0.1);\n}\n\nconst mediaContext = createContext();\nfunction useMediaContext() {\n  return useContext(mediaContext);\n}\n\nclass MediaRemoteControl {\n  #target = null;\n  #player = null;\n  #prevTrackIndex = -1;\n  #logger;\n  constructor(logger = void 0) {\n    this.#logger = logger;\n  }\n  /**\n   * Set the target from which to dispatch media requests events from. The events should bubble\n   * up from this target to the player element.\n   *\n   * @example\n   * ```ts\n   * const button = document.querySelector('button');\n   * remote.setTarget(button);\n   * ```\n   */\n  setTarget(target) {\n    this.#target = target;\n  }\n  /**\n   * Returns the current player element. This method will attempt to find the player by\n   * searching up from either the given `target` or default target set via `remote.setTarget`.\n   *\n   * @example\n   * ```ts\n   * const player = remote.getPlayer();\n   * ```\n   */\n  getPlayer(target) {\n    if (this.#player) return this.#player;\n    (target ?? this.#target)?.dispatchEvent(\n      new DOMEvent(\"find-media-player\", {\n        detail: (player) => void (this.#player = player),\n        bubbles: true,\n        composed: true\n      })\n    );\n    return this.#player;\n  }\n  /**\n   * Set the current player element so the remote can support toggle methods such as\n   * `togglePaused` as they rely on the current media state.\n   */\n  setPlayer(player) {\n    this.#player = player;\n  }\n  /**\n   * Dispatch a request to start the media loading process. This will only work if the media\n   * player has been initialized with a custom loading strategy `load=\"custom\">`.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoading(trigger) {\n    this.#dispatchRequest(\"media-start-loading\", trigger);\n  }\n  /**\n   * Dispatch a request to start the poster loading process. This will only work if the media\n   * player has been initialized with a custom poster loading strategy `posterLoad=\"custom\">`.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoadingPoster(trigger) {\n    this.#dispatchRequest(\"media-poster-start-loading\", trigger);\n  }\n  /**\n   * Dispatch a request to connect to AirPlay.\n   *\n   * @see {@link https://www.apple.com/au/airplay}\n   */\n  requestAirPlay(trigger) {\n    this.#dispatchRequest(\"media-airplay-request\", trigger);\n  }\n  /**\n   * Dispatch a request to connect to Google Cast.\n   *\n   * @see {@link https://developers.google.com/cast/docs/overview}\n   */\n  requestGoogleCast(trigger) {\n    this.#dispatchRequest(\"media-google-cast-request\", trigger);\n  }\n  /**\n   * Dispatch a request to begin/resume media playback.\n   */\n  play(trigger) {\n    this.#dispatchRequest(\"media-play-request\", trigger);\n  }\n  /**\n   * Dispatch a request to pause media playback.\n   */\n  pause(trigger) {\n    this.#dispatchRequest(\"media-pause-request\", trigger);\n  }\n  /**\n   * Dispatch a request to set the media volume to mute (0).\n   */\n  mute(trigger) {\n    this.#dispatchRequest(\"media-mute-request\", trigger);\n  }\n  /**\n   * Dispatch a request to unmute the media volume and set it back to it's previous state.\n   */\n  unmute(trigger) {\n    this.#dispatchRequest(\"media-unmute-request\", trigger);\n  }\n  /**\n   * Dispatch a request to enter fullscreen.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/fullscreen#remote-control}\n   */\n  enterFullscreen(target, trigger) {\n    this.#dispatchRequest(\"media-enter-fullscreen-request\", trigger, target);\n  }\n  /**\n   * Dispatch a request to exit fullscreen.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/fullscreen#remote-control}\n   */\n  exitFullscreen(target, trigger) {\n    this.#dispatchRequest(\"media-exit-fullscreen-request\", trigger, target);\n  }\n  /**\n   * Dispatch a request to lock the screen orientation.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/screen-orientation#remote-control}\n   */\n  lockScreenOrientation(lockType, trigger) {\n    this.#dispatchRequest(\"media-orientation-lock-request\", trigger, lockType);\n  }\n  /**\n   * Dispatch a request to unlock the screen orientation.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/screen-orientation#remote-control}\n   */\n  unlockScreenOrientation(trigger) {\n    this.#dispatchRequest(\"media-orientation-unlock-request\", trigger);\n  }\n  /**\n   * Dispatch a request to enter picture-in-picture mode.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/picture-in-picture#remote-control}\n   */\n  enterPictureInPicture(trigger) {\n    this.#dispatchRequest(\"media-enter-pip-request\", trigger);\n  }\n  /**\n   * Dispatch a request to exit picture-in-picture mode.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/picture-in-picture#remote-control}\n   */\n  exitPictureInPicture(trigger) {\n    this.#dispatchRequest(\"media-exit-pip-request\", trigger);\n  }\n  /**\n   * Notify the media player that a seeking process is happening and to seek to the given `time`.\n   */\n  seeking(time, trigger) {\n    this.#dispatchRequest(\"media-seeking-request\", trigger, time);\n  }\n  /**\n   * Notify the media player that a seeking operation has completed and to seek to the given `time`.\n   * This is generally called after a series of `remote.seeking()` calls.\n   */\n  seek(time, trigger) {\n    this.#dispatchRequest(\"media-seek-request\", trigger, time);\n  }\n  seekToLiveEdge(trigger) {\n    this.#dispatchRequest(\"media-live-edge-request\", trigger);\n  }\n  /**\n   * Dispatch a request to update the length of the media in seconds.\n   *\n   * @example\n   * ```ts\n   * remote.changeDuration(100); // 100 seconds\n   * ```\n   */\n  changeDuration(duration, trigger) {\n    this.#dispatchRequest(\"media-duration-change-request\", trigger, duration);\n  }\n  /**\n   * Dispatch a request to update the clip start time. This is the time at which media playback\n   * should start at.\n   *\n   * @example\n   * ```ts\n   * remote.changeClipStart(100); // start at 100 seconds\n   * ```\n   */\n  changeClipStart(startTime, trigger) {\n    this.#dispatchRequest(\"media-clip-start-change-request\", trigger, startTime);\n  }\n  /**\n   * Dispatch a request to update the clip end time. This is the time at which media playback\n   * should end at.\n   *\n   * @example\n   * ```ts\n   * remote.changeClipEnd(100); // end at 100 seconds\n   * ```\n   */\n  changeClipEnd(endTime, trigger) {\n    this.#dispatchRequest(\"media-clip-end-change-request\", trigger, endTime);\n  }\n  /**\n   * Dispatch a request to update the media volume to the given `volume` level which is a value\n   * between 0 and 1.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/audio-gain#remote-control}\n   * @example\n   * ```ts\n   * remote.changeVolume(0); // 0%\n   * remote.changeVolume(0.05); // 5%\n   * remote.changeVolume(0.5); // 50%\n   * remote.changeVolume(0.75); // 70%\n   * remote.changeVolume(1); // 100%\n   * ```\n   */\n  changeVolume(volume, trigger) {\n    this.#dispatchRequest(\"media-volume-change-request\", trigger, Math.max(0, Math.min(1, volume)));\n  }\n  /**\n   * Dispatch a request to change the current audio track.\n   *\n   * @example\n   * ```ts\n   * remote.changeAudioTrack(1); // track at index 1\n   * ```\n   */\n  changeAudioTrack(index, trigger) {\n    this.#dispatchRequest(\"media-audio-track-change-request\", trigger, index);\n  }\n  /**\n   * Dispatch a request to change the video quality. The special value `-1` represents auto quality\n   * selection.\n   *\n   * @example\n   * ```ts\n   * remote.changeQuality(-1); // auto\n   * remote.changeQuality(1); // quality at index 1\n   * ```\n   */\n  changeQuality(index, trigger) {\n    this.#dispatchRequest(\"media-quality-change-request\", trigger, index);\n  }\n  /**\n   * Request auto quality selection.\n   */\n  requestAutoQuality(trigger) {\n    this.changeQuality(-1, trigger);\n  }\n  /**\n   * Dispatch a request to change the mode of the text track at the given index.\n   *\n   * @example\n   * ```ts\n   * remote.changeTextTrackMode(1, 'showing'); // track at index 1\n   * ```\n   */\n  changeTextTrackMode(index, mode, trigger) {\n    this.#dispatchRequest(\"media-text-track-change-request\", trigger, {\n      index,\n      mode\n    });\n  }\n  /**\n   * Dispatch a request to change the media playback rate.\n   *\n   * @example\n   * ```ts\n   * remote.changePlaybackRate(0.5); // Half the normal speed\n   * remote.changePlaybackRate(1); // Normal speed\n   * remote.changePlaybackRate(1.5); // 50% faster than normal\n   * remote.changePlaybackRate(2); // Double the normal speed\n   * ```\n   */\n  changePlaybackRate(rate, trigger) {\n    this.#dispatchRequest(\"media-rate-change-request\", trigger, rate);\n  }\n  /**\n   * Dispatch a request to change the media audio gain.\n   *\n   * @example\n   * ```ts\n   * remote.changeAudioGain(1); // Disable audio gain\n   * remote.changeAudioGain(1.5); // 50% louder\n   * remote.changeAudioGain(2); // 100% louder\n   * ```\n   */\n  changeAudioGain(gain, trigger) {\n    this.#dispatchRequest(\"media-audio-gain-change-request\", trigger, gain);\n  }\n  /**\n   * Dispatch a request to resume idle tracking on controls.\n   */\n  resumeControls(trigger) {\n    this.#dispatchRequest(\"media-resume-controls-request\", trigger);\n  }\n  /**\n   * Dispatch a request to pause controls idle tracking. Pausing tracking will result in the\n   * controls being visible until `remote.resumeControls()` is called. This method\n   * is generally used when building custom controls and you'd like to prevent the UI from\n   * disappearing.\n   *\n   * @example\n   * ```ts\n   * // Prevent controls hiding while menu is being interacted with.\n   * function onSettingsOpen() {\n   *   remote.pauseControls();\n   * }\n   *\n   * function onSettingsClose() {\n   *   remote.resumeControls();\n   * }\n   * ```\n   */\n  pauseControls(trigger) {\n    this.#dispatchRequest(\"media-pause-controls-request\", trigger);\n  }\n  /**\n   * Dispatch a request to toggle the media playback state.\n   */\n  togglePaused(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      return;\n    }\n    if (player.state.paused) this.play(trigger);\n    else this.pause(trigger);\n  }\n  /**\n   * Dispatch a request to toggle the controls visibility.\n   */\n  toggleControls(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      return;\n    }\n    if (!player.controls.showing) {\n      player.controls.show(0, trigger);\n    } else {\n      player.controls.hide(0, trigger);\n    }\n  }\n  /**\n   * Dispatch a request to toggle the media muted state.\n   */\n  toggleMuted(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      return;\n    }\n    if (player.state.muted) this.unmute(trigger);\n    else this.mute(trigger);\n  }\n  /**\n   * Dispatch a request to toggle the media fullscreen state.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/fullscreen#remote-control}\n   */\n  toggleFullscreen(target, trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      return;\n    }\n    if (player.state.fullscreen) this.exitFullscreen(target, trigger);\n    else this.enterFullscreen(target, trigger);\n  }\n  /**\n   * Dispatch a request to toggle the media picture-in-picture mode.\n   *\n   * @docs {@link https://www.vidstack.io/docs/player/api/picture-in-picture#remote-control}\n   */\n  togglePictureInPicture(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      return;\n    }\n    if (player.state.pictureInPicture) this.exitPictureInPicture(trigger);\n    else this.enterPictureInPicture(trigger);\n  }\n  /**\n   * Show captions.\n   */\n  showCaptions(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      return;\n    }\n    let tracks = player.state.textTracks, index = this.#prevTrackIndex;\n    if (!tracks[index] || !isTrackCaptionKind(tracks[index])) {\n      index = -1;\n    }\n    if (index === -1) {\n      index = tracks.findIndex((track) => isTrackCaptionKind(track) && track.default);\n    }\n    if (index === -1) {\n      index = tracks.findIndex((track) => isTrackCaptionKind(track));\n    }\n    if (index >= 0) this.changeTextTrackMode(index, \"showing\", trigger);\n    this.#prevTrackIndex = -1;\n  }\n  /**\n   * Turn captions off.\n   */\n  disableCaptions(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      return;\n    }\n    const tracks = player.state.textTracks, track = player.state.textTrack;\n    if (track) {\n      const index = tracks.indexOf(track);\n      this.changeTextTrackMode(index, \"disabled\", trigger);\n      this.#prevTrackIndex = index;\n    }\n  }\n  /**\n   * Dispatch a request to toggle the current captions mode.\n   */\n  toggleCaptions(trigger) {\n    const player = this.getPlayer(trigger?.target);\n    if (!player) {\n      return;\n    }\n    if (player.state.textTrack) {\n      this.disableCaptions();\n    } else {\n      this.showCaptions();\n    }\n  }\n  userPrefersLoopChange(prefersLoop, trigger) {\n    this.#dispatchRequest(\"media-user-loop-change-request\", trigger, prefersLoop);\n  }\n  #dispatchRequest(type, trigger, detail) {\n    const request = new DOMEvent(type, {\n      bubbles: true,\n      composed: true,\n      cancelable: true,\n      detail,\n      trigger\n    });\n    let target = trigger?.target || null;\n    if (target && target instanceof Component) target = target.el;\n    const shouldUsePlayer = !target || target === document || target === window || target === document.body || this.#player?.el && target instanceof Node && !this.#player.el.contains(target);\n    target = shouldUsePlayer ? this.#target ?? this.getPlayer()?.el : target ?? this.#target;\n    if (this.#player) {\n      if (type === \"media-play-request\" && !this.#player.state.canLoad) {\n        target?.dispatchEvent(request);\n      } else {\n        this.#player.canPlayQueue.enqueue(type, () => target?.dispatchEvent(request));\n      }\n    } else {\n      target?.dispatchEvent(request);\n    }\n  }\n  #noPlayerWarning(method) {\n  }\n}\n\nclass LocalMediaStorage {\n  playerId = \"vds-player\";\n  mediaId = null;\n  #data = {\n    volume: null,\n    muted: null,\n    audioGain: null,\n    time: null,\n    lang: null,\n    captions: null,\n    rate: null,\n    quality: null\n  };\n  async getVolume() {\n    return this.#data.volume;\n  }\n  async setVolume(volume) {\n    this.#data.volume = volume;\n    this.save();\n  }\n  async getMuted() {\n    return this.#data.muted;\n  }\n  async setMuted(muted) {\n    this.#data.muted = muted;\n    this.save();\n  }\n  async getTime() {\n    return this.#data.time;\n  }\n  async setTime(time, ended) {\n    const shouldClear = time < 0;\n    this.#data.time = !shouldClear ? time : null;\n    if (shouldClear || ended) this.saveTime();\n    else this.saveTimeThrottled();\n  }\n  async getLang() {\n    return this.#data.lang;\n  }\n  async setLang(lang) {\n    this.#data.lang = lang;\n    this.save();\n  }\n  async getCaptions() {\n    return this.#data.captions;\n  }\n  async setCaptions(enabled) {\n    this.#data.captions = enabled;\n    this.save();\n  }\n  async getPlaybackRate() {\n    return this.#data.rate;\n  }\n  async setPlaybackRate(rate) {\n    this.#data.rate = rate;\n    this.save();\n  }\n  async getAudioGain() {\n    return this.#data.audioGain;\n  }\n  async setAudioGain(gain) {\n    this.#data.audioGain = gain;\n    this.save();\n  }\n  async getVideoQuality() {\n    return this.#data.quality;\n  }\n  async setVideoQuality(quality) {\n    this.#data.quality = quality;\n    this.save();\n  }\n  onChange(src, mediaId, playerId = \"vds-player\") {\n    const savedData = playerId ? localStorage.getItem(playerId) : null, savedTime = mediaId ? localStorage.getItem(mediaId) : null;\n    this.playerId = playerId;\n    this.mediaId = mediaId;\n    this.#data = {\n      volume: null,\n      muted: null,\n      audioGain: null,\n      lang: null,\n      captions: null,\n      rate: null,\n      quality: null,\n      ...savedData ? JSON.parse(savedData) : {},\n      time: savedTime ? +savedTime : null\n    };\n  }\n  save() {\n    if (IS_SERVER || !this.playerId) return;\n    const data = JSON.stringify({ ...this.#data, time: void 0 });\n    localStorage.setItem(this.playerId, data);\n  }\n  saveTimeThrottled = functionThrottle(this.saveTime.bind(this), 1e3);\n  saveTime() {\n    if (IS_SERVER || !this.mediaId) return;\n    const data = (this.#data.time ?? 0).toString();\n    localStorage.setItem(this.mediaId, data);\n  }\n}\n\nconst ADD = Symbol(0), REMOVE = Symbol(0), RESET = Symbol(0), SELECT = Symbol(0), READONLY = Symbol(0), SET_READONLY = Symbol(0), ON_RESET = Symbol(0), ON_REMOVE = Symbol(0), ON_USER_SELECT = Symbol(0);\nconst ListSymbol = {\n  add: ADD,\n  remove: REMOVE,\n  reset: RESET,\n  select: SELECT,\n  readonly: READONLY,\n  setReadonly: SET_READONLY,\n  onReset: ON_RESET,\n  onRemove: ON_REMOVE,\n  onUserSelect: ON_USER_SELECT\n};\n\nclass List extends EventsTarget {\n  items = [];\n  /** @internal */\n  [ListSymbol.readonly] = false;\n  get length() {\n    return this.items.length;\n  }\n  get readonly() {\n    return this[ListSymbol.readonly];\n  }\n  /**\n   * Returns the index of the first occurrence of the given item, or -1 if it is not present.\n   */\n  indexOf(item) {\n    return this.items.indexOf(item);\n  }\n  /**\n   * Returns an item matching the given `id`, or `null` if not present.\n   */\n  getById(id) {\n    if (id === \"\") return null;\n    return this.items.find((item) => item.id === id) ?? null;\n  }\n  /**\n   * Transform list to an array.\n   */\n  toArray() {\n    return [...this.items];\n  }\n  [Symbol.iterator]() {\n    return this.items.values();\n  }\n  /** @internal */\n  [ListSymbol.add](item, trigger) {\n    const index = this.items.length;\n    if (!(\"\" + index in this)) {\n      Object.defineProperty(this, index, {\n        get() {\n          return this.items[index];\n        }\n      });\n    }\n    if (this.items.includes(item)) return;\n    this.items.push(item);\n    this.dispatchEvent(new DOMEvent(\"add\", { detail: item, trigger }));\n  }\n  /** @internal */\n  [ListSymbol.remove](item, trigger) {\n    const index = this.items.indexOf(item);\n    if (index >= 0) {\n      this[ListSymbol.onRemove]?.(item, trigger);\n      this.items.splice(index, 1);\n      this.dispatchEvent(new DOMEvent(\"remove\", { detail: item, trigger }));\n    }\n  }\n  /** @internal */\n  [ListSymbol.reset](trigger) {\n    for (const item of [...this.items]) this[ListSymbol.remove](item, trigger);\n    this.items = [];\n    this[ListSymbol.setReadonly](false, trigger);\n    this[ListSymbol.onReset]?.();\n  }\n  /** @internal */\n  [ListSymbol.setReadonly](readonly, trigger) {\n    if (this[ListSymbol.readonly] === readonly) return;\n    this[ListSymbol.readonly] = readonly;\n    this.dispatchEvent(new DOMEvent(\"readonly-change\", { detail: readonly, trigger }));\n  }\n}\n\nconst SELECTED = Symbol(0);\nclass SelectList extends List {\n  get selected() {\n    return this.items.find((item) => item.selected) ?? null;\n  }\n  get selectedIndex() {\n    return this.items.findIndex((item) => item.selected);\n  }\n  /** @internal */\n  [ListSymbol.onRemove](item, trigger) {\n    this[ListSymbol.select](item, false, trigger);\n  }\n  /** @internal */\n  [ListSymbol.add](item, trigger) {\n    item[SELECTED] = false;\n    Object.defineProperty(item, \"selected\", {\n      get() {\n        return this[SELECTED];\n      },\n      set: (selected) => {\n        if (this.readonly) return;\n        this[ListSymbol.onUserSelect]?.();\n        this[ListSymbol.select](item, selected);\n      }\n    });\n    super[ListSymbol.add](item, trigger);\n  }\n  /** @internal */\n  [ListSymbol.select](item, selected, trigger) {\n    if (selected === item?.[SELECTED]) return;\n    const prev = this.selected;\n    if (item) item[SELECTED] = selected;\n    const changed = !selected ? prev === item : prev !== item;\n    if (changed) {\n      if (prev) prev[SELECTED] = false;\n      this.dispatchEvent(\n        new DOMEvent(\"change\", {\n          detail: {\n            prev,\n            current: this.selected\n          },\n          trigger\n        })\n      );\n    }\n  }\n}\n\nclass AudioTrackList extends SelectList {\n}\n\nfunction round(num, decimalPlaces = 2) {\n  return Number(num.toFixed(decimalPlaces));\n}\nfunction getNumberOfDecimalPlaces(num) {\n  return String(num).split(\".\")[1]?.length ?? 0;\n}\nfunction clampNumber(min, value, max) {\n  return Math.max(min, Math.min(max, value));\n}\n\nfunction isEventInside(el, event) {\n  const target = event.composedPath()[0];\n  return isDOMNode(target) && el.contains(target);\n}\nconst rafJobs = /* @__PURE__ */ new Set();\nif (!IS_SERVER) {\n  let processJobs = function() {\n    for (const job of rafJobs) {\n      try {\n        job();\n      } catch (e) {\n      }\n    }\n    window.requestAnimationFrame(processJobs);\n  };\n  processJobs();\n}\nfunction scheduleRafJob(job) {\n  rafJobs.add(job);\n  return () => rafJobs.delete(job);\n}\nfunction setAttributeIfEmpty(target, name, value) {\n  if (!target.hasAttribute(name)) target.setAttribute(name, value);\n}\nfunction setARIALabel(target, $label) {\n  if (target.hasAttribute(\"aria-label\") || target.hasAttribute(\"data-no-label\")) return;\n  if (!isFunction($label)) {\n    setAttribute(target, \"aria-label\", $label);\n    return;\n  }\n  function updateAriaDescription() {\n    setAttribute(target, \"aria-label\", $label());\n  }\n  if (IS_SERVER) updateAriaDescription();\n  else effect(updateAriaDescription);\n}\nfunction isElementVisible(el) {\n  const style = getComputedStyle(el);\n  return style.display !== \"none\" && parseInt(style.opacity) > 0;\n}\nfunction checkVisibility(el) {\n  return !!el && (\"checkVisibility\" in el ? el.checkVisibility({ checkOpacity: true, checkVisibilityCSS: true }) : isElementVisible(el));\n}\nfunction observeVisibility(el, callback) {\n  return scheduleRafJob(() => callback(checkVisibility(el)));\n}\nfunction isElementParent(owner, node, test) {\n  while (node) {\n    if (node === owner) {\n      return true;\n    } else if (test?.(node)) {\n      break;\n    } else {\n      node = node.parentElement;\n    }\n  }\n  return false;\n}\nfunction onPress(target, handler) {\n  return new EventsController(target).add(\"pointerup\", (event) => {\n    if (event.button === 0 && !event.defaultPrevented) handler(event);\n  }).add(\"keydown\", (event) => {\n    if (isKeyboardClick(event)) handler(event);\n  });\n}\nfunction isTouchPinchEvent(event) {\n  return isTouchEvent(event) && (event.touches.length > 1 || event.changedTouches.length > 1);\n}\nfunction requestScopedAnimationFrame(callback) {\n  if (IS_SERVER) return callback();\n  let scope = getScope(), id = window.requestAnimationFrame(() => {\n    scoped(callback, scope);\n    id = -1;\n  });\n  return () => void window.cancelAnimationFrame(id);\n}\nfunction autoPlacement(el, trigger, placement, {\n  offsetVarName,\n  xOffset,\n  yOffset,\n  ...options\n}) {\n  if (!el) return;\n  const floatingPlacement = placement.replace(\" \", \"-\").replace(\"-center\", \"\");\n  setStyle(el, \"visibility\", !trigger ? \"hidden\" : null);\n  if (!trigger) return;\n  let isTop = placement.includes(\"top\");\n  const negateX = (x) => placement.includes(\"left\") ? `calc(-1 * ${x})` : x, negateY = (y) => isTop ? `calc(-1 * ${y})` : y;\n  return autoUpdate(trigger, el, () => {\n    computePosition(trigger, el, {\n      placement: floatingPlacement,\n      middleware: [\n        ...options.middleware ?? [],\n        flip({ fallbackAxisSideDirection: \"start\", crossAxis: false }),\n        shift()\n      ],\n      ...options\n    }).then(({ x, y, middlewareData }) => {\n      const hasFlipped = !!middlewareData.flip?.index;\n      isTop = placement.includes(hasFlipped ? \"bottom\" : \"top\");\n      el.setAttribute(\n        \"data-placement\",\n        hasFlipped ? placement.startsWith(\"top\") ? placement.replace(\"top\", \"bottom\") : placement.replace(\"bottom\", \"top\") : placement\n      );\n      Object.assign(el.style, {\n        top: `calc(${y + \"px\"} + ${negateY(\n          yOffset ? yOffset + \"px\" : `var(--${offsetVarName}-y-offset, 0px)`\n        )})`,\n        left: `calc(${x + \"px\"} + ${negateX(\n          xOffset ? xOffset + \"px\" : `var(--${offsetVarName}-x-offset, 0px)`\n        )})`\n      });\n    });\n  });\n}\nfunction hasAnimation(el) {\n  const styles = getComputedStyle(el);\n  return styles.animationName !== \"none\";\n}\nfunction isHTMLElement(el) {\n  return el instanceof HTMLElement;\n}\n\nclass NativeTextRenderer {\n  priority = 0;\n  #display = true;\n  #video = null;\n  #track = null;\n  #tracks = /* @__PURE__ */ new Set();\n  canRender(_, video) {\n    return !!video;\n  }\n  attach(video) {\n    this.#video = video;\n    if (video) video.textTracks.onchange = this.#onChange.bind(this);\n  }\n  addTrack(track) {\n    this.#tracks.add(track);\n    this.#attachTrack(track);\n  }\n  removeTrack(track) {\n    track[TextTrackSymbol.native]?.remove?.();\n    track[TextTrackSymbol.native] = null;\n    this.#tracks.delete(track);\n  }\n  changeTrack(track) {\n    const current = track?.[TextTrackSymbol.native];\n    if (current && current.track.mode !== \"showing\") {\n      current.track.mode = \"showing\";\n    }\n    this.#track = track;\n  }\n  setDisplay(display) {\n    this.#display = display;\n    this.#onChange();\n  }\n  detach() {\n    if (this.#video) this.#video.textTracks.onchange = null;\n    for (const track of this.#tracks) this.removeTrack(track);\n    this.#tracks.clear();\n    this.#video = null;\n    this.#track = null;\n  }\n  #attachTrack(track) {\n    if (!this.#video) return;\n    const el = track[TextTrackSymbol.native] ??= this.#createTrackElement(track);\n    if (isHTMLElement(el)) {\n      this.#video.append(el);\n      el.track.mode = el.default ? \"showing\" : \"disabled\";\n    }\n  }\n  #createTrackElement(track) {\n    const el = document.createElement(\"track\"), isDefault = track.default || track.mode === \"showing\", isSupported = track.src && track.type === \"vtt\";\n    el.id = track.id;\n    el.src = isSupported ? track.src : \"\";\n    el.label = track.label;\n    el.kind = track.kind;\n    el.default = isDefault;\n    track.language && (el.srclang = track.language);\n    if (isDefault && !isSupported) {\n      this.#copyCues(track, el.track);\n    }\n    return el;\n  }\n  #copyCues(track, native) {\n    if (track.src && track.type === \"vtt\" || native.cues?.length) return;\n    for (const cue of track.cues) native.addCue(cue);\n  }\n  #onChange(event) {\n    for (const track of this.#tracks) {\n      const native = track[TextTrackSymbol.native];\n      if (!native) continue;\n      if (!this.#display) {\n        native.track.mode = native.managed ? \"hidden\" : \"disabled\";\n        continue;\n      }\n      const isShowing = native.track.mode === \"showing\";\n      if (isShowing) this.#copyCues(track, native.track);\n      track.setMode(isShowing ? \"showing\" : \"disabled\", event);\n    }\n  }\n}\n\nclass TextRenderers {\n  #video = null;\n  #textTracks;\n  #renderers = [];\n  #media;\n  #nativeDisplay = false;\n  #nativeRenderer = null;\n  #customRenderer = null;\n  constructor(media) {\n    this.#media = media;\n    const textTracks = media.textTracks;\n    this.#textTracks = textTracks;\n    effect(this.#watchControls.bind(this));\n    onDispose(this.#detach.bind(this));\n    new EventsController(textTracks).add(\"add\", this.#onAddTrack.bind(this)).add(\"remove\", this.#onRemoveTrack.bind(this)).add(\"mode-change\", this.#update.bind(this));\n  }\n  #watchControls() {\n    const { nativeControls } = this.#media.$state;\n    this.#nativeDisplay = nativeControls();\n    this.#update();\n  }\n  add(renderer) {\n    this.#renderers.push(renderer);\n    untrack(this.#update.bind(this));\n  }\n  remove(renderer) {\n    renderer.detach();\n    this.#renderers.splice(this.#renderers.indexOf(renderer), 1);\n    untrack(this.#update.bind(this));\n  }\n  /** @internal */\n  attachVideo(video) {\n    requestAnimationFrame(() => {\n      this.#video = video;\n      if (video) {\n        this.#nativeRenderer = new NativeTextRenderer();\n        this.#nativeRenderer.attach(video);\n        for (const track of this.#textTracks) this.#addNativeTrack(track);\n      }\n      this.#update();\n    });\n  }\n  #addNativeTrack(track) {\n    if (!isTrackCaptionKind(track)) return;\n    this.#nativeRenderer?.addTrack(track);\n  }\n  #removeNativeTrack(track) {\n    if (!isTrackCaptionKind(track)) return;\n    this.#nativeRenderer?.removeTrack(track);\n  }\n  #onAddTrack(event) {\n    this.#addNativeTrack(event.detail);\n  }\n  #onRemoveTrack(event) {\n    this.#removeNativeTrack(event.detail);\n  }\n  #update() {\n    const currentTrack = this.#textTracks.selected;\n    if (this.#video && (this.#nativeDisplay || currentTrack?.[TextTrackSymbol.nativeHLS])) {\n      this.#customRenderer?.changeTrack(null);\n      this.#nativeRenderer?.setDisplay(true);\n      this.#nativeRenderer?.changeTrack(currentTrack);\n      return;\n    }\n    this.#nativeRenderer?.setDisplay(false);\n    this.#nativeRenderer?.changeTrack(null);\n    if (!currentTrack) {\n      this.#customRenderer?.changeTrack(null);\n      return;\n    }\n    const customRenderer = this.#renderers.sort((a, b) => a.priority - b.priority).find((renderer) => renderer.canRender(currentTrack, this.#video));\n    if (this.#customRenderer !== customRenderer) {\n      this.#customRenderer?.detach();\n      customRenderer?.attach(this.#video);\n      this.#customRenderer = customRenderer ?? null;\n    }\n    customRenderer?.changeTrack(currentTrack);\n  }\n  #detach() {\n    this.#nativeRenderer?.detach();\n    this.#nativeRenderer = null;\n    this.#customRenderer?.detach();\n    this.#customRenderer = null;\n  }\n}\n\nclass TextTrackList extends List {\n  #canLoad = false;\n  #defaults = {};\n  #storage = null;\n  #preferredLang = null;\n  /** @internal */\n  [TextTrackSymbol.crossOrigin];\n  constructor() {\n    super();\n  }\n  get selected() {\n    const track = this.items.find((t) => t.mode === \"showing\" && isTrackCaptionKind(t));\n    return track ?? null;\n  }\n  get selectedIndex() {\n    const selected = this.selected;\n    return selected ? this.indexOf(selected) : -1;\n  }\n  get preferredLang() {\n    return this.#preferredLang;\n  }\n  set preferredLang(lang) {\n    this.#preferredLang = lang;\n    this.#saveLang(lang);\n  }\n  add(init, trigger) {\n    const isTrack = init instanceof TextTrack, track = isTrack ? init : new TextTrack(init), kind = init.kind === \"captions\" || init.kind === \"subtitles\" ? \"captions\" : init.kind;\n    if (this.#defaults[kind] && init.default) delete init.default;\n    track.addEventListener(\"mode-change\", this.#onTrackModeChangeBind);\n    this[ListSymbol.add](track, trigger);\n    track[TextTrackSymbol.crossOrigin] = this[TextTrackSymbol.crossOrigin];\n    if (this.#canLoad) track[TextTrackSymbol.canLoad]();\n    if (init.default) this.#defaults[kind] = track;\n    this.#selectTracks();\n    return this;\n  }\n  remove(track, trigger) {\n    this.#pendingRemoval = track;\n    if (!this.items.includes(track)) return;\n    if (track === this.#defaults[track.kind]) delete this.#defaults[track.kind];\n    track.mode = \"disabled\";\n    track[TextTrackSymbol.onModeChange] = null;\n    track.removeEventListener(\"mode-change\", this.#onTrackModeChangeBind);\n    this[ListSymbol.remove](track, trigger);\n    this.#pendingRemoval = null;\n    return this;\n  }\n  clear(trigger) {\n    for (const track of [...this.items]) {\n      this.remove(track, trigger);\n    }\n    return this;\n  }\n  getByKind(kind) {\n    const kinds = Array.isArray(kind) ? kind : [kind];\n    return this.items.filter((track) => kinds.includes(track.kind));\n  }\n  /** @internal */\n  [TextTrackSymbol.canLoad]() {\n    if (this.#canLoad) return;\n    for (const track of this.items) track[TextTrackSymbol.canLoad]();\n    this.#canLoad = true;\n    this.#selectTracks();\n  }\n  #selectTracks = functionDebounce(async () => {\n    if (!this.#canLoad) return;\n    if (!this.#preferredLang && this.#storage) {\n      this.#preferredLang = await this.#storage.getLang();\n    }\n    const showCaptions = await this.#storage?.getCaptions(), kinds = [\n      [\"captions\", \"subtitles\"],\n      \"chapters\",\n      \"descriptions\",\n      \"metadata\"\n    ];\n    for (const kind of kinds) {\n      const tracks = this.getByKind(kind);\n      if (tracks.find((t) => t.mode === \"showing\")) continue;\n      const preferredTrack = this.#preferredLang ? tracks.find((track2) => track2.language === this.#preferredLang) : null;\n      const defaultTrack = isArray(kind) ? this.#defaults[kind.find((kind2) => this.#defaults[kind2]) || \"\"] : this.#defaults[kind];\n      const track = preferredTrack ?? defaultTrack, isCaptionsKind = track && isTrackCaptionKind(track);\n      if (track && (!isCaptionsKind || showCaptions !== false)) {\n        track.mode = \"showing\";\n        if (isCaptionsKind) this.#saveCaptionsTrack(track);\n      }\n    }\n  }, 300);\n  #pendingRemoval = null;\n  #onTrackModeChangeBind = this.#onTrackModeChange.bind(this);\n  #onTrackModeChange(event) {\n    const track = event.detail;\n    if (this.#storage && isTrackCaptionKind(track) && track !== this.#pendingRemoval) {\n      this.#saveCaptionsTrack(track);\n    }\n    if (track.mode === \"showing\") {\n      const kinds = isTrackCaptionKind(track) ? [\"captions\", \"subtitles\"] : [track.kind];\n      for (const t of this.items) {\n        if (t.mode === \"showing\" && t != track && kinds.includes(t.kind)) {\n          t.mode = \"disabled\";\n        }\n      }\n    }\n    this.dispatchEvent(\n      new DOMEvent(\"mode-change\", {\n        detail: event.detail,\n        trigger: event\n      })\n    );\n  }\n  #saveCaptionsTrack(track) {\n    if (track.mode !== \"disabled\") {\n      this.#saveLang(track.language);\n    }\n    this.#storage?.setCaptions?.(track.mode === \"showing\");\n  }\n  #saveLang(lang) {\n    this.#storage?.setLang?.(this.#preferredLang = lang);\n  }\n  setStorage(storage) {\n    this.#storage = storage;\n  }\n}\n\nconst SET_AUTO = Symbol(0), ENABLE_AUTO = Symbol(0);\nconst QualitySymbol = {\n  setAuto: SET_AUTO,\n  enableAuto: ENABLE_AUTO\n};\n\nclass VideoQualityList extends SelectList {\n  #auto = false;\n  /**\n   * Configures quality switching:\n   *\n   * - `current`: Trigger an immediate quality level switch. This will abort the current fragment\n   * request if any, flush the whole buffer, and fetch fragment matching with current position\n   * and requested quality level.\n   *\n   * - `next`: Trigger a quality level switch for next fragment. This could eventually flush\n   * already buffered next fragment.\n   *\n   * - `load`: Set quality level for next loaded fragment.\n   *\n   * @see {@link https://www.vidstack.io/docs/player/api/video-quality#switch}\n   * @see {@link https://github.com/video-dev/hls.js/blob/master/docs/API.md#quality-switch-control-api}\n   */\n  switch = \"current\";\n  /**\n   * Whether automatic quality selection is enabled.\n   */\n  get auto() {\n    return this.#auto || this.readonly;\n  }\n  /** @internal */\n  [QualitySymbol.enableAuto];\n  /** @internal */\n  [ListSymbol.onUserSelect]() {\n    this[QualitySymbol.setAuto](false);\n  }\n  /** @internal */\n  [ListSymbol.onReset](trigger) {\n    this[QualitySymbol.enableAuto] = void 0;\n    this[QualitySymbol.setAuto](false, trigger);\n  }\n  /**\n   * Request automatic quality selection (if supported). This will be a no-op if the list is\n   * `readonly` as that already implies auto-selection.\n   */\n  autoSelect(trigger) {\n    if (this.readonly || this.#auto || !this[QualitySymbol.enableAuto]) return;\n    this[QualitySymbol.enableAuto]?.(trigger);\n    this[QualitySymbol.setAuto](true, trigger);\n  }\n  getBySrc(src) {\n    return this.items.find((quality) => quality.src === src);\n  }\n  /** @internal */\n  [QualitySymbol.setAuto](auto, trigger) {\n    if (this.#auto === auto) return;\n    this.#auto = auto;\n    this.dispatchEvent(\n      new DOMEvent(\"auto-change\", {\n        detail: auto,\n        trigger\n      })\n    );\n  }\n}\n\nfunction sortVideoQualities(qualities, desc) {\n  return [...qualities].sort(desc ? compareVideoQualityDesc : compareVideoQualityAsc);\n}\nfunction compareVideoQualityAsc(a, b) {\n  return a.height === b.height ? (a.bitrate ?? 0) - (b.bitrate ?? 0) : a.height - b.height;\n}\nfunction compareVideoQualityDesc(a, b) {\n  return b.height === a.height ? (b.bitrate ?? 0) - (a.bitrate ?? 0) : b.height - a.height;\n}\n\nfunction isAudioProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"AUDIO\";\n}\nfunction isVideoProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"VIDEO\";\n}\nfunction isHLSProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"HLS\";\n}\nfunction isDASHProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"DASH\";\n}\nfunction isYouTubeProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"YOUTUBE\";\n}\nfunction isVimeoProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"VIMEO\";\n}\nfunction isGoogleCastProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"GOOGLE_CAST\";\n}\nfunction isHTMLAudioElement(element) {\n  return !IS_SERVER && element instanceof HTMLAudioElement;\n}\nfunction isHTMLVideoElement(element) {\n  return !IS_SERVER && element instanceof HTMLVideoElement;\n}\nfunction isHTMLMediaElement(element) {\n  return isHTMLAudioElement(element) || isHTMLVideoElement(element);\n}\nfunction isHTMLIFrameElement(element) {\n  return !IS_SERVER && element instanceof HTMLIFrameElement;\n}\n\nclass MediaPlayerController extends ViewController {\n}\n\nconst MEDIA_KEY_SHORTCUTS = {\n  togglePaused: \"k Space\",\n  toggleMuted: \"m\",\n  toggleFullscreen: \"f\",\n  togglePictureInPicture: \"i\",\n  toggleCaptions: \"c\",\n  seekBackward: \"j J ArrowLeft\",\n  seekForward: \"l L ArrowRight\",\n  volumeUp: \"ArrowUp\",\n  volumeDown: \"ArrowDown\",\n  speedUp: \">\",\n  slowDown: \"<\"\n};\nconst MODIFIER_KEYS = /* @__PURE__ */ new Set([\"Shift\", \"Alt\", \"Meta\", \"Ctrl\"]), BUTTON_SELECTORS = 'button, [role=\"button\"]', IGNORE_SELECTORS = 'input, textarea, select, [contenteditable], [role^=\"menuitem\"], [role=\"timer\"]';\nclass MediaKeyboardController extends MediaPlayerController {\n  #media;\n  constructor(media) {\n    super();\n    this.#media = media;\n  }\n  onConnect() {\n    effect(this.#onTargetChange.bind(this));\n  }\n  #onTargetChange() {\n    const { keyDisabled, keyTarget } = this.$props;\n    if (keyDisabled()) return;\n    const target = keyTarget() === \"player\" ? this.el : document, $active = signal(false);\n    if (target === this.el) {\n      new EventsController(this.el).add(\"focusin\", () => $active.set(true)).add(\"focusout\", (event) => {\n        if (!this.el.contains(event.target)) $active.set(false);\n      });\n    } else {\n      if (!peek($active)) $active.set(document.querySelector(\"[data-media-player]\") === this.el);\n      listenEvent(document, \"focusin\", (event) => {\n        const activePlayer = event.composedPath().find((el) => el instanceof Element && el.localName === \"media-player\");\n        if (activePlayer !== void 0) $active.set(this.el === activePlayer);\n      });\n    }\n    effect(() => {\n      if (!$active()) return;\n      new EventsController(target).add(\"keyup\", this.#onKeyUp.bind(this)).add(\"keydown\", this.#onKeyDown.bind(this)).add(\"keydown\", this.#onPreventVideoKeys.bind(this), { capture: true });\n    });\n  }\n  #onKeyUp(event) {\n    const focusedEl = document.activeElement;\n    if (!event.key || !this.$state.canSeek() || focusedEl?.matches(IGNORE_SELECTORS)) {\n      return;\n    }\n    let { method, value } = this.#getMatchingMethod(event);\n    if (!isString(value) && !isArray(value)) {\n      value?.onKeyUp?.({\n        event,\n        player: this.#media.player,\n        remote: this.#media.remote\n      });\n      value?.callback?.(event, this.#media.remote);\n      return;\n    }\n    if (method?.startsWith(\"seek\")) {\n      event.preventDefault();\n      event.stopPropagation();\n      if (this.#timeSlider) {\n        this.#forwardTimeKeyboardEvent(event, method === \"seekForward\");\n        this.#timeSlider = null;\n      } else {\n        this.#media.remote.seek(this.#seekTotal, event);\n        this.#seekTotal = void 0;\n      }\n    }\n    if (method?.startsWith(\"volume\")) {\n      const volumeSlider = this.el.querySelector(\"[data-media-volume-slider]\");\n      volumeSlider?.dispatchEvent(\n        new KeyboardEvent(\"keyup\", {\n          key: method === \"volumeUp\" ? \"Up\" : \"Down\",\n          shiftKey: event.shiftKey,\n          trigger: event\n        })\n      );\n    }\n  }\n  #onKeyDown(event) {\n    if (!event.key || MODIFIER_KEYS.has(event.key)) return;\n    const focusedEl = document.activeElement;\n    if (focusedEl?.matches(IGNORE_SELECTORS) || isKeyboardClick(event) && focusedEl?.matches(BUTTON_SELECTORS)) {\n      return;\n    }\n    let { method, value } = this.#getMatchingMethod(event), isNumberPress = !event.metaKey && /^[0-9]$/.test(event.key);\n    if (!isString(value) && !isArray(value) && !isNumberPress) {\n      value?.onKeyDown?.({\n        event,\n        player: this.#media.player,\n        remote: this.#media.remote\n      });\n      value?.callback?.(event, this.#media.remote);\n      return;\n    }\n    if (!method && isNumberPress && !modifierKeyPressed(event)) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.#media.remote.seek(this.$state.duration() / 10 * Number(event.key), event);\n      return;\n    }\n    if (!method) return;\n    event.preventDefault();\n    event.stopPropagation();\n    switch (method) {\n      case \"seekForward\":\n      case \"seekBackward\":\n        this.#seeking(event, method, method === \"seekForward\");\n        break;\n      case \"volumeUp\":\n      case \"volumeDown\":\n        const volumeSlider = this.el.querySelector(\"[data-media-volume-slider]\");\n        if (volumeSlider) {\n          volumeSlider.dispatchEvent(\n            new KeyboardEvent(\"keydown\", {\n              key: method === \"volumeUp\" ? \"Up\" : \"Down\",\n              shiftKey: event.shiftKey,\n              trigger: event\n            })\n          );\n        } else {\n          const value2 = event.shiftKey ? 0.1 : 0.05;\n          this.#media.remote.changeVolume(\n            this.$state.volume() + (method === \"volumeUp\" ? +value2 : -value2),\n            event\n          );\n        }\n        break;\n      case \"toggleFullscreen\":\n        this.#media.remote.toggleFullscreen(\"prefer-media\", event);\n        break;\n      case \"speedUp\":\n      case \"slowDown\":\n        const playbackRate = this.$state.playbackRate();\n        this.#media.remote.changePlaybackRate(\n          Math.max(0.25, Math.min(2, playbackRate + (method === \"speedUp\" ? 0.25 : -0.25))),\n          event\n        );\n        break;\n      default:\n        this.#media.remote[method]?.(event);\n    }\n    this.$state.lastKeyboardAction.set({\n      action: method,\n      event\n    });\n  }\n  #onPreventVideoKeys(event) {\n    if (isHTMLMediaElement(event.target) && this.#getMatchingMethod(event).method) {\n      event.preventDefault();\n    }\n  }\n  #getMatchingMethod(event) {\n    const keyShortcuts = {\n      ...this.$props.keyShortcuts(),\n      ...this.#media.ariaKeys\n    };\n    const method = Object.keys(keyShortcuts).find((method2) => {\n      const value = keyShortcuts[method2], keys = isArray(value) ? value.join(\" \") : isString(value) ? value : value?.keys;\n      const combinations = (isArray(keys) ? keys : keys?.split(\" \"))?.map(\n        (key) => replaceSymbolKeys(key).replace(/Control/g, \"Ctrl\").split(\"+\")\n      );\n      return combinations?.some((combo) => {\n        const modifierKeys = new Set(combo.filter((key) => MODIFIER_KEYS.has(key)));\n        for (const modKey of MODIFIER_KEYS) {\n          const modKeyProp = modKey.toLowerCase() + \"Key\";\n          if (!modifierKeys.has(modKey) && event[modKeyProp]) {\n            return false;\n          }\n        }\n        return combo.every((key) => {\n          return MODIFIER_KEYS.has(key) ? event[key.toLowerCase() + \"Key\"] : event.key === key.replace(\"Space\", \" \");\n        });\n      });\n    });\n    return {\n      method,\n      value: method ? keyShortcuts[method] : null\n    };\n  }\n  #seekTotal;\n  #calcSeekAmount(event, type) {\n    const seekBy = event.shiftKey ? 10 : 5;\n    return this.#seekTotal = Math.max(\n      0,\n      Math.min(\n        (this.#seekTotal ?? this.$state.currentTime()) + (type === \"seekForward\" ? +seekBy : -seekBy),\n        this.$state.duration()\n      )\n    );\n  }\n  #timeSlider = null;\n  #forwardTimeKeyboardEvent(event, forward) {\n    this.#timeSlider?.dispatchEvent(\n      new KeyboardEvent(event.type, {\n        key: !forward ? \"Left\" : \"Right\",\n        shiftKey: event.shiftKey,\n        trigger: event\n      })\n    );\n  }\n  #seeking(event, type, forward) {\n    if (!this.$state.canSeek()) return;\n    if (!this.#timeSlider) {\n      this.#timeSlider = this.el.querySelector(\"[data-media-time-slider]\");\n    }\n    if (this.#timeSlider) {\n      this.#forwardTimeKeyboardEvent(event, forward);\n    } else {\n      this.#media.remote.seeking(this.#calcSeekAmount(event, type), event);\n    }\n  }\n}\nconst SYMBOL_KEY_MAP = [\"!\", \"@\", \"#\", \"$\", \"%\", \"^\", \"&\", \"*\", \"(\", \")\"];\nfunction replaceSymbolKeys(key) {\n  return key.replace(/Shift\\+(\\d)/g, (_, num) => SYMBOL_KEY_MAP[num - 1]);\n}\nfunction modifierKeyPressed(event) {\n  for (const key of MODIFIER_KEYS) {\n    if (event[key.toLowerCase() + \"Key\"]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nclass ARIAKeyShortcuts extends ViewController {\n  #shortcut;\n  constructor(shortcut) {\n    super();\n    this.#shortcut = shortcut;\n  }\n  onAttach(el) {\n    const { $props, ariaKeys } = useMediaContext(), keys = el.getAttribute(\"aria-keyshortcuts\");\n    if (keys) {\n      ariaKeys[this.#shortcut] = keys;\n      if (!IS_SERVER) {\n        onDispose(() => {\n          delete ariaKeys[this.#shortcut];\n        });\n      }\n      return;\n    }\n    const shortcuts = $props.keyShortcuts()[this.#shortcut];\n    if (shortcuts) {\n      const keys2 = isArray(shortcuts) ? shortcuts.join(\" \") : isString(shortcuts) ? shortcuts : shortcuts?.keys;\n      el.setAttribute(\"aria-keyshortcuts\", isArray(keys2) ? keys2.join(\" \") : keys2);\n    }\n  }\n}\n\nclass MediaControls extends MediaPlayerController {\n  #idleTimer = -2;\n  #pausedTracking = false;\n  #hideOnMouseLeave = signal(false);\n  #isMouseOutside = signal(false);\n  #focusedItem = null;\n  #canIdle = signal(true);\n  /**\n   * The default amount of delay in milliseconds while media playback is progressing without user\n   * activity to indicate an idle state (i.e., hide controls).\n   *\n   * @defaultValue 2000\n   */\n  defaultDelay = 2e3;\n  /**\n   * Whether controls can hide after a delay in user interaction. If this is false, controls will\n   * not hide and be user controlled.\n   */\n  get canIdle() {\n    return this.#canIdle();\n  }\n  set canIdle(canIdle) {\n    this.#canIdle.set(canIdle);\n  }\n  /**\n   * Whether controls visibility should be toggled when the mouse enters and leaves the player\n   * container.\n   *\n   * @defaultValue false\n   */\n  get hideOnMouseLeave() {\n    const { hideControlsOnMouseLeave } = this.$props;\n    return this.#hideOnMouseLeave() || hideControlsOnMouseLeave();\n  }\n  set hideOnMouseLeave(hide) {\n    this.#hideOnMouseLeave.set(hide);\n  }\n  /**\n   * Whether media controls are currently visible.\n   */\n  get showing() {\n    return this.$state.controlsVisible();\n  }\n  /**\n   * Show controls.\n   */\n  show(delay = 0, trigger) {\n    this.#clearIdleTimer();\n    if (!this.#pausedTracking) {\n      this.#changeVisibility(true, delay, trigger);\n    }\n  }\n  /**\n   * Hide controls.\n   */\n  hide(delay = this.defaultDelay, trigger) {\n    this.#clearIdleTimer();\n    if (!this.#pausedTracking) {\n      this.#changeVisibility(false, delay, trigger);\n    }\n  }\n  /**\n   * Whether all idle tracking on controls should be paused until resumed again.\n   */\n  pause(trigger) {\n    this.#pausedTracking = true;\n    this.#clearIdleTimer();\n    this.#changeVisibility(true, 0, trigger);\n  }\n  resume(trigger) {\n    this.#pausedTracking = false;\n    if (this.$state.paused()) return;\n    this.#changeVisibility(false, this.defaultDelay, trigger);\n  }\n  onConnect() {\n    effect(this.#init.bind(this));\n  }\n  #init() {\n    const { viewType } = this.$state;\n    if (!this.el || !this.#canIdle()) return;\n    if (viewType() === \"audio\") {\n      this.show();\n      return;\n    }\n    effect(this.#watchMouse.bind(this));\n    effect(this.#watchPaused.bind(this));\n    const onPlay = this.#onPlay.bind(this), onPause = this.#onPause.bind(this), onEnd = this.#onEnd.bind(this);\n    new EventsController(this.el).add(\"can-play\", (event) => this.show(0, event)).add(\"play\", onPlay).add(\"pause\", onPause).add(\"end\", onEnd).add(\"auto-play-fail\", onPause);\n  }\n  #watchMouse() {\n    if (!this.el) return;\n    const { started, pointer, paused } = this.$state;\n    if (!started() || pointer() !== \"fine\") return;\n    const events = new EventsController(this.el), shouldHideOnMouseLeave = this.hideOnMouseLeave;\n    if (!shouldHideOnMouseLeave || !this.#isMouseOutside()) {\n      effect(() => {\n        if (!paused()) events.add(\"pointermove\", this.#onStopIdle.bind(this));\n      });\n    }\n    if (shouldHideOnMouseLeave) {\n      events.add(\"mouseenter\", this.#onMouseEnter.bind(this)).add(\"mouseleave\", this.#onMouseLeave.bind(this));\n    }\n  }\n  #watchPaused() {\n    const { paused, started, autoPlayError } = this.$state;\n    if (paused() || autoPlayError() && !started()) return;\n    const onStopIdle = this.#onStopIdle.bind(this);\n    effect(() => {\n      if (!this.el) return;\n      const pointer = this.$state.pointer(), isTouch = pointer === \"coarse\", events = new EventsController(this.el), eventTypes = [isTouch ? \"touchend\" : \"pointerup\", \"keydown\"];\n      for (const eventType of eventTypes) {\n        events.add(eventType, onStopIdle, { passive: false });\n      }\n    });\n  }\n  #onPlay(event) {\n    if (event.triggers.hasType(\"ended\")) return;\n    this.show(0, event);\n    this.hide(void 0, event);\n  }\n  #onPause(event) {\n    this.show(0, event);\n  }\n  #onEnd(event) {\n    const { loop } = this.$state;\n    if (loop()) this.hide(0, event);\n  }\n  #onMouseEnter(event) {\n    this.#isMouseOutside.set(false);\n    this.show(0, event);\n    this.hide(void 0, event);\n  }\n  #onMouseLeave(event) {\n    this.#isMouseOutside.set(true);\n    this.hide(0, event);\n  }\n  #clearIdleTimer() {\n    window.clearTimeout(this.#idleTimer);\n    this.#idleTimer = -1;\n  }\n  #onStopIdle(event) {\n    if (\n      // @ts-expect-error\n      event.MEDIA_GESTURE || this.#pausedTracking || isTouchPinchEvent(event)\n    ) {\n      return;\n    }\n    if (isKeyboardEvent(event)) {\n      if (event.key === \"Escape\") {\n        this.el?.focus();\n        this.#focusedItem = null;\n      } else if (this.#focusedItem) {\n        event.preventDefault();\n        requestAnimationFrame(() => {\n          this.#focusedItem?.focus();\n          this.#focusedItem = null;\n        });\n      }\n    }\n    this.show(0, event);\n    this.hide(this.defaultDelay, event);\n  }\n  #changeVisibility(visible, delay, trigger) {\n    if (delay === 0) {\n      this.#onChange(visible, trigger);\n      return;\n    }\n    this.#idleTimer = window.setTimeout(() => {\n      if (!this.scope) return;\n      this.#onChange(visible && !this.#pausedTracking, trigger);\n    }, delay);\n  }\n  #onChange(visible, trigger) {\n    if (this.$state.controlsVisible() === visible) return;\n    this.$state.controlsVisible.set(visible);\n    if (!visible && document.activeElement && this.el?.contains(document.activeElement)) {\n      this.#focusedItem = document.activeElement;\n      requestAnimationFrame(() => {\n        this.el?.focus({ preventScroll: true });\n      });\n    }\n    this.dispatch(\"controls-change\", {\n      detail: visible,\n      trigger\n    });\n  }\n}\n\nconst CAN_FULLSCREEN = fscreen.fullscreenEnabled;\nclass FullscreenController extends ViewController {\n  /**\n   * Tracks whether we're the active fullscreen event listener. Fullscreen events can only be\n   * listened to globally on the document so we need to know if they relate to the current host\n   * element or not.\n   */\n  #listening = false;\n  #active = false;\n  get active() {\n    return this.#active;\n  }\n  get supported() {\n    return CAN_FULLSCREEN;\n  }\n  onConnect() {\n    new EventsController(fscreen).add(\"fullscreenchange\", this.#onChange.bind(this)).add(\"fullscreenerror\", this.#onError.bind(this));\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  async #onDisconnect() {\n    if (CAN_FULLSCREEN) await this.exit();\n  }\n  #onChange(event) {\n    const active = isFullscreen(this.el);\n    if (active === this.#active) return;\n    if (!active) this.#listening = false;\n    this.#active = active;\n    this.dispatch(\"fullscreen-change\", { detail: active, trigger: event });\n  }\n  #onError(event) {\n    if (!this.#listening) return;\n    this.dispatch(\"fullscreen-error\", { detail: null, trigger: event });\n    this.#listening = false;\n  }\n  async enter() {\n    try {\n      this.#listening = true;\n      if (!this.el || isFullscreen(this.el)) return;\n      assertFullscreenAPI();\n      return fscreen.requestFullscreen(this.el);\n    } catch (error) {\n      this.#listening = false;\n      throw error;\n    }\n  }\n  async exit() {\n    if (!this.el || !isFullscreen(this.el)) return;\n    assertFullscreenAPI();\n    return fscreen.exitFullscreen();\n  }\n}\nfunction canFullscreen() {\n  return CAN_FULLSCREEN;\n}\nfunction isFullscreen(host) {\n  if (fscreen.fullscreenElement === host) return true;\n  try {\n    return host.matches(\n      // @ts-expect-error - `fullscreenPseudoClass` is missing from `@types/fscreen`.\n      fscreen.fullscreenPseudoClass\n    );\n  } catch (error) {\n    return false;\n  }\n}\nfunction assertFullscreenAPI() {\n  if (CAN_FULLSCREEN) return;\n  throw Error(\n    \"[vidstack] no fullscreen API\"\n  );\n}\n\nclass ScreenOrientationController extends ViewController {\n  #type = signal(this.#getScreenOrientation());\n  #locked = signal(false);\n  #currentLock;\n  /**\n   * The current screen orientation type.\n   *\n   * @signal\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/ScreenOrientation}\n   * @see https://w3c.github.io/screen-orientation/#screen-orientation-types-and-locks\n   */\n  get type() {\n    return this.#type();\n  }\n  /**\n   * Whether the screen orientation is currently locked.\n   *\n   * @signal\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/ScreenOrientation}\n   * @see https://w3c.github.io/screen-orientation/#screen-orientation-types-and-locks\n   */\n  get locked() {\n    return this.#locked();\n  }\n  /**\n   * Whether the viewport is in a portrait orientation.\n   *\n   * @signal\n   */\n  get portrait() {\n    return this.#type().startsWith(\"portrait\");\n  }\n  /**\n   * Whether the viewport is in a landscape orientation.\n   *\n   * @signal\n   */\n  get landscape() {\n    return this.#type().startsWith(\"landscape\");\n  }\n  /**\n   * Whether the native Screen Orientation API is available.\n   */\n  static supported = canOrientScreen();\n  /**\n   * Whether the native Screen Orientation API is available.\n   */\n  get supported() {\n    return ScreenOrientationController.supported;\n  }\n  onConnect() {\n    if (this.supported) {\n      listenEvent(screen.orientation, \"change\", this.#onOrientationChange.bind(this));\n    } else {\n      const query = window.matchMedia(\"(orientation: landscape)\");\n      query.onchange = this.#onOrientationChange.bind(this);\n      onDispose(() => query.onchange = null);\n    }\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  async #onDisconnect() {\n    if (this.supported && this.#locked()) await this.unlock();\n  }\n  #onOrientationChange(event) {\n    this.#type.set(this.#getScreenOrientation());\n    this.dispatch(\"orientation-change\", {\n      detail: {\n        orientation: peek(this.#type),\n        lock: this.#currentLock\n      },\n      trigger: event\n    });\n  }\n  /**\n   * Locks the orientation of the screen to the desired orientation type using the\n   * Screen Orientation API.\n   *\n   * @param lockType - The screen lock orientation type.\n   * @throws Error - If screen orientation API is unavailable.\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Screen/orientation}\n   * @see {@link https://w3c.github.io/screen-orientation}\n   */\n  async lock(lockType) {\n    if (peek(this.#locked) || this.#currentLock === lockType) return;\n    this.#assertScreenOrientationAPI();\n    await screen.orientation.lock(lockType);\n    this.#locked.set(true);\n    this.#currentLock = lockType;\n  }\n  /**\n   * Unlocks the orientation of the screen to it's default state using the Screen Orientation\n   * API. This method will throw an error if the API is unavailable.\n   *\n   * @throws Error - If screen orientation API is unavailable.\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Screen/orientation}\n   * @see {@link https://w3c.github.io/screen-orientation}\n   */\n  async unlock() {\n    if (!peek(this.#locked)) return;\n    this.#assertScreenOrientationAPI();\n    this.#currentLock = void 0;\n    await screen.orientation.unlock();\n    this.#locked.set(false);\n  }\n  #assertScreenOrientationAPI() {\n    if (this.supported) return;\n    throw Error(\n      \"[vidstack] no orientation API\"\n    );\n  }\n  #getScreenOrientation() {\n    if (IS_SERVER) return \"portrait-primary\";\n    if (this.supported) return window.screen.orientation.type;\n    return window.innerWidth >= window.innerHeight ? \"landscape-primary\" : \"portrait-primary\";\n  }\n}\n\nclass AudioProviderLoader {\n  name = \"audio\";\n  target;\n  canPlay(src) {\n    if (!isAudioSrc(src)) return false;\n    return IS_SERVER || !isString(src.src) || src.type === \"?\" || canPlayAudioType(this.target, src.type);\n  }\n  mediaType() {\n    return \"audio\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load audio provider server-side\");\n    }\n    return new (await import('./vidstack-R_ot4AhB.js')).AudioProvider(this.target, ctx);\n  }\n}\n\nclass VideoProviderLoader {\n  name = \"video\";\n  target;\n  canPlay(src) {\n    if (!isVideoSrc(src)) return false;\n    return IS_SERVER || !isString(src.src) || src.type === \"?\" || canPlayVideoType(this.target, src.type);\n  }\n  mediaType() {\n    return \"video\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load video provider server-side\");\n    }\n    return new (await Promise.resolve().then(function () { return provider$1; })).VideoProvider(this.target, ctx);\n  }\n}\n\nclass HLSProviderLoader extends VideoProviderLoader {\n  static supported = isHLSSupported();\n  name = \"hls\";\n  canPlay(src) {\n    return HLSProviderLoader.supported && isHLSSrc(src);\n  }\n  async load(context) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load hls provider server-side\");\n    }\n    return new (await import('./vidstack-BN7_0WI-.js')).HLSProvider(this.target, context);\n  }\n}\n\nlet audioContext = null, gainNodes = [], elAudioSources = [];\nfunction getOrCreateAudioCtx() {\n  return audioContext ??= new AudioContext();\n}\nfunction createGainNode() {\n  const audioCtx = getOrCreateAudioCtx(), gainNode = audioCtx.createGain();\n  gainNode.connect(audioCtx.destination);\n  gainNodes.push(gainNode);\n  return gainNode;\n}\nfunction createElementSource(el, gainNode) {\n  const audioCtx = getOrCreateAudioCtx(), src = audioCtx.createMediaElementSource(el);\n  if (gainNode) {\n    src.connect(gainNode);\n  }\n  elAudioSources.push(src);\n  return src;\n}\nfunction destroyGainNode(node) {\n  const idx = gainNodes.indexOf(node);\n  if (idx !== -1) {\n    gainNodes.splice(idx, 1);\n    node.disconnect();\n    freeAudioCtxWhenAllResourcesFreed();\n  }\n}\nfunction destroyElementSource(src) {\n  const idx = elAudioSources.indexOf(src);\n  if (idx !== -1) {\n    elAudioSources.splice(idx, 1);\n    src.disconnect();\n    freeAudioCtxWhenAllResourcesFreed();\n  }\n}\nfunction freeAudioCtxWhenAllResourcesFreed() {\n  if (audioContext && gainNodes.length === 0 && elAudioSources.length === 0) {\n    audioContext.close().then(() => {\n      audioContext = null;\n    });\n  }\n}\n\nclass AudioGain {\n  #media;\n  #onChange;\n  #gainNode = null;\n  #srcAudioNode = null;\n  get currentGain() {\n    return this.#gainNode?.gain?.value ?? null;\n  }\n  get supported() {\n    return true;\n  }\n  constructor(media, onChange) {\n    this.#media = media;\n    this.#onChange = onChange;\n  }\n  setGain(gain) {\n    const currGain = this.currentGain;\n    if (gain === this.currentGain) {\n      return;\n    }\n    if (gain === 1 && currGain !== 1) {\n      this.removeGain();\n      return;\n    }\n    if (!this.#gainNode) {\n      this.#gainNode = createGainNode();\n      if (this.#srcAudioNode) {\n        this.#srcAudioNode.connect(this.#gainNode);\n      }\n    }\n    if (!this.#srcAudioNode) {\n      this.#srcAudioNode = createElementSource(this.#media, this.#gainNode);\n    }\n    this.#gainNode.gain.value = gain;\n    this.#onChange(gain);\n  }\n  removeGain() {\n    if (!this.#gainNode) return;\n    if (this.#srcAudioNode) {\n      this.#srcAudioNode.connect(getOrCreateAudioCtx().destination);\n    }\n    this.#destroyGainNode();\n    this.#onChange(null);\n  }\n  destroy() {\n    this.#destroySrcNode();\n    this.#destroyGainNode();\n  }\n  #destroySrcNode() {\n    if (!this.#srcAudioNode) return;\n    try {\n      destroyElementSource(this.#srcAudioNode);\n    } catch (e) {\n    } finally {\n      this.#srcAudioNode = null;\n    }\n  }\n  #destroyGainNode() {\n    if (!this.#gainNode) return;\n    try {\n      destroyGainNode(this.#gainNode);\n    } catch (e) {\n    } finally {\n      this.#gainNode = null;\n    }\n  }\n}\n\nconst PAGE_EVENTS = [\"focus\", \"blur\", \"visibilitychange\", \"pageshow\", \"pagehide\"];\nclass PageVisibility {\n  #state = signal(determinePageState());\n  #visibility = signal(IS_SERVER ? \"visible\" : document.visibilityState);\n  #safariBeforeUnloadTimeout;\n  connect() {\n    const events = new EventsController(window), handlePageEvent = this.#handlePageEvent.bind(this);\n    for (const eventType of PAGE_EVENTS) {\n      events.add(eventType, handlePageEvent);\n    }\n    if (IS_SAFARI) {\n      events.add(\"beforeunload\", (event) => {\n        this.#safariBeforeUnloadTimeout = setTimeout(() => {\n          if (!(event.defaultPrevented || event.returnValue.length > 0)) {\n            this.#state.set(\"hidden\");\n            this.#visibility.set(\"hidden\");\n          }\n        }, 0);\n      });\n    }\n  }\n  /**\n   * The current page state. Important to note we only account for a subset of page states, as\n   * the rest aren't valuable to the player at the moment.\n   *\n   * - **active:** A page is in the active state if it is visible and has input focus.\n   * - **passive:** A page is in the passive state if it is visible and does not have input focus.\n   * - **hidden:** A page is in the hidden state if it is not visible.\n   *\n   * @see https://developers.google.com/web/updates/2018/07/page-lifecycle-api#states\n   */\n  get pageState() {\n    return this.#state();\n  }\n  /**\n   * The current document visibility state.\n   *\n   * - **visible:** The page content may be at least partially visible. In practice, this means that\n   * the page is the foreground tab of a non-minimized window.\n   * - **hidden:** The page content is not visible to the user. In practice this means that the\n   * document is either a background tab or part of a minimized window, or the OS screen lock is\n   * active.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilityState\n   */\n  get visibility() {\n    return this.#visibility();\n  }\n  #handlePageEvent(event) {\n    if (IS_SAFARI) window.clearTimeout(this.#safariBeforeUnloadTimeout);\n    if (event.type !== \"blur\" || this.#state() === \"active\") {\n      this.#state.set(determinePageState(event));\n      this.#visibility.set(document.visibilityState == \"hidden\" ? \"hidden\" : \"visible\");\n    }\n  }\n}\nfunction determinePageState(event) {\n  if (IS_SERVER) return \"hidden\";\n  if (event?.type === \"blur\" || document.visibilityState === \"hidden\") return \"hidden\";\n  if (document.hasFocus()) return \"active\";\n  return \"passive\";\n}\n\nclass RAFLoop {\n  #id;\n  #callback;\n  constructor(callback) {\n    this.#callback = callback;\n  }\n  start() {\n    if (!isUndefined(this.#id)) return;\n    this.#loop();\n  }\n  stop() {\n    if (isNumber(this.#id)) window.cancelAnimationFrame(this.#id);\n    this.#id = void 0;\n  }\n  #loop() {\n    this.#id = window.requestAnimationFrame(() => {\n      if (isUndefined(this.#id)) return;\n      this.#callback();\n      this.#loop();\n    });\n  }\n}\n\nclass HTMLMediaEvents {\n  #provider;\n  #ctx;\n  #waiting = false;\n  #attachedLoadStart = false;\n  #attachedCanPlay = false;\n  #timeRAF = new RAFLoop(this.#onAnimationFrame.bind(this));\n  #pageVisibility = new PageVisibility();\n  #events;\n  get #media() {\n    return this.#provider.media;\n  }\n  constructor(provider, ctx) {\n    this.#provider = provider;\n    this.#ctx = ctx;\n    this.#events = new EventsController(provider.media);\n    this.#attachInitialListeners();\n    this.#pageVisibility.connect();\n    effect(this.#attachTimeUpdate.bind(this));\n    onDispose(this.#onDispose.bind(this));\n  }\n  #onDispose() {\n    this.#attachedLoadStart = false;\n    this.#attachedCanPlay = false;\n    this.#timeRAF.stop();\n    this.#events.abort();\n    this.#devHandlers?.clear();\n  }\n  /**\n   * The `timeupdate` event fires surprisingly infrequently during playback, meaning your progress\n   * bar (or whatever else is synced to the currentTime) moves in a choppy fashion. This helps\n   * resolve that by retrieving time updates in a request animation frame loop.\n   */\n  #lastSeenTime = 0;\n  #seekedTo = -1;\n  #onAnimationFrame() {\n    const newTime = this.#media.currentTime;\n    const didStutter = IS_SAFARI && newTime - this.#seekedTo < 0.35;\n    if (!didStutter && this.#lastSeenTime !== newTime) {\n      this.#updateCurrentTime(newTime);\n      this.#lastSeenTime = newTime;\n    }\n  }\n  #attachInitialListeners() {\n    this.#attachEventListener(\"loadstart\", this.#onLoadStart);\n    this.#attachEventListener(\"abort\", this.#onAbort);\n    this.#attachEventListener(\"emptied\", this.#onEmptied);\n    this.#attachEventListener(\"error\", this.#onError);\n    this.#attachEventListener(\"volumechange\", this.#onVolumeChange);\n  }\n  #attachLoadStartListeners() {\n    if (this.#attachedLoadStart) return;\n    this.#attachEventListener(\"loadeddata\", this.#onLoadedData);\n    this.#attachEventListener(\"loadedmetadata\", this.#onLoadedMetadata);\n    this.#attachEventListener(\"canplay\", this.#onCanPlay);\n    this.#attachEventListener(\"canplaythrough\", this.#onCanPlayThrough);\n    this.#attachEventListener(\"durationchange\", this.#onDurationChange);\n    this.#attachEventListener(\"play\", this.#onPlay);\n    this.#attachEventListener(\"progress\", this.#onProgress);\n    this.#attachEventListener(\"stalled\", this.#onStalled);\n    this.#attachEventListener(\"suspend\", this.#onSuspend);\n    this.#attachEventListener(\"ratechange\", this.#onRateChange);\n    this.#attachedLoadStart = true;\n  }\n  #attachCanPlayListeners() {\n    if (this.#attachedCanPlay) return;\n    this.#attachEventListener(\"pause\", this.#onPause);\n    this.#attachEventListener(\"playing\", this.#onPlaying);\n    this.#attachEventListener(\"seeked\", this.#onSeeked);\n    this.#attachEventListener(\"seeking\", this.#onSeeking);\n    this.#attachEventListener(\"ended\", this.#onEnded);\n    this.#attachEventListener(\"waiting\", this.#onWaiting);\n    this.#attachedCanPlay = true;\n  }\n  #devHandlers = void 0;\n  #handleDevEvent = void 0;\n  #attachEventListener(eventType, handler) {\n    this.#events.add(eventType, handler.bind(this));\n  }\n  #onDevEvent(event2) {\n    return;\n  }\n  #updateCurrentTime(time, trigger) {\n    const newTime = Math.min(time, this.#ctx.$state.seekableEnd());\n    this.#ctx.notify(\"time-change\", newTime, trigger);\n  }\n  #onLoadStart(event2) {\n    if (this.#media.networkState === 3) {\n      this.#onAbort(event2);\n      return;\n    }\n    this.#attachLoadStartListeners();\n    this.#ctx.notify(\"load-start\", void 0, event2);\n  }\n  #onAbort(event2) {\n    this.#ctx.notify(\"abort\", void 0, event2);\n  }\n  #onEmptied() {\n    this.#ctx.notify(\"emptied\", void 0, event);\n  }\n  #onLoadedData(event2) {\n    this.#ctx.notify(\"loaded-data\", void 0, event2);\n  }\n  #onLoadedMetadata(event2) {\n    this.#lastSeenTime = 0;\n    this.#seekedTo = -1;\n    this.#attachCanPlayListeners();\n    this.#ctx.notify(\"loaded-metadata\", void 0, event2);\n    if (IS_IOS || IS_SAFARI && isHLSSrc(this.#ctx.$state.source())) {\n      this.#ctx.delegate.ready(this.#getCanPlayDetail(), event2);\n    }\n  }\n  #getCanPlayDetail() {\n    return {\n      provider: peek(this.#ctx.$provider),\n      duration: this.#media.duration,\n      buffered: this.#media.buffered,\n      seekable: this.#media.seekable\n    };\n  }\n  #onPlay(event2) {\n    if (!this.#ctx.$state.canPlay) return;\n    this.#ctx.notify(\"play\", void 0, event2);\n  }\n  #onPause(event2) {\n    if (this.#media.readyState === 1 && !this.#waiting) return;\n    this.#waiting = false;\n    this.#timeRAF.stop();\n    this.#ctx.notify(\"pause\", void 0, event2);\n  }\n  #onCanPlay(event2) {\n    this.#ctx.delegate.ready(this.#getCanPlayDetail(), event2);\n  }\n  #onCanPlayThrough(event2) {\n    if (this.#ctx.$state.started()) return;\n    this.#ctx.notify(\"can-play-through\", this.#getCanPlayDetail(), event2);\n  }\n  #onPlaying(event2) {\n    if (this.#media.paused) return;\n    this.#waiting = false;\n    this.#ctx.notify(\"playing\", void 0, event2);\n    this.#timeRAF.start();\n  }\n  #onStalled(event2) {\n    this.#ctx.notify(\"stalled\", void 0, event2);\n    if (this.#media.readyState < 3) {\n      this.#waiting = true;\n      this.#ctx.notify(\"waiting\", void 0, event2);\n    }\n  }\n  #onWaiting(event2) {\n    if (this.#media.readyState < 3) {\n      this.#waiting = true;\n      this.#ctx.notify(\"waiting\", void 0, event2);\n    }\n  }\n  #onEnded(event2) {\n    this.#timeRAF.stop();\n    this.#updateCurrentTime(this.#media.duration, event2);\n    this.#ctx.notify(\"end\", void 0, event2);\n    if (this.#ctx.$state.loop()) {\n      const hasCustomControls = isNil(this.#media.controls);\n      if (hasCustomControls) this.#media.controls = false;\n    }\n  }\n  #attachTimeUpdate() {\n    const isPaused = this.#ctx.$state.paused(), isPageHidden = this.#pageVisibility.visibility === \"hidden\", shouldListenToTimeUpdates = isPaused || isPageHidden;\n    if (shouldListenToTimeUpdates) {\n      listenEvent(this.#media, \"timeupdate\", this.#onTimeUpdate.bind(this));\n    }\n  }\n  #onTimeUpdate(event2) {\n    this.#updateCurrentTime(this.#media.currentTime, event2);\n  }\n  #onDurationChange(event2) {\n    if (this.#ctx.$state.ended()) {\n      this.#updateCurrentTime(this.#media.duration, event2);\n    }\n    this.#ctx.notify(\"duration-change\", this.#media.duration, event2);\n  }\n  #onVolumeChange(event2) {\n    const detail = {\n      volume: this.#media.volume,\n      muted: this.#media.muted\n    };\n    this.#ctx.notify(\"volume-change\", detail, event2);\n  }\n  #onSeeked(event2) {\n    this.#seekedTo = this.#media.currentTime;\n    this.#updateCurrentTime(this.#media.currentTime, event2);\n    this.#ctx.notify(\"seeked\", this.#media.currentTime, event2);\n    if (Math.trunc(this.#media.currentTime) === Math.trunc(this.#media.duration) && getNumberOfDecimalPlaces(this.#media.duration) > getNumberOfDecimalPlaces(this.#media.currentTime)) {\n      this.#updateCurrentTime(this.#media.duration, event2);\n      if (!this.#media.ended) {\n        this.#ctx.player.dispatch(\n          new DOMEvent(\"media-play-request\", {\n            trigger: event2\n          })\n        );\n      }\n    }\n  }\n  #onSeeking(event2) {\n    this.#ctx.notify(\"seeking\", this.#media.currentTime, event2);\n  }\n  #onProgress(event2) {\n    const detail = {\n      buffered: this.#media.buffered,\n      seekable: this.#media.seekable\n    };\n    this.#ctx.notify(\"progress\", detail, event2);\n  }\n  #onSuspend(event2) {\n    this.#ctx.notify(\"suspend\", void 0, event2);\n  }\n  #onRateChange(event2) {\n    this.#ctx.notify(\"rate-change\", this.#media.playbackRate, event2);\n  }\n  #onError(event2) {\n    const error = this.#media.error;\n    if (!error) return;\n    const detail = {\n      message: error.message,\n      code: error.code,\n      mediaError: error\n    };\n    this.#ctx.notify(\"error\", detail, event2);\n  }\n}\n\nclass NativeAudioTracks {\n  #provider;\n  #ctx;\n  get #nativeTracks() {\n    return this.#provider.media.audioTracks;\n  }\n  constructor(provider, ctx) {\n    this.#provider = provider;\n    this.#ctx = ctx;\n    this.#nativeTracks.onaddtrack = this.#onAddNativeTrack.bind(this);\n    this.#nativeTracks.onremovetrack = this.#onRemoveNativeTrack.bind(this);\n    this.#nativeTracks.onchange = this.#onChangeNativeTrack.bind(this);\n    listenEvent(this.#ctx.audioTracks, \"change\", this.#onChangeTrack.bind(this));\n  }\n  #onAddNativeTrack(event) {\n    const nativeTrack = event.track;\n    if (nativeTrack.label === \"\") return;\n    const id = nativeTrack.id.toString() || `native-audio-${this.#ctx.audioTracks.length}`, audioTrack = {\n      id,\n      label: nativeTrack.label,\n      language: nativeTrack.language,\n      kind: nativeTrack.kind,\n      selected: false\n    };\n    this.#ctx.audioTracks[ListSymbol.add](audioTrack, event);\n    if (nativeTrack.enabled) audioTrack.selected = true;\n  }\n  #onRemoveNativeTrack(event) {\n    const track = this.#ctx.audioTracks.getById(event.track.id);\n    if (track) this.#ctx.audioTracks[ListSymbol.remove](track, event);\n  }\n  #onChangeNativeTrack(event) {\n    let enabledTrack = this.#getEnabledNativeTrack();\n    if (!enabledTrack) return;\n    const track = this.#ctx.audioTracks.getById(enabledTrack.id);\n    if (track) this.#ctx.audioTracks[ListSymbol.select](track, true, event);\n  }\n  #getEnabledNativeTrack() {\n    return Array.from(this.#nativeTracks).find((track) => track.enabled);\n  }\n  #onChangeTrack(event) {\n    const { current } = event.detail;\n    if (!current) return;\n    const track = this.#nativeTracks.getTrackById(current.id);\n    if (track) {\n      const prev = this.#getEnabledNativeTrack();\n      if (prev) prev.enabled = false;\n      track.enabled = true;\n    }\n  }\n}\n\nclass HTMLMediaProvider {\n  constructor(media, ctx) {\n    this.media = media;\n    this.ctx = ctx;\n    this.audioGain = new AudioGain(media, (gain) => {\n      this.ctx.notify(\"audio-gain-change\", gain);\n    });\n  }\n  scope = createScope();\n  currentSrc = null;\n  audioGain;\n  setup() {\n    new HTMLMediaEvents(this, this.ctx);\n    if (\"audioTracks\" in this.media) new NativeAudioTracks(this, this.ctx);\n    onDispose(() => {\n      this.audioGain.destroy();\n      this.media.srcObject = null;\n      this.media.removeAttribute(\"src\");\n      for (const source of this.media.querySelectorAll(\"source\")) source.remove();\n      this.media.load();\n    });\n  }\n  get type() {\n    return \"\";\n  }\n  setPlaybackRate(rate) {\n    this.media.playbackRate = rate;\n  }\n  async play() {\n    return this.media.play();\n  }\n  async pause() {\n    return this.media.pause();\n  }\n  setMuted(muted) {\n    this.media.muted = muted;\n  }\n  setVolume(volume) {\n    this.media.volume = volume;\n  }\n  setCurrentTime(time) {\n    this.media.currentTime = time;\n  }\n  setPlaysInline(inline) {\n    setAttribute(this.media, \"playsinline\", inline);\n  }\n  async loadSource({ src, type }, preload) {\n    this.media.preload = preload || \"\";\n    if (isMediaStream(src)) {\n      this.removeSource();\n      this.media.srcObject = src;\n    } else {\n      this.media.srcObject = null;\n      if (isString(src)) {\n        if (type !== \"?\") {\n          this.appendSource({ src, type });\n        } else {\n          this.removeSource();\n          this.media.src = this.#appendMediaFragment(src);\n        }\n      } else {\n        this.removeSource();\n        this.media.src = window.URL.createObjectURL(src);\n      }\n    }\n    this.media.load();\n    this.currentSrc = { src, type };\n  }\n  /**\n   * Append source so it works when requesting AirPlay since hls.js will remove it.\n   */\n  appendSource(src, defaultType) {\n    const prevSource = this.media.querySelector(\"source[data-vds]\"), source = prevSource ?? document.createElement(\"source\");\n    setAttribute(source, \"src\", this.#appendMediaFragment(src.src));\n    setAttribute(source, \"type\", src.type !== \"?\" ? src.type : defaultType);\n    setAttribute(source, \"data-vds\", \"\");\n    if (!prevSource) this.media.append(source);\n  }\n  removeSource() {\n    this.media.querySelector(\"source[data-vds]\")?.remove();\n  }\n  #appendMediaFragment(src) {\n    const { clipStartTime, clipEndTime } = this.ctx.$state, startTime = clipStartTime(), endTime = clipEndTime();\n    if (startTime > 0 && endTime > 0) {\n      return `${src}#t=${startTime},${endTime}`;\n    } else if (startTime > 0) {\n      return `${src}#t=${startTime}`;\n    } else if (endTime > 0) {\n      return `${src}#t=0,${endTime}`;\n    }\n    return src;\n  }\n}\n\nclass HTMLRemotePlaybackAdapter {\n  #media;\n  #ctx;\n  #state;\n  #supported = signal(false);\n  get supported() {\n    return this.#supported();\n  }\n  constructor(media, ctx) {\n    this.#media = media;\n    this.#ctx = ctx;\n    this.#setup();\n  }\n  #setup() {\n    if (IS_SERVER || !this.#media?.remote || !this.canPrompt) return;\n    this.#media.remote.watchAvailability((available) => {\n      this.#supported.set(available);\n    }).catch(() => {\n      this.#supported.set(false);\n    });\n    effect(this.#watchSupported.bind(this));\n  }\n  #watchSupported() {\n    if (!this.#supported()) return;\n    const events = [\"connecting\", \"connect\", \"disconnect\"], onStateChange = this.#onStateChange.bind(this);\n    onStateChange();\n    listenEvent(this.#media, \"playing\", onStateChange);\n    const remoteEvents = new EventsController(this.#media.remote);\n    for (const type of events) {\n      remoteEvents.add(type, onStateChange);\n    }\n  }\n  async prompt() {\n    if (!this.supported) throw Error(\"Not supported on this platform.\");\n    if (this.type === \"airplay\" && this.#media.webkitShowPlaybackTargetPicker) {\n      return this.#media.webkitShowPlaybackTargetPicker();\n    }\n    return this.#media.remote.prompt();\n  }\n  #onStateChange(event) {\n    const state = this.#media.remote.state;\n    if (state === this.#state) return;\n    const detail = { type: this.type, state };\n    this.#ctx.notify(\"remote-playback-change\", detail, event);\n    this.#state = state;\n  }\n}\nclass HTMLAirPlayAdapter extends HTMLRemotePlaybackAdapter {\n  type = \"airplay\";\n  get canPrompt() {\n    return \"WebKitPlaybackTargetAvailabilityEvent\" in window;\n  }\n}\n\nclass NativeHLSTextTracks {\n  #video;\n  #ctx;\n  constructor(video, ctx) {\n    this.#video = video;\n    this.#ctx = ctx;\n    video.textTracks.onaddtrack = this.#onAddTrack.bind(this);\n    onDispose(this.#onDispose.bind(this));\n  }\n  #onAddTrack(event) {\n    const nativeTrack = event.track;\n    if (!nativeTrack || findTextTrackElement(this.#video, nativeTrack)) return;\n    const track = new TextTrack({\n      id: nativeTrack.id,\n      kind: nativeTrack.kind,\n      label: nativeTrack.label ?? \"\",\n      language: nativeTrack.language,\n      type: \"vtt\"\n    });\n    track[TextTrackSymbol.native] = { track: nativeTrack };\n    track[TextTrackSymbol.readyState] = 2;\n    track[TextTrackSymbol.nativeHLS] = true;\n    let lastIndex = 0;\n    const onCueChange = (event2) => {\n      if (!nativeTrack.cues) return;\n      for (let i = lastIndex; i < nativeTrack.cues.length; i++) {\n        track.addCue(nativeTrack.cues[i], event2);\n        lastIndex++;\n      }\n    };\n    onCueChange(event);\n    nativeTrack.oncuechange = onCueChange;\n    this.#ctx.textTracks.add(track, event);\n    track.setMode(nativeTrack.mode, event);\n  }\n  #onDispose() {\n    this.#video.textTracks.onaddtrack = null;\n    for (const track of this.#ctx.textTracks) {\n      const nativeTrack = track[TextTrackSymbol.native]?.track;\n      if (nativeTrack?.oncuechange) nativeTrack.oncuechange = null;\n    }\n  }\n}\nfunction findTextTrackElement(video, track) {\n  return Array.from(video.children).find((el) => el.track === track);\n}\n\nclass VideoPictureInPicture {\n  #video;\n  #media;\n  constructor(video, media) {\n    this.#video = video;\n    this.#media = media;\n    new EventsController(video).add(\"enterpictureinpicture\", this.#onEnter.bind(this)).add(\"leavepictureinpicture\", this.#onExit.bind(this));\n  }\n  get active() {\n    return document.pictureInPictureElement === this.#video;\n  }\n  get supported() {\n    return canUsePictureInPicture(this.#video);\n  }\n  async enter() {\n    return this.#video.requestPictureInPicture();\n  }\n  exit() {\n    return document.exitPictureInPicture();\n  }\n  #onEnter(event) {\n    this.#onChange(true, event);\n  }\n  #onExit(event) {\n    this.#onChange(false, event);\n  }\n  #onChange = (active, event) => {\n    this.#media.notify(\"picture-in-picture-change\", active, event);\n  };\n}\n\nclass VideoPresentation {\n  #video;\n  #media;\n  #mode = \"inline\";\n  get mode() {\n    return this.#mode;\n  }\n  constructor(video, media) {\n    this.#video = video;\n    this.#media = media;\n    listenEvent(video, \"webkitpresentationmodechanged\", this.#onModeChange.bind(this));\n  }\n  get supported() {\n    return canUseVideoPresentation(this.#video);\n  }\n  async setPresentationMode(mode) {\n    if (this.#mode === mode) return;\n    this.#video.webkitSetPresentationMode(mode);\n  }\n  #onModeChange(event) {\n    const prevMode = this.#mode;\n    this.#mode = this.#video.webkitPresentationMode;\n    this.#media.player?.dispatch(\n      new DOMEvent(\"video-presentation-change\", {\n        detail: this.#mode,\n        trigger: event\n      })\n    );\n    [\"fullscreen\", \"picture-in-picture\"].forEach((type) => {\n      if (this.#mode === type || prevMode === type) {\n        this.#media.notify(`${type}-change`, this.#mode === type, event);\n      }\n    });\n  }\n}\nclass FullscreenPresentationAdapter {\n  #presentation;\n  get active() {\n    return this.#presentation.mode === \"fullscreen\";\n  }\n  get supported() {\n    return this.#presentation.supported;\n  }\n  constructor(presentation) {\n    this.#presentation = presentation;\n  }\n  async enter() {\n    this.#presentation.setPresentationMode(\"fullscreen\");\n  }\n  async exit() {\n    this.#presentation.setPresentationMode(\"inline\");\n  }\n}\nclass PIPPresentationAdapter {\n  #presentation;\n  get active() {\n    return this.#presentation.mode === \"picture-in-picture\";\n  }\n  get supported() {\n    return this.#presentation.supported;\n  }\n  constructor(presentation) {\n    this.#presentation = presentation;\n  }\n  async enter() {\n    this.#presentation.setPresentationMode(\"picture-in-picture\");\n  }\n  async exit() {\n    this.#presentation.setPresentationMode(\"inline\");\n  }\n}\n\nclass VideoProvider extends HTMLMediaProvider {\n  $$PROVIDER_TYPE = \"VIDEO\";\n  get type() {\n    return \"video\";\n  }\n  airPlay;\n  fullscreen;\n  pictureInPicture;\n  constructor(video, ctx) {\n    super(video, ctx);\n    scoped(() => {\n      this.airPlay = new HTMLAirPlayAdapter(video, ctx);\n      if (canUseVideoPresentation(video)) {\n        const presentation = new VideoPresentation(video, ctx);\n        this.fullscreen = new FullscreenPresentationAdapter(presentation);\n        this.pictureInPicture = new PIPPresentationAdapter(presentation);\n      } else if (canUsePictureInPicture(video)) {\n        this.pictureInPicture = new VideoPictureInPicture(video, ctx);\n      }\n    }, this.scope);\n  }\n  setup() {\n    super.setup();\n    if (canPlayHLSNatively(this.video)) {\n      new NativeHLSTextTracks(this.video, this.ctx);\n    }\n    this.ctx.textRenderers.attachVideo(this.video);\n    onDispose(() => {\n      this.ctx.textRenderers.attachVideo(null);\n    });\n    if (this.type === \"video\") this.ctx.notify(\"provider-setup\", this);\n  }\n  /**\n   * The native HTML `<video>` element.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement}\n   */\n  get video() {\n    return this.media;\n  }\n}\n\nvar provider$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  VideoProvider: VideoProvider\n});\n\nfunction getLangName(langCode) {\n  try {\n    const displayNames = new Intl.DisplayNames(navigator.languages, { type: \"language\" });\n    const languageName = displayNames.of(langCode);\n    return languageName ?? null;\n  } catch (err) {\n    return null;\n  }\n}\n\nconst toDOMEventType = (type) => `dash-${camelToKebabCase(type)}`;\nclass DASHController {\n  #video;\n  #ctx;\n  #instance = null;\n  #callbacks = /* @__PURE__ */ new Set();\n  #stopLiveSync = null;\n  config = {};\n  get instance() {\n    return this.#instance;\n  }\n  constructor(video, ctx) {\n    this.#video = video;\n    this.#ctx = ctx;\n  }\n  setup(ctor) {\n    this.#instance = ctor().create();\n    const dispatcher = this.#dispatchDASHEvent.bind(this);\n    for (const event of Object.values(ctor.events)) this.#instance.on(event, dispatcher);\n    this.#instance.on(ctor.events.ERROR, this.#onError.bind(this));\n    for (const callback of this.#callbacks) callback(this.#instance);\n    this.#ctx.player.dispatch(\"dash-instance\", {\n      detail: this.#instance\n    });\n    this.#instance.initialize(this.#video, void 0, false);\n    this.#instance.updateSettings({\n      streaming: {\n        text: {\n          // Disabling text rendering by dash.\n          defaultEnabled: false,\n          dispatchForManualRendering: true\n        },\n        buffer: {\n          /// Enables buffer replacement when switching bitrates for faster switching.\n          fastSwitchEnabled: true\n        }\n      },\n      ...this.config\n    });\n    this.#instance.on(ctor.events.FRAGMENT_LOADING_STARTED, this.#onFragmentLoadStart.bind(this));\n    this.#instance.on(\n      ctor.events.FRAGMENT_LOADING_COMPLETED,\n      this.#onFragmentLoadComplete.bind(this)\n    );\n    this.#instance.on(ctor.events.MANIFEST_LOADED, this.#onManifestLoaded.bind(this));\n    this.#instance.on(ctor.events.QUALITY_CHANGE_RENDERED, this.#onQualityChange.bind(this));\n    this.#instance.on(ctor.events.TEXT_TRACKS_ADDED, this.#onTextTracksAdded.bind(this));\n    this.#instance.on(ctor.events.TRACK_CHANGE_RENDERED, this.#onTrackChange.bind(this));\n    this.#ctx.qualities[QualitySymbol.enableAuto] = this.#enableAutoQuality.bind(this);\n    listenEvent(this.#ctx.qualities, \"change\", this.#onUserQualityChange.bind(this));\n    listenEvent(this.#ctx.audioTracks, \"change\", this.#onUserAudioChange.bind(this));\n    this.#stopLiveSync = effect(this.#liveSync.bind(this));\n  }\n  #createDOMEvent(event) {\n    return new DOMEvent(toDOMEventType(event.type), { detail: event });\n  }\n  #liveSync() {\n    if (!this.#ctx.$state.live()) return;\n    const raf = new RAFLoop(this.#liveSyncPosition.bind(this));\n    raf.start();\n    return raf.stop.bind(raf);\n  }\n  #liveSyncPosition() {\n    if (!this.#instance) return;\n    const position = this.#instance.duration() - this.#instance.time();\n    this.#ctx.$state.liveSyncPosition.set(!isNaN(position) ? position : Infinity);\n  }\n  #dispatchDASHEvent(event) {\n    this.#ctx.player?.dispatch(this.#createDOMEvent(event));\n  }\n  #currentTrack = null;\n  #cueTracker = {};\n  #onTextFragmentLoaded(event) {\n    const native = this.#currentTrack?.[TextTrackSymbol.native], cues = (native?.track).cues;\n    if (!native || !cues) return;\n    const id = this.#currentTrack.id, startIndex = this.#cueTracker[id] ?? 0, trigger = this.#createDOMEvent(event);\n    for (let i = startIndex; i < cues.length; i++) {\n      const cue = cues[i];\n      if (!cue.positionAlign) cue.positionAlign = \"auto\";\n      this.#currentTrack.addCue(cue, trigger);\n    }\n    this.#cueTracker[id] = cues.length;\n  }\n  #onTextTracksAdded(event) {\n    if (!this.#instance) return;\n    const data = event.tracks, nativeTextTracks = [...this.#video.textTracks].filter((track) => \"manualMode\" in track), trigger = this.#createDOMEvent(event);\n    for (let i = 0; i < nativeTextTracks.length; i++) {\n      const textTrackInfo = data[i], nativeTextTrack = nativeTextTracks[i];\n      const id = `dash-${textTrackInfo.kind}-${i}`, track = new TextTrack({\n        id,\n        label: textTrackInfo?.label ?? textTrackInfo.labels.find((t) => t.text)?.text ?? (textTrackInfo?.lang && getLangName(textTrackInfo.lang)) ?? textTrackInfo?.lang ?? void 0,\n        language: textTrackInfo.lang ?? void 0,\n        kind: textTrackInfo.kind,\n        default: textTrackInfo.defaultTrack\n      });\n      track[TextTrackSymbol.native] = {\n        managed: true,\n        track: nativeTextTrack\n      };\n      track[TextTrackSymbol.readyState] = 2;\n      track[TextTrackSymbol.onModeChange] = () => {\n        if (!this.#instance) return;\n        if (track.mode === \"showing\") {\n          this.#instance.setTextTrack(i);\n          this.#currentTrack = track;\n        } else {\n          this.#instance.setTextTrack(-1);\n          this.#currentTrack = null;\n        }\n      };\n      this.#ctx.textTracks.add(track, trigger);\n    }\n  }\n  #onTrackChange(event) {\n    const { mediaType, newMediaInfo } = event;\n    if (mediaType === \"audio\") {\n      const track = this.#ctx.audioTracks.getById(`dash-audio-${newMediaInfo.index}`);\n      if (track) {\n        const trigger = this.#createDOMEvent(event);\n        this.#ctx.audioTracks[ListSymbol.select](track, true, trigger);\n      }\n    }\n  }\n  #onQualityChange(event) {\n    if (event.mediaType !== \"video\") return;\n    const quality = this.#ctx.qualities[event.newQuality];\n    if (quality) {\n      const trigger = this.#createDOMEvent(event);\n      this.#ctx.qualities[ListSymbol.select](quality, true, trigger);\n    }\n  }\n  #onManifestLoaded(event) {\n    if (this.#ctx.$state.canPlay() || !this.#instance) return;\n    const { type, mediaPresentationDuration } = event.data, trigger = this.#createDOMEvent(event);\n    this.#ctx.notify(\"stream-type-change\", type !== \"static\" ? \"live\" : \"on-demand\", trigger);\n    this.#ctx.notify(\"duration-change\", mediaPresentationDuration, trigger);\n    this.#ctx.qualities[QualitySymbol.setAuto](true, trigger);\n    const media = this.#instance.getVideoElement();\n    const videoQualities = this.#instance.getTracksForTypeFromManifest(\n      \"video\",\n      event.data\n    );\n    const supportedVideoMimeType = [...new Set(videoQualities.map((e) => e.mimeType))].find(\n      (type2) => type2 && canPlayVideoType(media, type2)\n    );\n    const videoQuality = videoQualities.filter(\n      (track) => supportedVideoMimeType === track.mimeType\n    )[0];\n    let audioTracks = this.#instance.getTracksForTypeFromManifest(\n      \"audio\",\n      event.data\n    );\n    const supportedAudioMimeType = [...new Set(audioTracks.map((e) => e.mimeType))].find(\n      (type2) => type2 && canPlayAudioType(media, type2)\n    );\n    audioTracks = audioTracks.filter((track) => supportedAudioMimeType === track.mimeType);\n    videoQuality.bitrateList.forEach((bitrate, index) => {\n      const quality = {\n        id: bitrate.id?.toString() ?? `dash-bitrate-${index}`,\n        width: bitrate.width ?? 0,\n        height: bitrate.height ?? 0,\n        bitrate: bitrate.bandwidth ?? 0,\n        codec: videoQuality.codec,\n        index\n      };\n      this.#ctx.qualities[ListSymbol.add](quality, trigger);\n    });\n    if (isNumber(videoQuality.index)) {\n      const quality = this.#ctx.qualities[videoQuality.index];\n      if (quality) this.#ctx.qualities[ListSymbol.select](quality, true, trigger);\n    }\n    audioTracks.forEach((audioTrack, index) => {\n      const matchingLabel = audioTrack.labels.find((label2) => {\n        return navigator.languages.some((language) => {\n          return label2.lang && language.toLowerCase().startsWith(label2.lang.toLowerCase());\n        });\n      });\n      const label = matchingLabel || audioTrack.labels[0];\n      const localTrack = {\n        id: `dash-audio-${audioTrack?.index}`,\n        label: label?.text ?? (audioTrack.lang && getLangName(audioTrack.lang)) ?? audioTrack.lang ?? \"\",\n        language: audioTrack.lang ?? \"\",\n        kind: \"main\",\n        mimeType: audioTrack.mimeType,\n        codec: audioTrack.codec,\n        index\n      };\n      this.#ctx.audioTracks[ListSymbol.add](localTrack, trigger);\n    });\n    media.dispatchEvent(new DOMEvent(\"canplay\", { trigger }));\n  }\n  #onError(event) {\n    const { type: eventType, error: data } = event;\n    switch (data.code) {\n      case 27:\n        this.#onNetworkError(data);\n        break;\n      default:\n        this.#onFatalError(data);\n        break;\n    }\n  }\n  #onFragmentLoadStart() {\n    if (this.#retryLoadingTimer >= 0) this.#clearRetryTimer();\n  }\n  #onFragmentLoadComplete(event) {\n    const mediaType = event.mediaType;\n    if (mediaType === \"text\") {\n      requestAnimationFrame(this.#onTextFragmentLoaded.bind(this, event));\n    }\n  }\n  #retryLoadingTimer = -1;\n  #onNetworkError(error) {\n    this.#clearRetryTimer();\n    this.#instance?.play();\n    this.#retryLoadingTimer = window.setTimeout(() => {\n      this.#retryLoadingTimer = -1;\n      this.#onFatalError(error);\n    }, 5e3);\n  }\n  #clearRetryTimer() {\n    clearTimeout(this.#retryLoadingTimer);\n    this.#retryLoadingTimer = -1;\n  }\n  #onFatalError(error) {\n    this.#ctx.notify(\"error\", {\n      message: error.message ?? \"\",\n      code: 1,\n      error\n    });\n  }\n  #enableAutoQuality() {\n    this.#switchAutoBitrate(\"video\", true);\n    const { qualities } = this.#ctx;\n    this.#instance?.setQualityFor(\"video\", qualities.selectedIndex, true);\n  }\n  #switchAutoBitrate(type, auto) {\n    this.#instance?.updateSettings({\n      streaming: { abr: { autoSwitchBitrate: { [type]: auto } } }\n    });\n  }\n  #onUserQualityChange() {\n    const { qualities } = this.#ctx;\n    if (!this.#instance || qualities.auto || !qualities.selected) return;\n    this.#switchAutoBitrate(\"video\", false);\n    this.#instance.setQualityFor(\"video\", qualities.selectedIndex, qualities.switch === \"current\");\n    if (IS_CHROME) {\n      this.#video.currentTime = this.#video.currentTime;\n    }\n  }\n  #onUserAudioChange() {\n    if (!this.#instance) return;\n    const { audioTracks } = this.#ctx, selectedTrack = this.#instance.getTracksFor(\"audio\").find(\n      (track) => audioTracks.selected && audioTracks.selected.id === `dash-audio-${track.index}`\n    );\n    if (selectedTrack) this.#instance.setCurrentTrack(selectedTrack);\n  }\n  #reset() {\n    this.#clearRetryTimer();\n    this.#currentTrack = null;\n    this.#cueTracker = {};\n  }\n  onInstance(callback) {\n    this.#callbacks.add(callback);\n    return () => this.#callbacks.delete(callback);\n  }\n  loadSource(src) {\n    this.#reset();\n    if (!isString(src.src)) return;\n    this.#instance?.attachSource(src.src);\n  }\n  destroy() {\n    this.#reset();\n    this.#instance?.destroy();\n    this.#instance = null;\n    this.#stopLiveSync?.();\n    this.#stopLiveSync = null;\n  }\n}\n\nfunction coerceToError(error) {\n  return error instanceof Error ? error : Error(typeof error === \"string\" ? error : JSON.stringify(error));\n}\nfunction assert(condition, message) {\n  if (!condition) {\n    throw Error(\"Assertion failed.\");\n  }\n}\n\nclass DASHLibLoader {\n  #lib;\n  #ctx;\n  #callback;\n  constructor(lib, ctx, callback) {\n    this.#lib = lib;\n    this.#ctx = ctx;\n    this.#callback = callback;\n    this.#startLoading();\n  }\n  async #startLoading() {\n    const callbacks = {\n      onLoadStart: this.#onLoadStart.bind(this),\n      onLoaded: this.#onLoaded.bind(this),\n      onLoadError: this.#onLoadError.bind(this)\n    };\n    let ctor = await loadDASHScript(this.#lib, callbacks);\n    if (isUndefined(ctor) && !isString(this.#lib)) ctor = await importDASH(this.#lib, callbacks);\n    if (!ctor) return null;\n    if (!window.dashjs.supportsMediaSource()) {\n      const message = \"[vidstack] `dash.js` is not supported in this environment\";\n      this.#ctx.player.dispatch(new DOMEvent(\"dash-unsupported\"));\n      this.#ctx.notify(\"error\", { message, code: 4 });\n      return null;\n    }\n    return ctor;\n  }\n  #onLoadStart() {\n    this.#ctx.player.dispatch(new DOMEvent(\"dash-lib-load-start\"));\n  }\n  #onLoaded(ctor) {\n    this.#ctx.player.dispatch(\n      new DOMEvent(\"dash-lib-loaded\", {\n        detail: ctor\n      })\n    );\n    this.#callback(ctor);\n  }\n  #onLoadError(e) {\n    const error = coerceToError(e);\n    this.#ctx.player.dispatch(\n      new DOMEvent(\"dash-lib-load-error\", {\n        detail: error\n      })\n    );\n    this.#ctx.notify(\"error\", {\n      message: error.message,\n      code: 4,\n      error\n    });\n  }\n}\nasync function importDASH(loader, callbacks = {}) {\n  if (isUndefined(loader)) return void 0;\n  callbacks.onLoadStart?.();\n  if (isDASHConstructor(loader)) {\n    callbacks.onLoaded?.(loader);\n    return loader;\n  }\n  if (isDASHNamespace(loader)) {\n    const ctor = loader.MediaPlayer;\n    callbacks.onLoaded?.(ctor);\n    return ctor;\n  }\n  try {\n    const ctor = (await loader())?.default;\n    if (isDASHNamespace(ctor)) {\n      callbacks.onLoaded?.(ctor.MediaPlayer);\n      return ctor.MediaPlayer;\n    }\n    if (ctor) {\n      callbacks.onLoaded?.(ctor);\n    } else {\n      throw Error(\n        false ? \"[vidstack] failed importing `dash.js`. Dynamic import returned invalid object.\" : \"\"\n      );\n    }\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\nasync function loadDASHScript(src, callbacks = {}) {\n  if (!isString(src)) return void 0;\n  callbacks.onLoadStart?.();\n  try {\n    await loadScript(src);\n    if (!isFunction(window.dashjs.MediaPlayer)) {\n      throw Error(\n        false ? \"[vidstack] failed loading `dash.js`. Could not find a valid `Dash` constructor on window\" : \"\"\n      );\n    }\n    const ctor = window.dashjs.MediaPlayer;\n    callbacks.onLoaded?.(ctor);\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\nfunction isDASHConstructor(value) {\n  return value && value.prototype && value.prototype !== Function;\n}\nfunction isDASHNamespace(value) {\n  return value && \"MediaPlayer\" in value;\n}\n\nconst JS_DELIVR_CDN = \"https://cdn.jsdelivr.net\";\nclass DASHProvider extends VideoProvider {\n  $$PROVIDER_TYPE = \"DASH\";\n  #ctor = null;\n  #controller = new DASHController(this.video, this.ctx);\n  /**\n   * The `dash.js` constructor.\n   */\n  get ctor() {\n    return this.#ctor;\n  }\n  /**\n   * The current `dash.js` instance.\n   */\n  get instance() {\n    return this.#controller.instance;\n  }\n  /**\n   * Whether `dash.js` is supported in this environment.\n   */\n  static supported = isDASHSupported();\n  get type() {\n    return \"dash\";\n  }\n  get canLiveSync() {\n    return true;\n  }\n  #library = `${JS_DELIVR_CDN}/npm/dashjs@4.7.4/dist/dash${\".all.min.js\"}`;\n  /**\n   * The `dash.js` configuration object.\n   *\n   * @see {@link https://cdn.dashjs.org/latest/jsdoc/module-Settings.html}\n   */\n  get config() {\n    return this.#controller.config;\n  }\n  set config(config) {\n    this.#controller.config = config;\n  }\n  /**\n   * The `dash.js` constructor (supports dynamic imports) or a URL of where it can be found.\n   *\n   * @defaultValue `https://cdn.jsdelivr.net/npm/dashjs@4.7.4/dist/dash.all.min.js`\n   */\n  get library() {\n    return this.#library;\n  }\n  set library(library) {\n    this.#library = library;\n  }\n  preconnect() {\n    if (!isString(this.#library)) return;\n    preconnect(this.#library);\n  }\n  setup() {\n    super.setup();\n    new DASHLibLoader(this.#library, this.ctx, (ctor) => {\n      this.#ctor = ctor;\n      this.#controller.setup(ctor);\n      this.ctx.notify(\"provider-setup\", this);\n      const src = peek(this.ctx.$state.source);\n      if (src) this.loadSource(src);\n    });\n  }\n  async loadSource(src, preload) {\n    if (!isString(src.src)) {\n      this.removeSource();\n      return;\n    }\n    this.media.preload = preload || \"\";\n    this.appendSource(src, \"application/x-mpegurl\");\n    this.#controller.loadSource(src);\n    this.currentSrc = src;\n  }\n  /**\n   * The given callback is invoked when a new `dash.js` instance is created and right before it's\n   * attached to media.\n   */\n  onInstance(callback) {\n    const instance = this.#controller.instance;\n    if (instance) callback(instance);\n    return this.#controller.onInstance(callback);\n  }\n  destroy() {\n    this.#controller.destroy();\n  }\n}\n\nvar provider = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  DASHProvider: DASHProvider\n});\n\nclass DASHProviderLoader extends VideoProviderLoader {\n  static supported = isDASHSupported();\n  name = \"dash\";\n  canPlay(src) {\n    return DASHProviderLoader.supported && isDASHSrc(src);\n  }\n  async load(context) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load dash provider server-side\");\n    }\n    return new (await Promise.resolve().then(function () { return provider; })).DASHProvider(this.target, context);\n  }\n}\n\nclass VimeoProviderLoader {\n  name = \"vimeo\";\n  target;\n  preconnect() {\n    const connections = [\n      \"https://i.vimeocdn.com\",\n      \"https://f.vimeocdn.com\",\n      \"https://fresnel.vimeocdn.com\"\n    ];\n    for (const url of connections) {\n      preconnect(url);\n    }\n  }\n  canPlay(src) {\n    return isString(src.src) && src.type === \"video/vimeo\";\n  }\n  mediaType() {\n    return \"video\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load vimeo provider server-side\");\n    }\n    return new (await import('./vidstack-BqgQkvb4.js')).VimeoProvider(this.target, ctx);\n  }\n  async loadPoster(src, ctx, abort) {\n    const { resolveVimeoVideoId, getVimeoVideoInfo } = await import('./vidstack-krOAtKMi.js');\n    if (!isString(src.src)) return null;\n    const { videoId, hash } = resolveVimeoVideoId(src.src);\n    if (videoId) {\n      return getVimeoVideoInfo(videoId, abort, hash).then((info) => info ? info.poster : null);\n    }\n    return null;\n  }\n}\n\nclass YouTubeProviderLoader {\n  name = \"youtube\";\n  target;\n  preconnect() {\n    const connections = [\n      // Botguard script.\n      \"https://www.google.com\",\n      // Posters.\n      \"https://i.ytimg.com\",\n      // Ads.\n      \"https://googleads.g.doubleclick.net\",\n      \"https://static.doubleclick.net\"\n    ];\n    for (const url of connections) {\n      preconnect(url);\n    }\n  }\n  canPlay(src) {\n    return isString(src.src) && src.type === \"video/youtube\";\n  }\n  mediaType() {\n    return \"video\";\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load youtube provider server-side\");\n    }\n    return new (await import('./vidstack-DHmfHold.js')).YouTubeProvider(this.target, ctx);\n  }\n  async loadPoster(src, ctx, abort) {\n    const { findYouTubePoster, resolveYouTubeVideoId } = await import('./vidstack-Dm1xEU9Q.js');\n    const videoId = isString(src.src) && resolveYouTubeVideoId(src.src);\n    if (videoId) return findYouTubePoster(videoId, abort);\n    return null;\n  }\n}\n\nfunction padNumberWithZeroes(num, expectedLength) {\n  const str = String(num);\n  const actualLength = str.length;\n  const shouldPad = actualLength < expectedLength;\n  if (shouldPad) {\n    const padLength = expectedLength - actualLength;\n    const padding = `0`.repeat(padLength);\n    return `${padding}${num}`;\n  }\n  return str;\n}\nfunction parseTime(duration) {\n  const hours = Math.trunc(duration / 3600);\n  const minutes = Math.trunc(duration % 3600 / 60);\n  const seconds = Math.trunc(duration % 60);\n  const fraction = Number((duration - Math.trunc(duration)).toPrecision(3));\n  return {\n    hours,\n    minutes,\n    seconds,\n    fraction\n  };\n}\nfunction formatTime(duration, { padHrs = null, padMins = null, showHrs = false, showMs = false } = {}) {\n  const { hours, minutes, seconds, fraction } = parseTime(duration), paddedHours = padHrs ? padNumberWithZeroes(hours, 2) : hours, paddedMinutes = padMins || isNull(padMins) && duration >= 3600 ? padNumberWithZeroes(minutes, 2) : minutes, paddedSeconds = padNumberWithZeroes(seconds, 2), paddedMs = showMs && fraction > 0 ? `.${String(fraction).replace(/^0?\\./, \"\")}` : \"\", time = `${paddedMinutes}:${paddedSeconds}${paddedMs}`;\n  return hours > 0 || showHrs ? `${paddedHours}:${time}` : time;\n}\nfunction formatSpokenTime(duration) {\n  const spokenParts = [];\n  const { hours, minutes, seconds } = parseTime(duration);\n  if (hours > 0) {\n    spokenParts.push(`${hours} hour`);\n  }\n  if (minutes > 0) {\n    spokenParts.push(`${minutes} min`);\n  }\n  if (seconds > 0 || spokenParts.length === 0) {\n    spokenParts.push(`${seconds} sec`);\n  }\n  return spokenParts.join(\" \");\n}\n\nconst MEDIA_ATTRIBUTES = Symbol(0);\nconst mediaAttributes = [\n  \"autoPlay\",\n  \"canAirPlay\",\n  \"canFullscreen\",\n  \"canGoogleCast\",\n  \"canLoad\",\n  \"canLoadPoster\",\n  \"canPictureInPicture\",\n  \"canPlay\",\n  \"canSeek\",\n  \"ended\",\n  \"fullscreen\",\n  \"isAirPlayConnected\",\n  \"isGoogleCastConnected\",\n  \"live\",\n  \"liveEdge\",\n  \"loop\",\n  \"mediaType\",\n  \"muted\",\n  \"paused\",\n  \"pictureInPicture\",\n  \"playing\",\n  \"playsInline\",\n  \"remotePlaybackState\",\n  \"remotePlaybackType\",\n  \"seeking\",\n  \"started\",\n  \"streamType\",\n  \"viewType\",\n  \"waiting\"\n];\n\nconst mediaPlayerProps = {\n  artist: \"\",\n  artwork: null,\n  autoplay: false,\n  autoPlay: false,\n  clipStartTime: 0,\n  clipEndTime: 0,\n  controls: false,\n  currentTime: 0,\n  crossorigin: null,\n  crossOrigin: null,\n  duration: -1,\n  fullscreenOrientation: \"landscape\",\n  googleCast: {},\n  load: \"visible\",\n  posterLoad: \"visible\",\n  logLevel: \"silent\",\n  loop: false,\n  muted: false,\n  paused: true,\n  playsinline: false,\n  playsInline: false,\n  playbackRate: 1,\n  poster: \"\",\n  preload: \"metadata\",\n  preferNativeHLS: false,\n  src: \"\",\n  title: \"\",\n  controlsDelay: 2e3,\n  hideControlsOnMouseLeave: false,\n  viewType: \"unknown\",\n  streamType: \"unknown\",\n  volume: 1,\n  liveEdgeTolerance: 10,\n  minLiveDVRWindow: 60,\n  keyDisabled: false,\n  keyTarget: \"player\",\n  keyShortcuts: MEDIA_KEY_SHORTCUTS,\n  storage: null\n};\n\nclass MediaLoadController extends MediaPlayerController {\n  #type;\n  #callback;\n  constructor(type, callback) {\n    super();\n    this.#type = type;\n    this.#callback = callback;\n  }\n  async onAttach(el) {\n    if (IS_SERVER) return;\n    const load = this.$props[this.#type]();\n    if (load === \"eager\") {\n      requestAnimationFrame(this.#callback);\n    } else if (load === \"idle\") {\n      waitIdlePeriod(this.#callback);\n    } else if (load === \"visible\") {\n      let dispose, observer = new IntersectionObserver((entries) => {\n        if (!this.scope) return;\n        if (entries[0].isIntersecting) {\n          dispose?.();\n          dispose = void 0;\n          this.#callback();\n        }\n      });\n      observer.observe(el);\n      dispose = onDispose(() => observer.disconnect());\n    }\n  }\n}\n\nclass MediaPlayerDelegate {\n  #handle;\n  #media;\n  constructor(handle, media) {\n    this.#handle = handle;\n    this.#media = media;\n  }\n  notify(type, ...init) {\n    if (IS_SERVER) return;\n    this.#handle(\n      new DOMEvent(type, {\n        detail: init?.[0],\n        trigger: init?.[1]\n      })\n    );\n  }\n  async ready(info, trigger) {\n    if (IS_SERVER) return;\n    return untrack(async () => {\n      const { logger } = this.#media, {\n        autoPlay,\n        canPlay,\n        started,\n        duration,\n        seekable,\n        buffered,\n        remotePlaybackInfo,\n        playsInline,\n        savedState,\n        source\n      } = this.#media.$state;\n      if (canPlay()) return;\n      const detail = {\n        duration: info?.duration ?? duration(),\n        seekable: info?.seekable ?? seekable(),\n        buffered: info?.buffered ?? buffered(),\n        provider: this.#media.$provider()\n      };\n      this.notify(\"can-play\", detail, trigger);\n      tick();\n      let provider = this.#media.$provider(), { storage, qualities } = this.#media, { muted, volume, clipStartTime, playbackRate } = this.#media.$props;\n      await storage?.onLoad?.(source());\n      const savedPlaybackTime = savedState()?.currentTime, savedPausedState = savedState()?.paused, storageTime = await storage?.getTime(), startTime = savedPlaybackTime ?? storageTime ?? clipStartTime(), shouldAutoPlay = savedPausedState === false || savedPausedState !== true && !started() && autoPlay();\n      if (provider) {\n        provider.setVolume(await storage?.getVolume() ?? volume());\n        provider.setMuted(muted() || !!await storage?.getMuted());\n        const audioGain = await storage?.getAudioGain() ?? 1;\n        if (audioGain > 1) provider.audioGain?.setGain?.(audioGain);\n        provider.setPlaybackRate?.(await storage?.getPlaybackRate() ?? playbackRate());\n        provider.setPlaysInline?.(playsInline());\n        if (startTime > 0) provider.setCurrentTime(startTime);\n      }\n      const prefQuality = await storage?.getVideoQuality();\n      if (prefQuality && qualities.length) {\n        let currentQuality = null, currentScore = Infinity;\n        for (const quality of qualities) {\n          const score = Math.abs(prefQuality.width - quality.width) + Math.abs(prefQuality.height - quality.height) + (prefQuality.bitrate ? Math.abs(prefQuality.bitrate - (quality.bitrate ?? 0)) : 0);\n          if (score < currentScore) {\n            currentQuality = quality;\n            currentScore = score;\n          }\n        }\n        if (currentQuality) currentQuality.selected = true;\n      }\n      if (canPlay() && shouldAutoPlay) {\n        await this.#attemptAutoplay(trigger);\n      } else if (storageTime && storageTime > 0) {\n        this.notify(\"started\", void 0, trigger);\n      }\n      remotePlaybackInfo.set(null);\n    });\n  }\n  async #attemptAutoplay(trigger) {\n    const {\n      player,\n      $state: { autoPlaying, muted }\n    } = this.#media;\n    autoPlaying.set(true);\n    const attemptEvent = new DOMEvent(\"auto-play-attempt\", { trigger });\n    try {\n      await player.play(attemptEvent);\n    } catch (error) {\n    }\n  }\n}\n\nclass Queue {\n  #queue = /* @__PURE__ */ new Map();\n  /**\n   * Queue the given `item` under the given `key` to be processed at a later time by calling\n   * `serve(key)`.\n   */\n  enqueue(key, item) {\n    this.#queue.set(key, item);\n  }\n  /**\n   * Process item in queue for the given `key`.\n   */\n  serve(key) {\n    const value = this.peek(key);\n    this.#queue.delete(key);\n    return value;\n  }\n  /**\n   * Peek at item in queue for the given `key`.\n   */\n  peek(key) {\n    return this.#queue.get(key);\n  }\n  /**\n   * Removes queued item under the given `key`.\n   */\n  delete(key) {\n    this.#queue.delete(key);\n  }\n  /**\n   * Clear all items in the queue.\n   */\n  clear() {\n    this.#queue.clear();\n  }\n}\n\nclass RequestQueue {\n  #serving = false;\n  #pending = deferredPromise();\n  #queue = /* @__PURE__ */ new Map();\n  /**\n   * The number of callbacks that are currently in queue.\n   */\n  get size() {\n    return this.#queue.size;\n  }\n  /**\n   * Whether items in the queue are being served immediately, otherwise they're queued to\n   * be processed later.\n   */\n  get isServing() {\n    return this.#serving;\n  }\n  /**\n   * Waits for the queue to be flushed (ie: start serving).\n   */\n  async waitForFlush() {\n    if (this.#serving) return;\n    await this.#pending.promise;\n  }\n  /**\n   * Queue the given `callback` to be invoked at a later time by either calling the `serve()` or\n   * `start()` methods. If the queue has started serving (i.e., `start()` was already called),\n   * then the callback will be invoked immediately.\n   *\n   * @param key - Uniquely identifies this callback so duplicates are ignored.\n   * @param callback - The function to call when this item in the queue is being served.\n   */\n  enqueue(key, callback) {\n    if (this.#serving) {\n      callback();\n      return;\n    }\n    this.#queue.delete(key);\n    this.#queue.set(key, callback);\n  }\n  /**\n   * Invokes the callback with the given `key` in the queue (if it exists).\n   */\n  serve(key) {\n    this.#queue.get(key)?.();\n    this.#queue.delete(key);\n  }\n  /**\n   * Flush all queued items and start serving future requests immediately until `stop()` is called.\n   */\n  start() {\n    this.#flush();\n    this.#serving = true;\n    if (this.#queue.size > 0) this.#flush();\n  }\n  /**\n   * Stop serving requests, they'll be queued until you begin processing again by calling `start()`.\n   */\n  stop() {\n    this.#serving = false;\n  }\n  /**\n   * Stop serving requests, empty the request queue, and release any promises waiting for the\n   * queue to flush.\n   */\n  reset() {\n    this.stop();\n    this.#queue.clear();\n    this.#release();\n  }\n  #flush() {\n    for (const key of this.#queue.keys()) this.serve(key);\n    this.#release();\n  }\n  #release() {\n    this.#pending.resolve();\n    this.#pending = deferredPromise();\n  }\n}\n\nfunction ariaBool(value) {\n  return value ? \"true\" : \"false\";\n}\nfunction $ariaBool(signal) {\n  return () => ariaBool(signal());\n}\nfunction prefersReducedMotion() {\n  if (typeof window === \"undefined\") return false;\n  return window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches;\n}\n\nclass MediaRequestManager extends MediaPlayerController {\n  #stateMgr;\n  #request;\n  #media;\n  controls;\n  #fullscreen;\n  #orientation;\n  #$provider;\n  #providerQueue = new RequestQueue();\n  constructor(stateMgr, request, media) {\n    super();\n    this.#stateMgr = stateMgr;\n    this.#request = request;\n    this.#media = media;\n    this.#$provider = media.$provider;\n    this.controls = new MediaControls();\n    this.#fullscreen = new FullscreenController();\n    this.#orientation = new ScreenOrientationController();\n  }\n  onAttach() {\n    this.listen(\"fullscreen-change\", this.#onFullscreenChange.bind(this));\n  }\n  onConnect(el) {\n    const names = Object.getOwnPropertyNames(Object.getPrototypeOf(this)), events = new EventsController(el), handleRequest = this.#handleRequest.bind(this);\n    for (const name of names) {\n      if (name.startsWith(\"media-\")) {\n        events.add(name, handleRequest);\n      }\n    }\n    this.#attachLoadPlayListener();\n    effect(this.#watchProvider.bind(this));\n    effect(this.#watchControlsDelayChange.bind(this));\n    effect(this.#watchAudioGainSupport.bind(this));\n    effect(this.#watchAirPlaySupport.bind(this));\n    effect(this.#watchGoogleCastSupport.bind(this));\n    effect(this.#watchFullscreenSupport.bind(this));\n    effect(this.#watchPiPSupport.bind(this));\n  }\n  onDestroy() {\n    try {\n      const destroyEvent = this.createEvent(\"destroy\"), { pictureInPicture, fullscreen } = this.$state;\n      if (fullscreen()) this.exitFullscreen(\"prefer-media\", destroyEvent);\n      if (pictureInPicture()) this.exitPictureInPicture(destroyEvent);\n    } catch (e) {\n    }\n    this.#providerQueue.reset();\n  }\n  #attachLoadPlayListener() {\n    const { load } = this.$props, { canLoad } = this.$state;\n    if (load() !== \"play\" || canLoad()) return;\n    const off = this.listen(\"media-play-request\", (event) => {\n      this.#handleLoadPlayStrategy(event);\n      off();\n    });\n  }\n  #watchProvider() {\n    const provider = this.#$provider(), canPlay = this.$state.canPlay();\n    if (provider && canPlay) {\n      this.#providerQueue.start();\n    }\n    return () => {\n      this.#providerQueue.stop();\n    };\n  }\n  #handleRequest(event) {\n    event.stopPropagation();\n    if (event.defaultPrevented) return;\n    if (!this[event.type]) return;\n    if (peek(this.#$provider)) {\n      this[event.type](event);\n    } else {\n      this.#providerQueue.enqueue(event.type, () => {\n        if (peek(this.#$provider)) this[event.type](event);\n      });\n    }\n  }\n  async play(trigger) {\n    if (IS_SERVER) return;\n    const { canPlay, paused, autoPlaying } = this.$state;\n    if (this.#handleLoadPlayStrategy(trigger)) return;\n    if (!peek(paused)) return;\n    if (trigger) this.#request.queue.enqueue(\"media-play-request\", trigger);\n    const isAutoPlaying = peek(autoPlaying);\n    try {\n      const provider = peek(this.#$provider);\n      throwIfNotReadyForPlayback(provider, peek(canPlay));\n      throwIfAutoplayingWithReducedMotion(isAutoPlaying);\n      return await provider.play();\n    } catch (error) {\n      const errorEvent = this.createEvent(\"play-fail\", {\n        detail: coerceToError(error),\n        trigger\n      });\n      errorEvent.autoPlay = isAutoPlaying;\n      this.#stateMgr.handle(errorEvent);\n      throw error;\n    }\n  }\n  #handleLoadPlayStrategy(trigger) {\n    const { load } = this.$props, { canLoad } = this.$state;\n    if (load() === \"play\" && !canLoad()) {\n      const event = this.createEvent(\"media-start-loading\", { trigger });\n      this.dispatchEvent(event);\n      this.#providerQueue.enqueue(\"media-play-request\", async () => {\n        try {\n          await this.play(event);\n        } catch (error) {\n        }\n      });\n      return true;\n    }\n    return false;\n  }\n  async pause(trigger) {\n    if (IS_SERVER) return;\n    const { canPlay, paused } = this.$state;\n    if (peek(paused)) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-pause-request\", trigger);\n    }\n    try {\n      const provider = peek(this.#$provider);\n      throwIfNotReadyForPlayback(provider, peek(canPlay));\n      return await provider.pause();\n    } catch (error) {\n      this.#request.queue.delete(\"media-pause-request\");\n      throw error;\n    }\n  }\n  setAudioGain(gain, trigger) {\n    const { audioGain, canSetAudioGain } = this.$state;\n    if (audioGain() === gain) return;\n    const provider = this.#$provider();\n    if (!provider?.audioGain || !canSetAudioGain()) {\n      throw Error(\"[vidstack] audio gain api not available\");\n    }\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-audio-gain-change-request\", trigger);\n    }\n    provider.audioGain.setGain(gain);\n  }\n  seekToLiveEdge(trigger) {\n    if (IS_SERVER) return;\n    const { canPlay, live, liveEdge, canSeek, liveSyncPosition, seekableEnd, userBehindLiveEdge } = this.$state;\n    userBehindLiveEdge.set(false);\n    if (peek(() => !live() || liveEdge() || !canSeek())) return;\n    const provider = peek(this.#$provider);\n    throwIfNotReadyForPlayback(provider, peek(canPlay));\n    if (trigger) this.#request.queue.enqueue(\"media-seek-request\", trigger);\n    const end = seekableEnd() - 2;\n    provider.setCurrentTime(Math.min(end, liveSyncPosition() ?? end));\n  }\n  #wasPIPActive = false;\n  async enterFullscreen(target = \"prefer-media\", trigger) {\n    if (IS_SERVER) return;\n    const adapter = this.#getFullscreenAdapter(target);\n    throwIfFullscreenNotSupported(target, adapter);\n    if (adapter.active) return;\n    if (peek(this.$state.pictureInPicture)) {\n      this.#wasPIPActive = true;\n      await this.exitPictureInPicture(trigger);\n    }\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-enter-fullscreen-request\", trigger);\n    }\n    return adapter.enter();\n  }\n  async exitFullscreen(target = \"prefer-media\", trigger) {\n    if (IS_SERVER) return;\n    const adapter = this.#getFullscreenAdapter(target);\n    throwIfFullscreenNotSupported(target, adapter);\n    if (!adapter.active) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-exit-fullscreen-request\", trigger);\n    }\n    try {\n      const result = await adapter.exit();\n      if (this.#wasPIPActive && peek(this.$state.canPictureInPicture)) {\n        await this.enterPictureInPicture();\n      }\n      return result;\n    } finally {\n      this.#wasPIPActive = false;\n    }\n  }\n  #getFullscreenAdapter(target) {\n    const provider = peek(this.#$provider);\n    return target === \"prefer-media\" && this.#fullscreen.supported || target === \"media\" ? this.#fullscreen : provider?.fullscreen;\n  }\n  async enterPictureInPicture(trigger) {\n    if (IS_SERVER) return;\n    this.#throwIfPIPNotSupported();\n    if (this.$state.pictureInPicture()) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-enter-pip-request\", trigger);\n    }\n    return await this.#$provider().pictureInPicture.enter();\n  }\n  async exitPictureInPicture(trigger) {\n    if (IS_SERVER) return;\n    this.#throwIfPIPNotSupported();\n    if (!this.$state.pictureInPicture()) return;\n    if (trigger) {\n      this.#request.queue.enqueue(\"media-exit-pip-request\", trigger);\n    }\n    return await this.#$provider().pictureInPicture.exit();\n  }\n  #throwIfPIPNotSupported() {\n    if (this.$state.canPictureInPicture()) return;\n    throw Error(\n      \"[vidstack] no pip support\"\n    );\n  }\n  #watchControlsDelayChange() {\n    this.controls.defaultDelay = this.$props.controlsDelay();\n  }\n  #watchAudioGainSupport() {\n    const { canSetAudioGain } = this.$state, supported = !!this.#$provider()?.audioGain?.supported;\n    canSetAudioGain.set(supported);\n  }\n  #watchAirPlaySupport() {\n    const { canAirPlay } = this.$state, supported = !!this.#$provider()?.airPlay?.supported;\n    canAirPlay.set(supported);\n  }\n  #watchGoogleCastSupport() {\n    const { canGoogleCast, source } = this.$state, supported = IS_CHROME && !IS_IOS && canGoogleCastSrc(source());\n    canGoogleCast.set(supported);\n  }\n  #watchFullscreenSupport() {\n    const { canFullscreen } = this.$state, supported = this.#fullscreen.supported || !!this.#$provider()?.fullscreen?.supported;\n    canFullscreen.set(supported);\n  }\n  #watchPiPSupport() {\n    const { canPictureInPicture } = this.$state, supported = !!this.#$provider()?.pictureInPicture?.supported;\n    canPictureInPicture.set(supported);\n  }\n  async [\"media-airplay-request\"](event) {\n    try {\n      await this.requestAirPlay(event);\n    } catch (error) {\n    }\n  }\n  async requestAirPlay(trigger) {\n    try {\n      const adapter = this.#$provider()?.airPlay;\n      if (!adapter?.supported) {\n        throw Error(false ? \"AirPlay adapter not available on provider.\" : \"No AirPlay adapter.\");\n      }\n      if (trigger) {\n        this.#request.queue.enqueue(\"media-airplay-request\", trigger);\n      }\n      return await adapter.prompt();\n    } catch (error) {\n      this.#request.queue.delete(\"media-airplay-request\");\n      throw error;\n    }\n  }\n  async [\"media-google-cast-request\"](event) {\n    try {\n      await this.requestGoogleCast(event);\n    } catch (error) {\n    }\n  }\n  #googleCastLoader;\n  async requestGoogleCast(trigger) {\n    try {\n      const { canGoogleCast } = this.$state;\n      if (!peek(canGoogleCast)) {\n        const error = Error(\n          false ? \"Google Cast not available on this platform.\" : \"Cast not available.\"\n        );\n        error.code = \"CAST_NOT_AVAILABLE\";\n        throw error;\n      }\n      preconnect(\"https://www.gstatic.com\");\n      if (!this.#googleCastLoader) {\n        const $module = await import('./vidstack-CQQ1xKSy.js').then(function (n) { return n.loader; });\n        this.#googleCastLoader = new $module.GoogleCastLoader();\n      }\n      await this.#googleCastLoader.prompt(this.#media);\n      if (trigger) {\n        this.#request.queue.enqueue(\"media-google-cast-request\", trigger);\n      }\n      const isConnecting = peek(this.$state.remotePlaybackState) !== \"disconnected\";\n      if (isConnecting) {\n        this.$state.savedState.set({\n          paused: peek(this.$state.paused),\n          currentTime: peek(this.$state.currentTime)\n        });\n      }\n      this.$state.remotePlaybackLoader.set(isConnecting ? this.#googleCastLoader : null);\n    } catch (error) {\n      this.#request.queue.delete(\"media-google-cast-request\");\n      throw error;\n    }\n  }\n  [\"media-clip-start-change-request\"](event) {\n    const { clipStartTime } = this.$state;\n    clipStartTime.set(event.detail);\n  }\n  [\"media-clip-end-change-request\"](event) {\n    const { clipEndTime } = this.$state;\n    clipEndTime.set(event.detail);\n    this.dispatch(\"duration-change\", {\n      detail: event.detail,\n      trigger: event\n    });\n  }\n  [\"media-duration-change-request\"](event) {\n    const { providedDuration, clipEndTime } = this.$state;\n    providedDuration.set(event.detail);\n    if (clipEndTime() <= 0) {\n      this.dispatch(\"duration-change\", {\n        detail: event.detail,\n        trigger: event\n      });\n    }\n  }\n  [\"media-audio-track-change-request\"](event) {\n    const { logger, audioTracks } = this.#media;\n    if (audioTracks.readonly) {\n      return;\n    }\n    const index = event.detail, track = audioTracks[index];\n    if (track) {\n      const key = event.type;\n      this.#request.queue.enqueue(key, event);\n      track.selected = true;\n    }\n  }\n  async [\"media-enter-fullscreen-request\"](event) {\n    try {\n      await this.enterFullscreen(event.detail, event);\n    } catch (error) {\n      this.#onFullscreenError(error, event);\n    }\n  }\n  async [\"media-exit-fullscreen-request\"](event) {\n    try {\n      await this.exitFullscreen(event.detail, event);\n    } catch (error) {\n      this.#onFullscreenError(error, event);\n    }\n  }\n  async #onFullscreenChange(event) {\n    const lockType = peek(this.$props.fullscreenOrientation), isFullscreen = event.detail;\n    if (isUndefined(lockType) || lockType === \"none\" || !this.#orientation.supported) return;\n    if (isFullscreen) {\n      if (this.#orientation.locked) return;\n      this.dispatch(\"media-orientation-lock-request\", {\n        detail: lockType,\n        trigger: event\n      });\n    } else if (this.#orientation.locked) {\n      this.dispatch(\"media-orientation-unlock-request\", {\n        trigger: event\n      });\n    }\n  }\n  #onFullscreenError(error, request) {\n    this.#stateMgr.handle(\n      this.createEvent(\"fullscreen-error\", {\n        detail: coerceToError(error)\n      })\n    );\n  }\n  async [\"media-orientation-lock-request\"](event) {\n    const key = event.type;\n    try {\n      this.#request.queue.enqueue(key, event);\n      await this.#orientation.lock(event.detail);\n    } catch (error) {\n      this.#request.queue.delete(key);\n    }\n  }\n  async [\"media-orientation-unlock-request\"](event) {\n    const key = event.type;\n    try {\n      this.#request.queue.enqueue(key, event);\n      await this.#orientation.unlock();\n    } catch (error) {\n      this.#request.queue.delete(key);\n    }\n  }\n  async [\"media-enter-pip-request\"](event) {\n    try {\n      await this.enterPictureInPicture(event);\n    } catch (error) {\n      this.#onPictureInPictureError(error, event);\n    }\n  }\n  async [\"media-exit-pip-request\"](event) {\n    try {\n      await this.exitPictureInPicture(event);\n    } catch (error) {\n      this.#onPictureInPictureError(error, event);\n    }\n  }\n  #onPictureInPictureError(error, request) {\n    this.#stateMgr.handle(\n      this.createEvent(\"picture-in-picture-error\", {\n        detail: coerceToError(error)\n      })\n    );\n  }\n  [\"media-live-edge-request\"](event) {\n    const { live, liveEdge, canSeek } = this.$state;\n    if (!live() || liveEdge() || !canSeek()) return;\n    this.#request.queue.enqueue(\"media-seek-request\", event);\n    try {\n      this.seekToLiveEdge();\n    } catch (error) {\n      this.#request.queue.delete(\"media-seek-request\");\n    }\n  }\n  async [\"media-loop-request\"](event) {\n    try {\n      this.#request.looping = true;\n      this.#request.replaying = true;\n      await this.play(event);\n    } catch (error) {\n      this.#request.looping = false;\n    }\n  }\n  [\"media-user-loop-change-request\"](event) {\n    this.$state.userPrefersLoop.set(event.detail);\n  }\n  async [\"media-pause-request\"](event) {\n    if (this.$state.paused()) return;\n    try {\n      await this.pause(event);\n    } catch (error) {\n    }\n  }\n  async [\"media-play-request\"](event) {\n    if (!this.$state.paused()) return;\n    try {\n      await this.play(event);\n    } catch (e) {\n    }\n  }\n  [\"media-rate-change-request\"](event) {\n    const { playbackRate, canSetPlaybackRate } = this.$state;\n    if (playbackRate() === event.detail || !canSetPlaybackRate()) return;\n    const provider = this.#$provider();\n    if (!provider?.setPlaybackRate) return;\n    this.#request.queue.enqueue(\"media-rate-change-request\", event);\n    provider.setPlaybackRate(event.detail);\n  }\n  [\"media-audio-gain-change-request\"](event) {\n    try {\n      this.setAudioGain(event.detail, event);\n    } catch (e) {\n    }\n  }\n  [\"media-quality-change-request\"](event) {\n    const { qualities, storage, logger } = this.#media;\n    if (qualities.readonly) {\n      return;\n    }\n    this.#request.queue.enqueue(\"media-quality-change-request\", event);\n    const index = event.detail;\n    if (index < 0) {\n      qualities.autoSelect(event);\n      if (event.isOriginTrusted) storage?.setVideoQuality?.(null);\n    } else {\n      const quality = qualities[index];\n      if (quality) {\n        quality.selected = true;\n        if (event.isOriginTrusted) {\n          storage?.setVideoQuality?.({\n            id: quality.id,\n            width: quality.width,\n            height: quality.height,\n            bitrate: quality.bitrate\n          });\n        }\n      }\n    }\n  }\n  [\"media-pause-controls-request\"](event) {\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.controls.pause(event);\n  }\n  [\"media-resume-controls-request\"](event) {\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.controls.resume(event);\n  }\n  [\"media-seek-request\"](event) {\n    const { canSeek, ended, live, seekableEnd, userBehindLiveEdge } = this.$state, seekTime = event.detail;\n    if (ended()) this.#request.replaying = true;\n    const key = event.type;\n    this.#request.seeking = false;\n    this.#request.queue.delete(key);\n    const boundedTime = boundTime(seekTime, this.$state);\n    if (!Number.isFinite(boundedTime) || !canSeek()) return;\n    this.#request.queue.enqueue(key, event);\n    this.#$provider().setCurrentTime(boundedTime);\n    if (live() && event.isOriginTrusted && Math.abs(seekableEnd() - boundedTime) >= 2) {\n      userBehindLiveEdge.set(true);\n    }\n  }\n  [\"media-seeking-request\"](event) {\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.$state.seeking.set(true);\n    this.#request.seeking = true;\n  }\n  [\"media-start-loading\"](event) {\n    if (this.$state.canLoad()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#stateMgr.handle(this.createEvent(\"can-load\"));\n  }\n  [\"media-poster-start-loading\"](event) {\n    if (this.$state.canLoadPoster()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#stateMgr.handle(this.createEvent(\"can-load-poster\"));\n  }\n  [\"media-text-track-change-request\"](event) {\n    const { index, mode } = event.detail, track = this.#media.textTracks[index];\n    if (track) {\n      const key = event.type;\n      this.#request.queue.enqueue(key, event);\n      track.setMode(mode, event);\n    }\n  }\n  [\"media-mute-request\"](event) {\n    if (this.$state.muted()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#$provider().setMuted(true);\n  }\n  [\"media-unmute-request\"](event) {\n    const { muted, volume } = this.$state;\n    if (!muted()) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#media.$provider().setMuted(false);\n    if (volume() === 0) {\n      this.#request.queue.enqueue(key, event);\n      this.#$provider().setVolume(0.25);\n    }\n  }\n  [\"media-volume-change-request\"](event) {\n    const { muted, volume } = this.$state;\n    const newVolume = event.detail;\n    if (volume() === newVolume) return;\n    const key = event.type;\n    this.#request.queue.enqueue(key, event);\n    this.#$provider().setVolume(newVolume);\n    if (newVolume > 0 && muted()) {\n      this.#request.queue.enqueue(key, event);\n      this.#$provider().setMuted(false);\n    }\n  }\n  #logError(title, error, request) {\n    return;\n  }\n}\nfunction throwIfNotReadyForPlayback(provider, canPlay) {\n  if (provider && canPlay) return;\n  throw Error(\n    \"[vidstack] media not ready\"\n  );\n}\nfunction throwIfFullscreenNotSupported(target, fullscreen) {\n  if (fullscreen?.supported) return;\n  throw Error(\n    \"[vidstack] no fullscreen support\"\n  );\n}\nfunction throwIfAutoplayingWithReducedMotion(autoplaying) {\n  if (!prefersReducedMotion() || !autoplaying) return;\n  throw Error(\n    \"[vidstack] autoplay blocked\"\n  );\n}\nclass MediaRequestContext {\n  seeking = false;\n  looping = false;\n  replaying = false;\n  queue = new Queue();\n}\n\nconst TRACKED_EVENT = /* @__PURE__ */ new Set([\n  \"auto-play\",\n  \"auto-play-fail\",\n  \"can-load\",\n  \"sources-change\",\n  \"source-change\",\n  \"load-start\",\n  \"abort\",\n  \"error\",\n  \"loaded-metadata\",\n  \"loaded-data\",\n  \"can-play\",\n  \"play\",\n  \"play-fail\",\n  \"pause\",\n  \"playing\",\n  \"seeking\",\n  \"seeked\",\n  \"waiting\"\n]);\n\nclass MediaStateManager extends MediaPlayerController {\n  #request;\n  #media;\n  #trackedEvents = /* @__PURE__ */ new Map();\n  #clipEnded = false;\n  #playedIntervals = [];\n  #playedInterval = [-1, -1];\n  #firingWaiting = false;\n  #waitingTrigger;\n  constructor(request, media) {\n    super();\n    this.#request = request;\n    this.#media = media;\n  }\n  onAttach(el) {\n    el.setAttribute(\"aria-busy\", \"true\");\n    new EventsController(this).add(\"fullscreen-change\", this[\"fullscreen-change\"].bind(this)).add(\"fullscreen-error\", this[\"fullscreen-error\"].bind(this)).add(\"orientation-change\", this[\"orientation-change\"].bind(this));\n  }\n  onConnect(el) {\n    effect(this.#watchCanSetVolume.bind(this));\n    this.#addTextTrackListeners();\n    this.#addQualityListeners();\n    this.#addAudioTrackListeners();\n    this.#resumePlaybackOnConnect();\n    onDispose(this.#pausePlaybackOnDisconnect.bind(this));\n  }\n  onDestroy() {\n    const { audioTracks, qualities, textTracks } = this.#media;\n    audioTracks[ListSymbol.reset]();\n    qualities[ListSymbol.reset]();\n    textTracks[ListSymbol.reset]();\n    this.#stopWatchingQualityResize();\n  }\n  handle(event) {\n    if (!this.scope) return;\n    const type = event.type;\n    untrack(() => this[event.type]?.(event));\n    if (!IS_SERVER) {\n      if (TRACKED_EVENT.has(type)) this.#trackedEvents.set(type, event);\n      this.dispatch(event);\n    }\n  }\n  #isPlayingOnDisconnect = false;\n  #resumePlaybackOnConnect() {\n    if (!this.#isPlayingOnDisconnect) return;\n    requestAnimationFrame(() => {\n      if (!this.scope) return;\n      this.#media.remote.play(new DOMEvent(\"dom-connect\"));\n    });\n    this.#isPlayingOnDisconnect = false;\n  }\n  #pausePlaybackOnDisconnect() {\n    if (this.#isPlayingOnDisconnect) return;\n    this.#isPlayingOnDisconnect = !this.$state.paused();\n    this.#media.$provider()?.pause();\n  }\n  #resetTracking() {\n    this.#stopWaiting();\n    this.#clipEnded = false;\n    this.#request.replaying = false;\n    this.#request.looping = false;\n    this.#firingWaiting = false;\n    this.#waitingTrigger = void 0;\n    this.#trackedEvents.clear();\n  }\n  #satisfyRequest(request, event) {\n    const requestEvent = this.#request.queue.serve(request);\n    if (!requestEvent) return;\n    event.request = requestEvent;\n    event.triggers.add(requestEvent);\n  }\n  #addTextTrackListeners() {\n    this.#onTextTracksChange();\n    this.#onTextTrackModeChange();\n    const textTracks = this.#media.textTracks;\n    new EventsController(textTracks).add(\"add\", this.#onTextTracksChange.bind(this)).add(\"remove\", this.#onTextTracksChange.bind(this)).add(\"mode-change\", this.#onTextTrackModeChange.bind(this));\n  }\n  #addQualityListeners() {\n    const qualities = this.#media.qualities;\n    new EventsController(qualities).add(\"add\", this.#onQualitiesChange.bind(this)).add(\"remove\", this.#onQualitiesChange.bind(this)).add(\"change\", this.#onQualityChange.bind(this)).add(\"auto-change\", this.#onAutoQualityChange.bind(this)).add(\"readonly-change\", this.#onCanSetQualityChange.bind(this));\n  }\n  #addAudioTrackListeners() {\n    const audioTracks = this.#media.audioTracks;\n    new EventsController(audioTracks).add(\"add\", this.#onAudioTracksChange.bind(this)).add(\"remove\", this.#onAudioTracksChange.bind(this)).add(\"change\", this.#onAudioTrackChange.bind(this));\n  }\n  #onTextTracksChange(event) {\n    const { textTracks } = this.$state;\n    textTracks.set(this.#media.textTracks.toArray());\n    this.dispatch(\"text-tracks-change\", {\n      detail: textTracks(),\n      trigger: event\n    });\n  }\n  #onTextTrackModeChange(event) {\n    if (event) this.#satisfyRequest(\"media-text-track-change-request\", event);\n    const current = this.#media.textTracks.selected, { textTrack } = this.$state;\n    if (textTrack() !== current) {\n      textTrack.set(current);\n      this.dispatch(\"text-track-change\", {\n        detail: current,\n        trigger: event\n      });\n    }\n  }\n  #onAudioTracksChange(event) {\n    const { audioTracks } = this.$state;\n    audioTracks.set(this.#media.audioTracks.toArray());\n    this.dispatch(\"audio-tracks-change\", {\n      detail: audioTracks(),\n      trigger: event\n    });\n  }\n  #onAudioTrackChange(event) {\n    const { audioTrack } = this.$state;\n    audioTrack.set(this.#media.audioTracks.selected);\n    if (event) this.#satisfyRequest(\"media-audio-track-change-request\", event);\n    this.dispatch(\"audio-track-change\", {\n      detail: audioTrack(),\n      trigger: event\n    });\n  }\n  #onQualitiesChange(event) {\n    const { qualities } = this.$state;\n    qualities.set(this.#media.qualities.toArray());\n    this.dispatch(\"qualities-change\", {\n      detail: qualities(),\n      trigger: event\n    });\n  }\n  #onQualityChange(event) {\n    const { quality } = this.$state;\n    quality.set(this.#media.qualities.selected);\n    if (event) this.#satisfyRequest(\"media-quality-change-request\", event);\n    this.dispatch(\"quality-change\", {\n      detail: quality(),\n      trigger: event\n    });\n  }\n  #onAutoQualityChange() {\n    const { qualities } = this.#media, isAuto = qualities.auto;\n    this.$state.autoQuality.set(isAuto);\n    if (!isAuto) this.#stopWatchingQualityResize();\n  }\n  #stopQualityResizeEffect = null;\n  #watchQualityResize() {\n    this.#stopWatchingQualityResize();\n    this.#stopQualityResizeEffect = effect(() => {\n      const { qualities } = this.#media, { mediaWidth, mediaHeight } = this.$state, w = mediaWidth(), h = mediaHeight();\n      if (w === 0 || h === 0) return;\n      let selectedQuality = null, minScore = Infinity;\n      for (const quality of qualities) {\n        const score = Math.abs(quality.width - w) + Math.abs(quality.height - h);\n        if (score < minScore) {\n          minScore = score;\n          selectedQuality = quality;\n        }\n      }\n      if (selectedQuality) {\n        qualities[ListSymbol.select](\n          selectedQuality,\n          true,\n          new DOMEvent(\"resize\", { detail: { width: w, height: h } })\n        );\n      }\n    });\n  }\n  #stopWatchingQualityResize() {\n    this.#stopQualityResizeEffect?.();\n    this.#stopQualityResizeEffect = null;\n  }\n  #onCanSetQualityChange() {\n    this.$state.canSetQuality.set(!this.#media.qualities.readonly);\n  }\n  #watchCanSetVolume() {\n    const { canSetVolume, isGoogleCastConnected } = this.$state;\n    if (isGoogleCastConnected()) {\n      canSetVolume.set(false);\n      return;\n    }\n    canChangeVolume().then(canSetVolume.set);\n  }\n  [\"provider-change\"](event) {\n    const prevProvider = this.#media.$provider(), newProvider = event.detail;\n    if (prevProvider?.type === newProvider?.type) return;\n    prevProvider?.destroy?.();\n    prevProvider?.scope?.dispose();\n    this.#media.$provider.set(event.detail);\n    if (prevProvider && event.detail === null) {\n      this.#resetMediaState(event);\n    }\n  }\n  [\"provider-loader-change\"](event) {\n  }\n  [\"auto-play\"](event) {\n    this.$state.autoPlayError.set(null);\n  }\n  [\"auto-play-fail\"](event) {\n    this.$state.autoPlayError.set(event.detail);\n    this.#resetTracking();\n  }\n  [\"can-load\"](event) {\n    this.$state.canLoad.set(true);\n    this.#trackedEvents.set(\"can-load\", event);\n    this.#media.textTracks[TextTrackSymbol.canLoad]();\n    this.#satisfyRequest(\"media-start-loading\", event);\n  }\n  [\"can-load-poster\"](event) {\n    this.$state.canLoadPoster.set(true);\n    this.#trackedEvents.set(\"can-load-poster\", event);\n    this.#satisfyRequest(\"media-poster-start-loading\", event);\n  }\n  [\"media-type-change\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n    const viewType = this.$state.viewType();\n    this.$state.mediaType.set(event.detail);\n    const providedViewType = this.$state.providedViewType(), currentViewType = providedViewType === \"unknown\" ? event.detail : providedViewType;\n    if (viewType !== currentViewType) {\n      if (IS_SERVER) {\n        this.$state.inferredViewType.set(currentViewType);\n      } else {\n        setTimeout(() => {\n          requestAnimationFrame(() => {\n            if (!this.scope) return;\n            this.$state.inferredViewType.set(event.detail);\n            this.dispatch(\"view-type-change\", {\n              detail: currentViewType,\n              trigger: event\n            });\n          });\n        }, 0);\n      }\n    }\n  }\n  [\"stream-type-change\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n    const { streamType, inferredStreamType } = this.$state;\n    inferredStreamType.set(event.detail);\n    event.detail = streamType();\n  }\n  [\"rate-change\"](event) {\n    const { storage } = this.#media, { canPlay } = this.$state;\n    this.$state.playbackRate.set(event.detail);\n    this.#satisfyRequest(\"media-rate-change-request\", event);\n    if (canPlay()) {\n      storage?.setPlaybackRate?.(event.detail);\n    }\n  }\n  [\"remote-playback-change\"](event) {\n    const { remotePlaybackState, remotePlaybackType } = this.$state, { type, state } = event.detail, isConnected = state === \"connected\";\n    remotePlaybackType.set(type);\n    remotePlaybackState.set(state);\n    const key = type === \"airplay\" ? \"media-airplay-request\" : \"media-google-cast-request\";\n    if (isConnected) {\n      this.#satisfyRequest(key, event);\n    } else {\n      const requestEvent = this.#request.queue.peek(key);\n      if (requestEvent) {\n        event.request = requestEvent;\n        event.triggers.add(requestEvent);\n      }\n    }\n  }\n  [\"sources-change\"](event) {\n    const prevSources = this.$state.sources(), newSources = event.detail;\n    this.$state.sources.set(newSources);\n    this.#onSourceQualitiesChange(prevSources, newSources, event);\n  }\n  #onSourceQualitiesChange(prevSources, newSources, trigger) {\n    let { qualities } = this.#media, added = false, removed = false;\n    for (const prevSrc of prevSources) {\n      if (!isVideoQualitySrc(prevSrc)) continue;\n      const exists = newSources.some((s) => s.src === prevSrc.src);\n      if (!exists) {\n        const quality = qualities.getBySrc(prevSrc.src);\n        if (quality) {\n          qualities[ListSymbol.remove](quality, trigger);\n          removed = true;\n        }\n      }\n    }\n    if (removed && !qualities.length) {\n      this.$state.savedState.set(null);\n      qualities[ListSymbol.reset](trigger);\n    }\n    for (const src of newSources) {\n      if (!isVideoQualitySrc(src) || qualities.getBySrc(src.src)) continue;\n      const quality = {\n        id: src.id ?? src.height + \"p\",\n        bitrate: null,\n        codec: null,\n        ...src,\n        selected: false\n      };\n      qualities[ListSymbol.add](quality, trigger);\n      added = true;\n    }\n    if (added && !qualities[QualitySymbol.enableAuto]) {\n      this.#watchQualityResize();\n      qualities[QualitySymbol.enableAuto] = this.#watchQualityResize.bind(this);\n      qualities[QualitySymbol.setAuto](true, trigger);\n    }\n  }\n  [\"source-change\"](event) {\n    event.isQualityChange = event.originEvent?.type === \"quality-change\";\n    const source = event.detail;\n    this.#resetMediaState(event, event.isQualityChange);\n    this.#trackedEvents.set(event.type, event);\n    this.$state.source.set(source);\n    this.el?.setAttribute(\"aria-busy\", \"true\");\n  }\n  #resetMediaState(event, isSourceQualityChange = false) {\n    const { audioTracks, qualities } = this.#media;\n    if (!isSourceQualityChange) {\n      this.#playedIntervals = [];\n      this.#playedInterval = [-1, -1];\n      audioTracks[ListSymbol.reset](event);\n      qualities[ListSymbol.reset](event);\n      softResetMediaState(this.$state, isSourceQualityChange);\n      this.#resetTracking();\n      return;\n    }\n    softResetMediaState(this.$state, isSourceQualityChange);\n    this.#resetTracking();\n  }\n  [\"abort\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n    const canLoadEvent = this.#trackedEvents.get(\"can-load\");\n    if (canLoadEvent && !event.triggers.hasType(\"can-load\")) {\n      event.triggers.add(canLoadEvent);\n    }\n  }\n  [\"load-start\"](event) {\n    const sourceChangeEvent = this.#trackedEvents.get(\"source-change\");\n    if (sourceChangeEvent) event.triggers.add(sourceChangeEvent);\n  }\n  [\"error\"](event) {\n    this.$state.error.set(event.detail);\n    const abortEvent = this.#trackedEvents.get(\"abort\");\n    if (abortEvent) event.triggers.add(abortEvent);\n  }\n  [\"loaded-metadata\"](event) {\n    const loadStartEvent = this.#trackedEvents.get(\"load-start\");\n    if (loadStartEvent) event.triggers.add(loadStartEvent);\n  }\n  [\"loaded-data\"](event) {\n    const loadStartEvent = this.#trackedEvents.get(\"load-start\");\n    if (loadStartEvent) event.triggers.add(loadStartEvent);\n  }\n  [\"can-play\"](event) {\n    const loadedMetadata = this.#trackedEvents.get(\"loaded-metadata\");\n    if (loadedMetadata) event.triggers.add(loadedMetadata);\n    this.#onCanPlayDetail(event.detail);\n    this.el?.setAttribute(\"aria-busy\", \"false\");\n  }\n  [\"can-play-through\"](event) {\n    this.#onCanPlayDetail(event.detail);\n    const canPlay = this.#trackedEvents.get(\"can-play\");\n    if (canPlay) event.triggers.add(canPlay);\n  }\n  #onCanPlayDetail(detail) {\n    const { seekable, buffered, intrinsicDuration, canPlay } = this.$state;\n    canPlay.set(true);\n    buffered.set(detail.buffered);\n    seekable.set(detail.seekable);\n    const seekableEnd = getTimeRangesEnd(detail.seekable) ?? Infinity;\n    intrinsicDuration.set(seekableEnd);\n  }\n  [\"duration-change\"](event) {\n    const { live, intrinsicDuration, providedDuration, clipEndTime, ended } = this.$state, time = event.detail;\n    if (!live()) {\n      const duration = !Number.isNaN(time) ? time : 0;\n      intrinsicDuration.set(duration);\n      if (ended()) this.#onEndPrecisionChange(event);\n    }\n    if (providedDuration() > 0 || clipEndTime() > 0) {\n      event.stopImmediatePropagation();\n    }\n  }\n  [\"progress\"](event) {\n    const { buffered, seekable } = this.$state, { buffered: newBuffered, seekable: newSeekable } = event.detail, newBufferedEnd = getTimeRangesEnd(newBuffered), hasBufferedLengthChanged = newBuffered.length !== buffered().length, hasBufferedEndChanged = newBufferedEnd !== getTimeRangesEnd(buffered()), newSeekableEnd = getTimeRangesEnd(newSeekable), hasSeekableLengthChanged = newSeekable.length !== seekable().length, hasSeekableEndChanged = newSeekableEnd !== getTimeRangesEnd(seekable());\n    if (hasBufferedLengthChanged || hasBufferedEndChanged) {\n      buffered.set(newBuffered);\n    }\n    if (hasSeekableLengthChanged || hasSeekableEndChanged) {\n      seekable.set(newSeekable);\n    }\n  }\n  [\"play\"](event) {\n    const {\n      paused,\n      autoPlayError,\n      ended,\n      autoPlaying,\n      playsInline,\n      pointer,\n      muted,\n      viewType,\n      live,\n      userBehindLiveEdge\n    } = this.$state;\n    this.#resetPlaybackIfNeeded();\n    if (!paused()) {\n      event.stopImmediatePropagation();\n      return;\n    }\n    event.autoPlay = autoPlaying();\n    const waitingEvent = this.#trackedEvents.get(\"waiting\");\n    if (waitingEvent) event.triggers.add(waitingEvent);\n    this.#satisfyRequest(\"media-play-request\", event);\n    this.#trackedEvents.set(\"play\", event);\n    paused.set(false);\n    autoPlayError.set(null);\n    if (event.autoPlay) {\n      this.handle(\n        this.createEvent(\"auto-play\", {\n          detail: { muted: muted() },\n          trigger: event\n        })\n      );\n      autoPlaying.set(false);\n    }\n    if (ended() || this.#request.replaying) {\n      this.#request.replaying = false;\n      ended.set(false);\n      this.handle(this.createEvent(\"replay\", { trigger: event }));\n    }\n    if (!playsInline() && viewType() === \"video\" && pointer() === \"coarse\") {\n      this.#media.remote.enterFullscreen(\"prefer-media\", event);\n    }\n    if (live() && !userBehindLiveEdge()) {\n      this.#media.remote.seekToLiveEdge(event);\n    }\n  }\n  #resetPlaybackIfNeeded(trigger) {\n    const provider = peek(this.#media.$provider);\n    if (!provider) return;\n    const { ended, seekableStart, clipEndTime, currentTime, realCurrentTime, duration } = this.$state;\n    const shouldReset = ended() || realCurrentTime() < seekableStart() || clipEndTime() > 0 && realCurrentTime() >= clipEndTime() || Math.abs(currentTime() - duration()) < 0.1;\n    if (shouldReset) {\n      this.dispatch(\"media-seek-request\", {\n        detail: seekableStart(),\n        trigger\n      });\n    }\n    return shouldReset;\n  }\n  [\"play-fail\"](event) {\n    const { muted, autoPlaying } = this.$state;\n    const playEvent = this.#trackedEvents.get(\"play\");\n    if (playEvent) event.triggers.add(playEvent);\n    this.#satisfyRequest(\"media-play-request\", event);\n    const { paused, playing } = this.$state;\n    paused.set(true);\n    playing.set(false);\n    this.#resetTracking();\n    this.#trackedEvents.set(\"play-fail\", event);\n    if (event.autoPlay) {\n      this.handle(\n        this.createEvent(\"auto-play-fail\", {\n          detail: {\n            muted: muted(),\n            error: event.detail\n          },\n          trigger: event\n        })\n      );\n      autoPlaying.set(false);\n    }\n  }\n  [\"playing\"](event) {\n    const playEvent = this.#trackedEvents.get(\"play\"), seekedEvent = this.#trackedEvents.get(\"seeked\");\n    if (playEvent) event.triggers.add(playEvent);\n    else if (seekedEvent) event.triggers.add(seekedEvent);\n    setTimeout(() => this.#resetTracking(), 0);\n    const {\n      paused,\n      playing,\n      live,\n      liveSyncPosition,\n      seekableEnd,\n      started,\n      currentTime,\n      seeking,\n      ended\n    } = this.$state;\n    paused.set(false);\n    playing.set(true);\n    seeking.set(false);\n    ended.set(false);\n    if (this.#request.looping) {\n      this.#request.looping = false;\n      return;\n    }\n    if (live() && !started() && currentTime() === 0) {\n      const end = liveSyncPosition() ?? seekableEnd() - 2;\n      if (Number.isFinite(end)) this.#media.$provider().setCurrentTime(end);\n    }\n    this[\"started\"](event);\n  }\n  [\"started\"](event) {\n    const { started } = this.$state;\n    if (!started()) {\n      started.set(true);\n      this.handle(this.createEvent(\"started\", { trigger: event }));\n    }\n  }\n  [\"pause\"](event) {\n    if (!this.el?.isConnected) {\n      this.#isPlayingOnDisconnect = true;\n    }\n    this.#satisfyRequest(\"media-pause-request\", event);\n    const seekedEvent = this.#trackedEvents.get(\"seeked\");\n    if (seekedEvent) event.triggers.add(seekedEvent);\n    const { paused, playing } = this.$state;\n    paused.set(true);\n    playing.set(false);\n    if (this.#clipEnded) {\n      setTimeout(() => {\n        this.handle(this.createEvent(\"end\", { trigger: event }));\n        this.#clipEnded = false;\n      }, 0);\n    }\n    this.#resetTracking();\n  }\n  [\"time-change\"](event) {\n    if (this.#request.looping) {\n      event.stopImmediatePropagation();\n      return;\n    }\n    let { waiting, played, clipEndTime, realCurrentTime, currentTime } = this.$state, newTime = event.detail, endTime = clipEndTime();\n    realCurrentTime.set(newTime);\n    this.#updatePlayed();\n    waiting.set(false);\n    for (const track of this.#media.textTracks) {\n      track[TextTrackSymbol.updateActiveCues](newTime, event);\n    }\n    if (endTime > 0 && newTime >= endTime) {\n      this.#clipEnded = true;\n      this.dispatch(\"media-pause-request\", { trigger: event });\n    }\n    this.#saveTime();\n    this.dispatch(\"time-update\", {\n      detail: { currentTime: currentTime(), played: played() },\n      trigger: event\n    });\n  }\n  #updatePlayed() {\n    const { currentTime, played, paused } = this.$state;\n    if (paused()) return;\n    this.#playedInterval = updateTimeIntervals(\n      this.#playedIntervals,\n      this.#playedInterval,\n      currentTime()\n    );\n    played.set(new TimeRange(this.#playedIntervals));\n  }\n  // Called to update time again incase duration precision has changed.\n  #onEndPrecisionChange(trigger) {\n    const { clipStartTime, clipEndTime, duration } = this.$state, isClipped = clipStartTime() > 0 || clipEndTime() > 0;\n    if (isClipped) return;\n    this.handle(\n      this.createEvent(\"time-change\", {\n        detail: duration(),\n        trigger\n      })\n    );\n  }\n  #saveTime() {\n    const { storage } = this.#media, { canPlay, realCurrentTime } = this.$state;\n    if (canPlay()) {\n      storage?.setTime?.(realCurrentTime());\n    }\n  }\n  [\"audio-gain-change\"](event) {\n    const { storage } = this.#media, { canPlay, audioGain } = this.$state;\n    audioGain.set(event.detail);\n    this.#satisfyRequest(\"media-audio-gain-change-request\", event);\n    if (canPlay()) storage?.setAudioGain?.(audioGain());\n  }\n  [\"volume-change\"](event) {\n    const { storage } = this.#media, { volume, muted, canPlay } = this.$state, detail = event.detail;\n    volume.set(detail.volume);\n    muted.set(detail.muted || detail.volume === 0);\n    this.#satisfyRequest(\"media-volume-change-request\", event);\n    this.#satisfyRequest(detail.muted ? \"media-mute-request\" : \"media-unmute-request\", event);\n    if (canPlay()) {\n      storage?.setVolume?.(volume());\n      storage?.setMuted?.(muted());\n    }\n  }\n  [\"seeking\"] = functionThrottle(\n    (event) => {\n      const { seeking, realCurrentTime, paused } = this.$state;\n      seeking.set(true);\n      realCurrentTime.set(event.detail);\n      this.#satisfyRequest(\"media-seeking-request\", event);\n      if (paused()) {\n        this.#waitingTrigger = event;\n        this.#fireWaiting();\n      }\n      this.#playedInterval = [-1, -1];\n    },\n    150,\n    { leading: true }\n  );\n  [\"seeked\"](event) {\n    const { seeking, currentTime, realCurrentTime, paused, seekableEnd, ended, live } = this.$state;\n    if (this.#request.seeking) {\n      seeking.set(true);\n      event.stopImmediatePropagation();\n    } else if (seeking()) {\n      const waitingEvent = this.#trackedEvents.get(\"waiting\");\n      if (waitingEvent) event.triggers.add(waitingEvent);\n      const seekingEvent = this.#trackedEvents.get(\"seeking\");\n      if (seekingEvent && !event.triggers.has(seekingEvent)) {\n        event.triggers.add(seekingEvent);\n      }\n      if (paused()) this.#stopWaiting();\n      seeking.set(false);\n      realCurrentTime.set(event.detail);\n      this.#satisfyRequest(\"media-seek-request\", event);\n      const origin = event?.originEvent;\n      if (origin?.isTrusted && !(origin instanceof MessageEvent) && !/seek/.test(origin.type)) {\n        this[\"started\"](event);\n      }\n    }\n    if (!live()) {\n      if (Math.floor(currentTime()) !== Math.floor(seekableEnd())) {\n        ended.set(false);\n      } else {\n        this.end(event);\n      }\n    }\n  }\n  [\"waiting\"](event) {\n    if (this.#firingWaiting || this.#request.seeking) return;\n    event.stopImmediatePropagation();\n    this.#waitingTrigger = event;\n    this.#fireWaiting();\n  }\n  #fireWaiting = functionDebounce(() => {\n    if (!this.#waitingTrigger) return;\n    this.#firingWaiting = true;\n    const { waiting, playing } = this.$state;\n    waiting.set(true);\n    playing.set(false);\n    const event = this.createEvent(\"waiting\", { trigger: this.#waitingTrigger });\n    this.#trackedEvents.set(\"waiting\", event);\n    this.dispatch(event);\n    this.#waitingTrigger = void 0;\n    this.#firingWaiting = false;\n  }, 300);\n  [\"end\"](event) {\n    const { loop, ended } = this.$state;\n    if (!loop() && ended()) return;\n    if (loop()) {\n      setTimeout(() => {\n        requestAnimationFrame(() => {\n          this.#resetPlaybackIfNeeded(event);\n          this.dispatch(\"media-loop-request\", { trigger: event });\n        });\n      }, 10);\n      return;\n    }\n    setTimeout(() => this.#onEnded(event), 0);\n  }\n  #onEnded(event) {\n    const { storage } = this.#media, { paused, seeking, ended, duration } = this.$state;\n    this.#onEndPrecisionChange(event);\n    if (!paused()) {\n      this.dispatch(\"pause\", { trigger: event });\n    }\n    if (seeking()) {\n      this.dispatch(\"seeked\", {\n        detail: duration(),\n        trigger: event\n      });\n    }\n    ended.set(true);\n    this.#resetTracking();\n    storage?.setTime?.(duration(), true);\n    this.dispatch(\"ended\", {\n      trigger: event\n    });\n  }\n  #stopWaiting() {\n    this.#fireWaiting.cancel();\n    this.$state.waiting.set(false);\n  }\n  [\"fullscreen-change\"](event) {\n    const isFullscreen = event.detail;\n    this.$state.fullscreen.set(isFullscreen);\n    this.#satisfyRequest(\n      isFullscreen ? \"media-enter-fullscreen-request\" : \"media-exit-fullscreen-request\",\n      event\n    );\n  }\n  [\"fullscreen-error\"](event) {\n    this.#satisfyRequest(\"media-enter-fullscreen-request\", event);\n    this.#satisfyRequest(\"media-exit-fullscreen-request\", event);\n  }\n  [\"orientation-change\"](event) {\n    const isLocked = event.detail.lock;\n    this.#satisfyRequest(\n      isLocked ? \"media-orientation-lock-request\" : \"media-orientation-unlock-request\",\n      event\n    );\n  }\n  [\"picture-in-picture-change\"](event) {\n    const isPiP = event.detail;\n    this.$state.pictureInPicture.set(isPiP);\n    this.#satisfyRequest(isPiP ? \"media-enter-pip-request\" : \"media-exit-pip-request\", event);\n  }\n  [\"picture-in-picture-error\"](event) {\n    this.#satisfyRequest(\"media-enter-pip-request\", event);\n    this.#satisfyRequest(\"media-exit-pip-request\", event);\n  }\n  [\"title-change\"](event) {\n    if (!event.trigger) return;\n    event.stopImmediatePropagation();\n    this.$state.inferredTitle.set(event.detail);\n  }\n  [\"poster-change\"](event) {\n    if (!event.trigger) return;\n    event.stopImmediatePropagation();\n    this.$state.inferredPoster.set(event.detail);\n  }\n}\n\nclass MediaStateSync extends MediaPlayerController {\n  onSetup() {\n    this.#init();\n    if (IS_SERVER) return;\n    const effects = [\n      this.#watchMetadata,\n      this.#watchAutoplay,\n      this.#watchClipStartTime,\n      this.#watchClipEndTime,\n      this.#watchControls,\n      this.#watchCrossOrigin,\n      this.#watchDuration,\n      this.#watchLive,\n      this.#watchLiveEdge,\n      this.#watchLiveTolerance,\n      this.#watchLoop,\n      this.#watchPlaysInline,\n      this.#watchPoster,\n      this.#watchProvidedTypes,\n      this.#watchTitle\n    ];\n    for (const callback of effects) {\n      effect(callback.bind(this));\n    }\n  }\n  #init() {\n    const providedProps = {\n      duration: \"providedDuration\",\n      loop: \"providedLoop\",\n      poster: \"providedPoster\",\n      streamType: \"providedStreamType\",\n      title: \"providedTitle\",\n      viewType: \"providedViewType\"\n    };\n    const skip = /* @__PURE__ */ new Set([\n      \"currentTime\",\n      \"paused\",\n      \"playbackRate\",\n      \"volume\"\n    ]);\n    for (const prop of Object.keys(this.$props)) {\n      if (skip.has(prop)) continue;\n      this.$state[providedProps[prop] ?? prop]?.set(this.$props[prop]());\n    }\n    this.$state.muted.set(this.$props.muted() || this.$props.volume() === 0);\n  }\n  // Sync \"provided\" props with internal state. Provided props are used to differentiate from\n  // provider inferred values.\n  #watchProvidedTypes() {\n    const { viewType, streamType, title, poster, loop } = this.$props, $state = this.$state;\n    $state.providedPoster.set(poster());\n    $state.providedStreamType.set(streamType());\n    $state.providedViewType.set(viewType());\n    $state.providedTitle.set(title());\n    $state.providedLoop.set(loop());\n  }\n  #watchLogLevel() {\n    return;\n  }\n  #watchMetadata() {\n    const { artist, artwork } = this.$props;\n    this.$state.artist.set(artist());\n    this.$state.artwork.set(artwork());\n  }\n  #watchTitle() {\n    const { title } = this.$state;\n    this.dispatch(\"title-change\", { detail: title() });\n  }\n  #watchAutoplay() {\n    const autoPlay = this.$props.autoPlay() || this.$props.autoplay();\n    this.$state.autoPlay.set(autoPlay);\n    this.dispatch(\"auto-play-change\", { detail: autoPlay });\n  }\n  #watchLoop() {\n    const loop = this.$state.loop();\n    this.dispatch(\"loop-change\", { detail: loop });\n  }\n  #watchControls() {\n    const controls = this.$props.controls();\n    this.$state.controls.set(controls);\n  }\n  #watchPoster() {\n    const { poster } = this.$state;\n    this.dispatch(\"poster-change\", { detail: poster() });\n  }\n  #watchCrossOrigin() {\n    const crossOrigin = this.$props.crossOrigin() ?? this.$props.crossorigin(), value = crossOrigin === true ? \"\" : crossOrigin;\n    this.$state.crossOrigin.set(value);\n  }\n  #watchDuration() {\n    const { duration } = this.$props;\n    this.dispatch(\"media-duration-change-request\", {\n      detail: duration()\n    });\n  }\n  #watchPlaysInline() {\n    const inline = this.$props.playsInline() || this.$props.playsinline();\n    this.$state.playsInline.set(inline);\n    this.dispatch(\"plays-inline-change\", { detail: inline });\n  }\n  #watchClipStartTime() {\n    const { clipStartTime } = this.$props;\n    this.dispatch(\"media-clip-start-change-request\", {\n      detail: clipStartTime()\n    });\n  }\n  #watchClipEndTime() {\n    const { clipEndTime } = this.$props;\n    this.dispatch(\"media-clip-end-change-request\", {\n      detail: clipEndTime()\n    });\n  }\n  #watchLive() {\n    this.dispatch(\"live-change\", { detail: this.$state.live() });\n  }\n  #watchLiveTolerance() {\n    this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance());\n    this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow());\n  }\n  #watchLiveEdge() {\n    this.dispatch(\"live-edge-change\", { detail: this.$state.liveEdge() });\n  }\n}\n\nconst actions = [\"play\", \"pause\", \"seekforward\", \"seekbackward\", \"seekto\"];\nclass NavigatorMediaSession extends MediaPlayerController {\n  onConnect() {\n    effect(this.#onMetadataChange.bind(this));\n    effect(this.#onPlaybackStateChange.bind(this));\n    const handleAction = this.#handleAction.bind(this);\n    for (const action of actions) {\n      navigator.mediaSession.setActionHandler(action, handleAction);\n    }\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  #onDisconnect() {\n    for (const action of actions) {\n      navigator.mediaSession.setActionHandler(action, null);\n    }\n  }\n  #onMetadataChange() {\n    const { title, artist, artwork, poster } = this.$state;\n    navigator.mediaSession.metadata = new MediaMetadata({\n      title: title(),\n      artist: artist(),\n      artwork: artwork() ?? [{ src: poster() }]\n    });\n  }\n  #onPlaybackStateChange() {\n    const { canPlay, paused } = this.$state;\n    navigator.mediaSession.playbackState = !canPlay() ? \"none\" : paused() ? \"paused\" : \"playing\";\n  }\n  #handleAction(details) {\n    const trigger = new DOMEvent(`media-session-action`, { detail: details });\n    switch (details.action) {\n      case \"play\":\n        this.dispatch(\"media-play-request\", { trigger });\n        break;\n      case \"pause\":\n        this.dispatch(\"media-pause-request\", { trigger });\n        break;\n      case \"seekto\":\n      case \"seekforward\":\n      case \"seekbackward\":\n        this.dispatch(\"media-seek-request\", {\n          detail: isNumber(details.seekTime) ? details.seekTime : this.$state.currentTime() + (details.seekOffset ?? (details.action === \"seekforward\" ? 10 : -10)),\n          trigger\n        });\n        break;\n    }\n  }\n}\n\nlet $keyboard = signal(false);\nif (!IS_SERVER) {\n  listenEvent(document, \"pointerdown\", () => {\n    $keyboard.set(false);\n  });\n  listenEvent(document, \"keydown\", (e) => {\n    if (e.metaKey || e.altKey || e.ctrlKey) return;\n    $keyboard.set(true);\n  });\n}\nclass FocusVisibleController extends ViewController {\n  #focused = signal(false);\n  onConnect(el) {\n    effect(() => {\n      const events = new EventsController(el);\n      if (!$keyboard()) {\n        this.#focused.set(false);\n        updateFocusAttr(el, false);\n        events.add(\"pointerenter\", this.#onPointerEnter.bind(this)).add(\"pointerleave\", this.#onPointerLeave.bind(this));\n        return;\n      }\n      const active = document.activeElement === el;\n      this.#focused.set(active);\n      updateFocusAttr(el, active);\n      events.add(\"focus\", this.#onFocus.bind(this)).add(\"blur\", this.#onBlur.bind(this));\n    });\n  }\n  focused() {\n    return this.#focused();\n  }\n  #onFocus() {\n    this.#focused.set(true);\n    updateFocusAttr(this.el, true);\n  }\n  #onBlur() {\n    this.#focused.set(false);\n    updateFocusAttr(this.el, false);\n  }\n  #onPointerEnter() {\n    updateHoverAttr(this.el, true);\n  }\n  #onPointerLeave() {\n    updateHoverAttr(this.el, false);\n  }\n}\nfunction updateFocusAttr(el, isFocused) {\n  setAttribute(el, \"data-focus\", isFocused);\n  setAttribute(el, \"data-hocus\", isFocused);\n}\nfunction updateHoverAttr(el, isHovering) {\n  setAttribute(el, \"data-hocus\", isHovering);\n  setAttribute(el, \"data-hover\", isHovering);\n}\n\nclass MediaPlayer extends Component {\n  static props = mediaPlayerProps;\n  static state = mediaState;\n  #media;\n  #stateMgr;\n  #requestMgr;\n  canPlayQueue = new RequestQueue();\n  remoteControl;\n  get #provider() {\n    return this.#media.$provider();\n  }\n  get #props() {\n    return this.$props;\n  }\n  constructor() {\n    super();\n    new MediaStateSync();\n    const context = {\n      player: this,\n      qualities: new VideoQualityList(),\n      audioTracks: new AudioTrackList(),\n      storage: null,\n      $provider: signal(null),\n      $providerSetup: signal(false),\n      $props: this.$props,\n      $state: this.$state\n    };\n    context.remote = this.remoteControl = new MediaRemoteControl(\n      void 0\n    );\n    context.remote.setPlayer(this);\n    context.textTracks = new TextTrackList();\n    context.textTracks[TextTrackSymbol.crossOrigin] = this.$state.crossOrigin;\n    context.textRenderers = new TextRenderers(context);\n    context.ariaKeys = {};\n    this.#media = context;\n    provideContext(mediaContext, context);\n    this.orientation = new ScreenOrientationController();\n    new FocusVisibleController();\n    new MediaKeyboardController(context);\n    const request = new MediaRequestContext();\n    this.#stateMgr = new MediaStateManager(request, context);\n    this.#requestMgr = new MediaRequestManager(this.#stateMgr, request, context);\n    context.delegate = new MediaPlayerDelegate(this.#stateMgr.handle.bind(this.#stateMgr), context);\n    context.notify = context.delegate.notify.bind(context.delegate);\n    if (typeof navigator !== \"undefined\" && \"mediaSession\" in navigator) {\n      new NavigatorMediaSession();\n    }\n    new MediaLoadController(\"load\", this.startLoading.bind(this));\n    new MediaLoadController(\"posterLoad\", this.startLoadingPoster.bind(this));\n  }\n  onSetup() {\n    this.#setupMediaAttributes();\n    effect(this.#watchCanPlay.bind(this));\n    effect(this.#watchMuted.bind(this));\n    effect(this.#watchPaused.bind(this));\n    effect(this.#watchVolume.bind(this));\n    effect(this.#watchCurrentTime.bind(this));\n    effect(this.#watchPlaysInline.bind(this));\n    effect(this.#watchPlaybackRate.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-player\", \"\");\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"region\");\n    effect(this.#watchStorage.bind(this));\n    if (IS_SERVER) this.#watchTitle();\n    else effect(this.#watchTitle.bind(this));\n    if (IS_SERVER) this.#watchOrientation();\n    else effect(this.#watchOrientation.bind(this));\n    listenEvent(el, \"find-media-player\", this.#onFindPlayer.bind(this));\n  }\n  onConnect(el) {\n    if (IS_IPHONE) setAttribute(el, \"data-iphone\", \"\");\n    const pointerQuery = window.matchMedia(\"(pointer: coarse)\");\n    this.#onPointerChange(pointerQuery);\n    pointerQuery.onchange = this.#onPointerChange.bind(this);\n    const resize = new ResizeObserver(animationFrameThrottle(this.#onResize.bind(this)));\n    resize.observe(el);\n    effect(this.#onResize.bind(this));\n    this.dispatch(\"media-player-connect\", {\n      detail: this,\n      bubbles: true,\n      composed: true\n    });\n    onDispose(() => {\n      resize.disconnect();\n      pointerQuery.onchange = null;\n    });\n  }\n  onDestroy() {\n    this.#media.player = null;\n    this.canPlayQueue.reset();\n  }\n  #skipTitleUpdate = false;\n  #watchTitle() {\n    const el = this.$el, { title, live, viewType, providedTitle } = this.$state, isLive = live(), type = uppercaseFirstChar(viewType()), typeText = type !== \"Unknown\" ? `${isLive ? \"Live \" : \"\"}${type}` : isLive ? \"Live\" : \"Media\", currentTitle = title();\n    setAttribute(\n      this.el,\n      \"aria-label\",\n      `${typeText} Player` + (currentTitle ? ` - ${currentTitle}` : \"\")\n    );\n    if (!IS_SERVER && el?.hasAttribute(\"title\")) {\n      this.#skipTitleUpdate = true;\n      el?.removeAttribute(\"title\");\n    }\n  }\n  #watchOrientation() {\n    const orientation = this.orientation.landscape ? \"landscape\" : \"portrait\";\n    this.$state.orientation.set(orientation);\n    setAttribute(this.el, \"data-orientation\", orientation);\n    this.#onResize();\n  }\n  #watchCanPlay() {\n    if (this.$state.canPlay() && this.#provider) this.canPlayQueue.start();\n    else this.canPlayQueue.stop();\n  }\n  #setupMediaAttributes() {\n    if (MediaPlayer[MEDIA_ATTRIBUTES]) {\n      this.setAttributes(MediaPlayer[MEDIA_ATTRIBUTES]);\n      return;\n    }\n    const $attrs = {\n      \"data-load\": function() {\n        return this.$props.load();\n      },\n      \"data-captions\": function() {\n        const track = this.$state.textTrack();\n        return !!track && isTrackCaptionKind(track);\n      },\n      \"data-ios-controls\": function() {\n        return this.$state.iOSControls();\n      },\n      \"data-controls\": function() {\n        return this.controls.showing;\n      },\n      \"data-buffering\": function() {\n        const { canLoad, canPlay, waiting } = this.$state;\n        return canLoad() && (!canPlay() || waiting());\n      },\n      \"data-error\": function() {\n        const { error } = this.$state;\n        return !!error();\n      },\n      \"data-autoplay-error\": function() {\n        const { autoPlayError } = this.$state;\n        return !!autoPlayError();\n      }\n    };\n    const alias = {\n      autoPlay: \"autoplay\",\n      canAirPlay: \"can-airplay\",\n      canPictureInPicture: \"can-pip\",\n      pictureInPicture: \"pip\",\n      playsInline: \"playsinline\",\n      remotePlaybackState: \"remote-state\",\n      remotePlaybackType: \"remote-type\",\n      isAirPlayConnected: \"airplay\",\n      isGoogleCastConnected: \"google-cast\"\n    };\n    for (const prop2 of mediaAttributes) {\n      const attrName = \"data-\" + (alias[prop2] ?? camelToKebabCase(prop2));\n      $attrs[attrName] = function() {\n        return this.$state[prop2]();\n      };\n    }\n    delete $attrs.title;\n    MediaPlayer[MEDIA_ATTRIBUTES] = $attrs;\n    this.setAttributes($attrs);\n  }\n  #onFindPlayer(event) {\n    event.detail(this);\n  }\n  #onResize() {\n    if (IS_SERVER || !this.el) return;\n    const width = this.el.clientWidth, height = this.el.clientHeight;\n    this.$state.width.set(width);\n    this.$state.height.set(height);\n    setStyle(this.el, \"--player-width\", width + \"px\");\n    setStyle(this.el, \"--player-height\", height + \"px\");\n  }\n  #onPointerChange(queryList) {\n    if (IS_SERVER) return;\n    const pointer = queryList.matches ? \"coarse\" : \"fine\";\n    setAttribute(this.el, \"data-pointer\", pointer);\n    this.$state.pointer.set(pointer);\n    this.#onResize();\n  }\n  /**\n   * The current media provider.\n   */\n  get provider() {\n    return this.#provider;\n  }\n  /**\n   * Media controls settings.\n   */\n  get controls() {\n    return this.#requestMgr.controls;\n  }\n  set controls(controls) {\n    this.#props.controls.set(controls);\n  }\n  /**\n   * Controls the screen orientation of the current browser window and dispatches orientation\n   * change events on the player.\n   */\n  orientation;\n  /**\n   * The title of the current media.\n   */\n  get title() {\n    return peek(this.$state.title);\n  }\n  set title(newTitle) {\n    if (this.#skipTitleUpdate) {\n      this.#skipTitleUpdate = false;\n      return;\n    }\n    this.#props.title.set(newTitle);\n  }\n  /**\n   * A list of all `VideoQuality` objects representing the set of available video renditions.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/video-quality}\n   */\n  get qualities() {\n    return this.#media.qualities;\n  }\n  /**\n   * A list of all `AudioTrack` objects representing the set of available audio tracks.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/audio-tracks}\n   */\n  get audioTracks() {\n    return this.#media.audioTracks;\n  }\n  /**\n   * A list of all `TextTrack` objects representing the set of available text tracks.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/text-tracks}\n   */\n  get textTracks() {\n    return this.#media.textTracks;\n  }\n  /**\n   * Contains text renderers which are responsible for loading, parsing, and rendering text\n   * tracks.\n   */\n  get textRenderers() {\n    return this.#media.textRenderers;\n  }\n  get duration() {\n    return this.$state.duration();\n  }\n  set duration(duration) {\n    this.#props.duration.set(duration);\n  }\n  get paused() {\n    return peek(this.$state.paused);\n  }\n  set paused(paused) {\n    this.#queuePausedUpdate(paused);\n  }\n  #watchPaused() {\n    this.#queuePausedUpdate(this.$props.paused());\n  }\n  #queuePausedUpdate(paused) {\n    if (paused) {\n      this.canPlayQueue.enqueue(\"paused\", () => this.#requestMgr.pause());\n    } else this.canPlayQueue.enqueue(\"paused\", () => this.#requestMgr.play());\n  }\n  get muted() {\n    return peek(this.$state.muted);\n  }\n  set muted(muted) {\n    this.#queueMutedUpdate(muted);\n  }\n  #watchMuted() {\n    this.#queueMutedUpdate(this.$props.muted());\n  }\n  #queueMutedUpdate(muted) {\n    this.canPlayQueue.enqueue(\"muted\", () => {\n      if (this.#provider) this.#provider.setMuted(muted);\n    });\n  }\n  get currentTime() {\n    return peek(this.$state.currentTime);\n  }\n  set currentTime(time) {\n    this.#queueCurrentTimeUpdate(time);\n  }\n  #watchCurrentTime() {\n    this.#queueCurrentTimeUpdate(this.$props.currentTime());\n  }\n  #queueCurrentTimeUpdate(time) {\n    this.canPlayQueue.enqueue(\"currentTime\", () => {\n      const { currentTime } = this.$state;\n      if (time === peek(currentTime)) return;\n      peek(() => {\n        if (!this.#provider) return;\n        const boundedTime = boundTime(time, this.$state);\n        if (Number.isFinite(boundedTime)) {\n          this.#provider.setCurrentTime(boundedTime);\n        }\n      });\n    });\n  }\n  get volume() {\n    return peek(this.$state.volume);\n  }\n  set volume(volume) {\n    this.#queueVolumeUpdate(volume);\n  }\n  #watchVolume() {\n    this.#queueVolumeUpdate(this.$props.volume());\n  }\n  #queueVolumeUpdate(volume) {\n    const clampedVolume = clampNumber(0, volume, 1);\n    this.canPlayQueue.enqueue(\"volume\", () => {\n      if (this.#provider) this.#provider.setVolume(clampedVolume);\n    });\n  }\n  get playbackRate() {\n    return peek(this.$state.playbackRate);\n  }\n  set playbackRate(rate) {\n    this.#queuePlaybackRateUpdate(rate);\n  }\n  #watchPlaybackRate() {\n    this.#queuePlaybackRateUpdate(this.$props.playbackRate());\n  }\n  #queuePlaybackRateUpdate(rate) {\n    this.canPlayQueue.enqueue(\"rate\", () => {\n      if (this.#provider) this.#provider.setPlaybackRate?.(rate);\n    });\n  }\n  #watchPlaysInline() {\n    this.#queuePlaysInlineUpdate(this.$props.playsInline());\n  }\n  #queuePlaysInlineUpdate(inline) {\n    this.canPlayQueue.enqueue(\"playsinline\", () => {\n      if (this.#provider) this.#provider.setPlaysInline?.(inline);\n    });\n  }\n  #watchStorage() {\n    let storageValue = this.$props.storage(), storage = isString(storageValue) ? new LocalMediaStorage() : storageValue;\n    if (storage?.onChange) {\n      const { source } = this.$state, playerId = isString(storageValue) ? storageValue : this.el?.id, mediaId = computed(this.#computeMediaId.bind(this));\n      effect(() => storage.onChange(source(), mediaId(), playerId || void 0));\n    }\n    this.#media.storage = storage;\n    this.#media.textTracks.setStorage(storage);\n    onDispose(() => {\n      storage?.onDestroy?.();\n      this.#media.storage = null;\n      this.#media.textTracks.setStorage(null);\n    });\n  }\n  #computeMediaId() {\n    const { clipStartTime, clipEndTime } = this.$props, { source } = this.$state, src = source();\n    return src.src ? `${src.src}:${clipStartTime()}:${clipEndTime()}` : null;\n  }\n  /**\n   * Begins/resumes playback of the media. If this method is called programmatically before the\n   * user has interacted with the player, the promise may be rejected subject to the browser's\n   * autoplay policies. This method will throw if called before media is ready for playback.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/play}\n   */\n  async play(trigger) {\n    return this.#requestMgr.play(trigger);\n  }\n  /**\n   * Pauses playback of the media. This method will throw if called before media is ready for\n   * playback.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/pause}\n   */\n  async pause(trigger) {\n    return this.#requestMgr.pause(trigger);\n  }\n  /**\n   * Attempts to display the player in fullscreen. The promise will resolve if successful, and\n   * reject if not. This method will throw if any fullscreen API is _not_ currently available.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/fullscreen}\n   */\n  async enterFullscreen(target, trigger) {\n    return this.#requestMgr.enterFullscreen(target, trigger);\n  }\n  /**\n   * Attempts to display the player inline by exiting fullscreen. This method will throw if any\n   * fullscreen API is _not_ currently available.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/fullscreen}\n   */\n  async exitFullscreen(target, trigger) {\n    return this.#requestMgr.exitFullscreen(target, trigger);\n  }\n  /**\n   * Attempts to display the player in picture-in-picture mode. This method will throw if PIP is\n   * not supported. This method will also return a `PictureInPictureWindow` if the current\n   * provider supports it.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/picture-in-picture}\n   */\n  enterPictureInPicture(trigger) {\n    return this.#requestMgr.enterPictureInPicture(trigger);\n  }\n  /**\n   * Attempts to display the player in inline by exiting picture-in-picture mode. This method\n   * will throw if not supported.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/picture-in-picture}\n   */\n  exitPictureInPicture(trigger) {\n    return this.#requestMgr.exitPictureInPicture(trigger);\n  }\n  /**\n   * Sets the current time to the live edge (i.e., `duration`). This is a no-op for non-live\n   * streams and will throw if called before media is ready for playback.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/live}\n   */\n  seekToLiveEdge(trigger) {\n    this.#requestMgr.seekToLiveEdge(trigger);\n  }\n  /**\n   * Called when media can begin loading. Calling this method will trigger the initial provider\n   * loading process. Calling it more than once has no effect.\n   *\n   * @see {@link https://vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoading(trigger) {\n    this.#media.notify(\"can-load\", void 0, trigger);\n  }\n  /**\n   * Called when the poster image can begin loading. Calling it more than once has no effect.\n   *\n   * @see {@link https://vidstack.io/docs/player/core-concepts/loading#load-strategies}\n   */\n  startLoadingPoster(trigger) {\n    this.#media.notify(\"can-load-poster\", void 0, trigger);\n  }\n  /**\n   * Request Apple AirPlay picker to open.\n   */\n  requestAirPlay(trigger) {\n    return this.#requestMgr.requestAirPlay(trigger);\n  }\n  /**\n   * Request Google Cast device picker to open. The Google Cast framework will be loaded if it\n   * hasn't yet.\n   */\n  requestGoogleCast(trigger) {\n    return this.#requestMgr.requestGoogleCast(trigger);\n  }\n  /**\n   * Set the audio gain, amplifying volume and enabling a maximum volume above 100%.\n   *\n   * @see {@link https://vidstack.io/docs/player/api/audio-gain}\n   */\n  setAudioGain(gain, trigger) {\n    return this.#requestMgr.setAudioGain(gain, trigger);\n  }\n  destroy() {\n    super.destroy();\n    this.#media.remote.setPlayer(null);\n    this.dispatch(\"destroy\");\n  }\n}\nconst mediaplayer__proto = MediaPlayer.prototype;\nprop(mediaplayer__proto, \"canPlayQueue\");\nprop(mediaplayer__proto, \"remoteControl\");\nprop(mediaplayer__proto, \"provider\");\nprop(mediaplayer__proto, \"controls\");\nprop(mediaplayer__proto, \"orientation\");\nprop(mediaplayer__proto, \"title\");\nprop(mediaplayer__proto, \"qualities\");\nprop(mediaplayer__proto, \"audioTracks\");\nprop(mediaplayer__proto, \"textTracks\");\nprop(mediaplayer__proto, \"textRenderers\");\nprop(mediaplayer__proto, \"duration\");\nprop(mediaplayer__proto, \"paused\");\nprop(mediaplayer__proto, \"muted\");\nprop(mediaplayer__proto, \"currentTime\");\nprop(mediaplayer__proto, \"volume\");\nprop(mediaplayer__proto, \"playbackRate\");\nmethod(mediaplayer__proto, \"play\");\nmethod(mediaplayer__proto, \"pause\");\nmethod(mediaplayer__proto, \"enterFullscreen\");\nmethod(mediaplayer__proto, \"exitFullscreen\");\nmethod(mediaplayer__proto, \"enterPictureInPicture\");\nmethod(mediaplayer__proto, \"exitPictureInPicture\");\nmethod(mediaplayer__proto, \"seekToLiveEdge\");\nmethod(mediaplayer__proto, \"startLoading\");\nmethod(mediaplayer__proto, \"startLoadingPoster\");\nmethod(mediaplayer__proto, \"requestAirPlay\");\nmethod(mediaplayer__proto, \"requestGoogleCast\");\nmethod(mediaplayer__proto, \"setAudioGain\");\n\nfunction resolveStreamTypeFromDASHManifest(manifestSrc, requestInit) {\n  return fetch(manifestSrc, requestInit).then((res) => res.text()).then((manifest) => {\n    return /type=\"static\"/.test(manifest) ? \"on-demand\" : \"live\";\n  });\n}\nfunction resolveStreamTypeFromHLSManifest(manifestSrc, requestInit) {\n  return fetch(manifestSrc, requestInit).then((res) => res.text()).then((manifest) => {\n    const renditionURI = resolveHLSRenditionURI(manifest);\n    if (renditionURI) {\n      return resolveStreamTypeFromHLSManifest(\n        /^https?:/.test(renditionURI) ? renditionURI : new URL(renditionURI, manifestSrc).href,\n        requestInit\n      );\n    }\n    const streamType = /EXT-X-PLAYLIST-TYPE:\\s*VOD/.test(manifest) ? \"on-demand\" : \"live\";\n    if (streamType === \"live\" && resolveTargetDuration(manifest) >= 10 && (/#EXT-X-DVR-ENABLED:\\s*true/.test(manifest) || manifest.includes(\"#EXT-X-DISCONTINUITY\"))) {\n      return \"live:dvr\";\n    }\n    return streamType;\n  });\n}\nfunction resolveHLSRenditionURI(manifest) {\n  const matches = manifest.match(/#EXT-X-STREAM-INF:[^\\n]+(\\n[^\\n]+)*/g);\n  return matches ? matches[0].split(\"\\n\")[1].trim() : null;\n}\nfunction resolveTargetDuration(manifest) {\n  const lines = manifest.split(\"\\n\");\n  for (const line of lines) {\n    if (line.startsWith(\"#EXT-X-TARGETDURATION\")) {\n      const duration = parseFloat(line.split(\":\")[1]);\n      if (!isNaN(duration)) {\n        return duration;\n      }\n    }\n  }\n  return -1;\n}\n\nconst sourceTypes = /* @__PURE__ */ new Map();\nclass SourceSelection {\n  #initialize = false;\n  #loaders;\n  #domSources;\n  #media;\n  #loader;\n  constructor(domSources, media, loader, customLoaders = []) {\n    this.#domSources = domSources;\n    this.#media = media;\n    this.#loader = loader;\n    const DASH_LOADER = new DASHProviderLoader(), HLS_LOADER = new HLSProviderLoader(), VIDEO_LOADER = new VideoProviderLoader(), AUDIO_LOADER = new AudioProviderLoader(), YOUTUBE_LOADER = new YouTubeProviderLoader(), VIMEO_LOADER = new VimeoProviderLoader(), EMBED_LOADERS = [YOUTUBE_LOADER, VIMEO_LOADER];\n    this.#loaders = computed(() => {\n      const remoteLoader = media.$state.remotePlaybackLoader();\n      const loaders = media.$props.preferNativeHLS() ? [VIDEO_LOADER, AUDIO_LOADER, DASH_LOADER, HLS_LOADER, ...EMBED_LOADERS, ...customLoaders] : [HLS_LOADER, VIDEO_LOADER, AUDIO_LOADER, DASH_LOADER, ...EMBED_LOADERS, ...customLoaders];\n      return remoteLoader ? [remoteLoader, ...loaders] : loaders;\n    });\n    const { $state } = media;\n    $state.sources.set(normalizeSrc(media.$props.src()));\n    for (const src of $state.sources()) {\n      const loader2 = this.#loaders().find((loader3) => loader3.canPlay(src));\n      if (!loader2) continue;\n      const mediaType = loader2.mediaType(src);\n      media.$state.source.set(src);\n      media.$state.mediaType.set(mediaType);\n      media.$state.inferredViewType.set(mediaType);\n      this.#loader.set(loader2);\n      this.#initialize = true;\n      break;\n    }\n  }\n  connect() {\n    const loader = this.#loader();\n    if (this.#initialize) {\n      this.#notifySourceChange(this.#media.$state.source(), loader);\n      this.#notifyLoaderChange(loader);\n      this.#initialize = false;\n    }\n    effect(this.#onSourcesChange.bind(this));\n    effect(this.#onSourceChange.bind(this));\n    effect(this.#onSetup.bind(this));\n    effect(this.#onLoadSource.bind(this));\n    effect(this.#onLoadPoster.bind(this));\n  }\n  #onSourcesChange() {\n    this.#media.notify(\"sources-change\", [\n      ...normalizeSrc(this.#media.$props.src()),\n      ...this.#domSources()\n    ]);\n  }\n  #onSourceChange() {\n    const { $state } = this.#media;\n    const sources = $state.sources(), currentSource = peek($state.source), newSource = this.#findNewSource(currentSource, sources), noMatch = sources[0]?.src && !newSource.src && !newSource.type;\n    if (noMatch) {\n      const { crossOrigin } = $state, credentials = getRequestCredentials(crossOrigin()), abort = new AbortController();\n      Promise.all(\n        sources.map(\n          (source) => isString(source.src) && source.type === \"?\" ? fetch(source.src, {\n            method: \"HEAD\",\n            credentials,\n            signal: abort.signal\n          }).then((res) => {\n            source.type = res.headers.get(\"content-type\") || \"??\";\n            sourceTypes.set(source.src, source.type);\n            return source;\n          }).catch(() => source) : source\n        )\n      ).then((sources2) => {\n        if (abort.signal.aborted) return;\n        const newSource2 = this.#findNewSource(peek($state.source), sources2);\n        tick();\n        if (!newSource2.src) {\n          this.#media.notify(\"error\", {\n            message: \"Failed to load resource.\",\n            code: 4\n          });\n        }\n      });\n      return () => abort.abort();\n    }\n    tick();\n  }\n  #findNewSource(currentSource, sources) {\n    let newSource = { src: \"\", type: \"\" }, newLoader = null, triggerEvent = new DOMEvent(\"sources-change\", { detail: { sources } }), loaders = this.#loaders(), { started, paused, currentTime, quality, savedState } = this.#media.$state;\n    for (const src of sources) {\n      const loader = loaders.find((loader2) => loader2.canPlay(src));\n      if (loader) {\n        newSource = src;\n        newLoader = loader;\n        break;\n      }\n    }\n    if (isVideoQualitySrc(newSource)) {\n      const currentQuality = quality(), sourceQuality = sources.find((s) => s.src === currentQuality?.src);\n      if (peek(started)) {\n        savedState.set({\n          paused: peek(paused),\n          currentTime: peek(currentTime)\n        });\n      } else {\n        savedState.set(null);\n      }\n      if (sourceQuality) {\n        newSource = sourceQuality;\n        triggerEvent = new DOMEvent(\"quality-change\", {\n          detail: { quality: currentQuality }\n        });\n      }\n    }\n    if (!isSameSrc(currentSource, newSource)) {\n      this.#notifySourceChange(newSource, newLoader, triggerEvent);\n    }\n    if (newLoader !== peek(this.#loader)) {\n      this.#notifyLoaderChange(newLoader, triggerEvent);\n    }\n    return newSource;\n  }\n  #notifySourceChange(src, loader, trigger) {\n    this.#media.notify(\"source-change\", src, trigger);\n    this.#media.notify(\"media-type-change\", loader?.mediaType(src) || \"unknown\", trigger);\n  }\n  #notifyLoaderChange(loader, trigger) {\n    this.#media.$providerSetup.set(false);\n    this.#media.notify(\"provider-change\", null, trigger);\n    loader && peek(() => loader.preconnect?.(this.#media));\n    this.#loader.set(loader);\n    this.#media.notify(\"provider-loader-change\", loader, trigger);\n  }\n  #onSetup() {\n    const provider = this.#media.$provider();\n    if (!provider || peek(this.#media.$providerSetup)) return;\n    if (this.#media.$state.canLoad()) {\n      scoped(() => provider.setup(), provider.scope);\n      this.#media.$providerSetup.set(true);\n      return;\n    }\n    peek(() => provider.preconnect?.());\n  }\n  #onLoadSource() {\n    if (!this.#media.$providerSetup()) return;\n    const provider = this.#media.$provider(), source = this.#media.$state.source(), crossOrigin = peek(this.#media.$state.crossOrigin), preferNativeHLS = peek(this.#media.$props.preferNativeHLS);\n    if (isSameSrc(provider?.currentSrc, source)) {\n      return;\n    }\n    if (this.#media.$state.canLoad()) {\n      const abort = new AbortController();\n      if (isHLSSrc(source)) {\n        if (preferNativeHLS || !isHLSSupported()) {\n          resolveStreamTypeFromHLSManifest(source.src, {\n            credentials: getRequestCredentials(crossOrigin),\n            signal: abort.signal\n          }).then((streamType) => {\n            this.#media.notify(\"stream-type-change\", streamType);\n          }).catch(noop);\n        }\n      } else if (isDASHSrc(source)) {\n        resolveStreamTypeFromDASHManifest(source.src, {\n          credentials: getRequestCredentials(crossOrigin),\n          signal: abort.signal\n        }).then((streamType) => {\n          this.#media.notify(\"stream-type-change\", streamType);\n        }).catch(noop);\n      } else {\n        this.#media.notify(\"stream-type-change\", \"on-demand\");\n      }\n      peek(() => {\n        const preload = peek(this.#media.$state.preload);\n        return provider?.loadSource(source, preload).catch((error) => {\n        });\n      });\n      return () => abort.abort();\n    }\n    try {\n      isString(source.src) && preconnect(new URL(source.src).origin);\n    } catch (error) {\n    }\n  }\n  #onLoadPoster() {\n    const loader = this.#loader(), { providedPoster, source, canLoadPoster } = this.#media.$state;\n    if (!loader || !loader.loadPoster || !source() || !canLoadPoster() || providedPoster()) return;\n    const abort = new AbortController(), trigger = new DOMEvent(\"source-change\", { detail: source });\n    loader.loadPoster(source(), this.#media, abort).then((url) => {\n      this.#media.notify(\"poster-change\", url || \"\", trigger);\n    }).catch(() => {\n      this.#media.notify(\"poster-change\", \"\", trigger);\n    });\n    return () => {\n      abort.abort();\n    };\n  }\n}\nfunction normalizeSrc(src) {\n  return (isArray(src) ? src : [src]).map((src2) => {\n    if (isString(src2)) {\n      return { src: src2, type: inferType(src2) };\n    } else {\n      return { ...src2, type: inferType(src2.src, src2.type) };\n    }\n  });\n}\nfunction inferType(src, type) {\n  if (isString(type) && type.length) {\n    return type;\n  } else if (isString(src) && sourceTypes.has(src)) {\n    return sourceTypes.get(src);\n  } else if (!type && isHLSSrc({ src, type: \"\" })) {\n    return \"application/x-mpegurl\";\n  } else if (!type && isDASHSrc({ src, type: \"\" })) {\n    return \"application/dash+xml\";\n  } else if (!isString(src) || src.startsWith(\"blob:\")) {\n    return \"video/object\";\n  } else if (src.includes(\"youtube\") || src.includes(\"youtu.be\")) {\n    return \"video/youtube\";\n  } else if (src.includes(\"vimeo\") && !src.includes(\"progressive_redirect\") && !src.includes(\".m3u8\")) {\n    return \"video/vimeo\";\n  }\n  return \"?\";\n}\nfunction isSameSrc(a, b) {\n  return a?.src === b?.src && a?.type === b?.type;\n}\n\nclass Tracks {\n  #domTracks;\n  #media;\n  #prevTracks = [];\n  constructor(domTracks, media) {\n    this.#domTracks = domTracks;\n    this.#media = media;\n    effect(this.#onTracksChange.bind(this));\n  }\n  #onTracksChange() {\n    const newTracks = this.#domTracks();\n    for (const oldTrack of this.#prevTracks) {\n      if (!newTracks.some((t) => t.id === oldTrack.id)) {\n        const track = oldTrack.id && this.#media.textTracks.getById(oldTrack.id);\n        if (track) this.#media.textTracks.remove(track);\n      }\n    }\n    for (const newTrack of newTracks) {\n      const id = newTrack.id || TextTrack.createId(newTrack);\n      if (!this.#media.textTracks.getById(id)) {\n        newTrack.id = id;\n        this.#media.textTracks.add(newTrack);\n      }\n    }\n    this.#prevTracks = newTracks;\n  }\n}\n\nclass MediaProvider extends Component {\n  static props = {\n    loaders: []\n  };\n  static state = new State({\n    loader: null\n  });\n  #media;\n  #sources;\n  #domSources = signal([]);\n  #domTracks = signal([]);\n  #loader = null;\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#sources = new SourceSelection(\n      this.#domSources,\n      this.#media,\n      this.$state.loader,\n      this.$props.loaders()\n    );\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-provider\", \"\");\n  }\n  onConnect(el) {\n    this.#sources.connect();\n    new Tracks(this.#domTracks, this.#media);\n    const resize = new ResizeObserver(animationFrameThrottle(this.#onResize.bind(this)));\n    resize.observe(el);\n    const mutations = new MutationObserver(this.#onMutation.bind(this));\n    mutations.observe(el, { attributes: true, childList: true });\n    this.#onResize();\n    this.#onMutation();\n    onDispose(() => {\n      resize.disconnect();\n      mutations.disconnect();\n    });\n  }\n  #loadRafId = -1;\n  load(target) {\n    target?.setAttribute(\"aria-hidden\", \"true\");\n    window.cancelAnimationFrame(this.#loadRafId);\n    this.#loadRafId = requestAnimationFrame(() => this.#runLoader(target));\n    onDispose(() => {\n      window.cancelAnimationFrame(this.#loadRafId);\n    });\n  }\n  #runLoader(target) {\n    if (!this.scope) return;\n    const loader = this.$state.loader(), { $provider } = this.#media;\n    if (this.#loader === loader && loader?.target === target && peek($provider)) return;\n    this.#destroyProvider();\n    this.#loader = loader;\n    if (loader) loader.target = target || null;\n    if (!loader || !target) return;\n    loader.load(this.#media).then((provider) => {\n      if (!this.scope) return;\n      if (peek(this.$state.loader) !== loader) return;\n      this.#media.notify(\"provider-change\", provider);\n    });\n  }\n  onDestroy() {\n    this.#loader = null;\n    this.#destroyProvider();\n  }\n  #destroyProvider() {\n    this.#media?.notify(\"provider-change\", null);\n  }\n  #onResize() {\n    if (!this.el) return;\n    const { player, $state } = this.#media, width = this.el.offsetWidth, height = this.el.offsetHeight;\n    if (!player) return;\n    $state.mediaWidth.set(width);\n    $state.mediaHeight.set(height);\n    if (player.el) {\n      setStyle(player.el, \"--media-width\", width + \"px\");\n      setStyle(player.el, \"--media-height\", height + \"px\");\n    }\n  }\n  #onMutation() {\n    const sources = [], tracks = [], children = this.el.children;\n    for (const el of children) {\n      if (el.hasAttribute(\"data-vds\")) continue;\n      if (el instanceof HTMLSourceElement) {\n        const src = {\n          id: el.id,\n          src: el.src,\n          type: el.type\n        };\n        for (const prop of [\"id\", \"src\", \"width\", \"height\", \"bitrate\", \"codec\"]) {\n          const value = el.getAttribute(`data-${prop}`);\n          if (isString(value)) src[prop] = /id|src|codec/.test(prop) ? value : Number(value);\n        }\n        sources.push(src);\n      } else if (el instanceof HTMLTrackElement) {\n        const track = {\n          src: el.src,\n          kind: el.track.kind,\n          language: el.srclang,\n          label: el.label,\n          default: el.default,\n          type: el.getAttribute(\"data-type\")\n        };\n        tracks.push({\n          id: el.id || TextTrack.createId(track),\n          ...track\n        });\n      }\n    }\n    this.#domSources.set(sources);\n    this.#domTracks.set(tracks);\n    tick();\n  }\n}\nconst mediaprovider__proto = MediaProvider.prototype;\nmethod(mediaprovider__proto, \"load\");\n\nclass MediaAnnouncer extends Component {\n  static props = {\n    translations: null\n  };\n  static state = new State({\n    label: null,\n    busy: false\n  });\n  #media;\n  #initializing = false;\n  onSetup() {\n    this.#media = useMediaContext();\n  }\n  onAttach(el) {\n    el.style.display = \"contents\";\n  }\n  onConnect(el) {\n    el.setAttribute(\"data-media-announcer\", \"\");\n    setAttributeIfEmpty(el, \"role\", \"status\");\n    setAttributeIfEmpty(el, \"aria-live\", \"polite\");\n    const { busy } = this.$state;\n    this.setAttributes({\n      \"aria-busy\": () => busy() ? \"true\" : null\n    });\n    this.#initializing = true;\n    effect(this.#watchPaused.bind(this));\n    effect(this.#watchVolume.bind(this));\n    effect(this.#watchCaptions.bind(this));\n    effect(this.#watchFullscreen.bind(this));\n    effect(this.#watchPiP.bind(this));\n    effect(this.#watchSeeking.bind(this));\n    effect(this.#watchLabel.bind(this));\n    tick();\n    this.#initializing = false;\n  }\n  #watchPaused() {\n    const { paused } = this.#media.$state;\n    this.#setLabel(!paused() ? \"Play\" : \"Pause\");\n  }\n  #watchFullscreen() {\n    const { fullscreen } = this.#media.$state;\n    this.#setLabel(fullscreen() ? \"Enter Fullscreen\" : \"Exit Fullscreen\");\n  }\n  #watchPiP() {\n    const { pictureInPicture } = this.#media.$state;\n    this.#setLabel(pictureInPicture() ? \"Enter PiP\" : \"Exit PiP\");\n  }\n  #watchCaptions() {\n    const { textTrack } = this.#media.$state;\n    this.#setLabel(textTrack() ? \"Closed-Captions On\" : \"Closed-Captions Off\");\n  }\n  #watchVolume() {\n    const { muted, volume, audioGain } = this.#media.$state;\n    this.#setLabel(\n      muted() || volume() === 0 ? \"Mute\" : `${Math.round(volume() * (audioGain() ?? 1) * 100)}% ${this.#translate(\"Volume\")}`\n    );\n  }\n  #startedSeekingAt = -1;\n  #seekTimer = -1;\n  #watchSeeking() {\n    const { seeking, currentTime } = this.#media.$state, isSeeking = seeking();\n    if (this.#startedSeekingAt > 0) {\n      window.clearTimeout(this.#seekTimer);\n      this.#seekTimer = window.setTimeout(() => {\n        if (!this.scope) return;\n        const newTime = peek(currentTime), seconds = Math.abs(newTime - this.#startedSeekingAt);\n        if (seconds >= 1) {\n          const isForward = newTime >= this.#startedSeekingAt, spokenTime = formatSpokenTime(seconds);\n          this.#setLabel(\n            `${this.#translate(isForward ? \"Seek Forward\" : \"Seek Backward\")} ${spokenTime}`\n          );\n        }\n        this.#startedSeekingAt = -1;\n        this.#seekTimer = -1;\n      }, 300);\n    } else if (isSeeking) {\n      this.#startedSeekingAt = peek(currentTime);\n    }\n  }\n  #translate(word) {\n    const { translations } = this.$props;\n    return translations?.()?.[word || \"\"] ?? word;\n  }\n  #watchLabel() {\n    const { label, busy } = this.$state, $label = this.#translate(label());\n    if (this.#initializing) return;\n    busy.set(true);\n    const id = window.setTimeout(() => void busy.set(false), 150);\n    this.el && setAttribute(this.el, \"aria-label\", $label);\n    if (isString($label)) {\n      this.dispatch(\"change\", { detail: $label });\n    }\n    return () => window.clearTimeout(id);\n  }\n  #setLabel(word) {\n    const { label } = this.$state;\n    label.set(word);\n  }\n}\n\nclass Controls extends Component {\n  static props = {\n    hideDelay: 2e3,\n    hideOnMouseLeave: false\n  };\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    effect(this.#watchProps.bind(this));\n  }\n  onAttach(el) {\n    const { pictureInPicture, fullscreen } = this.#media.$state;\n    setStyle(el, \"pointer-events\", \"none\");\n    setAttributeIfEmpty(el, \"role\", \"group\");\n    this.setAttributes({\n      \"data-visible\": this.#isShowing.bind(this),\n      \"data-fullscreen\": fullscreen,\n      \"data-pip\": pictureInPicture\n    });\n    effect(() => {\n      this.dispatch(\"change\", { detail: this.#isShowing() });\n    });\n    effect(this.#hideControls.bind(this));\n    effect(() => {\n      const isFullscreen = fullscreen();\n      for (const side of [\"top\", \"right\", \"bottom\", \"left\"]) {\n        setStyle(el, `padding-${side}`, isFullscreen && `env(safe-area-inset-${side})`);\n      }\n    });\n  }\n  #hideControls() {\n    if (!this.el) return;\n    const { nativeControls } = this.#media.$state, isHidden = nativeControls();\n    setAttribute(this.el, \"aria-hidden\", isHidden ? \"true\" : null);\n    setStyle(this.el, \"display\", isHidden ? \"none\" : null);\n  }\n  #watchProps() {\n    const { controls } = this.#media.player, { hideDelay, hideOnMouseLeave } = this.$props;\n    controls.defaultDelay = hideDelay() === 2e3 ? this.#media.$props.controlsDelay() : hideDelay();\n    controls.hideOnMouseLeave = hideOnMouseLeave();\n  }\n  #isShowing() {\n    const { controlsVisible } = this.#media.$state;\n    return controlsVisible();\n  }\n}\n\nclass ControlsGroup extends Component {\n  onAttach(el) {\n    if (!el.style.pointerEvents) setStyle(el, \"pointer-events\", \"auto\");\n  }\n}\n\nclass Popper extends ViewController {\n  #delegate;\n  constructor(delegate) {\n    super();\n    this.#delegate = delegate;\n    effect(this.#watchTrigger.bind(this));\n  }\n  onDestroy() {\n    this.#stopAnimationEndListener?.();\n    this.#stopAnimationEndListener = null;\n  }\n  #watchTrigger() {\n    const trigger = this.#delegate.trigger();\n    if (!trigger) {\n      this.hide();\n      return;\n    }\n    const show = this.show.bind(this), hide = this.hide.bind(this);\n    this.#delegate.listen(trigger, show, hide);\n  }\n  #showTimerId = -1;\n  #hideRafId = -1;\n  #stopAnimationEndListener = null;\n  show(trigger) {\n    this.#cancelShowing();\n    window.cancelAnimationFrame(this.#hideRafId);\n    this.#hideRafId = -1;\n    this.#stopAnimationEndListener?.();\n    this.#stopAnimationEndListener = null;\n    this.#showTimerId = window.setTimeout(() => {\n      this.#showTimerId = -1;\n      const content = this.#delegate.content();\n      if (content) content.style.removeProperty(\"display\");\n      peek(() => this.#delegate.onChange(true, trigger));\n    }, this.#delegate.showDelay?.() ?? 0);\n  }\n  hide(trigger) {\n    this.#cancelShowing();\n    peek(() => this.#delegate.onChange(false, trigger));\n    this.#hideRafId = requestAnimationFrame(() => {\n      this.#cancelShowing();\n      this.#hideRafId = -1;\n      const content = this.#delegate.content();\n      if (content) {\n        const onHide = () => {\n          content.style.display = \"none\";\n          this.#stopAnimationEndListener = null;\n        };\n        const isAnimated = hasAnimation(content);\n        if (isAnimated) {\n          this.#stopAnimationEndListener?.();\n          const stop = listenEvent(content, \"animationend\", onHide, { once: true });\n          this.#stopAnimationEndListener = stop;\n        } else {\n          onHide();\n        }\n      }\n    });\n  }\n  #cancelShowing() {\n    window.clearTimeout(this.#showTimerId);\n    this.#showTimerId = -1;\n  }\n}\n\nconst tooltipContext = createContext();\n\nlet id = 0;\nclass Tooltip extends Component {\n  static props = {\n    showDelay: 700\n  };\n  #id = `media-tooltip-${++id}`;\n  #trigger = signal(null);\n  #content = signal(null);\n  #showing = signal(false);\n  constructor() {\n    super();\n    new FocusVisibleController();\n    const { showDelay } = this.$props;\n    new Popper({\n      trigger: this.#trigger,\n      content: this.#content,\n      showDelay,\n      listen(trigger, show, hide) {\n        effect(() => {\n          if ($keyboard()) listenEvent(trigger, \"focus\", show);\n          listenEvent(trigger, \"blur\", hide);\n        });\n        new EventsController(trigger).add(\"touchstart\", (e) => e.preventDefault(), { passive: false }).add(\"mouseenter\", show).add(\"mouseleave\", hide);\n      },\n      onChange: this.#onShowingChange.bind(this)\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"display\", \"contents\");\n  }\n  onSetup() {\n    provideContext(tooltipContext, {\n      trigger: this.#trigger,\n      content: this.#content,\n      showing: this.#showing,\n      attachTrigger: this.#attachTrigger.bind(this),\n      detachTrigger: this.#detachTrigger.bind(this),\n      attachContent: this.#attachContent.bind(this),\n      detachContent: this.#detachContent.bind(this)\n    });\n  }\n  #attachTrigger(el) {\n    this.#trigger.set(el);\n    let tooltipName = el.getAttribute(\"data-media-tooltip\");\n    if (tooltipName) {\n      this.el?.setAttribute(`data-media-${tooltipName}-tooltip`, \"\");\n    }\n    setAttribute(el, \"data-describedby\", this.#id);\n  }\n  #detachTrigger(el) {\n    el.removeAttribute(\"data-describedby\");\n    el.removeAttribute(\"aria-describedby\");\n    this.#trigger.set(null);\n  }\n  #attachContent(el) {\n    el.setAttribute(\"id\", this.#id);\n    el.style.display = \"none\";\n    setAttributeIfEmpty(el, \"role\", \"tooltip\");\n    this.#content.set(el);\n  }\n  #detachContent(el) {\n    el.removeAttribute(\"id\");\n    el.removeAttribute(\"role\");\n    this.#content.set(null);\n  }\n  #onShowingChange(isShowing) {\n    const trigger = this.#trigger(), content = this.#content();\n    if (trigger) {\n      setAttribute(trigger, \"aria-describedby\", isShowing ? this.#id : null);\n    }\n    for (const el of [this.el, trigger, content]) {\n      el && setAttribute(el, \"data-visible\", isShowing);\n    }\n    this.#showing.set(isShowing);\n  }\n}\n\nclass TooltipTrigger extends Component {\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onConnect(el) {\n    onDispose(\n      requestScopedAnimationFrame(() => {\n        if (!this.connectScope) return;\n        this.#attach();\n        const tooltip = useContext(tooltipContext);\n        onDispose(() => {\n          const button = this.#getButton();\n          button && tooltip.detachTrigger(button);\n        });\n      })\n    );\n  }\n  #attach() {\n    const button = this.#getButton(), tooltip = useContext(tooltipContext);\n    button && tooltip.attachTrigger(button);\n  }\n  #getButton() {\n    const candidate = this.el.firstElementChild;\n    return candidate?.localName === \"button\" || candidate?.getAttribute(\"role\") === \"button\" ? candidate : this.el;\n  }\n}\n\nclass TooltipContent extends Component {\n  static props = {\n    placement: \"top center\",\n    offset: 0,\n    alignOffset: 0\n  };\n  constructor() {\n    super();\n    new FocusVisibleController();\n    const { placement } = this.$props;\n    this.setAttributes({\n      \"data-placement\": placement\n    });\n  }\n  onAttach(el) {\n    this.#attach(el);\n    Object.assign(el.style, {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"max-content\"\n    });\n  }\n  onConnect(el) {\n    this.#attach(el);\n    const tooltip = useContext(tooltipContext);\n    onDispose(() => tooltip.detachContent(el));\n    onDispose(\n      requestScopedAnimationFrame(() => {\n        if (!this.connectScope) return;\n        effect(this.#watchPlacement.bind(this));\n      })\n    );\n  }\n  #attach(el) {\n    const tooltip = useContext(tooltipContext);\n    tooltip.attachContent(el);\n  }\n  #watchPlacement() {\n    const { showing } = useContext(tooltipContext);\n    if (!showing()) return;\n    const { placement, offset: mainOffset, alignOffset } = this.$props;\n    return autoPlacement(this.el, this.#getTrigger(), placement(), {\n      offsetVarName: \"media-tooltip\",\n      xOffset: alignOffset(),\n      yOffset: mainOffset()\n    });\n  }\n  #getTrigger() {\n    return useContext(tooltipContext).trigger();\n  }\n}\n\nclass ToggleButtonController extends ViewController {\n  static props = {\n    disabled: false\n  };\n  #delegate;\n  constructor(delegate) {\n    super();\n    this.#delegate = delegate;\n    new FocusVisibleController();\n    if (delegate.keyShortcut) {\n      new ARIAKeyShortcuts(delegate.keyShortcut);\n    }\n  }\n  onSetup() {\n    const { disabled } = this.$props;\n    this.setAttributes({\n      \"data-pressed\": this.#delegate.isPresssed,\n      \"aria-pressed\": this.#isARIAPressed.bind(this),\n      \"aria-disabled\": () => disabled() ? \"true\" : null\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setAttributeIfEmpty(el, \"type\", \"button\");\n  }\n  onConnect(el) {\n    const events = onPress(el, this.#onMaybePress.bind(this));\n    for (const type of [\"click\", \"touchstart\"]) {\n      events.add(type, this.#onInteraction.bind(this), {\n        passive: true\n      });\n    }\n  }\n  #isARIAPressed() {\n    return ariaBool$1(this.#delegate.isPresssed());\n  }\n  #onPressed(event) {\n    if (isWriteSignal(this.#delegate.isPresssed)) {\n      this.#delegate.isPresssed.set((p) => !p);\n    }\n  }\n  #onMaybePress(event) {\n    const disabled = this.$props.disabled() || this.el.hasAttribute(\"data-disabled\");\n    if (disabled) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n      return;\n    }\n    event.preventDefault();\n    (this.#delegate.onPress ?? this.#onPressed).call(this, event);\n  }\n  #onInteraction(event) {\n    if (this.$props.disabled()) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    }\n  }\n}\n\nclass ToggleButton extends Component {\n  static props = {\n    disabled: false,\n    defaultPressed: false\n  };\n  #pressed = signal(false);\n  /**\n   * Whether the toggle is currently in a `pressed` state.\n   */\n  get pressed() {\n    return this.#pressed();\n  }\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#pressed\n    });\n  }\n}\nconst togglebutton__proto = ToggleButton.prototype;\nprop(togglebutton__proto, \"pressed\");\n\nclass AirPlayButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { canAirPlay, isAirPlayConnected } = this.#media.$state;\n    this.setAttributes({\n      \"data-active\": isAirPlayConnected,\n      \"data-supported\": canAirPlay,\n      \"data-state\": this.#getState.bind(this),\n      \"aria-hidden\": $ariaBool(() => !canAirPlay())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"airplay\");\n    setARIALabel(el, this.#getDefaultLabel.bind(this));\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    remote.requestAirPlay(event);\n  }\n  #isPressed() {\n    const { remotePlaybackType, remotePlaybackState } = this.#media.$state;\n    return remotePlaybackType() === \"airplay\" && remotePlaybackState() !== \"disconnected\";\n  }\n  #getState() {\n    const { remotePlaybackType, remotePlaybackState } = this.#media.$state;\n    return remotePlaybackType() === \"airplay\" && remotePlaybackState();\n  }\n  #getDefaultLabel() {\n    const { remotePlaybackState } = this.#media.$state;\n    return `AirPlay ${remotePlaybackState()}`;\n  }\n}\n\nclass GoogleCastButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { canGoogleCast, isGoogleCastConnected } = this.#media.$state;\n    this.setAttributes({\n      \"data-active\": isGoogleCastConnected,\n      \"data-supported\": canGoogleCast,\n      \"data-state\": this.#getState.bind(this),\n      \"aria-hidden\": $ariaBool(() => !canGoogleCast())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"google-cast\");\n    setARIALabel(el, this.#getDefaultLabel.bind(this));\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    remote.requestGoogleCast(event);\n  }\n  #isPressed() {\n    const { remotePlaybackType, remotePlaybackState } = this.#media.$state;\n    return remotePlaybackType() === \"google-cast\" && remotePlaybackState() !== \"disconnected\";\n  }\n  #getState() {\n    const { remotePlaybackType, remotePlaybackState } = this.#media.$state;\n    return remotePlaybackType() === \"google-cast\" && remotePlaybackState();\n  }\n  #getDefaultLabel() {\n    const { remotePlaybackState } = this.#media.$state;\n    return `Google Cast ${remotePlaybackState()}`;\n  }\n}\n\nclass PlayButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"togglePaused\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { paused, ended } = this.#media.$state;\n    this.setAttributes({\n      \"data-paused\": paused,\n      \"data-ended\": ended\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"play\");\n    setARIALabel(el, \"Play\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    this.#isPressed() ? remote.pause(event) : remote.play(event);\n  }\n  #isPressed() {\n    const { paused } = this.#media.$state;\n    return !paused();\n  }\n}\n\nclass CaptionButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"toggleCaptions\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.setAttributes({\n      \"data-active\": this.#isPressed.bind(this),\n      \"data-supported\": () => !this.#isHidden(),\n      \"aria-hidden\": $ariaBool(this.#isHidden.bind(this))\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"caption\");\n    setARIALabel(el, \"Captions\");\n  }\n  #onPress(event) {\n    this.#media.remote.toggleCaptions(event);\n  }\n  #isPressed() {\n    const { textTrack } = this.#media.$state, track = textTrack();\n    return !!track && isTrackCaptionKind(track);\n  }\n  #isHidden() {\n    const { hasCaptions } = this.#media.$state;\n    return !hasCaptions();\n  }\n}\n\nclass FullscreenButton extends Component {\n  static props = {\n    ...ToggleButtonController.props,\n    target: \"prefer-media\"\n  };\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"toggleFullscreen\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { fullscreen } = this.#media.$state, isSupported = this.#isSupported.bind(this);\n    this.setAttributes({\n      \"data-active\": fullscreen,\n      \"data-supported\": isSupported,\n      \"aria-hidden\": $ariaBool(() => !isSupported())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"fullscreen\");\n    setARIALabel(el, \"Fullscreen\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote, target = this.$props.target();\n    this.#isPressed() ? remote.exitFullscreen(target, event) : remote.enterFullscreen(target, event);\n  }\n  #isPressed() {\n    const { fullscreen } = this.#media.$state;\n    return fullscreen();\n  }\n  #isSupported() {\n    const { canFullscreen } = this.#media.$state;\n    return canFullscreen();\n  }\n}\n\nclass MuteButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"toggleMuted\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.setAttributes({\n      \"data-muted\": this.#isPressed.bind(this),\n      \"data-state\": this.#getState.bind(this)\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-mute-button\", \"\");\n    el.setAttribute(\"data-media-tooltip\", \"mute\");\n    setARIALabel(el, \"Mute\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    this.#isPressed() ? remote.unmute(event) : remote.mute(event);\n  }\n  #isPressed() {\n    const { muted, volume } = this.#media.$state;\n    return muted() || volume() === 0;\n  }\n  #getState() {\n    const { muted, volume } = this.#media.$state, $volume = volume();\n    if (muted() || $volume === 0) return \"muted\";\n    else if ($volume >= 0.5) return \"high\";\n    else if ($volume < 0.5) return \"low\";\n  }\n}\n\nclass PIPButton extends Component {\n  static props = ToggleButtonController.props;\n  #media;\n  constructor() {\n    super();\n    new ToggleButtonController({\n      isPresssed: this.#isPressed.bind(this),\n      keyShortcut: \"togglePictureInPicture\",\n      onPress: this.#onPress.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { pictureInPicture } = this.#media.$state, isSupported = this.#isSupported.bind(this);\n    this.setAttributes({\n      \"data-active\": pictureInPicture,\n      \"data-supported\": isSupported,\n      \"aria-hidden\": $ariaBool(() => !isSupported())\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-tooltip\", \"pip\");\n    setARIALabel(el, \"PiP\");\n  }\n  #onPress(event) {\n    const remote = this.#media.remote;\n    this.#isPressed() ? remote.exitPictureInPicture(event) : remote.enterPictureInPicture(event);\n  }\n  #isPressed() {\n    const { pictureInPicture } = this.#media.$state;\n    return pictureInPicture();\n  }\n  #isSupported() {\n    const { canPictureInPicture } = this.#media.$state;\n    return canPictureInPicture();\n  }\n}\n\nclass SeekButton extends Component {\n  static props = {\n    disabled: false,\n    seconds: 30\n  };\n  #media;\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { seeking } = this.#media.$state, { seconds } = this.$props, isSupported = this.#isSupported.bind(this);\n    this.setAttributes({\n      seconds,\n      \"data-seeking\": seeking,\n      \"data-supported\": isSupported,\n      \"aria-hidden\": $ariaBool(() => !isSupported())\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setAttributeIfEmpty(el, \"type\", \"button\");\n    el.setAttribute(\"data-media-tooltip\", \"seek\");\n    setARIALabel(el, this.#getDefaultLabel.bind(this));\n  }\n  onConnect(el) {\n    onPress(el, this.#onPress.bind(this));\n  }\n  #isSupported() {\n    const { canSeek } = this.#media.$state;\n    return canSeek();\n  }\n  #getDefaultLabel() {\n    const { seconds } = this.$props;\n    return `Seek ${seconds() > 0 ? \"forward\" : \"backward\"} ${seconds()} seconds`;\n  }\n  #onPress(event) {\n    const { seconds, disabled } = this.$props;\n    if (disabled()) return;\n    const { currentTime } = this.#media.$state, seekTo = currentTime() + seconds();\n    this.#media.remote.seek(seekTo, event);\n  }\n}\n\nclass LiveButton extends Component {\n  static props = {\n    disabled: false\n  };\n  #media;\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const { disabled } = this.$props, { live, liveEdge } = this.#media.$state, isHidden = () => !live();\n    this.setAttributes({\n      \"data-edge\": liveEdge,\n      \"data-hidden\": isHidden,\n      \"aria-disabled\": $ariaBool(() => disabled() || liveEdge()),\n      \"aria-hidden\": $ariaBool(isHidden)\n    });\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"role\", \"button\");\n    setAttributeIfEmpty(el, \"type\", \"button\");\n    el.setAttribute(\"data-media-tooltip\", \"live\");\n  }\n  onConnect(el) {\n    onPress(el, this.#onPress.bind(this));\n  }\n  #onPress(event) {\n    const { disabled } = this.$props, { liveEdge } = this.#media.$state;\n    if (disabled() || liveEdge()) return;\n    this.#media.remote.seekToLiveEdge(event);\n  }\n}\n\nconst sliderState = new State({\n  min: 0,\n  max: 100,\n  value: 0,\n  step: 1,\n  pointerValue: 0,\n  focused: false,\n  dragging: false,\n  pointing: false,\n  hidden: false,\n  get active() {\n    return this.dragging || this.focused || this.pointing;\n  },\n  get fillRate() {\n    return calcRate(this.min, this.max, this.value);\n  },\n  get fillPercent() {\n    return this.fillRate * 100;\n  },\n  get pointerRate() {\n    return calcRate(this.min, this.max, this.pointerValue);\n  },\n  get pointerPercent() {\n    return this.pointerRate * 100;\n  }\n});\nfunction calcRate(min, max, value) {\n  const range = max - min, offset = value - min;\n  return range > 0 ? offset / range : 0;\n}\n\nclass IntersectionObserverController extends ViewController {\n  #init;\n  #observer;\n  constructor(init) {\n    super();\n    this.#init = init;\n  }\n  onConnect(el) {\n    this.#observer = new IntersectionObserver((entries) => {\n      this.#init.callback?.(entries, this.#observer);\n    }, this.#init);\n    this.#observer.observe(el);\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  /**\n   * Disconnect any active intersection observers.\n   */\n  #onDisconnect() {\n    this.#observer?.disconnect();\n    this.#observer = void 0;\n  }\n}\n\nconst sliderContext = createContext();\nconst sliderObserverContext = createContext();\n\nfunction getClampedValue(min, max, value, step) {\n  return clampNumber(min, round(value, getNumberOfDecimalPlaces(step)), max);\n}\nfunction getValueFromRate(min, max, rate, step) {\n  const boundRate = clampNumber(0, rate, 1), range = max - min, fill = range * boundRate, stepRatio = fill / step, steps = step * Math.round(stepRatio);\n  return min + steps;\n}\n\nconst SliderKeyDirection = {\n  Left: -1,\n  ArrowLeft: -1,\n  Up: 1,\n  ArrowUp: 1,\n  Right: 1,\n  ArrowRight: 1,\n  Down: -1,\n  ArrowDown: -1\n};\nclass SliderEventsController extends ViewController {\n  #delegate;\n  #media;\n  #observer;\n  constructor(delegate, media) {\n    super();\n    this.#delegate = delegate;\n    this.#media = media;\n  }\n  onSetup() {\n    if (hasProvidedContext(sliderObserverContext)) {\n      this.#observer = useContext(sliderObserverContext);\n    }\n  }\n  onConnect(el) {\n    effect(this.#attachEventListeners.bind(this, el));\n    effect(this.#attachPointerListeners.bind(this, el));\n    if (this.#delegate.swipeGesture) effect(this.#watchSwipeGesture.bind(this));\n  }\n  #watchSwipeGesture() {\n    const { pointer } = this.#media.$state;\n    if (pointer() !== \"coarse\" || !this.#delegate.swipeGesture()) {\n      this.#provider = null;\n      return;\n    }\n    this.#provider = this.#media.player.el?.querySelector(\n      \"media-provider,[data-media-provider]\"\n    );\n    if (!this.#provider) return;\n    new EventsController(this.#provider).add(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: true\n    }).add(\"touchmove\", this.#onTouchMove.bind(this), { passive: false });\n  }\n  #provider = null;\n  #touch = null;\n  #touchStartValue = null;\n  #onTouchStart(event) {\n    this.#touch = event.touches[0];\n  }\n  #onTouchMove(event) {\n    if (isNull(this.#touch) || isTouchPinchEvent(event)) return;\n    const touch = event.touches[0], xDiff = touch.clientX - this.#touch.clientX, yDiff = touch.clientY - this.#touch.clientY, isDragging = this.$state.dragging();\n    if (!isDragging && Math.abs(yDiff) > 5) {\n      return;\n    }\n    if (isDragging) return;\n    event.preventDefault();\n    if (Math.abs(xDiff) > 20) {\n      this.#touch = touch;\n      this.#touchStartValue = this.$state.value();\n      this.#onStartDragging(this.#touchStartValue, event);\n    }\n  }\n  #attachEventListeners(el) {\n    const { hidden } = this.$props;\n    listenEvent(el, \"focus\", this.#onFocus.bind(this));\n    if (hidden() || this.#delegate.isDisabled()) return;\n    new EventsController(el).add(\"keyup\", this.#onKeyUp.bind(this)).add(\"keydown\", this.#onKeyDown.bind(this)).add(\"pointerenter\", this.#onPointerEnter.bind(this)).add(\"pointermove\", this.#onPointerMove.bind(this)).add(\"pointerleave\", this.#onPointerLeave.bind(this)).add(\"pointerdown\", this.#onPointerDown.bind(this));\n  }\n  #attachPointerListeners(el) {\n    if (this.#delegate.isDisabled() || !this.$state.dragging()) return;\n    new EventsController(document).add(\"pointerup\", this.#onDocumentPointerUp.bind(this), { capture: true }).add(\"pointermove\", this.#onDocumentPointerMove.bind(this)).add(\"touchmove\", this.#onDocumentTouchMove.bind(this), {\n      passive: false\n    });\n  }\n  #onFocus() {\n    this.#updatePointerValue(this.$state.value());\n  }\n  #updateValue(newValue, trigger) {\n    const { value, min, max, dragging } = this.$state;\n    const clampedValue = Math.max(min(), Math.min(newValue, max()));\n    value.set(clampedValue);\n    const event = this.createEvent(\"value-change\", { detail: clampedValue, trigger });\n    this.dispatch(event);\n    this.#delegate.onValueChange?.(event);\n    if (dragging()) {\n      const event2 = this.createEvent(\"drag-value-change\", { detail: clampedValue, trigger });\n      this.dispatch(event2);\n      this.#delegate.onDragValueChange?.(event2);\n    }\n  }\n  #updatePointerValue(value, trigger) {\n    const { pointerValue, dragging } = this.$state;\n    pointerValue.set(value);\n    this.dispatch(\"pointer-value-change\", { detail: value, trigger });\n    if (dragging()) {\n      this.#updateValue(value, trigger);\n    }\n  }\n  #getPointerValue(event) {\n    let thumbPositionRate, rect = this.el.getBoundingClientRect(), { min, max } = this.$state;\n    if (this.$props.orientation() === \"vertical\") {\n      const { bottom: trackBottom, height: trackHeight } = rect;\n      thumbPositionRate = (trackBottom - event.clientY) / trackHeight;\n    } else {\n      if (this.#touch && isNumber(this.#touchStartValue)) {\n        const { width } = this.#provider.getBoundingClientRect(), rate = (event.clientX - this.#touch.clientX) / width, range = max() - min(), diff = range * Math.abs(rate);\n        thumbPositionRate = (rate < 0 ? this.#touchStartValue - diff : this.#touchStartValue + diff) / range;\n      } else {\n        const { left: trackLeft, width: trackWidth } = rect;\n        thumbPositionRate = (event.clientX - trackLeft) / trackWidth;\n      }\n    }\n    return Math.max(\n      min(),\n      Math.min(\n        max(),\n        this.#delegate.roundValue(\n          getValueFromRate(min(), max(), thumbPositionRate, this.#delegate.getStep())\n        )\n      )\n    );\n  }\n  #onPointerEnter(event) {\n    this.$state.pointing.set(true);\n  }\n  #onPointerMove(event) {\n    const { dragging } = this.$state;\n    if (dragging()) return;\n    this.#updatePointerValue(this.#getPointerValue(event), event);\n  }\n  #onPointerLeave(event) {\n    this.$state.pointing.set(false);\n  }\n  #onPointerDown(event) {\n    if (event.button !== 0) return;\n    const value = this.#getPointerValue(event);\n    this.#onStartDragging(value, event);\n    this.#updatePointerValue(value, event);\n  }\n  #onStartDragging(value, trigger) {\n    const { dragging } = this.$state;\n    if (dragging()) return;\n    dragging.set(true);\n    this.#media.remote.pauseControls(trigger);\n    const event = this.createEvent(\"drag-start\", { detail: value, trigger });\n    this.dispatch(event);\n    this.#delegate.onDragStart?.(event);\n    this.#observer?.onDragStart?.();\n  }\n  #onStopDragging(value, trigger) {\n    const { dragging } = this.$state;\n    if (!dragging()) return;\n    dragging.set(false);\n    this.#media.remote.resumeControls(trigger);\n    const event = this.createEvent(\"drag-end\", { detail: value, trigger });\n    this.dispatch(event);\n    this.#delegate.onDragEnd?.(event);\n    this.#touch = null;\n    this.#touchStartValue = null;\n    this.#observer?.onDragEnd?.();\n  }\n  // -------------------------------------------------------------------------------------------\n  // Keyboard Events\n  // -------------------------------------------------------------------------------------------\n  #lastDownKey;\n  #repeatedKeys = false;\n  #onKeyDown(event) {\n    const isValidKey = Object.keys(SliderKeyDirection).includes(event.key);\n    if (!isValidKey) return;\n    const { key } = event, jumpValue = this.#calcJumpValue(event);\n    if (!isNull(jumpValue)) {\n      this.#updatePointerValue(jumpValue, event);\n      this.#updateValue(jumpValue, event);\n      return;\n    }\n    const newValue = this.#calcNewKeyValue(event);\n    if (!this.#repeatedKeys) {\n      this.#repeatedKeys = key === this.#lastDownKey;\n      if (!this.$state.dragging() && this.#repeatedKeys) {\n        this.#onStartDragging(newValue, event);\n      }\n    }\n    this.#updatePointerValue(newValue, event);\n    this.#lastDownKey = key;\n  }\n  #onKeyUp(event) {\n    const isValidKey = Object.keys(SliderKeyDirection).includes(event.key);\n    if (!isValidKey || !isNull(this.#calcJumpValue(event))) return;\n    const newValue = this.#repeatedKeys ? this.$state.pointerValue() : this.#calcNewKeyValue(event);\n    this.#updateValue(newValue, event);\n    this.#onStopDragging(newValue, event);\n    this.#lastDownKey = \"\";\n    this.#repeatedKeys = false;\n  }\n  #calcJumpValue(event) {\n    let key = event.key, { min, max } = this.$state;\n    if (key === \"Home\" || key === \"PageUp\") {\n      return min();\n    } else if (key === \"End\" || key === \"PageDown\") {\n      return max();\n    } else if (!event.metaKey && /^[0-9]$/.test(key)) {\n      return (max() - min()) / 10 * Number(key);\n    }\n    return null;\n  }\n  #calcNewKeyValue(event) {\n    const { key, shiftKey } = event;\n    event.preventDefault();\n    event.stopPropagation();\n    const { shiftKeyMultiplier } = this.$props;\n    const { min, max, value, pointerValue } = this.$state, step = this.#delegate.getStep(), keyStep = this.#delegate.getKeyStep();\n    const modifiedStep = !shiftKey ? keyStep : keyStep * shiftKeyMultiplier(), direction = Number(SliderKeyDirection[key]), diff = modifiedStep * direction, currentValue = this.#repeatedKeys ? pointerValue() : this.#delegate.getValue?.() ?? value(), steps = (currentValue + diff) / step;\n    return Math.max(min(), Math.min(max(), Number((step * steps).toFixed(3))));\n  }\n  // -------------------------------------------------------------------------------------------\n  // Document (Pointer Events)\n  // -------------------------------------------------------------------------------------------\n  #onDocumentPointerUp(event) {\n    if (event.button !== 0) return;\n    event.preventDefault();\n    event.stopImmediatePropagation();\n    const value = this.#getPointerValue(event);\n    this.#updatePointerValue(value, event);\n    this.#onStopDragging(value, event);\n  }\n  #onDocumentTouchMove(event) {\n    event.preventDefault();\n  }\n  #onDocumentPointerMove = functionThrottle(\n    (event) => {\n      this.#updatePointerValue(this.#getPointerValue(event), event);\n    },\n    20,\n    { leading: true }\n  );\n}\n\nconst sliderValueFormatContext = createContext(() => ({}));\n\nclass SliderController extends ViewController {\n  static props = {\n    hidden: false,\n    disabled: false,\n    step: 1,\n    keyStep: 1,\n    orientation: \"horizontal\",\n    shiftKeyMultiplier: 5\n  };\n  #media;\n  #delegate;\n  #isVisible = signal(true);\n  #isIntersecting = signal(true);\n  constructor(delegate) {\n    super();\n    this.#delegate = delegate;\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const focus = new FocusVisibleController();\n    focus.attach(this);\n    this.$state.focused = focus.focused.bind(focus);\n    if (!hasProvidedContext(sliderValueFormatContext)) {\n      provideContext(sliderValueFormatContext, {\n        default: \"value\"\n      });\n    }\n    provideContext(sliderContext, {\n      orientation: this.$props.orientation,\n      disabled: this.#delegate.isDisabled,\n      preview: signal(null)\n    });\n    effect(this.#watchValue.bind(this));\n    effect(this.#watchStep.bind(this));\n    effect(this.#watchDisabled.bind(this));\n    this.#setupAttrs();\n    new SliderEventsController(this.#delegate, this.#media).attach(this);\n    new IntersectionObserverController({\n      callback: this.#onIntersectionChange.bind(this)\n    }).attach(this);\n  }\n  onAttach(el) {\n    setAttributeIfEmpty(el, \"role\", \"slider\");\n    setAttributeIfEmpty(el, \"tabindex\", \"0\");\n    setAttributeIfEmpty(el, \"autocomplete\", \"off\");\n    if (IS_SERVER) this.#watchCSSVars();\n    else effect(this.#watchCSSVars.bind(this));\n  }\n  onConnect(el) {\n    onDispose(observeVisibility(el, this.#isVisible.set));\n    effect(this.#watchHidden.bind(this));\n  }\n  #onIntersectionChange(entries) {\n    this.#isIntersecting.set(entries[0].isIntersecting);\n  }\n  // -------------------------------------------------------------------------------------------\n  // Watch\n  // -------------------------------------------------------------------------------------------\n  #watchHidden() {\n    const { hidden } = this.$props;\n    this.$state.hidden.set(hidden() || !this.#isVisible() || !this.#isIntersecting.bind(this));\n  }\n  #watchValue() {\n    const { dragging, value, min, max } = this.$state;\n    if (peek(dragging)) return;\n    value.set(getClampedValue(min(), max(), value(), this.#delegate.getStep()));\n  }\n  #watchStep() {\n    this.$state.step.set(this.#delegate.getStep());\n  }\n  #watchDisabled() {\n    if (!this.#delegate.isDisabled()) return;\n    const { dragging, pointing } = this.$state;\n    dragging.set(false);\n    pointing.set(false);\n  }\n  // -------------------------------------------------------------------------------------------\n  // ARIA\n  // -------------------------------------------------------------------------------------------\n  #getARIADisabled() {\n    return ariaBool$1(this.#delegate.isDisabled());\n  }\n  // -------------------------------------------------------------------------------------------\n  // Attributes\n  // -------------------------------------------------------------------------------------------\n  #setupAttrs() {\n    const { orientation } = this.$props, { dragging, active, pointing } = this.$state;\n    this.setAttributes({\n      \"data-dragging\": dragging,\n      \"data-pointing\": pointing,\n      \"data-active\": active,\n      \"aria-disabled\": this.#getARIADisabled.bind(this),\n      \"aria-valuemin\": this.#delegate.aria.valueMin ?? this.$state.min,\n      \"aria-valuemax\": this.#delegate.aria.valueMax ?? this.$state.max,\n      \"aria-valuenow\": this.#delegate.aria.valueNow,\n      \"aria-valuetext\": this.#delegate.aria.valueText,\n      \"aria-orientation\": orientation\n    });\n  }\n  #watchCSSVars() {\n    const { fillPercent, pointerPercent } = this.$state;\n    this.#updateSliderVars(round(fillPercent(), 3), round(pointerPercent(), 3));\n  }\n  #updateSliderVars = animationFrameThrottle((fillPercent, pointerPercent) => {\n    this.el?.style.setProperty(\"--slider-fill\", fillPercent + \"%\");\n    this.el?.style.setProperty(\"--slider-pointer\", pointerPercent + \"%\");\n  });\n}\n\nclass Slider extends Component {\n  static props = {\n    ...SliderController.props,\n    min: 0,\n    max: 100,\n    value: 0\n  };\n  static state = sliderState;\n  constructor() {\n    super();\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.$props.disabled,\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      }\n    });\n  }\n  onSetup() {\n    effect(this.#watchValue.bind(this));\n    effect(this.#watchMinMax.bind(this));\n  }\n  // -------------------------------------------------------------------------------------------\n  // Props\n  // -------------------------------------------------------------------------------------------\n  #getARIAValueNow() {\n    const { value } = this.$state;\n    return Math.round(value());\n  }\n  #getARIAValueText() {\n    const { value, max } = this.$state;\n    return round(value() / max() * 100, 2) + \"%\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Watch\n  // -------------------------------------------------------------------------------------------\n  #watchValue() {\n    const { value } = this.$props;\n    this.$state.value.set(value());\n  }\n  #watchMinMax() {\n    const { min, max } = this.$props;\n    this.$state.min.set(min());\n    this.$state.max.set(max());\n  }\n}\n\nconst cache = /* @__PURE__ */ new Map(), pending = /* @__PURE__ */ new Map();\nclass ThumbnailsLoader {\n  #media;\n  #src;\n  #crossOrigin;\n  $images = signal([]);\n  static create(src, crossOrigin) {\n    const media = useMediaContext();\n    return new ThumbnailsLoader(src, crossOrigin, media);\n  }\n  constructor(src, crossOrigin, media) {\n    this.#src = src;\n    this.#crossOrigin = crossOrigin;\n    this.#media = media;\n    effect(this.#onLoadCues.bind(this));\n  }\n  #onLoadCues() {\n    const { canLoad } = this.#media.$state;\n    if (!canLoad()) return;\n    const src = this.#src();\n    if (!src) return;\n    if (isString(src) && cache.has(src)) {\n      const cues = cache.get(src);\n      cache.delete(src);\n      cache.set(src, cues);\n      if (cache.size > 99) {\n        const firstKey = cache.keys().next().value;\n        cache.delete(firstKey);\n      }\n      this.$images.set(cache.get(src));\n    } else if (isString(src)) {\n      const crossOrigin = this.#crossOrigin(), currentKey = src + \"::\" + crossOrigin;\n      if (!pending.has(currentKey)) {\n        const promise = new Promise(async (resolve, reject) => {\n          try {\n            const response = await fetch(src, {\n              credentials: getRequestCredentials(crossOrigin)\n            }), isJSON = response.headers.get(\"content-type\") === \"application/json\";\n            if (isJSON) {\n              const json = await response.json();\n              if (isArray(json)) {\n                if (json[0] && \"text\" in json[0]) {\n                  resolve(this.#processVTTCues(json));\n                } else {\n                  for (let i = 0; i < json.length; i++) {\n                    const image = json[i];\n                    assert(isObject(image), false);\n                    assert(\n                      \"url\" in image && isString(image.url),\n                      false\n                    );\n                    assert(\n                      \"startTime\" in image && isNumber(image.startTime),\n                      false\n                    );\n                  }\n                  resolve(json);\n                }\n              } else {\n                resolve(this.#processStoryboard(json));\n              }\n              return;\n            }\n            import('media-captions').then(async ({ parseResponse }) => {\n              try {\n                const { cues } = await parseResponse(response);\n                resolve(this.#processVTTCues(cues));\n              } catch (e) {\n                reject(e);\n              }\n            });\n          } catch (e) {\n            reject(e);\n          }\n        }).then((images) => {\n          cache.set(currentKey, images);\n          return images;\n        }).catch((error) => {\n          this.#onError(src, error);\n        }).finally(() => {\n          if (isString(currentKey)) pending.delete(currentKey);\n        });\n        pending.set(currentKey, promise);\n      }\n      pending.get(currentKey)?.then((images) => {\n        this.$images.set(images || []);\n      });\n    } else if (isArray(src)) {\n      try {\n        this.$images.set(this.#processImages(src));\n      } catch (error) {\n        this.#onError(src, error);\n      }\n    } else {\n      try {\n        this.$images.set(this.#processStoryboard(src));\n      } catch (error) {\n        this.#onError(src, error);\n      }\n    }\n    return () => {\n      this.$images.set([]);\n    };\n  }\n  #processImages(images) {\n    const baseURL = this.#resolveBaseUrl();\n    return images.map((img, i) => {\n      assert(\n        img.url && isString(img.url));\n      assert(\n        \"startTime\" in img && isNumber(img.startTime));\n      return {\n        ...img,\n        url: isString(img.url) ? this.#resolveURL(img.url, baseURL) : img.url\n      };\n    });\n  }\n  #processStoryboard(board) {\n    assert(isString(board.url));\n    assert(isArray(board.tiles) && board.tiles?.length);\n    const url = new URL(board.url), images = [];\n    const tileWidth = \"tile_width\" in board ? board.tile_width : board.tileWidth, tileHeight = \"tile_height\" in board ? board.tile_height : board.tileHeight;\n    for (const tile of board.tiles) {\n      images.push({\n        url,\n        startTime: \"start\" in tile ? tile.start : tile.startTime,\n        width: tileWidth,\n        height: tileHeight,\n        coords: { x: tile.x, y: tile.y }\n      });\n    }\n    return images;\n  }\n  #processVTTCues(cues) {\n    for (let i = 0; i < cues.length; i++) {\n      const cue = cues[i];\n      assert(\n        \"startTime\" in cue && isNumber(cue.startTime));\n      assert(\n        \"text\" in cue && isString(cue.text));\n    }\n    const images = [], baseURL = this.#resolveBaseUrl();\n    for (const cue of cues) {\n      const [url, hash] = cue.text.split(\"#\"), data = this.#resolveData(hash);\n      images.push({\n        url: this.#resolveURL(url, baseURL),\n        startTime: cue.startTime,\n        endTime: cue.endTime,\n        width: data?.w,\n        height: data?.h,\n        coords: data && isNumber(data.x) && isNumber(data.y) ? { x: data.x, y: data.y } : void 0\n      });\n    }\n    return images;\n  }\n  #resolveBaseUrl() {\n    let baseURL = peek(this.#src);\n    if (!isString(baseURL) || !/^https?:/.test(baseURL)) {\n      return location.href;\n    }\n    return baseURL;\n  }\n  #resolveURL(src, baseURL) {\n    return /^https?:/.test(src) ? new URL(src) : new URL(src, baseURL);\n  }\n  #resolveData(hash) {\n    if (!hash) return {};\n    const [hashProps, values] = hash.split(\"=\"), hashValues = values?.split(\",\"), data = {};\n    if (!hashProps || !hashValues) {\n      return null;\n    }\n    for (let i = 0; i < hashProps.length; i++) {\n      const value = +hashValues[i];\n      if (!isNaN(value)) data[hashProps[i]] = value;\n    }\n    return data;\n  }\n  #onError(src, error) {\n    return;\n  }\n}\n\nclass Thumbnail extends Component {\n  static props = {\n    src: null,\n    time: 0,\n    crossOrigin: null\n  };\n  static state = new State({\n    src: \"\",\n    img: null,\n    thumbnails: [],\n    activeThumbnail: null,\n    crossOrigin: null,\n    loading: false,\n    error: null,\n    hidden: false\n  });\n  media;\n  #loader;\n  #styleResets = [];\n  onSetup() {\n    this.media = useMediaContext();\n    this.#loader = ThumbnailsLoader.create(this.$props.src, this.$state.crossOrigin);\n    this.#watchCrossOrigin();\n    this.setAttributes({\n      \"data-loading\": this.#isLoading.bind(this),\n      \"data-error\": this.#hasError.bind(this),\n      \"data-hidden\": this.$state.hidden,\n      \"aria-hidden\": $ariaBool(this.$state.hidden)\n    });\n  }\n  onConnect(el) {\n    effect(this.#watchImg.bind(this));\n    effect(this.#watchHidden.bind(this));\n    effect(this.#watchCrossOrigin.bind(this));\n    effect(this.#onLoadStart.bind(this));\n    effect(this.#onFindActiveThumbnail.bind(this));\n    effect(this.#resize.bind(this));\n  }\n  #watchImg() {\n    const img = this.$state.img();\n    if (!img) return;\n    new EventsController(img).add(\"load\", this.#onLoaded.bind(this)).add(\"error\", this.#onError.bind(this));\n  }\n  #watchCrossOrigin() {\n    const { crossOrigin: crossOriginProp } = this.$props, { crossOrigin: crossOriginState } = this.$state, { crossOrigin: mediaCrossOrigin } = this.media.$state, crossOrigin = crossOriginProp() !== null ? crossOriginProp() : mediaCrossOrigin();\n    crossOriginState.set(crossOrigin === true ? \"anonymous\" : crossOrigin);\n  }\n  #onLoadStart() {\n    const { src, loading, error } = this.$state;\n    if (src()) {\n      loading.set(true);\n      error.set(null);\n    }\n    return () => {\n      this.#resetStyles();\n      loading.set(false);\n      error.set(null);\n    };\n  }\n  #onLoaded() {\n    const { loading, error } = this.$state;\n    this.#resize();\n    loading.set(false);\n    error.set(null);\n  }\n  #onError(event) {\n    const { loading, error } = this.$state;\n    loading.set(false);\n    error.set(event);\n  }\n  #isLoading() {\n    const { loading, hidden } = this.$state;\n    return !hidden() && loading();\n  }\n  #hasError() {\n    const { error } = this.$state;\n    return !isNull(error());\n  }\n  #watchHidden() {\n    const { hidden } = this.$state, { duration } = this.media.$state, images = this.#loader.$images();\n    hidden.set(this.#hasError() || !Number.isFinite(duration()) || images.length === 0);\n  }\n  getTime() {\n    return this.$props.time();\n  }\n  #onFindActiveThumbnail() {\n    let images = this.#loader.$images();\n    if (!images.length) return;\n    let time = this.getTime(), { src, activeThumbnail } = this.$state, activeIndex = -1, activeImage = null;\n    for (let i = images.length - 1; i >= 0; i--) {\n      const image = images[i];\n      if (time >= image.startTime && (!image.endTime || time < image.endTime)) {\n        activeIndex = i;\n        break;\n      }\n    }\n    if (images[activeIndex]) {\n      activeImage = images[activeIndex];\n    }\n    activeThumbnail.set(activeImage);\n    src.set(activeImage?.url.href || \"\");\n  }\n  #resize() {\n    if (!this.scope || this.$state.hidden()) return;\n    const rootEl = this.el, imgEl = this.$state.img(), thumbnail = this.$state.activeThumbnail();\n    if (!imgEl || !thumbnail || !rootEl) return;\n    let width = thumbnail.width ?? imgEl.naturalWidth, height = thumbnail?.height ?? imgEl.naturalHeight, {\n      maxWidth,\n      maxHeight,\n      minWidth,\n      minHeight,\n      width: elWidth,\n      height: elHeight\n    } = getComputedStyle(this.el);\n    if (minWidth === \"100%\") minWidth = parseFloat(elWidth) + \"\";\n    if (minHeight === \"100%\") minHeight = parseFloat(elHeight) + \"\";\n    let minRatio = Math.max(parseInt(minWidth) / width, parseInt(minHeight) / height), maxRatio = Math.min(\n      Math.max(parseInt(minWidth), parseInt(maxWidth)) / width,\n      Math.max(parseInt(minHeight), parseInt(maxHeight)) / height\n    ), scale = !isNaN(maxRatio) && maxRatio < 1 ? maxRatio : minRatio > 1 ? minRatio : 1;\n    this.#style(rootEl, \"--thumbnail-width\", `${width * scale}px`);\n    this.#style(rootEl, \"--thumbnail-height\", `${height * scale}px`);\n    this.#style(rootEl, \"--thumbnail-aspect-ratio\", String(round(width / height, 5)));\n    this.#style(imgEl, \"width\", `${imgEl.naturalWidth * scale}px`);\n    this.#style(imgEl, \"height\", `${imgEl.naturalHeight * scale}px`);\n    this.#style(\n      imgEl,\n      \"transform\",\n      thumbnail.coords ? `translate(-${thumbnail.coords.x * scale}px, -${thumbnail.coords.y * scale}px)` : \"\"\n    );\n    this.#style(imgEl, \"max-width\", \"none\");\n  }\n  #style(el, name, value) {\n    el.style.setProperty(name, value);\n    this.#styleResets.push(() => el.style.removeProperty(name));\n  }\n  #resetStyles() {\n    for (const reset of this.#styleResets) reset();\n    this.#styleResets = [];\n  }\n}\n\nclass SliderThumbnail extends Thumbnail {\n  #slider;\n  onAttach(el) {\n    this.#slider = useState(Slider.state);\n  }\n  getTime() {\n    const { duration, clipStartTime } = this.media.$state;\n    return clipStartTime() + this.#slider.pointerRate() * duration();\n  }\n}\n\nclass SliderVideo extends Component {\n  static props = {\n    src: null,\n    crossOrigin: null\n  };\n  static state = new State({\n    video: null,\n    src: null,\n    crossOrigin: null,\n    canPlay: false,\n    error: null,\n    hidden: false\n  });\n  #media;\n  #slider;\n  get video() {\n    return this.$state.video();\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#slider = useState(Slider.state);\n    this.#watchCrossOrigin();\n    this.setAttributes({\n      \"data-loading\": this.#isLoading.bind(this),\n      \"data-hidden\": this.$state.hidden,\n      \"data-error\": this.#hasError.bind(this),\n      \"aria-hidden\": $ariaBool(this.$state.hidden)\n    });\n  }\n  onAttach(el) {\n    effect(this.#watchVideo.bind(this));\n    effect(this.#watchSrc.bind(this));\n    effect(this.#watchCrossOrigin.bind(this));\n    effect(this.#watchHidden.bind(this));\n    effect(this.#onSrcChange.bind(this));\n    effect(this.#onUpdateTime.bind(this));\n  }\n  #watchVideo() {\n    const video = this.$state.video();\n    if (!video) return;\n    if (video.readyState >= 2) this.#onCanPlay();\n    new EventsController(video).add(\"canplay\", this.#onCanPlay.bind(this)).add(\"error\", this.#onError.bind(this));\n  }\n  #watchSrc() {\n    const { src } = this.$state, { canLoad } = this.#media.$state;\n    src.set(canLoad() ? this.$props.src() : null);\n  }\n  #watchCrossOrigin() {\n    const { crossOrigin: crossOriginProp } = this.$props, { crossOrigin: crossOriginState } = this.$state, { crossOrigin: mediaCrossOrigin } = this.#media.$state, crossOrigin = crossOriginProp() !== null ? crossOriginProp() : mediaCrossOrigin();\n    crossOriginState.set(crossOrigin === true ? \"anonymous\" : crossOrigin);\n  }\n  #isLoading() {\n    const { canPlay, hidden } = this.$state;\n    return !canPlay() && !hidden();\n  }\n  #hasError() {\n    const { error } = this.$state;\n    return !isNull(error);\n  }\n  #watchHidden() {\n    const { src, hidden } = this.$state, { canLoad, duration } = this.#media.$state;\n    hidden.set(canLoad() && (!src() || this.#hasError() || !Number.isFinite(duration())));\n  }\n  #onSrcChange() {\n    const { src, canPlay, error } = this.$state;\n    src();\n    canPlay.set(false);\n    error.set(null);\n  }\n  #onCanPlay(event) {\n    const { canPlay, error } = this.$state;\n    canPlay.set(true);\n    error.set(null);\n    this.dispatch(\"can-play\", { trigger: event });\n  }\n  #onError(event) {\n    const { canPlay, error } = this.$state;\n    canPlay.set(false);\n    error.set(event);\n    this.dispatch(\"error\", { trigger: event });\n  }\n  #onUpdateTime() {\n    const { video, canPlay } = this.$state, { duration } = this.#media.$state, { pointerRate } = this.#slider, media = video(), canUpdate = canPlay() && media && Number.isFinite(duration()) && Number.isFinite(pointerRate());\n    if (canUpdate) {\n      media.currentTime = pointerRate() * duration();\n    }\n  }\n}\nconst slidervideo__proto = SliderVideo.prototype;\nprop(slidervideo__proto, \"video\");\n\nclass SliderValue extends Component {\n  static props = {\n    type: \"pointer\",\n    format: null,\n    showHours: false,\n    showMs: false,\n    padHours: null,\n    padMinutes: null,\n    decimalPlaces: 2\n  };\n  #format;\n  #text;\n  #slider;\n  onSetup() {\n    this.#slider = useState(Slider.state);\n    this.#format = useContext(sliderValueFormatContext);\n    this.#text = computed(this.getValueText.bind(this));\n  }\n  /**\n   * Returns the current value formatted as text based on prop settings.\n   */\n  getValueText() {\n    const {\n      type,\n      format: $format,\n      decimalPlaces,\n      padHours,\n      padMinutes,\n      showHours,\n      showMs\n    } = this.$props, { value: sliderValue, pointerValue, min, max } = this.#slider, format = $format?.() ?? this.#format.default;\n    const value = type() === \"current\" ? sliderValue() : pointerValue();\n    if (format === \"percent\") {\n      const range = max() - min();\n      const percent = value / range * 100;\n      return (this.#format.percent ?? round)(percent, decimalPlaces()) + \"%\";\n    } else if (format === \"time\") {\n      return (this.#format.time ?? formatTime)(value, {\n        padHrs: padHours(),\n        padMins: padMinutes(),\n        showHrs: showHours(),\n        showMs: showMs()\n      });\n    } else {\n      return (this.#format.value?.(value) ?? value.toFixed(2)) + \"\";\n    }\n  }\n}\nconst slidervalue__proto = SliderValue.prototype;\nmethod(slidervalue__proto, \"getValueText\");\n\nclass SliderPreview extends Component {\n  static props = {\n    offset: 0,\n    noClamp: false\n  };\n  #slider;\n  onSetup() {\n    this.#slider = useContext(sliderContext);\n    const { active } = useState(Slider.state);\n    this.setAttributes({\n      \"data-visible\": active\n    });\n  }\n  onAttach(el) {\n    Object.assign(el.style, {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"max-content\"\n    });\n  }\n  onConnect(el) {\n    const { preview } = this.#slider;\n    preview.set(el);\n    onDispose(() => preview.set(null));\n    effect(this.#updatePlacement.bind(this));\n    const resize = new ResizeObserver(this.#updatePlacement.bind(this));\n    resize.observe(el);\n    onDispose(() => resize.disconnect());\n  }\n  #updatePlacement = animationFrameThrottle(() => {\n    const { disabled, orientation } = this.#slider;\n    if (disabled()) return;\n    const el = this.el, { offset, noClamp } = this.$props;\n    if (!el) return;\n    updateSliderPreviewPlacement(el, {\n      clamp: !noClamp(),\n      offset: offset(),\n      orientation: orientation()\n    });\n  });\n}\nfunction updateSliderPreviewPlacement(el, {\n  clamp,\n  offset,\n  orientation\n}) {\n  const computedStyle = getComputedStyle(el), width = parseFloat(computedStyle.width), height = parseFloat(computedStyle.height), styles = {\n    top: null,\n    right: null,\n    bottom: null,\n    left: null\n  };\n  styles[orientation === \"horizontal\" ? \"bottom\" : \"left\"] = `calc(100% + var(--media-slider-preview-offset, ${offset}px))`;\n  if (orientation === \"horizontal\") {\n    const widthHalf = width / 2;\n    if (!clamp) {\n      styles.left = `calc(var(--slider-pointer) - ${widthHalf}px)`;\n    } else {\n      const leftClamp = `max(0px, calc(var(--slider-pointer) - ${widthHalf}px))`, rightClamp = `calc(100% - ${width}px)`;\n      styles.left = `min(${leftClamp}, ${rightClamp})`;\n    }\n  } else {\n    const heightHalf = height / 2;\n    if (!clamp) {\n      styles.bottom = `calc(var(--slider-pointer) - ${heightHalf}px)`;\n    } else {\n      const topClamp = `max(${heightHalf}px, calc(var(--slider-pointer) - ${heightHalf}px))`, bottomClamp = `calc(100% - ${height}px)`;\n      styles.bottom = `min(${topClamp}, ${bottomClamp})`;\n    }\n  }\n  Object.assign(el.style, styles);\n}\n\nclass VolumeSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    keyStep: 5,\n    shiftKeyMultiplier: 2\n  };\n  static state = sliderState;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    const { audioGain } = this.#media.$state;\n    provideContext(sliderValueFormatContext, {\n      default: \"percent\",\n      value(value) {\n        return (value * (audioGain() ?? 1)).toFixed(2);\n      },\n      percent(value) {\n        return Math.round(value * (audioGain() ?? 1));\n      }\n    });\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueMax: this.#getARIAValueMax.bind(this),\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchVolume.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-volume-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Volume\");\n    const { canSetVolume } = this.#media.$state;\n    this.setAttributes({\n      \"data-supported\": canSetVolume,\n      \"aria-hidden\": $ariaBool(() => !canSetVolume())\n    });\n  }\n  #getARIAValueNow() {\n    const { value } = this.$state, { audioGain } = this.#media.$state;\n    return Math.round(value() * (audioGain() ?? 1));\n  }\n  #getARIAValueText() {\n    const { value, max } = this.$state, { audioGain } = this.#media.$state;\n    return round(value() / max() * (audioGain() ?? 1) * 100, 2) + \"%\";\n  }\n  #getARIAValueMax() {\n    const { audioGain } = this.#media.$state;\n    return this.$state.max() * (audioGain() ?? 1);\n  }\n  #isDisabled() {\n    const { disabled } = this.$props, { canSetVolume } = this.#media.$state;\n    return disabled() || !canSetVolume();\n  }\n  #watchVolume() {\n    const { muted, volume } = this.#media.$state;\n    const newValue = muted() ? 0 : volume() * 100;\n    this.$state.value.set(newValue);\n    this.dispatch(\"value-change\", { detail: newValue });\n  }\n  #throttleVolumeChange = functionThrottle(this.#onVolumeChange.bind(this), 25);\n  #onVolumeChange(event) {\n    if (!event.trigger) return;\n    const mediaVolume = round(event.detail / 100, 3);\n    this.#media.remote.changeVolume(mediaVolume, event);\n  }\n  #onValueChange(event) {\n    this.#throttleVolumeChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#throttleVolumeChange(event);\n  }\n}\n\nclass AudioGainSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 25,\n    keyStep: 25,\n    shiftKeyMultiplier: 2,\n    min: 0,\n    max: 300\n  };\n  static state = sliderState;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    provideContext(sliderValueFormatContext, {\n      default: \"percent\",\n      percent: (_, decimalPlaces) => {\n        return round(this.$state.value(), decimalPlaces) + \"%\";\n      }\n    });\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchMinMax.bind(this));\n    effect(this.#watchAudioGain.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-audio-gain-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Audio Boost\");\n    const { canSetAudioGain } = this.#media.$state;\n    this.setAttributes({\n      \"data-supported\": canSetAudioGain,\n      \"aria-hidden\": $ariaBool(() => !canSetAudioGain())\n    });\n  }\n  #getARIAValueNow() {\n    const { value } = this.$state;\n    return Math.round(value());\n  }\n  #getARIAValueText() {\n    const { value } = this.$state;\n    return value() + \"%\";\n  }\n  #watchMinMax() {\n    const { min, max } = this.$props;\n    this.$state.min.set(min());\n    this.$state.max.set(max());\n  }\n  #watchAudioGain() {\n    const { audioGain } = this.#media.$state, value = ((audioGain() ?? 1) - 1) * 100;\n    this.$state.value.set(value);\n    this.dispatch(\"value-change\", { detail: value });\n  }\n  #isDisabled() {\n    const { disabled } = this.$props, { canSetAudioGain } = this.#media.$state;\n    return disabled() || !canSetAudioGain();\n  }\n  #onAudioGainChange(event) {\n    if (!event.trigger) return;\n    const gain = round(1 + event.detail / 100, 2);\n    this.#media.remote.changeAudioGain(gain, event);\n  }\n  #onValueChange(event) {\n    this.#onAudioGainChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#onAudioGainChange(event);\n  }\n}\n\nclass SpeedSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 0.25,\n    keyStep: 0.25,\n    shiftKeyMultiplier: 2,\n    min: 0,\n    max: 2\n  };\n  static state = sliderState;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: this.#roundValue,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchMinMax.bind(this));\n    effect(this.#watchPlaybackRate.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-speed-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Speed\");\n    const { canSetPlaybackRate } = this.#media.$state;\n    this.setAttributes({\n      \"data-supported\": canSetPlaybackRate,\n      \"aria-hidden\": $ariaBool(() => !canSetPlaybackRate())\n    });\n  }\n  #getARIAValueNow() {\n    const { value } = this.$state;\n    return value();\n  }\n  #getARIAValueText() {\n    const { value } = this.$state;\n    return value() + \"x\";\n  }\n  #watchMinMax() {\n    const { min, max } = this.$props;\n    this.$state.min.set(min());\n    this.$state.max.set(max());\n  }\n  #watchPlaybackRate() {\n    const { playbackRate } = this.#media.$state;\n    const newValue = playbackRate();\n    this.$state.value.set(newValue);\n    this.dispatch(\"value-change\", { detail: newValue });\n  }\n  #roundValue(value) {\n    return round(value, 2);\n  }\n  #isDisabled() {\n    const { disabled } = this.$props, { canSetPlaybackRate } = this.#media.$state;\n    return disabled() || !canSetPlaybackRate();\n  }\n  #throttledSpeedChange = functionThrottle(this.#onPlaybackRateChange.bind(this), 25);\n  #onPlaybackRateChange(event) {\n    if (!event.trigger) return;\n    const rate = event.detail;\n    this.#media.remote.changePlaybackRate(rate, event);\n  }\n  #onValueChange(event) {\n    this.#throttledSpeedChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#throttledSpeedChange(event);\n  }\n}\n\nclass QualitySlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 1,\n    keyStep: 1,\n    shiftKeyMultiplier: 1\n  };\n  static state = sliderState;\n  #media;\n  #sortedQualities = computed(() => {\n    const { qualities } = this.#media.$state;\n    return sortVideoQualities(qualities());\n  });\n  onSetup() {\n    this.#media = useMediaContext();\n    new SliderController({\n      getStep: this.$props.step,\n      getKeyStep: this.$props.keyStep,\n      roundValue: Math.round,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    }).attach(this);\n    effect(this.#watchMax.bind(this));\n    effect(this.#watchQuality.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-quality-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Video Quality\");\n    const { qualities, canSetQuality } = this.#media.$state, $supported = computed(() => canSetQuality() && qualities().length > 0);\n    this.setAttributes({\n      \"data-supported\": $supported,\n      \"aria-hidden\": $ariaBool(() => !$supported())\n    });\n  }\n  #getARIAValueNow() {\n    const { value } = this.$state;\n    return value();\n  }\n  #getARIAValueText() {\n    const { quality } = this.#media.$state;\n    if (!quality()) return \"\";\n    const { height, bitrate } = quality(), bitrateText = bitrate && bitrate > 0 ? `${(bitrate / 1e6).toFixed(2)} Mbps` : null;\n    return height ? `${height}p${bitrateText ? ` (${bitrateText})` : \"\"}` : \"Auto\";\n  }\n  #watchMax() {\n    const $qualities = this.#sortedQualities();\n    this.$state.max.set(Math.max(0, $qualities.length - 1));\n  }\n  #watchQuality() {\n    let { quality } = this.#media.$state, $qualities = this.#sortedQualities(), value = Math.max(0, $qualities.indexOf(quality()));\n    this.$state.value.set(value);\n    this.dispatch(\"value-change\", { detail: value });\n  }\n  #isDisabled() {\n    const { disabled } = this.$props, { canSetQuality, qualities } = this.#media.$state;\n    return disabled() || qualities().length <= 1 || !canSetQuality();\n  }\n  #throttledQualityChange = functionThrottle(this.#onQualityChange.bind(this), 25);\n  #onQualityChange(event) {\n    if (!event.trigger) return;\n    const { qualities } = this.#media, quality = peek(this.#sortedQualities)[event.detail];\n    this.#media.remote.changeQuality(qualities.indexOf(quality), event);\n  }\n  #onValueChange(event) {\n    this.#throttledQualityChange(event);\n  }\n  #onDragValueChange(event) {\n    this.#throttledQualityChange(event);\n  }\n}\n\nclass TimeSlider extends Component {\n  static props = {\n    ...SliderController.props,\n    step: 0.1,\n    keyStep: 5,\n    shiftKeyMultiplier: 2,\n    pauseWhileDragging: false,\n    noSwipeGesture: false,\n    seekingRequestThrottle: 100\n  };\n  static state = sliderState;\n  #media;\n  #dispatchSeeking;\n  #chapter = signal(null);\n  constructor() {\n    super();\n    const { noSwipeGesture } = this.$props;\n    new SliderController({\n      swipeGesture: () => !noSwipeGesture(),\n      getValue: this.#getValue.bind(this),\n      getStep: this.#getStep.bind(this),\n      getKeyStep: this.#getKeyStep.bind(this),\n      roundValue: this.#roundValue,\n      isDisabled: this.#isDisabled.bind(this),\n      aria: {\n        valueNow: this.#getARIAValueNow.bind(this),\n        valueText: this.#getARIAValueText.bind(this)\n      },\n      onDragStart: this.#onDragStart.bind(this),\n      onDragValueChange: this.#onDragValueChange.bind(this),\n      onDragEnd: this.#onDragEnd.bind(this),\n      onValueChange: this.#onValueChange.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    provideContext(sliderValueFormatContext, {\n      default: \"time\",\n      value: this.#formatValue.bind(this),\n      time: this.#formatTime.bind(this)\n    });\n    this.setAttributes({\n      \"data-chapters\": this.#hasChapters.bind(this)\n    });\n    this.setStyles({\n      \"--slider-progress\": this.#calcBufferedPercent.bind(this)\n    });\n    effect(this.#watchCurrentTime.bind(this));\n    effect(this.#watchSeekingThrottle.bind(this));\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-time-slider\", \"\");\n    setAttributeIfEmpty(el, \"aria-label\", \"Seek\");\n  }\n  onConnect(el) {\n    effect(this.#watchPreviewing.bind(this));\n    watchActiveTextTrack(this.#media.textTracks, \"chapters\", this.#chapter.set);\n  }\n  #calcBufferedPercent() {\n    const { bufferedEnd, duration } = this.#media.$state;\n    return round(Math.min(bufferedEnd() / Math.max(duration(), 1), 1) * 100, 3) + \"%\";\n  }\n  #hasChapters() {\n    const { duration } = this.#media.$state;\n    return this.#chapter()?.cues.length && Number.isFinite(duration()) && duration() > 0;\n  }\n  #watchSeekingThrottle() {\n    this.#dispatchSeeking = functionThrottle(\n      this.#seeking.bind(this),\n      this.$props.seekingRequestThrottle()\n    );\n  }\n  #watchCurrentTime() {\n    if (this.$state.hidden()) return;\n    const { value, dragging } = this.$state, newValue = this.#getValue();\n    if (!peek(dragging)) {\n      value.set(newValue);\n      this.dispatch(\"value-change\", { detail: newValue });\n    }\n  }\n  #watchPreviewing() {\n    const player = this.#media.player.el, { preview } = useContext(sliderContext);\n    player && preview() && setAttribute(player, \"data-preview\", this.$state.active());\n  }\n  #seeking(time, event) {\n    this.#media.remote.seeking(time, event);\n  }\n  #seek(time, percent, event) {\n    this.#dispatchSeeking.cancel();\n    const { live } = this.#media.$state;\n    if (live() && percent >= 99) {\n      this.#media.remote.seekToLiveEdge(event);\n      return;\n    }\n    this.#media.remote.seek(time, event);\n  }\n  #playingBeforeDragStart = false;\n  #onDragStart(event) {\n    const { pauseWhileDragging } = this.$props;\n    if (pauseWhileDragging()) {\n      const { paused } = this.#media.$state;\n      this.#playingBeforeDragStart = !paused();\n      this.#media.remote.pause(event);\n    }\n  }\n  #onDragValueChange(event) {\n    this.#dispatchSeeking(this.#percentToTime(event.detail), event);\n  }\n  #onDragEnd(event) {\n    const { seeking } = this.#media.$state;\n    if (!peek(seeking)) this.#seeking(this.#percentToTime(event.detail), event);\n    const percent = event.detail;\n    this.#seek(this.#percentToTime(percent), percent, event);\n    const { pauseWhileDragging } = this.$props;\n    if (pauseWhileDragging() && this.#playingBeforeDragStart) {\n      this.#media.remote.play(event);\n      this.#playingBeforeDragStart = false;\n    }\n  }\n  #onValueChange(event) {\n    const { dragging } = this.$state;\n    if (dragging() || !event.trigger) return;\n    this.#onDragEnd(event);\n  }\n  // -------------------------------------------------------------------------------------------\n  // Props\n  // -------------------------------------------------------------------------------------------\n  #getValue() {\n    const { currentTime } = this.#media.$state;\n    return this.#timeToPercent(currentTime());\n  }\n  #getStep() {\n    const value = this.$props.step() / this.#media.$state.duration() * 100;\n    return Number.isFinite(value) ? value : 1;\n  }\n  #getKeyStep() {\n    const value = this.$props.keyStep() / this.#media.$state.duration() * 100;\n    return Number.isFinite(value) ? value : 1;\n  }\n  #roundValue(value) {\n    return round(value, 3);\n  }\n  #isDisabled() {\n    const { disabled } = this.$props, { canSeek } = this.#media.$state;\n    return disabled() || !canSeek();\n  }\n  // -------------------------------------------------------------------------------------------\n  // ARIA\n  // -------------------------------------------------------------------------------------------\n  #getARIAValueNow() {\n    const { value } = this.$state;\n    return Math.round(value());\n  }\n  #getARIAValueText() {\n    const time = this.#percentToTime(this.$state.value()), { duration } = this.#media.$state;\n    return Number.isFinite(time) ? `${formatSpokenTime(time)} out of ${formatSpokenTime(duration())}` : \"live\";\n  }\n  // -------------------------------------------------------------------------------------------\n  // Format\n  // -------------------------------------------------------------------------------------------\n  #percentToTime(percent) {\n    const { duration } = this.#media.$state;\n    return round(percent / 100 * duration(), 5);\n  }\n  #timeToPercent(time) {\n    const { liveEdge, duration } = this.#media.$state, rate = Math.max(0, Math.min(1, liveEdge() ? 1 : Math.min(time, duration()) / duration()));\n    return Number.isNaN(rate) ? 0 : Number.isFinite(rate) ? rate * 100 : 100;\n  }\n  #formatValue(percent) {\n    const time = this.#percentToTime(percent), { live, duration } = this.#media.$state;\n    return Number.isFinite(time) ? (live() ? time - duration() : time).toFixed(0) : \"LIVE\";\n  }\n  #formatTime(percent, options) {\n    const time = this.#percentToTime(percent), { live, duration } = this.#media.$state, value = live() ? time - duration() : time;\n    return Number.isFinite(time) ? `${value < 0 ? \"-\" : \"\"}${formatTime(Math.abs(value), options)}` : \"LIVE\";\n  }\n}\n\nclass SliderChapters extends Component {\n  static props = {\n    disabled: false\n  };\n  #media;\n  #sliderState;\n  #updateScope;\n  #titleRef = null;\n  #refs = [];\n  #$track = signal(null);\n  #$cues = signal([]);\n  #activeIndex = signal(-1);\n  #activePointerIndex = signal(-1);\n  #bufferedIndex = 0;\n  get cues() {\n    return this.#$cues();\n  }\n  get activeCue() {\n    return this.#$cues()[this.#activeIndex()] || null;\n  }\n  get activePointerCue() {\n    return this.#$cues()[this.#activePointerIndex()] || null;\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#sliderState = useState(TimeSlider.state);\n  }\n  onAttach(el) {\n    watchActiveTextTrack(this.#media.textTracks, \"chapters\", this.#setTrack.bind(this));\n    effect(this.#watchSource.bind(this));\n  }\n  onConnect() {\n    onDispose(() => this.#reset.bind(this));\n  }\n  onDestroy() {\n    this.#setTrack(null);\n  }\n  setRefs(refs) {\n    this.#refs = refs;\n    this.#updateScope?.dispose();\n    if (this.#refs.length === 1) {\n      const el = this.#refs[0];\n      el.style.width = \"100%\";\n      el.style.setProperty(\"--chapter-fill\", \"var(--slider-fill)\");\n      el.style.setProperty(\"--chapter-progress\", \"var(--slider-progress)\");\n    } else if (this.#refs.length > 0) {\n      scoped(() => this.#watch(), this.#updateScope = createScope());\n    }\n  }\n  #setTrack(track) {\n    if (peek(this.#$track) === track) return;\n    this.#reset();\n    this.#$track.set(track);\n  }\n  #reset() {\n    this.#refs = [];\n    this.#$cues.set([]);\n    this.#activeIndex.set(-1);\n    this.#activePointerIndex.set(-1);\n    this.#bufferedIndex = 0;\n    this.#updateScope?.dispose();\n  }\n  #watch() {\n    if (!this.#refs.length) return;\n    effect(this.#watchUpdates.bind(this));\n  }\n  #watchUpdates() {\n    const { hidden } = this.#sliderState;\n    if (hidden()) return;\n    effect(this.#watchContainerWidths.bind(this));\n    effect(this.#watchFillPercent.bind(this));\n    effect(this.#watchPointerPercent.bind(this));\n    effect(this.#watchBufferedPercent.bind(this));\n  }\n  #watchContainerWidths() {\n    const cues = this.#$cues();\n    if (!cues.length) return;\n    let cue, { seekableStart, seekableEnd } = this.#media.$state, startTime = seekableStart(), endTime = seekableEnd() || cues[cues.length - 1].endTime, duration = endTime - startTime, remainingWidth = 100;\n    for (let i = 0; i < cues.length; i++) {\n      cue = cues[i];\n      if (this.#refs[i]) {\n        const width = i === cues.length - 1 ? remainingWidth : round((cue.endTime - Math.max(startTime, cue.startTime)) / duration * 100, 3);\n        this.#refs[i].style.width = width + \"%\";\n        remainingWidth -= width;\n      }\n    }\n  }\n  #watchFillPercent() {\n    let { liveEdge, seekableStart, seekableEnd } = this.#media.$state, { fillPercent, value } = this.#sliderState, cues = this.#$cues(), isLiveEdge = liveEdge(), prevActiveIndex = peek(this.#activeIndex), currentChapter = cues[prevActiveIndex];\n    let currentActiveIndex = isLiveEdge ? this.#$cues.length - 1 : this.#findActiveChapterIndex(\n      currentChapter ? currentChapter.startTime / seekableEnd() * 100 <= peek(value) ? prevActiveIndex : 0 : 0,\n      fillPercent()\n    );\n    if (isLiveEdge || !currentChapter) {\n      this.#updateFillPercents(0, cues.length, 100);\n    } else if (currentActiveIndex > prevActiveIndex) {\n      this.#updateFillPercents(prevActiveIndex, currentActiveIndex, 100);\n    } else if (currentActiveIndex < prevActiveIndex) {\n      this.#updateFillPercents(currentActiveIndex + 1, prevActiveIndex + 1, 0);\n    }\n    const percent = isLiveEdge ? 100 : this.#calcPercent(\n      cues[currentActiveIndex],\n      fillPercent(),\n      seekableStart(),\n      this.#getEndTime(cues)\n    );\n    this.#updateFillPercent(this.#refs[currentActiveIndex], percent);\n    this.#activeIndex.set(currentActiveIndex);\n  }\n  #watchPointerPercent() {\n    let { hidden, pointerPercent } = this.#sliderState;\n    if (hidden()) {\n      this.#activePointerIndex.set(-1);\n      return;\n    }\n    const activeIndex = this.#findActiveChapterIndex(0, pointerPercent());\n    this.#activePointerIndex.set(activeIndex);\n  }\n  #updateFillPercents(start, end, percent) {\n    for (let i = start; i < end; i++) this.#updateFillPercent(this.#refs[i], percent);\n  }\n  #updateFillPercent(ref, percent) {\n    if (!ref) return;\n    ref.style.setProperty(\"--chapter-fill\", percent + \"%\");\n    setAttribute(ref, \"data-active\", percent > 0 && percent < 100);\n    setAttribute(ref, \"data-ended\", percent === 100);\n  }\n  #findActiveChapterIndex(startIndex, percent) {\n    let chapterPercent = 0, cues = this.#$cues();\n    if (percent === 0) return 0;\n    else if (percent === 100) return cues.length - 1;\n    let { seekableStart } = this.#media.$state, startTime = seekableStart(), endTime = this.#getEndTime(cues);\n    for (let i = startIndex; i < cues.length; i++) {\n      chapterPercent = this.#calcPercent(cues[i], percent, startTime, endTime);\n      if (chapterPercent >= 0 && chapterPercent < 100) return i;\n    }\n    return 0;\n  }\n  #watchBufferedPercent() {\n    this.#updateBufferedPercent(this.#bufferedPercent());\n  }\n  #updateBufferedPercent = animationFrameThrottle((bufferedPercent) => {\n    let percent, cues = this.#$cues(), { seekableStart } = this.#media.$state, startTime = seekableStart(), endTime = this.#getEndTime(cues);\n    for (let i = this.#bufferedIndex; i < this.#refs.length; i++) {\n      percent = this.#calcPercent(cues[i], bufferedPercent, startTime, endTime);\n      this.#refs[i]?.style.setProperty(\"--chapter-progress\", percent + \"%\");\n      if (percent < 100) {\n        this.#bufferedIndex = i;\n        break;\n      }\n    }\n  });\n  #bufferedPercent = computed(this.#calcMediaBufferedPercent.bind(this));\n  #calcMediaBufferedPercent() {\n    const { bufferedEnd, duration } = this.#media.$state;\n    return round(Math.min(bufferedEnd() / Math.max(duration(), 1), 1), 3) * 100;\n  }\n  #getEndTime(cues) {\n    const { seekableEnd } = this.#media.$state, endTime = seekableEnd();\n    return Number.isFinite(endTime) ? endTime : cues[cues.length - 1]?.endTime || 0;\n  }\n  #calcPercent(cue, percent, startTime, endTime) {\n    if (!cue) return 0;\n    const cues = this.#$cues();\n    if (cues.length === 0) return 0;\n    const duration = endTime - startTime, cueStartTime = Math.max(0, cue.startTime - startTime), cueEndTime = Math.min(endTime, cue.endTime) - startTime;\n    const startRatio = cueStartTime / duration, startPercent = startRatio * 100, endPercent = Math.min(1, startRatio + (cueEndTime - cueStartTime) / duration) * 100;\n    return Math.max(\n      0,\n      round(\n        percent >= endPercent ? 100 : (percent - startPercent) / (endPercent - startPercent) * 100,\n        3\n      )\n    );\n  }\n  #fillGaps(cues) {\n    let chapters = [], { seekableStart, seekableEnd, duration } = this.#media.$state, startTime = seekableStart(), endTime = seekableEnd();\n    cues = cues.filter((cue) => cue.startTime <= endTime && cue.endTime >= startTime);\n    const firstCue = cues[0];\n    if (firstCue && firstCue.startTime > startTime) {\n      chapters.push(new window.VTTCue(startTime, firstCue.startTime, \"\"));\n    }\n    for (let i = 0; i < cues.length - 1; i++) {\n      const currentCue = cues[i], nextCue = cues[i + 1];\n      chapters.push(currentCue);\n      if (nextCue) {\n        const timeDiff = nextCue.startTime - currentCue.endTime;\n        if (timeDiff > 0) {\n          chapters.push(new window.VTTCue(currentCue.endTime, currentCue.endTime + timeDiff, \"\"));\n        }\n      }\n    }\n    const lastCue = cues[cues.length - 1];\n    if (lastCue) {\n      chapters.push(lastCue);\n      const endTime2 = duration();\n      if (endTime2 >= 0 && endTime2 - lastCue.endTime > 1) {\n        chapters.push(new window.VTTCue(lastCue.endTime, duration(), \"\"));\n      }\n    }\n    return chapters;\n  }\n  #watchSource() {\n    const { source } = this.#media.$state;\n    source();\n    this.#onTrackChange();\n  }\n  #onTrackChange() {\n    if (!this.scope) return;\n    const { disabled } = this.$props;\n    if (disabled()) {\n      this.#$cues.set([]);\n      this.#activeIndex.set(0);\n      this.#bufferedIndex = 0;\n      return;\n    }\n    const track = this.#$track();\n    if (track) {\n      const onCuesChange = this.#onCuesChange.bind(this);\n      onCuesChange();\n      new EventsController(track).add(\"add-cue\", onCuesChange).add(\"remove-cue\", onCuesChange);\n      effect(this.#watchMediaDuration.bind(this));\n    }\n    this.#titleRef = this.#findChapterTitleRef();\n    if (this.#titleRef) effect(this.#onChapterTitleChange.bind(this));\n    return () => {\n      if (this.#titleRef) {\n        this.#titleRef.textContent = \"\";\n        this.#titleRef = null;\n      }\n    };\n  }\n  #watchMediaDuration() {\n    this.#media.$state.duration();\n    this.#onCuesChange();\n  }\n  #onCuesChange = functionDebounce(\n    () => {\n      const track = peek(this.#$track);\n      if (!this.scope || !track || !track.cues.length) return;\n      this.#$cues.set(this.#fillGaps(track.cues));\n      this.#activeIndex.set(0);\n      this.#bufferedIndex = 0;\n    },\n    150,\n    true\n  );\n  #onChapterTitleChange() {\n    const cue = this.activePointerCue || this.activeCue;\n    if (this.#titleRef) this.#titleRef.textContent = cue?.text || \"\";\n  }\n  #findParentSlider() {\n    let node = this.el;\n    while (node && node.getAttribute(\"role\") !== \"slider\") {\n      node = node.parentElement;\n    }\n    return node;\n  }\n  #findChapterTitleRef() {\n    const slider = this.#findParentSlider();\n    return slider ? slider.querySelector('[data-part=\"chapter-title\"]') : null;\n  }\n}\nconst sliderchapters__proto = SliderChapters.prototype;\nprop(sliderchapters__proto, \"cues\");\nprop(sliderchapters__proto, \"activeCue\");\nprop(sliderchapters__proto, \"activePointerCue\");\nmethod(sliderchapters__proto, \"setRefs\");\n\nconst menuContext = createContext();\n\nfunction scrollIntoView(el, options) {\n  const scrolls = r(el, options);\n  for (const { el: el2, top, left } of scrolls) {\n    el2.scroll({ top, left, behavior: options.behavior });\n  }\n}\nfunction scrollIntoCenter(el, options = {}) {\n  scrollIntoView(el, {\n    scrollMode: \"if-needed\",\n    block: \"center\",\n    inline: \"center\",\n    ...options\n  });\n}\n\nconst FOCUSABLE_ELEMENTS_SELECTOR = /* @__PURE__ */ [\n  \"a[href]\",\n  \"[tabindex]\",\n  \"input\",\n  \"select\",\n  \"button\"\n].map((selector) => `${selector}:not([aria-hidden='true'])`).join(\",\");\nconst VALID_KEYS = /* @__PURE__ */ new Set([\n  \"Escape\",\n  \"Tab\",\n  \"ArrowUp\",\n  \"ArrowDown\",\n  \"Home\",\n  \"PageUp\",\n  \"End\",\n  \"PageDown\",\n  \"Enter\",\n  \" \"\n]);\nclass MenuFocusController {\n  #index = -1;\n  #el = null;\n  #elements = [];\n  #delegate;\n  get items() {\n    return this.#elements;\n  }\n  constructor(delegate) {\n    this.#delegate = delegate;\n  }\n  attachMenu(el) {\n    listenEvent(el, \"focus\", this.#onFocus.bind(this));\n    this.#el = el;\n    onDispose(() => {\n      this.#el = null;\n    });\n  }\n  listen() {\n    if (!this.#el) return;\n    this.update();\n    new EventsController(this.#el).add(\"keyup\", this.#onKeyUp.bind(this)).add(\"keydown\", this.#onKeyDown.bind(this));\n    onDispose(() => {\n      this.#index = -1;\n      this.#elements = [];\n    });\n  }\n  update() {\n    this.#index = 0;\n    this.#elements = this.#getFocusableElements();\n  }\n  scroll(index = this.#findActiveIndex()) {\n    const element = this.#elements[index];\n    if (element) {\n      requestAnimationFrame(() => {\n        requestAnimationFrame(() => {\n          scrollIntoCenter(element, {\n            behavior: \"smooth\",\n            boundary: (el) => {\n              return !el.hasAttribute(\"data-root\");\n            }\n          });\n        });\n      });\n    }\n  }\n  focusActive(scroll = true) {\n    const index = this.#findActiveIndex();\n    this.#focusAt(index >= 0 ? index : 0, scroll);\n  }\n  #focusAt(index, scroll = true) {\n    this.#index = index;\n    if (this.#elements[index]) {\n      this.#elements[index].focus({ preventScroll: true });\n      if (scroll) this.scroll(index);\n    } else {\n      this.#el?.focus({ preventScroll: true });\n    }\n  }\n  #findActiveIndex() {\n    return this.#elements.findIndex(\n      (el) => document.activeElement === el || el.getAttribute(\"role\") === \"menuitemradio\" && el.getAttribute(\"aria-checked\") === \"true\"\n    );\n  }\n  #onFocus() {\n    if (this.#index >= 0) return;\n    this.update();\n    this.focusActive();\n  }\n  #validateKeyEvent(event) {\n    const el = event.target;\n    if (wasEnterKeyPressed(event) && el instanceof Element) {\n      const role = el.getAttribute(\"role\");\n      return !/a|input|select|button/.test(el.localName) && !role;\n    }\n    return VALID_KEYS.has(event.key);\n  }\n  #onKeyUp(event) {\n    if (!this.#validateKeyEvent(event)) return;\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  #onKeyDown(event) {\n    if (!this.#validateKeyEvent(event)) return;\n    event.stopPropagation();\n    event.preventDefault();\n    switch (event.key) {\n      case \"Escape\":\n        this.#delegate.closeMenu(event);\n        break;\n      case \"Tab\":\n        this.#focusAt(this.#nextIndex(event.shiftKey ? -1 : 1));\n        break;\n      case \"ArrowUp\":\n        this.#focusAt(this.#nextIndex(-1));\n        break;\n      case \"ArrowDown\":\n        this.#focusAt(this.#nextIndex(1));\n        break;\n      case \"Home\":\n      case \"PageUp\":\n        this.#focusAt(0);\n        break;\n      case \"End\":\n      case \"PageDown\":\n        this.#focusAt(this.#elements.length - 1);\n        break;\n    }\n  }\n  #nextIndex(delta) {\n    let index = this.#index;\n    do {\n      index = (index + delta + this.#elements.length) % this.#elements.length;\n    } while (this.#elements[index]?.offsetParent === null);\n    return index;\n  }\n  #getFocusableElements() {\n    if (!this.#el) return [];\n    const focusableElements = this.#el.querySelectorAll(FOCUSABLE_ELEMENTS_SELECTOR), elements = [];\n    const is = (node) => {\n      return node.getAttribute(\"role\") === \"menu\";\n    };\n    for (const el of focusableElements) {\n      if (isHTMLElement(el) && el.offsetParent !== null && // does not have display: none\n      isElementParent(this.#el, el, is)) {\n        elements.push(el);\n      }\n    }\n    return elements;\n  }\n}\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = __getOwnPropDesc(target, key) ;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (decorator(target, key, result) ) || result;\n  if (result) __defProp(target, key, result);\n  return result;\n};\nlet idCount = 0;\nclass Menu extends Component {\n  static props = {\n    showDelay: 0\n  };\n  #media;\n  #menuId;\n  #menuButtonId;\n  #expanded = signal(false);\n  #disabled = signal(false);\n  #trigger = signal(null);\n  #content = signal(null);\n  #parentMenu;\n  #submenus = /* @__PURE__ */ new Set();\n  #menuObserver = null;\n  #popper;\n  #focus;\n  #isSliderActive = false;\n  #isTriggerDisabled = signal(false);\n  #transitionCallbacks = /* @__PURE__ */ new Set();\n  get triggerElement() {\n    return this.#trigger();\n  }\n  get contentElement() {\n    return this.#content();\n  }\n  get isSubmenu() {\n    return !!this.#parentMenu;\n  }\n  constructor() {\n    super();\n    const { showDelay } = this.$props;\n    this.#popper = new Popper({\n      trigger: this.#trigger,\n      content: this.#content,\n      showDelay,\n      listen: (trigger, show, hide) => {\n        onPress(trigger, (event) => {\n          if (this.#expanded()) hide(event);\n          else show(event);\n        });\n        const closeTarget = this.#getCloseTarget();\n        if (closeTarget) {\n          onPress(closeTarget, (event) => {\n            event.stopPropagation();\n            hide(event);\n          });\n        }\n      },\n      onChange: this.#onExpandedChange.bind(this)\n    });\n  }\n  onSetup() {\n    this.#media = useMediaContext();\n    const currentIdCount = ++idCount;\n    this.#menuId = `media-menu-${currentIdCount}`;\n    this.#menuButtonId = `media-menu-button-${currentIdCount}`;\n    this.#focus = new MenuFocusController({\n      closeMenu: this.close.bind(this)\n    });\n    if (hasProvidedContext(menuContext)) {\n      this.#parentMenu = useContext(menuContext);\n    }\n    this.#observeSliders();\n    this.setAttributes({\n      \"data-open\": this.#expanded,\n      \"data-root\": !this.isSubmenu,\n      \"data-submenu\": this.isSubmenu,\n      \"data-disabled\": this.#isDisabled.bind(this)\n    });\n    provideContext(menuContext, {\n      button: this.#trigger,\n      content: this.#content,\n      expanded: this.#expanded,\n      hint: signal(\"\"),\n      submenu: !!this.#parentMenu,\n      disable: this.#disable.bind(this),\n      attachMenuButton: this.#attachMenuButton.bind(this),\n      attachMenuItems: this.#attachMenuItems.bind(this),\n      attachObserver: this.#attachObserver.bind(this),\n      disableMenuButton: this.#disableMenuButton.bind(this),\n      addSubmenu: this.#addSubmenu.bind(this),\n      onTransitionEvent: (callback) => {\n        this.#transitionCallbacks.add(callback);\n        onDispose(() => {\n          this.#transitionCallbacks.delete(callback);\n        });\n      }\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"display\", \"contents\");\n  }\n  onConnect(el) {\n    effect(this.#watchExpanded.bind(this));\n    if (this.isSubmenu) {\n      this.#parentMenu?.addSubmenu(this);\n    }\n  }\n  onDestroy() {\n    this.#trigger.set(null);\n    this.#content.set(null);\n    this.#menuObserver = null;\n    this.#transitionCallbacks.clear();\n  }\n  #observeSliders() {\n    let sliderActiveTimer = -1, parentSliderObserver = hasProvidedContext(sliderObserverContext) ? useContext(sliderObserverContext) : null;\n    provideContext(sliderObserverContext, {\n      onDragStart: () => {\n        parentSliderObserver?.onDragStart?.();\n        window.clearTimeout(sliderActiveTimer);\n        sliderActiveTimer = -1;\n        this.#isSliderActive = true;\n      },\n      onDragEnd: () => {\n        parentSliderObserver?.onDragEnd?.();\n        sliderActiveTimer = window.setTimeout(() => {\n          this.#isSliderActive = false;\n          sliderActiveTimer = -1;\n        }, 300);\n      }\n    });\n  }\n  #watchExpanded() {\n    const expanded = this.#isExpanded();\n    if (!this.isSubmenu) this.#onResize();\n    this.#updateMenuItemsHidden(expanded);\n    if (!expanded) return;\n    effect(() => {\n      const { height } = this.#media.$state, content = this.#content();\n      content && setStyle(content, \"--player-height\", height() + \"px\");\n    });\n    this.#focus.listen();\n    this.listen(\"pointerup\", this.#onPointerUp.bind(this));\n    listenEvent(window, \"pointerup\", this.#onWindowPointerUp.bind(this));\n  }\n  #attachMenuButton(button) {\n    const el = button.el, isMenuItem = this.isSubmenu, isARIADisabled = $ariaBool(this.#isDisabled.bind(this));\n    setAttributeIfEmpty(el, \"tabindex\", isMenuItem ? \"-1\" : \"0\");\n    setAttributeIfEmpty(el, \"role\", isMenuItem ? \"menuitem\" : \"button\");\n    setAttribute(el, \"id\", this.#menuButtonId);\n    setAttribute(el, \"aria-haspopup\", \"menu\");\n    setAttribute(el, \"aria-expanded\", \"false\");\n    setAttribute(el, \"data-root\", !this.isSubmenu);\n    setAttribute(el, \"data-submenu\", this.isSubmenu);\n    const watchAttrs = () => {\n      setAttribute(el, \"data-open\", this.#expanded());\n      setAttribute(el, \"aria-disabled\", isARIADisabled());\n    };\n    if (IS_SERVER) watchAttrs();\n    else effect(watchAttrs);\n    this.#trigger.set(el);\n    onDispose(() => {\n      this.#trigger.set(null);\n    });\n  }\n  #attachMenuItems(items) {\n    const el = items.el;\n    el.style.setProperty(\"display\", \"none\");\n    setAttribute(el, \"id\", this.#menuId);\n    setAttributeIfEmpty(el, \"role\", \"menu\");\n    setAttributeIfEmpty(el, \"tabindex\", \"-1\");\n    setAttribute(el, \"data-root\", !this.isSubmenu);\n    setAttribute(el, \"data-submenu\", this.isSubmenu);\n    this.#content.set(el);\n    onDispose(() => this.#content.set(null));\n    const watchAttrs = () => setAttribute(el, \"data-open\", this.#expanded());\n    if (IS_SERVER) watchAttrs();\n    else effect(watchAttrs);\n    this.#focus.attachMenu(el);\n    this.#updateMenuItemsHidden(false);\n    const onTransition = this.#onResizeTransition.bind(this);\n    if (!this.isSubmenu) {\n      items.listen(\"transitionstart\", onTransition);\n      items.listen(\"transitionend\", onTransition);\n      items.listen(\"animationend\", this.#onResize);\n      items.listen(\"vds-menu-resize\", this.#onResize);\n    } else {\n      this.#parentMenu?.onTransitionEvent(onTransition);\n    }\n  }\n  #attachObserver(observer) {\n    this.#menuObserver = observer;\n  }\n  #updateMenuItemsHidden(expanded) {\n    const content = peek(this.#content);\n    if (content) setAttribute(content, \"aria-hidden\", ariaBool$1(!expanded));\n  }\n  #disableMenuButton(disabled) {\n    this.#isTriggerDisabled.set(disabled);\n  }\n  #wasKeyboardExpand = false;\n  #onExpandedChange(isExpanded, event) {\n    this.#wasKeyboardExpand = isKeyboardEvent(event);\n    event?.stopPropagation();\n    if (this.#expanded() === isExpanded) return;\n    if (this.#isDisabled()) {\n      if (isExpanded) this.#popper.hide(event);\n      return;\n    }\n    this.el?.dispatchEvent(\n      new Event(\"vds-menu-resize\", {\n        bubbles: true,\n        composed: true\n      })\n    );\n    const trigger = this.#trigger(), content = this.#content();\n    if (trigger) {\n      setAttribute(trigger, \"aria-controls\", isExpanded && this.#menuId);\n      setAttribute(trigger, \"aria-expanded\", ariaBool$1(isExpanded));\n    }\n    if (content) setAttribute(content, \"aria-labelledby\", isExpanded && this.#menuButtonId);\n    this.#expanded.set(isExpanded);\n    this.#toggleMediaControls(event);\n    tick();\n    if (this.#wasKeyboardExpand) {\n      if (isExpanded) content?.focus();\n      else trigger?.focus();\n      for (const el of [this.el, content]) {\n        el && el.setAttribute(\"data-keyboard\", \"\");\n      }\n    } else {\n      for (const el of [this.el, content]) {\n        el && el.removeAttribute(\"data-keyboard\");\n      }\n    }\n    this.dispatch(isExpanded ? \"open\" : \"close\", { trigger: event });\n    if (isExpanded) {\n      if (!this.isSubmenu && this.#media.activeMenu !== this) {\n        this.#media.activeMenu?.close(event);\n        this.#media.activeMenu = this;\n      }\n      this.#menuObserver?.onOpen?.(event);\n    } else {\n      if (this.isSubmenu) {\n        for (const el of this.#submenus) el.close(event);\n      } else {\n        this.#media.activeMenu = null;\n      }\n      this.#menuObserver?.onClose?.(event);\n    }\n    if (isExpanded) {\n      requestAnimationFrame(this.#updateFocus.bind(this));\n    }\n  }\n  #updateFocus() {\n    if (this.#isTransitionActive || this.#isSubmenuOpen) return;\n    this.#focus.update();\n    requestAnimationFrame(() => {\n      if (this.#wasKeyboardExpand) {\n        this.#focus.focusActive();\n      } else {\n        this.#focus.scroll();\n      }\n    });\n  }\n  #isExpanded() {\n    return !this.#isDisabled() && this.#expanded();\n  }\n  #isDisabled() {\n    return this.#disabled() || this.#isTriggerDisabled();\n  }\n  #disable(disabled) {\n    this.#disabled.set(disabled);\n  }\n  #onPointerUp(event) {\n    const content = this.#content();\n    if (this.#isSliderActive || content && isEventInside(content, event)) {\n      return;\n    }\n    event.stopPropagation();\n  }\n  #onWindowPointerUp(event) {\n    const content = this.#content();\n    if (this.#isSliderActive || content && isEventInside(content, event)) {\n      return;\n    }\n    this.close(event);\n  }\n  #getCloseTarget() {\n    const target = this.el?.querySelector('[data-part=\"close-target\"]');\n    return this.el && target && isElementParent(this.el, target, (node) => node.getAttribute(\"role\") === \"menu\") ? target : null;\n  }\n  #toggleMediaControls(trigger) {\n    if (this.isSubmenu) return;\n    if (this.#expanded()) this.#media.remote.pauseControls(trigger);\n    else this.#media.remote.resumeControls(trigger);\n  }\n  #addSubmenu(menu) {\n    this.#submenus.add(menu);\n    new EventsController(menu).add(\"open\", this.#onSubmenuOpenBind).add(\"close\", this.#onSubmenuCloseBind);\n    onDispose(this.#removeSubmenuBind);\n  }\n  #removeSubmenuBind = this.#removeSubmenu.bind(this);\n  #removeSubmenu(menu) {\n    this.#submenus.delete(menu);\n  }\n  #isSubmenuOpen = false;\n  #onSubmenuOpenBind = this.#onSubmenuOpen.bind(this);\n  #onSubmenuOpen(event) {\n    this.#isSubmenuOpen = true;\n    const content = this.#content();\n    if (this.isSubmenu) {\n      this.triggerElement?.setAttribute(\"aria-hidden\", \"true\");\n    }\n    for (const target of this.#submenus) {\n      if (target !== event.target) {\n        for (const el of [target.el, target.triggerElement]) {\n          el?.setAttribute(\"aria-hidden\", \"true\");\n        }\n      }\n    }\n    if (content) {\n      const el = event.target.el;\n      for (const child of content.children) {\n        if (child.contains(el)) {\n          child.setAttribute(\"data-open\", \"\");\n        } else if (child !== el) {\n          child.setAttribute(\"data-hidden\", \"\");\n        }\n      }\n    }\n  }\n  #onSubmenuCloseBind = this.#onSubmenuClose.bind(this);\n  #onSubmenuClose(event) {\n    this.#isSubmenuOpen = false;\n    const content = this.#content();\n    if (this.isSubmenu) {\n      this.triggerElement?.setAttribute(\"aria-hidden\", \"false\");\n    }\n    for (const target of this.#submenus) {\n      for (const el of [target.el, target.triggerElement]) {\n        el?.setAttribute(\"aria-hidden\", \"false\");\n      }\n    }\n    if (content) {\n      for (const child of content.children) {\n        child.removeAttribute(\"data-open\");\n        child.removeAttribute(\"data-hidden\");\n      }\n    }\n  }\n  #onResize = animationFrameThrottle(() => {\n    const content = peek(this.#content);\n    if (!content || IS_SERVER) return;\n    let height = 0, styles = getComputedStyle(content), children = [...content.children];\n    for (const prop2 of [\"paddingTop\", \"paddingBottom\", \"borderTopWidth\", \"borderBottomWidth\"]) {\n      height += parseFloat(styles[prop2]) || 0;\n    }\n    for (const child of children) {\n      if (isHTMLElement(child) && child.style.display === \"contents\") {\n        children.push(...child.children);\n      } else if (child.nodeType === 3) {\n        height += parseFloat(getComputedStyle(child).fontSize);\n      } else if (isHTMLElement(child)) {\n        if (!isElementVisible(child)) continue;\n        const style = getComputedStyle(child);\n        height += child.offsetHeight + (parseFloat(style.marginTop) || 0) + (parseFloat(style.marginBottom) || 0);\n      }\n    }\n    setStyle(content, \"--menu-height\", height + \"px\");\n  });\n  #isTransitionActive = false;\n  #onResizeTransition(event) {\n    const content = this.#content();\n    if (content && event.propertyName === \"height\") {\n      this.#isTransitionActive = event.type === \"transitionstart\";\n      setAttribute(content, \"data-transition\", this.#isTransitionActive ? \"height\" : null);\n      if (this.#expanded()) this.#updateFocus();\n    }\n    for (const callback of this.#transitionCallbacks) callback(event);\n  }\n  open(trigger) {\n    if (peek(this.#expanded)) return;\n    this.#popper.show(trigger);\n    tick();\n  }\n  close(trigger) {\n    if (!peek(this.#expanded)) return;\n    this.#popper.hide(trigger);\n    tick();\n  }\n}\n__decorateClass([\n  prop\n], Menu.prototype, \"triggerElement\");\n__decorateClass([\n  prop\n], Menu.prototype, \"contentElement\");\n__decorateClass([\n  prop\n], Menu.prototype, \"isSubmenu\");\n__decorateClass([\n  method\n], Menu.prototype, \"open\");\n__decorateClass([\n  method\n], Menu.prototype, \"close\");\n\nclass MenuButton extends Component {\n  static props = {\n    disabled: false\n  };\n  #menu;\n  #hintEl = signal(null);\n  get expanded() {\n    return this.#menu?.expanded() ?? false;\n  }\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.#menu = useContext(menuContext);\n  }\n  onAttach(el) {\n    this.#menu.attachMenuButton(this);\n    effect(this.#watchDisabled.bind(this));\n    setAttributeIfEmpty(el, \"type\", \"button\");\n  }\n  onConnect(el) {\n    effect(this.#watchHintEl.bind(this));\n    this.#onMutation();\n    const mutations = new MutationObserver(this.#onMutation.bind(this));\n    mutations.observe(el, { attributeFilter: [\"data-part\"], childList: true, subtree: true });\n    onDispose(() => mutations.disconnect());\n    onPress(el, (trigger) => {\n      this.dispatch(\"select\", { trigger });\n    });\n  }\n  #watchDisabled() {\n    this.#menu.disableMenuButton(this.$props.disabled());\n  }\n  #watchHintEl() {\n    const el = this.#hintEl();\n    if (!el) return;\n    effect(() => {\n      const text = this.#menu.hint();\n      if (text) el.textContent = text;\n    });\n  }\n  #onMutation() {\n    const hintEl = this.el?.querySelector('[data-part=\"hint\"]');\n    this.#hintEl.set(hintEl ?? null);\n  }\n}\nconst menubutton__proto = MenuButton.prototype;\nprop(menubutton__proto, \"expanded\");\n\nclass MenuItem extends MenuButton {\n}\n\nclass MenuPortal extends Component {\n  static props = {\n    container: null,\n    disabled: false\n  };\n  #target = null;\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    provideContext(menuPortalContext, {\n      attach: this.#attachElement.bind(this)\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"display\", \"contents\");\n  }\n  // Need this so connect scope is defined.\n  onConnect(el) {\n  }\n  onDestroy() {\n    this.#target?.remove();\n    this.#target = null;\n  }\n  #attachElement(el) {\n    this.#portal(false);\n    this.#target = el;\n    requestScopedAnimationFrame(() => {\n      requestScopedAnimationFrame(() => {\n        if (!this.connectScope) return;\n        effect(this.#watchDisabled.bind(this));\n      });\n    });\n  }\n  #watchDisabled() {\n    const { fullscreen } = this.#media.$state, { disabled } = this.$props;\n    this.#portal(disabled() === \"fullscreen\" ? !fullscreen() : !disabled());\n  }\n  #portal(shouldPortal) {\n    if (!this.#target) return;\n    let container = this.#getContainer(this.$props.container());\n    if (!container) return;\n    const isPortalled = this.#target.parentElement === container;\n    setAttribute(this.#target, \"data-portal\", shouldPortal);\n    if (shouldPortal) {\n      if (!isPortalled) {\n        this.#target.remove();\n        container.append(this.#target);\n      }\n    } else if (isPortalled && this.#target.parentElement === container) {\n      this.#target.remove();\n      this.el?.append(this.#target);\n    }\n  }\n  #getContainer(selector) {\n    if (isHTMLElement(selector)) return selector;\n    return selector ? document.querySelector(selector) : document.body;\n  }\n}\nconst menuPortalContext = createContext();\n\nclass MenuItems extends Component {\n  static props = {\n    placement: null,\n    offset: 0,\n    alignOffset: 0\n  };\n  #menu;\n  constructor() {\n    super();\n    new FocusVisibleController();\n    const { placement } = this.$props;\n    this.setAttributes({\n      \"data-placement\": placement\n    });\n  }\n  onAttach(el) {\n    this.#menu = useContext(menuContext);\n    this.#menu.attachMenuItems(this);\n    if (hasProvidedContext(menuPortalContext)) {\n      const portal = useContext(menuPortalContext);\n      if (portal) {\n        provideContext(menuPortalContext, null);\n        portal.attach(el);\n        onDispose(() => portal.attach(null));\n      }\n    }\n  }\n  onConnect(el) {\n    effect(this.#watchPlacement.bind(this));\n  }\n  #watchPlacement() {\n    const { expanded } = this.#menu;\n    if (!this.el || !expanded()) return;\n    const placement = this.$props.placement();\n    if (!placement) return;\n    Object.assign(this.el.style, {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"max-content\"\n    });\n    const { offset: mainOffset, alignOffset } = this.$props;\n    onDispose(\n      autoPlacement(this.el, this.#getButton(), placement, {\n        offsetVarName: \"media-menu\",\n        xOffset: alignOffset(),\n        yOffset: mainOffset()\n      })\n    );\n    onDispose(this.#hide.bind(this));\n  }\n  #hide() {\n    if (!this.el) return;\n    this.el.removeAttribute(\"style\");\n    this.el.style.display = \"none\";\n  }\n  #getButton() {\n    return this.#menu.button();\n  }\n}\n\nconst radioControllerContext = createContext();\n\nclass RadioGroupController extends ViewController {\n  #group = /* @__PURE__ */ new Set();\n  #value = signal(\"\");\n  #controller = null;\n  onValueChange;\n  get values() {\n    return Array.from(this.#group).map((radio) => radio.value());\n  }\n  get value() {\n    return this.#value();\n  }\n  set value(value) {\n    this.#onChange(value);\n  }\n  onSetup() {\n    provideContext(radioControllerContext, {\n      add: this.#addRadio.bind(this),\n      remove: this.#removeRadio.bind(this)\n    });\n  }\n  onAttach(el) {\n    const isMenuItem = hasProvidedContext(menuContext);\n    if (!isMenuItem) setAttributeIfEmpty(el, \"role\", \"radiogroup\");\n    this.setAttributes({ value: this.#value });\n  }\n  onDestroy() {\n    this.#group.clear();\n  }\n  #addRadio(radio) {\n    if (this.#group.has(radio)) return;\n    this.#group.add(radio);\n    radio.onCheck = this.#onChangeBind;\n    radio.check(radio.value() === this.#value());\n  }\n  #removeRadio(radio) {\n    radio.onCheck = null;\n    this.#group.delete(radio);\n  }\n  #onChangeBind = this.#onChange.bind(this);\n  #onChange(newValue, trigger) {\n    const currentValue = peek(this.#value);\n    if (!newValue || newValue === currentValue) return;\n    const currentRadio = this.#findRadio(currentValue), newRadio = this.#findRadio(newValue);\n    currentRadio?.check(false, trigger);\n    newRadio?.check(true, trigger);\n    this.#value.set(newValue);\n    this.onValueChange?.(newValue, trigger);\n  }\n  #findRadio(newValue) {\n    for (const radio of this.#group) {\n      if (newValue === peek(radio.value)) return radio;\n    }\n    return null;\n  }\n}\n\nclass RadioGroup extends Component {\n  static props = {\n    value: \"\"\n  };\n  #controller;\n  /**\n   * A list of radio values that belong this group.\n   */\n  get values() {\n    return this.#controller.values;\n  }\n  /**\n   * The radio value that is checked in this group.\n   */\n  get value() {\n    return this.#controller.value;\n  }\n  set value(newValue) {\n    this.#controller.value = newValue;\n  }\n  constructor() {\n    super();\n    this.#controller = new RadioGroupController();\n    this.#controller.onValueChange = this.#onValueChange.bind(this);\n  }\n  onSetup() {\n    if (IS_SERVER) this.#watchValue();\n    else effect(this.#watchValue.bind(this));\n  }\n  #watchValue() {\n    this.#controller.value = this.$props.value();\n  }\n  #onValueChange(value, trigger) {\n    const event = this.createEvent(\"change\", { detail: value, trigger });\n    this.dispatch(event);\n  }\n}\nconst radiogroup__proto = RadioGroup.prototype;\nprop(radiogroup__proto, \"values\");\nprop(radiogroup__proto, \"value\");\n\nclass Radio extends Component {\n  static props = {\n    value: \"\"\n  };\n  #checked = signal(false);\n  #controller = {\n    value: this.$props.value,\n    check: this.#check.bind(this),\n    onCheck: null\n  };\n  /**\n   * Whether this radio is currently checked.\n   */\n  get checked() {\n    return this.#checked();\n  }\n  constructor() {\n    super();\n    new FocusVisibleController();\n  }\n  onSetup() {\n    this.setAttributes({\n      value: this.$props.value,\n      \"data-checked\": this.#checked,\n      \"aria-checked\": $ariaBool(this.#checked)\n    });\n  }\n  onAttach(el) {\n    const isMenuItem = hasProvidedContext(menuContext);\n    setAttributeIfEmpty(el, \"tabindex\", isMenuItem ? \"-1\" : \"0\");\n    setAttributeIfEmpty(el, \"role\", isMenuItem ? \"menuitemradio\" : \"radio\");\n    effect(this.#watchValue.bind(this));\n  }\n  onConnect(el) {\n    this.#addToGroup();\n    onPress(el, this.#onPress.bind(this));\n    onDispose(this.#onDisconnect.bind(this));\n  }\n  #onDisconnect() {\n    scoped(() => {\n      const group = useContext(radioControllerContext);\n      group.remove(this.#controller);\n    }, this.connectScope);\n  }\n  #addToGroup() {\n    const group = useContext(radioControllerContext);\n    group.add(this.#controller);\n  }\n  #watchValue() {\n    const { value } = this.$props, newValue = value();\n    if (peek(this.#checked)) {\n      this.#controller.onCheck?.(newValue);\n    }\n  }\n  #onPress(event) {\n    if (peek(this.#checked)) return;\n    this.#onChange(true, event);\n    this.#onSelect(event);\n    this.#controller.onCheck?.(peek(this.$props.value), event);\n  }\n  #check(value, trigger) {\n    if (peek(this.#checked) === value) return;\n    this.#onChange(value, trigger);\n  }\n  #onChange(value, trigger) {\n    this.#checked.set(value);\n    this.dispatch(\"change\", { detail: value, trigger });\n  }\n  #onSelect(trigger) {\n    this.dispatch(\"select\", { trigger });\n  }\n}\nconst radio__proto = Radio.prototype;\nprop(radio__proto, \"checked\");\n\nclass Gesture extends Component {\n  static props = {\n    disabled: false,\n    event: void 0,\n    action: void 0\n  };\n  #media;\n  #provider = null;\n  onSetup() {\n    this.#media = useMediaContext();\n    const { event, action } = this.$props;\n    this.setAttributes({\n      event,\n      action\n    });\n  }\n  onAttach(el) {\n    el.setAttribute(\"data-media-gesture\", \"\");\n    el.style.setProperty(\"pointer-events\", \"none\");\n  }\n  onConnect(el) {\n    this.#provider = this.#media.player.el?.querySelector(\n      \"[data-media-provider]\"\n    );\n    effect(this.#attachListener.bind(this));\n  }\n  #attachListener() {\n    let eventType = this.$props.event(), disabled = this.$props.disabled();\n    if (!this.#provider || !eventType || disabled) return;\n    if (/^dbl/.test(eventType)) {\n      eventType = eventType.split(/^dbl/)[1];\n    }\n    if (eventType === \"pointerup\" || eventType === \"pointerdown\") {\n      const pointer = this.#media.$state.pointer();\n      if (pointer === \"coarse\") {\n        eventType = eventType === \"pointerup\" ? \"touchend\" : \"touchstart\";\n      }\n    }\n    listenEvent(\n      this.#provider,\n      eventType,\n      this.#acceptEvent.bind(this),\n      { passive: false }\n    );\n  }\n  #presses = 0;\n  #pressTimerId = -1;\n  #acceptEvent(event) {\n    if (this.$props.disabled() || isPointerEvent(event) && (event.button !== 0 || this.#media.activeMenu) || isTouchEvent(event) && this.#media.activeMenu || isTouchPinchEvent(event) || !this.#inBounds(event)) {\n      return;\n    }\n    event.MEDIA_GESTURE = true;\n    event.preventDefault();\n    const eventType = peek(this.$props.event), isDblEvent = eventType?.startsWith(\"dbl\");\n    if (!isDblEvent) {\n      if (this.#presses === 0) {\n        setTimeout(() => {\n          if (this.#presses === 1) this.#handleEvent(event);\n        }, 250);\n      }\n    } else if (this.#presses === 1) {\n      queueMicrotask(() => this.#handleEvent(event));\n      clearTimeout(this.#pressTimerId);\n      this.#presses = 0;\n      return;\n    }\n    if (this.#presses === 0) {\n      this.#pressTimerId = window.setTimeout(() => {\n        this.#presses = 0;\n      }, 275);\n    }\n    this.#presses++;\n  }\n  #handleEvent(event) {\n    this.el.setAttribute(\"data-triggered\", \"\");\n    requestAnimationFrame(() => {\n      if (this.#isTopLayer()) {\n        this.#performAction(peek(this.$props.action), event);\n      }\n      requestAnimationFrame(() => {\n        this.el.removeAttribute(\"data-triggered\");\n      });\n    });\n  }\n  /** Validate event occurred in gesture bounds. */\n  #inBounds(event) {\n    if (!this.el) return false;\n    if (isPointerEvent(event) || isMouseEvent(event) || isTouchEvent(event)) {\n      const touch = isTouchEvent(event) ? event.changedTouches[0] ?? event.touches[0] : void 0;\n      const clientX = touch?.clientX ?? event.clientX;\n      const clientY = touch?.clientY ?? event.clientY;\n      const rect = this.el.getBoundingClientRect();\n      const inBounds = clientY >= rect.top && clientY <= rect.bottom && clientX >= rect.left && clientX <= rect.right;\n      return event.type.includes(\"leave\") ? !inBounds : inBounds;\n    }\n    return true;\n  }\n  /** Validate gesture has the highest z-index in this triggered group. */\n  #isTopLayer() {\n    const gestures = this.#media.player.el.querySelectorAll(\n      \"[data-media-gesture][data-triggered]\"\n    );\n    return Array.from(gestures).sort(\n      (a, b) => +getComputedStyle(b).zIndex - +getComputedStyle(a).zIndex\n    )[0] === this.el;\n  }\n  #performAction(action, trigger) {\n    if (!action) return;\n    const willTriggerEvent = new DOMEvent(\"will-trigger\", {\n      detail: action,\n      cancelable: true,\n      trigger\n    });\n    this.dispatchEvent(willTriggerEvent);\n    if (willTriggerEvent.defaultPrevented) return;\n    const [method, value] = action.replace(/:([a-z])/, \"-$1\").split(\":\");\n    if (action.includes(\":fullscreen\")) {\n      this.#media.remote.toggleFullscreen(\"prefer-media\", trigger);\n    } else if (action.includes(\"seek:\")) {\n      this.#media.remote.seek(peek(this.#media.$state.currentTime) + (+value || 0), trigger);\n    } else {\n      this.#media.remote[kebabToCamelCase(method)](trigger);\n    }\n    this.dispatch(\"trigger\", {\n      detail: action,\n      trigger\n    });\n  }\n}\n\nclass CaptionsTextRenderer {\n  priority = 10;\n  #track = null;\n  #renderer;\n  #events;\n  constructor(renderer) {\n    this.#renderer = renderer;\n  }\n  attach() {\n  }\n  canRender() {\n    return true;\n  }\n  detach() {\n    this.#events?.abort();\n    this.#events = void 0;\n    this.#renderer.reset();\n    this.#track = null;\n  }\n  changeTrack(track) {\n    if (!track || this.#track === track) return;\n    this.#events?.abort();\n    this.#events = new EventsController(track);\n    if (track.readyState < 2) {\n      this.#renderer.reset();\n      this.#events.add(\"load\", () => this.#changeTrack(track), { once: true });\n    } else {\n      this.#changeTrack(track);\n    }\n    this.#events.add(\"add-cue\", (event) => {\n      this.#renderer.addCue(event.detail);\n    }).add(\"remove-cue\", (event) => {\n      this.#renderer.removeCue(event.detail);\n    });\n    this.#track = track;\n  }\n  #changeTrack(track) {\n    this.#renderer.changeTrack({\n      cues: [...track.cues],\n      regions: [...track.regions]\n    });\n  }\n}\n\nclass Captions extends Component {\n  static props = {\n    textDir: \"ltr\",\n    exampleText: \"Captions look like this.\"\n  };\n  #media;\n  static lib = signal(null);\n  onSetup() {\n    this.#media = useMediaContext();\n    this.setAttributes({\n      \"aria-hidden\": $ariaBool(this.#isHidden.bind(this))\n    });\n  }\n  onAttach(el) {\n    el.style.setProperty(\"pointer-events\", \"none\");\n  }\n  onConnect(el) {\n    if (!Captions.lib()) {\n      import('media-captions').then((lib) => Captions.lib.set(lib));\n    }\n    effect(this.#watchViewType.bind(this));\n  }\n  #isHidden() {\n    const { textTrack, remotePlaybackState, iOSControls } = this.#media.$state, track = textTrack();\n    return iOSControls() || remotePlaybackState() === \"connected\" || !track || !isTrackCaptionKind(track);\n  }\n  #watchViewType() {\n    if (!Captions.lib()) return;\n    const { viewType } = this.#media.$state;\n    if (viewType() === \"audio\") {\n      return this.#setupAudioView();\n    } else {\n      return this.#setupVideoView();\n    }\n  }\n  #setupAudioView() {\n    effect(this.#onTrackChange.bind(this));\n    this.#listenToFontStyleChanges(null);\n    return () => {\n      this.el.textContent = \"\";\n    };\n  }\n  #onTrackChange() {\n    if (this.#isHidden()) return;\n    this.#onCueChange();\n    const { textTrack } = this.#media.$state;\n    listenEvent(textTrack(), \"cue-change\", this.#onCueChange.bind(this));\n    effect(this.#onUpdateTimedNodes.bind(this));\n  }\n  #onCueChange() {\n    this.el.textContent = \"\";\n    if (this.#hideExampleTimer >= 0) {\n      this.#removeExample();\n    }\n    const { realCurrentTime, textTrack } = this.#media.$state, { renderVTTCueString } = Captions.lib(), time = peek(realCurrentTime), activeCues = peek(textTrack).activeCues;\n    for (const cue of activeCues) {\n      const displayEl = this.#createCueDisplayElement(), cueEl = this.#createCueElement();\n      cueEl.innerHTML = renderVTTCueString(cue, time);\n      displayEl.append(cueEl);\n      this.el.append(cueEl);\n    }\n  }\n  #onUpdateTimedNodes() {\n    const { realCurrentTime } = this.#media.$state, { updateTimedVTTCueNodes } = Captions.lib();\n    updateTimedVTTCueNodes(this.el, realCurrentTime());\n  }\n  #setupVideoView() {\n    const { CaptionsRenderer } = Captions.lib(), renderer = new CaptionsRenderer(this.el), textRenderer = new CaptionsTextRenderer(renderer);\n    this.#media.textRenderers.add(textRenderer);\n    effect(this.#watchTextDirection.bind(this, renderer));\n    effect(this.#watchMediaTime.bind(this, renderer));\n    this.#listenToFontStyleChanges(renderer);\n    return () => {\n      this.el.textContent = \"\";\n      this.#media.textRenderers.remove(textRenderer);\n      renderer.destroy();\n    };\n  }\n  #watchTextDirection(renderer) {\n    renderer.dir = this.$props.textDir();\n  }\n  #watchMediaTime(renderer) {\n    if (this.#isHidden()) return;\n    const { realCurrentTime, textTrack } = this.#media.$state;\n    renderer.currentTime = realCurrentTime();\n    if (this.#hideExampleTimer >= 0 && textTrack()?.activeCues[0]) {\n      this.#removeExample();\n    }\n  }\n  #listenToFontStyleChanges(renderer) {\n    const player = this.#media.player;\n    if (!player) return;\n    const onChange = this.#onFontStyleChange.bind(this, renderer);\n    listenEvent(player, \"vds-font-change\", onChange);\n  }\n  #onFontStyleChange(renderer) {\n    if (this.#hideExampleTimer >= 0) {\n      this.#hideExample();\n      return;\n    }\n    const { textTrack } = this.#media.$state;\n    if (!textTrack()?.activeCues[0]) {\n      this.#showExample();\n    } else {\n      renderer?.update(true);\n    }\n  }\n  #showExample() {\n    const display = this.#createCueDisplayElement();\n    setAttribute(display, \"data-example\", \"\");\n    const cue = this.#createCueElement();\n    setAttribute(cue, \"data-example\", \"\");\n    cue.textContent = this.$props.exampleText();\n    display?.append(cue);\n    this.el?.append(display);\n    this.el?.setAttribute(\"data-example\", \"\");\n    this.#hideExample();\n  }\n  #hideExampleTimer = -1;\n  #hideExample() {\n    window.clearTimeout(this.#hideExampleTimer);\n    this.#hideExampleTimer = window.setTimeout(this.#removeExample.bind(this), 2500);\n  }\n  #removeExample() {\n    this.el?.removeAttribute(\"data-example\");\n    if (this.el?.querySelector(\"[data-example]\")) this.el.textContent = \"\";\n    this.#hideExampleTimer = -1;\n  }\n  #createCueDisplayElement() {\n    const el = document.createElement(\"div\");\n    setAttribute(el, \"data-part\", \"cue-display\");\n    return el;\n  }\n  #createCueElement() {\n    const el = document.createElement(\"div\");\n    setAttribute(el, \"data-part\", \"cue\");\n    return el;\n  }\n}\n\nclass Poster extends Component {\n  static props = {\n    src: null,\n    alt: null,\n    crossOrigin: null\n  };\n  static state = new State({\n    img: null,\n    src: null,\n    alt: null,\n    crossOrigin: null,\n    loading: true,\n    error: null,\n    hidden: false\n  });\n  #media;\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#watchSrc();\n    this.#watchAlt();\n    this.#watchCrossOrigin();\n    this.#watchHidden();\n  }\n  onAttach(el) {\n    el.style.setProperty(\"pointer-events\", \"none\");\n    effect(this.#watchImg.bind(this));\n    effect(this.#watchSrc.bind(this));\n    effect(this.#watchAlt.bind(this));\n    effect(this.#watchCrossOrigin.bind(this));\n    effect(this.#watchHidden.bind(this));\n    const { started } = this.#media.$state;\n    this.setAttributes({\n      \"data-visible\": () => !started() && !this.$state.hidden(),\n      \"data-loading\": this.#isLoading.bind(this),\n      \"data-error\": this.#hasError.bind(this),\n      \"data-hidden\": this.$state.hidden\n    });\n  }\n  onConnect(el) {\n    effect(this.#onPreconnect.bind(this));\n    effect(this.#onLoadStart.bind(this));\n  }\n  #hasError() {\n    const { error } = this.$state;\n    return !isNull(error());\n  }\n  #onPreconnect() {\n    const { canLoadPoster, poster } = this.#media.$state;\n    if (!canLoadPoster() && poster()) preconnect(poster(), \"preconnect\");\n  }\n  #watchHidden() {\n    const { src } = this.$props, { poster, nativeControls } = this.#media.$state;\n    this.el && setAttribute(this.el, \"display\", nativeControls() ? \"none\" : null);\n    this.$state.hidden.set(this.#hasError() || !(src() || poster()) || nativeControls());\n  }\n  #isLoading() {\n    const { loading, hidden } = this.$state;\n    return !hidden() && loading();\n  }\n  #watchImg() {\n    const img = this.$state.img();\n    if (!img) return;\n    new EventsController(img).add(\"load\", this.#onLoad.bind(this)).add(\"error\", this.#onError.bind(this));\n    if (img.complete) this.#onLoad();\n  }\n  #prevSrc = \"\";\n  #watchSrc() {\n    const { poster: defaultPoster } = this.#media.$props, { canLoadPoster, providedPoster, inferredPoster } = this.#media.$state;\n    const src = this.$props.src() || \"\", poster = src || defaultPoster() || inferredPoster();\n    if (this.#prevSrc === providedPoster()) {\n      providedPoster.set(src);\n    }\n    this.$state.src.set(canLoadPoster() && poster.length ? poster : null);\n    this.#prevSrc = src;\n  }\n  #watchAlt() {\n    const { src } = this.$props, { alt } = this.$state, { poster } = this.#media.$state;\n    alt.set(src() || poster() ? this.$props.alt() : null);\n  }\n  #watchCrossOrigin() {\n    const { crossOrigin: crossOriginProp } = this.$props, { crossOrigin: crossOriginState } = this.$state, { crossOrigin: mediaCrossOrigin, poster: src } = this.#media.$state, crossOrigin = crossOriginProp() !== null ? crossOriginProp() : mediaCrossOrigin();\n    crossOriginState.set(\n      /ytimg\\.com|vimeo/.test(src() || \"\") ? null : crossOrigin === true ? \"anonymous\" : crossOrigin\n    );\n  }\n  #onLoadStart() {\n    const { loading, error } = this.$state, { canLoadPoster, poster } = this.#media.$state;\n    loading.set(canLoadPoster() && !!poster());\n    error.set(null);\n  }\n  #onLoad() {\n    const { loading, error } = this.$state;\n    loading.set(false);\n    error.set(null);\n  }\n  #onError(event) {\n    const { loading, error } = this.$state;\n    loading.set(false);\n    error.set(event);\n  }\n}\n\nclass Time extends Component {\n  static props = {\n    type: \"current\",\n    showHours: false,\n    padHours: null,\n    padMinutes: null,\n    remainder: false,\n    toggle: false,\n    hidden: false\n  };\n  static state = new State({\n    timeText: \"\",\n    hidden: false\n  });\n  #media;\n  #invert = signal(null);\n  #isVisible = signal(true);\n  #isIntersecting = signal(true);\n  onSetup() {\n    this.#media = useMediaContext();\n    this.#watchTime();\n    const { type } = this.$props;\n    this.setAttributes({\n      \"data-type\": type,\n      \"data-remainder\": this.#shouldInvert.bind(this)\n    });\n    new IntersectionObserverController({\n      callback: this.#onIntersectionChange.bind(this)\n    }).attach(this);\n  }\n  onAttach(el) {\n    if (!el.hasAttribute(\"role\")) effect(this.#watchRole.bind(this));\n    effect(this.#watchTime.bind(this));\n  }\n  onConnect(el) {\n    onDispose(observeVisibility(el, this.#isVisible.set));\n    effect(this.#watchHidden.bind(this));\n    effect(this.#watchToggle.bind(this));\n  }\n  #onIntersectionChange(entries) {\n    this.#isIntersecting.set(entries[0].isIntersecting);\n  }\n  #watchHidden() {\n    const { hidden } = this.$props;\n    this.$state.hidden.set(hidden() || !this.#isVisible() || !this.#isIntersecting());\n  }\n  #watchToggle() {\n    if (!this.$props.toggle()) {\n      this.#invert.set(null);\n      return;\n    }\n    if (this.el) {\n      onPress(this.el, this.#onToggle.bind(this));\n    }\n  }\n  #watchTime() {\n    const { hidden, timeText } = this.$state, { duration } = this.#media.$state;\n    if (hidden()) return;\n    const { type, padHours, padMinutes, showHours } = this.$props, seconds = this.#getSeconds(type()), $duration = duration(), shouldInvert = this.#shouldInvert();\n    if (!Number.isFinite(seconds + $duration)) {\n      timeText.set(\"LIVE\");\n      return;\n    }\n    const time = shouldInvert ? Math.max(0, $duration - seconds) : seconds, formattedTime = formatTime(time, {\n      padHrs: padHours(),\n      padMins: padMinutes(),\n      showHrs: showHours()\n    });\n    timeText.set((shouldInvert ? \"-\" : \"\") + formattedTime);\n  }\n  #watchRole() {\n    if (!this.el) return;\n    const { toggle } = this.$props;\n    setAttribute(this.el, \"role\", toggle() ? \"timer\" : null);\n    setAttribute(this.el, \"tabindex\", toggle() ? 0 : null);\n  }\n  #getSeconds(type) {\n    const { bufferedEnd, duration, currentTime } = this.#media.$state;\n    switch (type) {\n      case \"buffered\":\n        return bufferedEnd();\n      case \"duration\":\n        return duration();\n      default:\n        return currentTime();\n    }\n  }\n  #shouldInvert() {\n    return this.$props.remainder() && this.#invert() !== false;\n  }\n  #onToggle(event) {\n    event.preventDefault();\n    if (this.#invert() === null) {\n      this.#invert.set(!this.$props.remainder());\n      return;\n    }\n    this.#invert.set((v) => !v);\n  }\n}\n\nclass MediaPlayerInstance extends MediaPlayer {\n}\nclass MediaProviderInstance extends MediaProvider {\n}\nclass MediaAnnouncerInstance extends MediaAnnouncer {\n}\nclass ControlsInstance extends Controls {\n}\nclass ControlsGroupInstance extends ControlsGroup {\n}\nclass ToggleButtonInstance extends ToggleButton {\n}\nclass CaptionButtonInstance extends CaptionButton {\n}\nclass FullscreenButtonInstance extends FullscreenButton {\n}\nclass LiveButtonInstance extends LiveButton {\n}\nclass MuteButtonInstance extends MuteButton {\n}\nclass PIPButtonInstance extends PIPButton {\n}\nclass PlayButtonInstance extends PlayButton {\n}\nclass AirPlayButtonInstance extends AirPlayButton {\n}\nclass GoogleCastButtonInstance extends GoogleCastButton {\n}\nclass SeekButtonInstance extends SeekButton {\n}\nclass TooltipInstance extends Tooltip {\n}\nclass TooltipTriggerInstance extends TooltipTrigger {\n}\nclass TooltipContentInstance extends TooltipContent {\n}\nclass SliderInstance extends Slider {\n}\nclass TimeSliderInstance extends TimeSlider {\n}\nclass VolumeSliderInstance extends VolumeSlider {\n}\nclass AudioGainSliderInstance extends AudioGainSlider {\n}\nclass SpeedSliderInstance extends SpeedSlider {\n}\nclass QualitySliderInstance extends QualitySlider {\n}\nclass SliderThumbnailInstance extends SliderThumbnail {\n}\nclass SliderValueInstance extends SliderValue {\n}\nclass SliderVideoInstance extends SliderVideo {\n}\nclass SliderPreviewInstance extends SliderPreview {\n}\nclass SliderChaptersInstance extends SliderChapters {\n}\nclass MenuInstance extends Menu {\n}\nclass MenuButtonInstance extends MenuButton {\n}\nclass MenuItemsInstance extends MenuItems {\n}\nclass MenuItemInstance extends MenuItem {\n}\nclass MenuPortalInstance extends MenuPortal {\n}\nclass RadioGroupInstance extends RadioGroup {\n}\nclass RadioInstance extends Radio {\n}\nclass CaptionsInstance extends Captions {\n}\nclass GestureInstance extends Gesture {\n}\nclass PosterInstance extends Poster {\n}\nclass ThumbnailInstance extends Thumbnail {\n}\nclass TimeInstance extends Time {\n}\n\nconst Slot = React.forwardRef((props, forwardedRef) => {\n  const { children, ...slotProps } = props;\n  const childrenArray = React.Children.toArray(children);\n  const slottable = childrenArray.find(isSlottable);\n  if (slottable) {\n    const newElement = slottable.props.children;\n    const newChildren = childrenArray.map((child) => {\n      if (child === slottable) {\n        if (React.Children.count(newElement) > 1) return React.Children.only(null);\n        return React.isValidElement(newElement) ? newElement.props.children : null;\n      } else {\n        return child;\n      }\n    });\n    return /* @__PURE__ */ React.createElement(SlotClone, { ...slotProps, ref: forwardedRef }, React.isValidElement(newElement) ? React.cloneElement(newElement, void 0, newChildren) : null);\n  }\n  return /* @__PURE__ */ React.createElement(SlotClone, { ...slotProps, ref: forwardedRef }, children);\n});\nSlot.displayName = \"Slot\";\nconst SlotClone = React.forwardRef((props, forwardedRef) => {\n  const { children, ...slotProps } = props;\n  if (React.isValidElement(children)) {\n    return React.cloneElement(children, {\n      ...mergeProps(slotProps, children.props),\n      ref: forwardedRef ? composeRefs(forwardedRef, children.ref) : children.ref\n    });\n  }\n  return React.Children.count(children) > 1 ? React.Children.only(null) : null;\n});\nSlotClone.displayName = \"SlotClone\";\nconst Slottable = ({ children }) => {\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, children);\n};\nfunction isSlottable(child) {\n  return React.isValidElement(child) && child.type === Slottable;\n}\nfunction mergeProps(slotProps, childProps) {\n  const overrideProps = { ...childProps };\n  for (const propName in childProps) {\n    const slotPropValue = slotProps[propName];\n    const childPropValue = childProps[propName];\n    const isHandler = /^on[A-Z]/.test(propName);\n    if (isHandler) {\n      if (slotPropValue && childPropValue) {\n        overrideProps[propName] = (...args) => {\n          childPropValue(...args);\n          slotPropValue(...args);\n        };\n      } else if (slotPropValue) {\n        overrideProps[propName] = slotPropValue;\n      }\n    } else if (propName === \"style\") {\n      overrideProps[propName] = { ...slotPropValue, ...childPropValue };\n    } else if (propName === \"className\") {\n      overrideProps[propName] = [slotPropValue, childPropValue].filter(Boolean).join(\" \");\n    }\n  }\n  return { ...slotProps, ...overrideProps };\n}\n\nconst NODES = [\"button\", \"div\", \"span\", \"img\", \"video\", \"audio\"];\nconst Primitive = NODES.reduce((primitives, node) => {\n  const Node = React.forwardRef((props, forwardedRef) => {\n    const { asChild, ...primitiveProps } = props;\n    const Comp = asChild ? Slot : node;\n    return /* @__PURE__ */ React.createElement(Comp, { ...primitiveProps, ref: forwardedRef });\n  });\n  Node.displayName = `Primitive.${node}`;\n  return { ...primitives, [node]: Node };\n}, {});\n\nfunction isRemotionProvider(provider) {\n  return provider?.$$PROVIDER_TYPE === \"REMOTION\";\n}\nfunction isRemotionSrc(src) {\n  return src?.type === \"video/remotion\";\n}\n\nconst sliderStateRecord = SliderInstance.state.record, initialSliderStore = Object.keys(sliderStateRecord).reduce(\n  (store, prop) => ({\n    ...store,\n    [prop]() {\n      return sliderStateRecord[prop];\n    }\n  }),\n  {}\n);\nfunction useSliderState(prop, ref) {\n  const $state = useStateContext(sliderState);\n  return useSignal((ref?.current?.$state || $state || initialSliderStore)[prop]);\n}\nfunction useSliderStore(ref) {\n  const $state = useStateContext(sliderState);\n  return useSignalRecord(ref?.current ? ref.current.$state : $state || initialSliderStore);\n}\n\nconst mediaStateRecord = MediaPlayerInstance.state.record, initialMediaStore = Object.keys(mediaStateRecord).reduce(\n  (store, prop) => ({\n    ...store,\n    [prop]() {\n      return mediaStateRecord[prop];\n    }\n  }),\n  {}\n);\nfunction useMediaState(prop, ref) {\n  const $state = useStateContext(mediaState);\n  return useSignal((ref?.current?.$state || $state || initialMediaStore)[prop]);\n}\nfunction useMediaStore(ref) {\n  const $state = useStateContext(mediaState);\n  return useSignalRecord(ref?.current ? ref.current.$state : $state || initialMediaStore);\n}\n\nexport { ARIAKeyShortcuts, AUDIO_EXTENSIONS, AUDIO_TYPES, AirPlayButtonInstance, AudioGainSliderInstance, AudioProviderLoader, AudioTrackList, CaptionButtonInstance, CaptionsInstance, ControlsGroupInstance, ControlsInstance, DASHProviderLoader, DASH_VIDEO_EXTENSIONS, DASH_VIDEO_TYPES, FullscreenButtonInstance, FullscreenController, GestureInstance, GoogleCastButtonInstance, HLSProviderLoader, HLS_VIDEO_EXTENSIONS, HLS_VIDEO_TYPES, HTMLAirPlayAdapter, HTMLMediaProvider, IS_CHROME, IS_IOS, IS_SERVER, List, ListSymbol, LiveButtonInstance, LocalMediaStorage, MEDIA_KEY_SHORTCUTS, MediaAnnouncerInstance, MediaControls, MediaPlayerInstance, MediaProviderInstance, MediaRemoteControl, MenuButtonInstance, MenuInstance, MenuItemInstance, MenuItemsInstance, MenuPortalInstance, MuteButtonInstance, PIPButtonInstance, PlayButtonInstance, PosterInstance, Primitive, QualitySliderInstance, QualitySymbol, RAFLoop, RadioGroupController, RadioGroupInstance, RadioInstance, ScreenOrientationController, SeekButtonInstance, SliderChaptersInstance, SliderInstance, SliderPreviewInstance, SliderThumbnailInstance, SliderValueInstance, SliderVideoInstance, SpeedSliderInstance, TextRenderers, TextTrack, TextTrackList, TextTrackSymbol, ThumbnailInstance, ThumbnailsLoader, TimeInstance, TimeRange, TimeSliderInstance, ToggleButtonInstance, TooltipContentInstance, TooltipInstance, TooltipTriggerInstance, VIDEO_EXTENSIONS, VIDEO_TYPES, VideoProvider, VideoProviderLoader, VideoQualityList, VimeoProviderLoader, VolumeSliderInstance, YouTubeProviderLoader, appendParamsToURL, boundTime, canChangeVolume, canFullscreen, canGoogleCastSrc, canOrientScreen, canPlayHLSNatively, canRotateScreen, canUsePictureInPicture, canUseVideoPresentation, coerceToError, findActiveCue, formatSpokenTime, formatTime, getDownloadFile, getTimeRangesEnd, getTimeRangesStart, isAudioProvider, isAudioSrc, isCueActive, isDASHProvider, isDASHSrc, isGoogleCastProvider, isHLSProvider, isHLSSrc, isHLSSupported, isHTMLAudioElement, isHTMLIFrameElement, isHTMLMediaElement, isHTMLVideoElement, isMediaStream, isRemotionProvider, isRemotionSrc, isTrackCaptionKind, isVideoProvider, isVideoQualitySrc, isVideoSrc, isVimeoProvider, isYouTubeProvider, loadScript, mediaContext, mediaState, menuContext, normalizeTimeIntervals, parseJSONCaptionsFile, preconnect, sliderState, softResetMediaState, sortVideoQualities, updateSliderPreviewPlacement, updateTimeIntervals, useMediaContext, useMediaState, useMediaStore, useSliderState, useSliderStore, watchActiveTextTrack, watchCueTextChange };\n"],"mappings":"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","names":["sides","min","max","round","floor","createCoords","v","oppositeSideMap","oppositeAlignmentMap","clamp","start","value","end","evaluate","param","getSide","placement","getAlignment","getOppositeAxis","axis","getAxisLength","getSideAxis","getAlignmentAxis","getAlignmentSides","rects","rtl","alignment","alignmentAxis","length","mainAlignmentSide","getOppositePlacement","getExpandedPlacements","oppositePlacement","getOppositeAlignmentPlacement","getSideList","side","isStart","lr","rl","tb","bt","getOppositeAxisPlacements","flipAlignment","direction","list","expandPaddingObject","padding","getPaddingObject","rectToClientRect","rect","x","y","width","height","computeCoordsFromPlacement","_ref","placement","rtl","reference","floating","sideAxis","getSideAxis","alignmentAxis","getAlignmentAxis","alignLength","getAxisLength","side","getSide","isVertical","commonX","commonY","commonAlign","coords","getAlignment","computePosition","config","strategy","middleware","platform","validMiddleware","rects","x","y","statefulPlacement","middlewareData","resetCount","i","name","fn","nextX","nextY","data","reset","detectOverflow","state","options","_await$platform$isEle","elements","boundary","rootBoundary","elementContext","altBoundary","padding","evaluate","paddingObject","getPaddingObject","element","clippingClientRect","rectToClientRect","rect","offsetParent","offsetScale","elementClientRect","arrow","axis","length","arrowDimensions","isYAxis","minProp","maxProp","clientProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","largestPossiblePadding","minPadding","min","maxPadding","min$1","max","center","offset","clamp","shouldAddOffset","alignmentOffset","flip","options","state","_middlewareData$arrow","_middlewareData$flip","placement","middlewareData","rects","initialPlacement","platform","elements","checkMainAxis","checkCrossAxis","specifiedFallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment","detectOverflowOptions","evaluate","side","getSide","initialSideAxis","getSideAxis","isBasePlacement","rtl","fallbackPlacements","getOppositePlacement","getExpandedPlacements","hasFallbackAxisSideDirection","getOppositeAxisPlacements","placements","overflow","detectOverflow","overflows","overflowsData","sides","getAlignmentSides","_middlewareData$flip2","_overflowsData$filter","nextIndex","nextPlacement","resetPlacement","d","a","b","_overflowsData$filter2","currentSideAxis","acc","getSideOffsets","rect","isAnySideFullyClipped","hide","strategy","offsets","convertValueToCoords","state","options","placement","platform","elements","rtl","side","getSide","alignment","getAlignment","isVertical","getSideAxis","mainAxisMulti","crossAxisMulti","rawValue","evaluate","mainAxis","crossAxis","alignmentAxis","offset","_middlewareData$offse","_middlewareData$arrow","x","y","middlewareData","diffCoords","shift","checkMainAxis","checkCrossAxis","limiter","_ref","detectOverflowOptions","coords","overflow","detectOverflow","getOppositeAxis","mainAxisCoord","crossAxisCoord","minSide","maxSide","min","max","clamp","limitedCoords","limitShift","rects","rawOffset","computedOffset","len","limitMin","limitMax","_middlewareData$offse2","isOriginSide","size","_state$middlewareData","_state$middlewareData2","apply","isYAxis","width","height","heightSide","widthSide","maximumClippingHeight","maximumClippingWidth","overflowAvailableHeight","overflowAvailableWidth","noShift","availableHeight","availableWidth","xMin","xMax","yMin","yMax","nextDimensions","hasWindow","getNodeName","node","isNode","getWindow","_node$ownerDocument","getDocumentElement","_ref","value","isElement","isHTMLElement","isShadowRoot","isOverflowElement","element","overflow","overflowX","overflowY","display","getComputedStyle","isTableElement","isTopLayer","selector","isContainingBlock","elementOrCss","webkit","isWebKit","css","getContainingBlock","currentNode","getParentNode","isLastTraversableNode","getNodeScroll","result","getNearestOverflowAncestor","parentNode","getOverflowAncestors","list","traverseIframes","_node$ownerDocument2","scrollableAncestor","isBody","win","frameElement","getFrameElement","getCssDimensions","element","css","getComputedStyle","width","height","hasOffset","isHTMLElement","offsetWidth","offsetHeight","shouldFallback","round","unwrapElement","isElement","getScale","domElement","createCoords","rect","$","x","y","noOffsets","getVisualOffsets","win","getWindow","isWebKit","shouldAddVisualOffsets","isFixed","floatingOffsetParent","getBoundingClientRect","includeScale","isFixedStrategy","offsetParent","clientRect","scale","visualOffsets","offsetWin","currentWin","currentIFrame","getFrameElement","iframeScale","iframeRect","left","top","rectToClientRect","getWindowScrollBarX","leftScroll","getNodeScroll","getDocumentElement","getHTMLOffset","documentElement","scroll","ignoreScrollbarX","htmlRect","convertOffsetParentRelativeRectToViewportRelativeRect","_ref","elements","strategy","topLayer","isTopLayer","offsets","isOffsetParentAnElement","getNodeName","isOverflowElement","offsetRect","htmlOffset","getClientRects","getDocumentRect","html","body","max","getViewportRect","visualViewport","visualViewportBased","getInnerBoundingClientRect","getClientRectFromClippingAncestor","clippingAncestor","hasFixedPositionAncestor","stopNode","parentNode","getParentNode","isLastTraversableNode","getClippingElementAncestors","cache","cachedResult","result","getOverflowAncestors","el","currentContainingBlockComputedStyle","elementIsFixed","currentNode","computedStyle","currentNodeIsContaining","isContainingBlock","ancestor","getClippingRect","boundary","rootBoundary","clippingAncestors","firstClippingAncestor","clippingRect","accRect","min","getDimensions","getRectRelativeToOffsetParent","isStaticPositioned","getTrueOffsetParent","polyfill","rawOffsetParent","getOffsetParent","svgOffsetParent","isTableElement","getContainingBlock","getElementRects","data","getOffsetParentFn","getDimensionsFn","floatingDimensions","isRTL","platform","rectsAreEqual","a","b","observeMove","onMove","io","timeoutId","root","cleanup","_io","refresh","skip","threshold","elementRectForRootMargin","insetTop","floor","insetRight","insetBottom","insetLeft","options","isFirstUpdate","handleObserve","entries","ratio","autoUpdate","reference","floating","update","ancestorScroll","ancestorResize","elementResize","layoutShift","animationFrame","referenceEl","ancestors","cleanupIo","reobserveFrame","resizeObserver","firstEntry","_resizeObserver","frameId","prevRefRect","frameLoop","nextRefRect","_resizeObserver2","offset","shift","flip","size","hide","arrow","limitShift","computePosition","reference","floating","options","cache","mergedOptions","platform","platformWithCache","React","isVideoQualitySrc","src","isString","isNumber","IS_SERVER","UA","IS_IOS","IS_IPHONE","IS_CHROME","IS_SAFARI","canOrientScreen","canRotateScreen","isFunction","isUndefined","canPlayAudioType","audio","type","canPlayVideoType","video","canPlayHLSNatively","canUsePictureInPicture","canUseVideoPresentation","canChangeVolume","waitTimeout","getMediaSource","getSourceBuffer","isHLSSupported","MediaSource","isTypeSupported","SourceBuffer","isSourceBufferValid","isDASHSupported","TimeRange","#ranges","start","end","isArray","index","getTimeRangesStart","range","min","i","value","getTimeRangesEnd","max","normalizeTimeIntervals","intervals","a","b","normalized","current","next","updateTimeIntervals","interval","AUDIO_EXTENSIONS","AUDIO_TYPES","VIDEO_EXTENSIONS","VIDEO_TYPES","HLS_VIDEO_EXTENSIONS","DASH_VIDEO_EXTENSIONS","HLS_VIDEO_TYPES","DASH_VIDEO_TYPES","isAudioSrc","isVideoSrc","isHLSSrc","isDASHSrc","canGoogleCastSrc","isMediaStream","appendParamsToURL","baseUrl","params","url","key","preconnect","rel","exists","isNull","link","pendingRequests","loadScript","promise","deferredPromise","script","getRequestCredentials","crossOrigin","CROSS_ORIGIN","READY_STATE","UPDATE_ACTIVE_CUES","CAN_LOAD","ON_MODE_CHANGE","NATIVE","NATIVE_HLS","TextTrackSymbol","isCueActive","cue","time","watchActiveTextTrack","tracks","kind","onChange","currentTrack","scope","getScope","onModeChange","kinds","isString","track","track2","scoped","off","listenEvent","TextTrack","EventsTarget","track","#canLoad","#currentTime","#mode","#metadata","#regions","#cues","#activeCues","TextTrackSymbol","mode","init","prop","IS_SERVER","#parseContent","cue","trigger","length","DOMEvent","isCueActive","index","isActive","#activeCuesChanged","#load","currentTime","activeCues","i","changed","parseText","VTTCue","VTTRegion","isString","#parseJSON","#ready","cues","regions","parseResponse","crossOrigin","response","getRequestCredentials","errors","metadata","error","#error","native","loadEvent","json","parseJSONCaptionsFile","captionRE","isTrackCaptionKind","Cue","Region","content","region","isArray","content2","isNumber","mediaState","State","TimeRange","canOrientScreen","IS_IPHONE","fscreen","start","getTimeRangesStart","end","getTimeRangesEnd","window","RESET_ON_SRC_QUALITY_CHANGE","RESET_ON_SRC_CHANGE","softResetMediaState","$media","isSourceQualityChange","filter","tick","boundTime","time","store","clippedTime","isStart","isEnd","mediaContext","createContext","useMediaContext","useContext","MediaRemoteControl","#target","#player","#prevTrackIndex","#logger","logger","target","player","#dispatchRequest","lockType","duration","startTime","endTime","volume","rate","gain","tracks","prefersLoop","type","detail","request","Component","#noPlayerWarning","method","LocalMediaStorage","#data","muted","ended","shouldClear","lang","enabled","quality","src","mediaId","playerId","savedData","savedTime","data","functionThrottle","ADD","REMOVE","RESET","SELECT","READONLY","SET_READONLY","ON_RESET","ON_REMOVE","ON_USER_SELECT","ListSymbol","List","item","id","readonly","SELECTED","SelectList","selected","prev","AudioTrackList","round","num","decimalPlaces","getNumberOfDecimalPlaces","clampNumber","min","value","max","isEventInside","el","event","isDOMNode","rafJobs","processJobs","job","scheduleRafJob","setAttributeIfEmpty","name","setARIALabel","$label","isFunction","setAttribute","updateAriaDescription","effect","isElementVisible","style","checkVisibility","observeVisibility","callback","isElementParent","owner","node","test","onPress","handler","EventsController","isKeyboardClick","isTouchPinchEvent","isTouchEvent","requestScopedAnimationFrame","scope","getScope","scoped","autoPlacement","placement","offsetVarName","xOffset","yOffset","options","floatingPlacement","setStyle","isTop","negateX","x","negateY","y","autoUpdate","computePosition","flip","shift","middlewareData","hasFlipped","hasAnimation","isHTMLElement","NativeTextRenderer","#display","#video","#track","#tracks","_","video","#onChange","#attachTrack","current","display","#createTrackElement","isDefault","isSupported","#copyCues","isShowing","TextRenderers","#textTracks","#renderers","#media","#nativeDisplay","#nativeRenderer","#customRenderer","media","textTracks","#watchControls","onDispose","#detach","#onAddTrack","#onRemoveTrack","#update","nativeControls","renderer","untrack","#addNativeTrack","#removeNativeTrack","currentTrack","customRenderer","a","b","TextTrackList","#defaults","#storage","#preferredLang","t","#saveLang","isTrack","kind","#onTrackModeChangeBind","#selectTracks","#pendingRemoval","kinds","functionDebounce","showCaptions","preferredTrack","track2","defaultTrack","kind2","isCaptionsKind","#saveCaptionsTrack","#onTrackModeChange","storage","SET_AUTO","ENABLE_AUTO","QualitySymbol","VideoQualityList","#auto","auto","sortVideoQualities","qualities","desc","compareVideoQualityDesc","compareVideoQualityAsc","isHTMLAudioElement","element","IS_SERVER","isHTMLVideoElement","isHTMLMediaElement","MediaPlayerController","ViewController","MEDIA_KEY_SHORTCUTS","MODIFIER_KEYS","BUTTON_SELECTORS","IGNORE_SELECTORS","MediaKeyboardController","#media","media","effect","#onTargetChange","keyDisabled","keyTarget","target","$active","signal","EventsController","event","peek","listenEvent","activePlayer","el","#onKeyUp","#onKeyDown","#onPreventVideoKeys","focusedEl","method","value","#getMatchingMethod","isString","isArray","#timeSlider","#forwardTimeKeyboardEvent","#seekTotal","isKeyboardClick","isNumberPress","modifierKeyPressed","#seeking","volumeSlider","value2","playbackRate","isHTMLMediaElement","keyShortcuts","method2","keys","key","replaceSymbolKeys","combo","modifierKeys","modKey","modKeyProp","#calcSeekAmount","type","seekBy","forward","SYMBOL_KEY_MAP","_","num","ARIAKeyShortcuts","#shortcut","shortcut","$props","ariaKeys","useMediaContext","IS_SERVER","onDispose","shortcuts","keys2","MediaControls","#idleTimer","#pausedTracking","#hideOnMouseLeave","#isMouseOutside","#focusedItem","#canIdle","canIdle","hideControlsOnMouseLeave","hide","delay","trigger","#clearIdleTimer","#changeVisibility","#init","viewType","#watchMouse","#watchPaused","onPlay","#onPlay","onPause","#onPause","onEnd","#onEnd","started","pointer","paused","events","shouldHideOnMouseLeave","#onStopIdle","#onMouseEnter","#onMouseLeave","autoPlayError","onStopIdle","isTouch","eventTypes","eventType","loop","isTouchPinchEvent","isKeyboardEvent","visible","#onChange","CAN_FULLSCREEN","fscreen","FullscreenController","#listening","#active","#onError","#onDisconnect","active","isFullscreen","assertFullscreenAPI","error","isFullscreen","host","fscreen","assertFullscreenAPI","CAN_FULLSCREEN","ScreenOrientationController","_ScreenOrientationController","ViewController","#type","signal","#getScreenOrientation","#locked","#currentLock","canOrientScreen","listenEvent","#onOrientationChange","query","onDispose","#onDisconnect","event","peek","lockType","#assertScreenOrientationAPI","IS_SERVER","AudioProviderLoader","src","isAudioSrc","isString","canPlayAudioType","ctx","VideoProviderLoader","isVideoSrc","canPlayVideoType","provider$1","HLSProviderLoader","_HLSProviderLoader","isHLSSupported","isHLSSrc","context","audioContext","gainNodes","elAudioSources","getOrCreateAudioCtx","createGainNode","audioCtx","gainNode","createElementSource","el","destroyGainNode","node","idx","freeAudioCtxWhenAllResourcesFreed","destroyElementSource","AudioGain","#media","#onChange","#gainNode","#srcAudioNode","media","onChange","gain","currGain","#destroyGainNode","#destroySrcNode","PAGE_EVENTS","PageVisibility","#state","determinePageState","#visibility","#safariBeforeUnloadTimeout","events","EventsController","handlePageEvent","#handlePageEvent","eventType","IS_SAFARI","RAFLoop","#id","#callback","callback","isUndefined","#loop","isNumber","HTMLMediaEvents","#provider","#ctx","#waiting","#attachedLoadStart","#attachedCanPlay","#timeRAF","#onAnimationFrame","#pageVisibility","#events","provider","#attachInitialListeners","effect","#attachTimeUpdate","#onDispose","#devHandlers","#lastSeenTime","#seekedTo","newTime","#updateCurrentTime","#attachEventListener","#onLoadStart","#onAbort","#onEmptied","#onError","#onVolumeChange","#attachLoadStartListeners","#onLoadedData","#onLoadedMetadata","#onCanPlay","#onCanPlayThrough","#onDurationChange","#onPlay","#onProgress","#onStalled","#onSuspend","#onRateChange","#attachCanPlayListeners","#onPause","#onPlaying","#onSeeked","#onSeeking","#onEnded","#onWaiting","#handleDevEvent","handler","#onDevEvent","event2","time","trigger","IS_IOS","#getCanPlayDetail","isNil","isPaused","isPageHidden","#onTimeUpdate","detail","getNumberOfDecimalPlaces","DOMEvent","error","NativeAudioTracks","#nativeTracks","#onAddNativeTrack","#onRemoveNativeTrack","#onChangeNativeTrack","#onChangeTrack","nativeTrack","id","audioTrack","ListSymbol","track","enabledTrack","#getEnabledNativeTrack","current","prev","HTMLMediaProvider","createScope","source","rate","muted","volume","inline","setAttribute","type","preload","isMediaStream","#appendMediaFragment","defaultType","prevSource","clipStartTime","clipEndTime","startTime","endTime","HTMLRemotePlaybackAdapter","#supported","#setup","available","#watchSupported","onStateChange","#onStateChange","remoteEvents","state","HTMLAirPlayAdapter","NativeHLSTextTracks","#video","video","#onAddTrack","findTextTrackElement","TextTrack","TextTrackSymbol","lastIndex","onCueChange","i","VideoPictureInPicture","#onEnter","#onExit","canUsePictureInPicture","active","VideoPresentation","#mode","#onModeChange","canUseVideoPresentation","mode","prevMode","FullscreenPresentationAdapter","#presentation","presentation","PIPPresentationAdapter","VideoProvider","scoped","canPlayHLSNatively","getLangName","langCode","toDOMEventType","camelToKebabCase","DASHController","#instance","#callbacks","#stopLiveSync","ctor","dispatcher","#dispatchDASHEvent","#onFragmentLoadStart","#onFragmentLoadComplete","#onManifestLoaded","#onQualityChange","#onTextTracksAdded","#onTrackChange","QualitySymbol","#enableAutoQuality","#onUserQualityChange","#onUserAudioChange","#liveSync","#createDOMEvent","raf","#liveSyncPosition","position","#currentTrack","#cueTracker","#onTextFragmentLoaded","native","cues","startIndex","cue","data","nativeTextTracks","textTrackInfo","nativeTextTrack","t","mediaType","newMediaInfo","quality","mediaPresentationDuration","videoQualities","supportedVideoMimeType","e","type2","videoQuality","audioTracks","supportedAudioMimeType","bitrate","index","label","label2","language","localTrack","#onNetworkError","#onFatalError","#retryLoadingTimer","#clearRetryTimer","#switchAutoBitrate","qualities","auto","IS_CHROME","selectedTrack","#reset","coerceToError","assert","condition","message","DASHLibLoader","#lib","lib","#startLoading","callbacks","#onLoaded","#onLoadError","loadDASHScript","importDASH","loader","isDASHConstructor","isDASHNamespace","err","loadScript","isFunction","value","JS_DELIVR_CDN","DASHProvider","#ctor","#controller","isDASHSupported","#library","config","library","preconnect","instance","DASHProviderLoader","_DASHProviderLoader","isDASHSrc","VimeoProviderLoader","connections","url","abort","resolveVimeoVideoId","getVimeoVideoInfo","videoId","hash","info","YouTubeProviderLoader","findYouTubePoster","resolveYouTubeVideoId","padNumberWithZeroes","num","expectedLength","str","actualLength","padLength","parseTime","duration","hours","minutes","seconds","fraction","formatTime","padHrs","padMins","showHrs","showMs","paddedHours","paddedMinutes","isNull","paddedSeconds","paddedMs","formatSpokenTime","spokenParts","MEDIA_ATTRIBUTES","mediaAttributes","mediaPlayerProps","MEDIA_KEY_SHORTCUTS","MediaLoadController","MediaPlayerController","load","waitIdlePeriod","dispose","observer","entries","MediaPlayerDelegate","#handle","handle","init","untrack","logger","autoPlay","canPlay","started","seekable","buffered","remotePlaybackInfo","playsInline","savedState","tick","storage","playbackRate","savedPlaybackTime","savedPausedState","storageTime","shouldAutoPlay","audioGain","prefQuality","currentQuality","currentScore","score","#attemptAutoplay","player","autoPlaying","attemptEvent","Queue","#queue","key","item","RequestQueue","#serving","#pending","deferredPromise","#flush","#release","ariaBool","$ariaBool","prefersReducedMotion","MediaRequestManager","#stateMgr","#request","#fullscreen","#orientation","#$provider","#providerQueue","stateMgr","request","MediaControls","FullscreenController","#onFullscreenChange","names","handleRequest","#handleRequest","name","#attachLoadPlayListener","#watchProvider","#watchControlsDelayChange","#watchAudioGainSupport","#watchAirPlaySupport","#watchGoogleCastSupport","#watchFullscreenSupport","#watchPiPSupport","destroyEvent","pictureInPicture","fullscreen","canLoad","off","#handleLoadPlayStrategy","paused","isAutoPlaying","throwIfNotReadyForPlayback","throwIfAutoplayingWithReducedMotion","errorEvent","canSetAudioGain","live","liveEdge","canSeek","liveSyncPosition","seekableEnd","userBehindLiveEdge","end","#wasPIPActive","target","adapter","#getFullscreenAdapter","throwIfFullscreenNotSupported","result","#throwIfPIPNotSupported","supported","canAirPlay","canGoogleCast","canGoogleCastSrc","canFullscreen","canPictureInPicture","#googleCastLoader","$module","n","isConnecting","providedDuration","#onFullscreenError","#onPictureInPictureError","canSetPlaybackRate","ended","seekTime","boundedTime","boundTime","newVolume","#logError","title","autoplaying","MediaRequestContext","TRACKED_EVENT","MediaStateManager","#trackedEvents","#clipEnded","#playedIntervals","#playedInterval","#firingWaiting","#waitingTrigger","#watchCanSetVolume","#addTextTrackListeners","#addQualityListeners","#addAudioTrackListeners","#resumePlaybackOnConnect","#pausePlaybackOnDisconnect","textTracks","#stopWatchingQualityResize","#isPlayingOnDisconnect","#resetTracking","#stopWaiting","#satisfyRequest","requestEvent","#onTextTracksChange","#onTextTrackModeChange","#onQualitiesChange","#onAutoQualityChange","#onCanSetQualityChange","#onAudioTracksChange","#onAudioTrackChange","textTrack","isAuto","#stopQualityResizeEffect","#watchQualityResize","mediaWidth","mediaHeight","w","h","selectedQuality","minScore","canSetVolume","isGoogleCastConnected","canChangeVolume","prevProvider","newProvider","#resetMediaState","sourceChangeEvent","viewType","providedViewType","currentViewType","streamType","inferredStreamType","remotePlaybackState","remotePlaybackType","isConnected","prevSources","newSources","#onSourceQualitiesChange","added","removed","prevSrc","isVideoQualitySrc","s","isSourceQualityChange","softResetMediaState","canLoadEvent","abortEvent","loadStartEvent","loadedMetadata","#onCanPlayDetail","intrinsicDuration","getTimeRangesEnd","#onEndPrecisionChange","newBuffered","newSeekable","newBufferedEnd","hasBufferedLengthChanged","hasBufferedEndChanged","newSeekableEnd","hasSeekableLengthChanged","hasSeekableEndChanged","autoPlayError","pointer","#resetPlaybackIfNeeded","waitingEvent","seekableStart","currentTime","realCurrentTime","shouldReset","playEvent","playing","seekedEvent","seeking","waiting","played","#updatePlayed","#saveTime","updateTimeIntervals","TimeRange","functionThrottle","#fireWaiting","seekingEvent","origin","functionDebounce","loop","isLocked","isPiP","MediaStateSync","#init","effects","#watchMetadata","#watchAutoplay","#watchClipStartTime","#watchClipEndTime","#watchControls","#watchCrossOrigin","#watchDuration","#watchLive","#watchLiveEdge","#watchLiveTolerance","#watchLoop","#watchPlaysInline","#watchPoster","#watchProvidedTypes","#watchTitle","providedProps","skip","prop","poster","$state","#watchLogLevel","artist","artwork","controls","crossOrigin","actions","NavigatorMediaSession","#onMetadataChange","#onPlaybackStateChange","handleAction","#handleAction","action","details","$keyboard","FocusVisibleController","#focused","updateFocusAttr","#onPointerEnter","#onPointerLeave","#onFocus","#onBlur","updateHoverAttr","isFocused","isHovering","MediaPlayer","_MediaPlayer","Component","mediaState","#requestMgr","#props","VideoQualityList","AudioTrackList","MediaRemoteControl","TextTrackList","TextRenderers","provideContext","mediaContext","MediaKeyboardController","#setupMediaAttributes","#watchCanPlay","#watchMuted","#watchPaused","#watchVolume","#watchCurrentTime","#watchPlaybackRate","setAttributeIfEmpty","#watchStorage","#watchOrientation","#onFindPlayer","IS_IPHONE","pointerQuery","#onPointerChange","resize","animationFrameThrottle","#onResize","#skipTitleUpdate","providedTitle","isLive","uppercaseFirstChar","typeText","currentTitle","orientation","$attrs","isTrackCaptionKind","alias","prop2","attrName","width","height","setStyle","queryList","newTitle","#queuePausedUpdate","#queueMutedUpdate","#queueCurrentTimeUpdate","#queueVolumeUpdate","clampedVolume","clampNumber","#queuePlaybackRateUpdate","#queuePlaysInlineUpdate","storageValue","LocalMediaStorage","playerId","mediaId","computed","#computeMediaId","mediaplayer__proto","method","resolveStreamTypeFromDASHManifest","manifestSrc","requestInit","res","manifest","resolveStreamTypeFromHLSManifest","renditionURI","resolveHLSRenditionURI","resolveTargetDuration","matches","lines","line","sourceTypes","SourceSelection","#initialize","#loaders","#domSources","#loader","domSources","customLoaders","DASH_LOADER","HLS_LOADER","VIDEO_LOADER","AUDIO_LOADER","YOUTUBE_LOADER","VIMEO_LOADER","EMBED_LOADERS","remoteLoader","loaders","normalizeSrc","loader2","loader3","#notifySourceChange","#notifyLoaderChange","#onSourcesChange","#onSourceChange","#onSetup","#onLoadSource","#onLoadPoster","sources","currentSource","newSource","#findNewSource","credentials","getRequestCredentials","sources2","newSource2","newLoader","triggerEvent","sourceQuality","isSameSrc","preferNativeHLS","noop","providedPoster","canLoadPoster","isArray","src2","inferType","a","b","Tracks","#domTracks","#prevTracks","domTracks","#onTracksChange","newTracks","oldTrack","newTrack","MediaProvider","State","#sources","useMediaContext","mutations","#onMutation","#loadRafId","#runLoader","$provider","#destroyProvider","tracks","children","mediaprovider__proto","MediaAnnouncer","#initializing","busy","#watchCaptions","#watchFullscreen","#watchPiP","#watchSeeking","#watchLabel","#setLabel","#translate","#startedSeekingAt","#seekTimer","isSeeking","isForward","spokenTime","word","translations","$label","Controls","#watchProps","#isShowing","#hideControls","side","nativeControls","isHidden","hideDelay","hideOnMouseLeave","controlsVisible","ControlsGroup","Popper","#delegate","delegate","#watchTrigger","#stopAnimationEndListener","show","hide","#showTimerId","#hideRafId","#cancelShowing","content","onHide","hasAnimation","stop","tooltipContext","createContext","Tooltip","#trigger","#content","#showing","showDelay","#onShowingChange","#attachTrigger","#detachTrigger","#attachContent","#detachContent","tooltipName","isShowing","TooltipTrigger","requestScopedAnimationFrame","#attach","tooltip","useContext","button","#getButton","candidate","TooltipContent","placement","#watchPlacement","showing","mainOffset","alignOffset","autoPlacement","#getTrigger","ToggleButtonController","ARIAKeyShortcuts","disabled","#isARIAPressed","onPress","#onMaybePress","#onInteraction","#onPressed","isWriteSignal","p","ToggleButton","#pressed","togglebutton__proto","AirPlayButton","#isPressed","#onPress","isAirPlayConnected","#getState","setARIALabel","#getDefaultLabel","GoogleCastButton","PlayButton","remote","CaptionButton","#isHidden","hasCaptions","FullscreenButton","isSupported","#isSupported","MuteButton","$volume","PIPButton","SeekButton","seekTo","LiveButton","sliderState","calcRate","min","max","range","offset","IntersectionObserverController","#observer","sliderContext","sliderObserverContext","getClampedValue","step","round","getValueFromRate","boundRate","fill","stepRatio","steps","SliderKeyDirection","SliderEventsController","hasProvidedContext","#attachEventListeners","#attachPointerListeners","#watchSwipeGesture","#onTouchStart","#onTouchMove","#touch","#touchStartValue","isTouchPinchEvent","touch","xDiff","yDiff","isDragging","#onStartDragging","hidden","#onKeyUp","#onKeyDown","#onPointerMove","#onPointerDown","#onDocumentPointerUp","#onDocumentPointerMove","#onDocumentTouchMove","#updatePointerValue","#updateValue","newValue","dragging","clampedValue","pointerValue","#getPointerValue","thumbPositionRate","rect","trackBottom","trackHeight","diff","trackLeft","trackWidth","#onStopDragging","#lastDownKey","#repeatedKeys","jumpValue","#calcJumpValue","#calcNewKeyValue","shiftKey","shiftKeyMultiplier","keyStep","modifiedStep","direction","currentValue","sliderValueFormatContext","SliderController","#isVisible","#isIntersecting","focus","#watchValue","#watchStep","#watchDisabled","#setupAttrs","#onIntersectionChange","#watchCSSVars","observeVisibility","#watchHidden","pointing","#getARIADisabled","fillPercent","pointerPercent","#updateSliderVars","Slider","#getARIAValueNow","#getARIAValueText","#watchMinMax","cache","pending","ThumbnailsLoader","_ThumbnailsLoader","#src","#crossOrigin","#onLoadCues","firstKey","currentKey","promise","resolve","reject","response","json","#processVTTCues","image","isObject","#processStoryboard","parseResponse","images","#processImages","baseURL","#resolveBaseUrl","img","#resolveURL","board","tileWidth","tileHeight","tile","#resolveData","hashProps","values","hashValues","Thumbnail","#styleResets","#isLoading","#hasError","#watchImg","#onFindActiveThumbnail","#resize","crossOriginProp","crossOriginState","mediaCrossOrigin","loading","#resetStyles","activeThumbnail","activeIndex","activeImage","rootEl","imgEl","thumbnail","maxWidth","maxHeight","minWidth","minHeight","elWidth","elHeight","minRatio","maxRatio","scale","#style","reset","SliderThumbnail","#slider","useState","SliderVideo","#watchVideo","#watchSrc","#onSrcChange","#onUpdateTime","pointerRate","slidervideo__proto","SliderValue","#format","#text","$format","decimalPlaces","padHours","padMinutes","showHours","sliderValue","format","percent","slidervalue__proto","SliderPreview","preview","#updatePlacement","noClamp","updateSliderPreviewPlacement","clamp","computedStyle","styles","widthHalf","leftClamp","rightClamp","heightHalf","topClamp","bottomClamp","VolumeSlider","#isDisabled","#getARIAValueMax","#onDragValueChange","#onValueChange","#throttleVolumeChange","mediaVolume","AudioGainSlider","_","#watchAudioGain","#onAudioGainChange","SpeedSlider","#roundValue","#throttledSpeedChange","#onPlaybackRateChange","QualitySlider","#sortedQualities","sortVideoQualities","#watchMax","#watchQuality","canSetQuality","$supported","bitrateText","$qualities","#throttledQualityChange","TimeSlider","#dispatchSeeking","#chapter","noSwipeGesture","#getValue","#getStep","#getKeyStep","#onDragStart","#onDragEnd","#formatValue","#formatTime","#hasChapters","#calcBufferedPercent","#watchSeekingThrottle","#watchPreviewing","watchActiveTextTrack","bufferedEnd","#seeking","#seek","#playingBeforeDragStart","pauseWhileDragging","#percentToTime","#timeToPercent","options","SliderChapters","#sliderState","#updateScope","#titleRef","#refs","#$track","#$cues","#activeIndex","#activePointerIndex","#bufferedIndex","#setTrack","#watchSource","refs","#watch","#watchUpdates","#watchContainerWidths","#watchFillPercent","#watchPointerPercent","#watchBufferedPercent","remainingWidth","isLiveEdge","prevActiveIndex","currentChapter","currentActiveIndex","#findActiveChapterIndex","#updateFillPercents","#calcPercent","#getEndTime","#updateFillPercent","start","ref","chapterPercent","#updateBufferedPercent","#bufferedPercent","bufferedPercent","#calcMediaBufferedPercent","cueStartTime","cueEndTime","startRatio","startPercent","endPercent","#fillGaps","chapters","firstCue","currentCue","nextCue","timeDiff","lastCue","endTime2","onCuesChange","#onCuesChange","#watchMediaDuration","#findChapterTitleRef","#onChapterTitleChange","#findParentSlider","slider","sliderchapters__proto","menuContext","scrollIntoView","scrolls","r","el2","top","left","scrollIntoCenter","FOCUSABLE_ELEMENTS_SELECTOR","selector","VALID_KEYS","MenuFocusController","#index","#el","#elements","#getFocusableElements","#findActiveIndex","element","scroll","#focusAt","#validateKeyEvent","wasEnterKeyPressed","role","#nextIndex","delta","focusableElements","elements","is","isHTMLElement","isElementParent","__defProp","__getOwnPropDesc","__decorateClass","decorators","kind","decorator","idCount","Menu","#menuId","#menuButtonId","#expanded","#disabled","#parentMenu","#submenus","#menuObserver","#popper","#focus","#isSliderActive","#isTriggerDisabled","#transitionCallbacks","closeTarget","#getCloseTarget","#onExpandedChange","currentIdCount","#observeSliders","#disable","#attachMenuButton","#attachMenuItems","#attachObserver","#disableMenuButton","#addSubmenu","#watchExpanded","sliderActiveTimer","parentSliderObserver","expanded","#isExpanded","#updateMenuItemsHidden","#onPointerUp","#onWindowPointerUp","isMenuItem","isARIADisabled","watchAttrs","items","onTransition","#onResizeTransition","#wasKeyboardExpand","isExpanded","isKeyboardEvent","#toggleMediaControls","#updateFocus","#isTransitionActive","#isSubmenuOpen","isEventInside","menu","#onSubmenuOpenBind","#onSubmenuCloseBind","#removeSubmenuBind","#removeSubmenu","#onSubmenuOpen","child","#onSubmenuClose","isElementVisible","style","MenuButton","#menu","#hintEl","#watchHintEl","text","hintEl","menubutton__proto","MenuItem","menuPortalContext","createContext","MenuItems","Component","#menu","FocusVisibleController","placement","el","useContext","menuContext","hasProvidedContext","portal","provideContext","onDispose","effect","#watchPlacement","expanded","mainOffset","alignOffset","autoPlacement","#getButton","#hide","radioControllerContext","RadioGroupController","ViewController","#group","#value","signal","#controller","radio","value","#onChange","#addRadio","#removeRadio","setAttributeIfEmpty","#onChangeBind","newValue","trigger","currentValue","peek","currentRadio","#findRadio","newRadio","RadioGroup","#onValueChange","IS_SERVER","#watchValue","event","radiogroup__proto","prop","Radio","#checked","#check","$ariaBool","isMenuItem","#addToGroup","onPress","#onPress","#onDisconnect","scoped","#onSelect","radio__proto","Gesture","#media","#provider","useMediaContext","action","#attachListener","eventType","disabled","listenEvent","#acceptEvent","#presses","#pressTimerId","isPointerEvent","isTouchEvent","isTouchPinchEvent","#inBounds","#handleEvent","#isTopLayer","#performAction","isMouseEvent","touch","clientX","clientY","rect","inBounds","gestures","a","b","willTriggerEvent","DOMEvent","method","kebabToCamelCase","CaptionsTextRenderer","#track","#renderer","#events","renderer","track","EventsController","#changeTrack","Captions","_Captions","#isHidden","lib","#watchViewType","textTrack","remotePlaybackState","iOSControls","isTrackCaptionKind","viewType","#setupAudioView","#setupVideoView","#onTrackChange","#listenToFontStyleChanges","#onCueChange","#onUpdateTimedNodes","#hideExampleTimer","#removeExample","realCurrentTime","renderVTTCueString","time","activeCues","cue","displayEl","#createCueDisplayElement","cueEl","#createCueElement","updateTimedVTTCueNodes","CaptionsRenderer","textRenderer","#watchTextDirection","#watchMediaTime","player","onChange","#onFontStyleChange","#hideExample","#showExample","display","setAttribute","Poster","State","#watchSrc","#watchAlt","#watchCrossOrigin","#watchHidden","#watchImg","started","#isLoading","#hasError","#onPreconnect","#onLoadStart","error","isNull","canLoadPoster","poster","preconnect","src","nativeControls","loading","hidden","img","#onLoad","#onError","#prevSrc","defaultPoster","providedPoster","inferredPoster","alt","crossOriginProp","crossOriginState","mediaCrossOrigin","crossOrigin","Time","#invert","#isVisible","#isIntersecting","#watchTime","type","#shouldInvert","IntersectionObserverController","#onIntersectionChange","#watchRole","observeVisibility","#watchToggle","entries","#onToggle","timeText","duration","padHours","padMinutes","showHours","seconds","#getSeconds","$duration","shouldInvert","formattedTime","formatTime","toggle","bufferedEnd","currentTime","v","MediaPlayerInstance","MediaPlayer","MediaProviderInstance","MediaProvider","MediaAnnouncerInstance","MediaAnnouncer","ControlsInstance","Controls","ControlsGroupInstance","ControlsGroup","ToggleButtonInstance","ToggleButton","CaptionButtonInstance","CaptionButton","FullscreenButtonInstance","FullscreenButton","LiveButtonInstance","LiveButton","MuteButtonInstance","MuteButton","PIPButtonInstance","PIPButton","PlayButtonInstance","PlayButton","AirPlayButtonInstance","AirPlayButton","GoogleCastButtonInstance","GoogleCastButton","SeekButtonInstance","SeekButton","TooltipInstance","Tooltip","TooltipTriggerInstance","TooltipTrigger","TooltipContentInstance","TooltipContent","SliderInstance","Slider","TimeSliderInstance","TimeSlider","VolumeSliderInstance","VolumeSlider","AudioGainSliderInstance","AudioGainSlider","SpeedSliderInstance","SpeedSlider","QualitySliderInstance","QualitySlider","SliderThumbnailInstance","SliderThumbnail","SliderValueInstance","SliderValue","SliderVideoInstance","SliderVideo","SliderPreviewInstance","SliderPreview","SliderChaptersInstance","SliderChapters","MenuInstance","Menu","MenuButtonInstance","MenuButton","MenuItemsInstance","MenuItemInstance","MenuItem","RadioGroupInstance","RadioGroup","RadioInstance","Radio","CaptionsInstance","Captions","GestureInstance","Gesture","PosterInstance","Poster","ThumbnailInstance","Thumbnail","TimeInstance","Time","Slot","props","forwardedRef","children","slotProps","childrenArray","slottable","isSlottable","newElement","newChildren","child","SlotClone","mergeProps","composeRefs","Slottable","childProps","overrideProps","propName","slotPropValue","childPropValue","args","NODES","Primitive","primitives","node","Node","asChild","primitiveProps","isRemotionProvider","provider","sliderStateRecord","SliderInstance","initialSliderStore","store","prop","useSliderState","ref","$state","useStateContext","sliderState","useSignal","mediaStateRecord","MediaPlayerInstance","initialMediaStore","store","prop","useMediaState","ref","$state","useStateContext","mediaState","useSignal"]}